/*
 jQuery v3.1.0 | (c) jQuery Foundation | jquery.org/license  FullCalendar v3.10.0
 Docs & License: https://fullcalendar.io/
 (c) 2018 Adam Shaw
 svg.js v2.6.4 MIT*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(f){var b=0;return function(){return b<f.length?{done:!1,value:f[b++]}:{done:!0}}};$jscomp.arrayIterator=function(f){return{next:$jscomp.arrayIteratorImpl(f)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,b,e){f!=Array.prototype&&f!=Object.prototype&&(f[b]=e.value)};
$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var f=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+f++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.asyncIterator;f||(f=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};
$jscomp.makeIterator=function(f){var b="undefined"!=typeof Symbol&&Symbol.iterator&&f[Symbol.iterator];return b?b.call(f):$jscomp.arrayIterator(f)};$jscomp.polyfill=function(f,b,e,l){if(b){e=$jscomp.global;f=f.split(".");for(l=0;l<f.length-1;l++){var c=f[l];c in e||(e[c]={});e=e[c]}f=f[f.length-1];l=e[f];b=b(l);b!=l&&null!=b&&$jscomp.defineProperty(e,f,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(f){function b(){this.batch_=null}function e(b){return b instanceof c?b:new c(function(c,k){c(b)})}if(f&&!$jscomp.FORCE_POLYFILL_PROMISE)return f;b.prototype.asyncExecute=function(b){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(b);return this};b.prototype.asyncExecuteBatch_=function(){var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})};var l=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(b){l(b,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=this.batch_;this.batch_=[];for(var c=0;c<b.length;++c){var k=b[c];b[c]=null;try{k()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};b.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var c=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{b(c.resolve,c.reject)}catch(k){c.reject(k)}};c.prototype.createResolveAndReject_=
function(){function b(b){return function(m){k||(k=!0,b.call(c,m))}}var c=this,k=!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};c.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof c)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var e=null!=b;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};c.prototype.resolveToNonPromiseObj_=function(b){var c=
void 0;try{c=b.then}catch(k){this.reject_(k);return}"function"==typeof c?this.settleSameAsThenable_(c,b):this.fulfill_(b)};c.prototype.reject_=function(b){this.settle_(2,b)};c.prototype.fulfill_=function(b){this.settle_(1,b)};c.prototype.settle_=function(b,c){if(0!=this.state_)throw Error("Cannot settle("+b+", "+c+"): Promise already settled in state"+this.state_);this.state_=b;this.result_=c;this.executeOnSettledCallbacks_()};c.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=
0;b<this.onSettledCallbacks_.length;++b)t.asyncExecute(this.onSettledCallbacks_[b]);this.onSettledCallbacks_=null}};var t=new b;c.prototype.settleSameAsPromise_=function(b){var c=this.createResolveAndReject_();b.callWhenSettled_(c.resolve,c.reject)};c.prototype.settleSameAsThenable_=function(b,c){var k=this.createResolveAndReject_();try{b.call(c,k.resolve,k.reject)}catch(m){k.reject(m)}};c.prototype.then=function(b,e){function k(b,c){return"function"==typeof b?function(c){try{m(b(c))}catch(h){l(h)}}:
c}var m,l,n=new c(function(b,c){m=b;l=c});this.callWhenSettled_(k(b,m),k(e,l));return n};c.prototype.catch=function(b){return this.then(void 0,b)};c.prototype.callWhenSettled_=function(b,c){function k(){switch(m.state_){case 1:b(m.result_);break;case 2:c(m.result_);break;default:throw Error("Unexpected state: "+m.state_);}}var m=this;null==this.onSettledCallbacks_?t.asyncExecute(k):this.onSettledCallbacks_.push(k)};c.resolve=e;c.reject=function(b){return new c(function(c,k){k(b)})};c.race=function(b){return new c(function(c,
k){for(var m=$jscomp.makeIterator(b),l=m.next();!l.done;l=m.next())e(l.value).callWhenSettled_(c,k)})};c.all=function(b){var l=$jscomp.makeIterator(b),k=l.next();return k.done?e([]):new c(function(b,c){function m(c){return function(h){t[c]=h;v--;0==v&&b(t)}}var t=[],v=0;do t.push(void 0),v++,e(k.value).callWhenSettled_(m(t.length-1),c),k=l.next();while(!k.done)})};return c},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var f={a:!0},b={};try{return b.__proto__=f,b.a}catch(e){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(f,b){f.__proto__=b;if(f.__proto__!==b)throw new TypeError(f+" is not extensible");return f}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(f){if(!(f instanceof Object))throw new TypeError("Iterator result "+f+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(f){this.yieldResult=f};$jscomp.generator.Context.prototype.throw_=function(f){this.abruptCompletion_={exception:f,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(f){this.abruptCompletion_={return:f};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(f){this.abruptCompletion_={jumpTo:f};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(f,b){this.nextAddress=b;return{value:f}};$jscomp.generator.Context.prototype.yieldAll=function(f,b){f=$jscomp.makeIterator(f);var e=f.next();$jscomp.generator.ensureIteratorResultIsObject_(e);if(e.done)this.yieldResult=e.value,this.nextAddress=b;else return this.yieldAllIterator_=f,this.yield(e.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(f){this.nextAddress=f};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(f,b){this.catchAddress_=f;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(f){this.catchAddress_=0;this.finallyAddress_=f||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(f,b){this.nextAddress=f;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(f){this.catchAddress_=f||0;f=this.abruptCompletion_.exception;this.abruptCompletion_=null;return f};$jscomp.generator.Context.prototype.enterFinallyBlock=function(f,b,e){e?this.finallyContexts_[e]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=f||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(f,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=f};$jscomp.generator.Context.prototype.forIn=function(f){return new $jscomp.generator.Context.PropertyIterator(f)};
$jscomp.generator.Context.PropertyIterator=function(f){this.object_=f;this.properties_=[];for(var b in f)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var f=this.properties_.pop();if(f in this.object_)return f}return null};$jscomp.generator.Engine_=function(f){this.context_=new $jscomp.generator.Context;this.program_=f};
$jscomp.generator.Engine_.prototype.next_=function(f){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,f,this.context_.next_);this.context_.next_(f);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(f){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(b){return{value:b,done:!0}},f,this.context_.return);this.context_.return(f);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(f){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],f,this.context_.next_);this.context_.throw_(f);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(f,b,e){try{var l=f.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(l);if(!l.done)return this.context_.stop_(),l;var c=l.value}catch(t){return this.context_.yieldAllIterator_=null,this.context_.throw_(t),this.nextStep_()}this.context_.yieldAllIterator_=null;e.call(this.context_,c);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var f=this.program_(this.context_);if(f)return this.context_.stop_(),{value:f.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){f=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(f.isException)throw f.exception;return{value:f.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(f){this.next=function(b){return f.next_(b)};this.throw=function(b){return f.throw_(b)};this.return=function(b){return f.return_(b)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(f,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(b,f.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(f){function b(b){return f.next(b)}function e(b){return f.throw(b)}return new Promise(function(l,c){function t(v){v.done?l(v.value):Promise.resolve(v.value).then(b,e).then(t,c)}t(f.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(f){return $jscomp.asyncExecutePromiseGenerator(f())};$jscomp.asyncExecutePromiseGeneratorProgram=function(f){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(f)))};
$jscomp.owns=function(f,b){return Object.prototype.hasOwnProperty.call(f,b)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(f,b){for(var e=1;e<arguments.length;e++){var l=arguments[e];if(l)for(var c in l)$jscomp.owns(l,c)&&(f[c]=l[c])}return f};$jscomp.polyfill("Object.assign",function(f){return f||$jscomp.assign},"es6","es3");$jscomp.polyfill("Object.is",function(f){return f?f:function(b,e){return b===e?0!==b||1/b===1/e:b!==b&&e!==e}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(f){return f?f:function(b,e){var l=this;l instanceof String&&(l=String(l));var c=l.length;e=e||0;for(0>e&&(e=Math.max(e+c,0));e<c;e++){var t=l[e];if(t===b||Object.is(t,b))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(f,b,e){if(null==f)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return f+""};$jscomp.polyfill("String.prototype.includes",function(f){return f?f:function(b,e){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,e||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(f){return f?f:function(b,e){var l=$jscomp.checkStringArgs(this,b,"startsWith");b+="";var c=l.length,t=b.length;e=Math.max(0,Math.min(e|0,l.length));for(var v=0;v<t&&e<c;)if(l[e++]!=b[v++])return!1;return v>=t}},"es6","es3");
$jscomp.polyfill("Array.from",function(f){return f?f:function(b,e,l){e=null!=e?e:function(b){return b};var c=[],t="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof t){b=t.call(b);for(var v=0;!(t=b.next()).done;)c.push(e.call(l,t.value,v++))}else for(t=b.length,v=0;v<t;v++)c.push(e.call(l,b[v],v));return c}},"es6","es3");
$jscomp.findInternal=function(f,b,e){f instanceof String&&(f=String(f));for(var l=f.length,c=0;c<l;c++){var t=f[c];if(b.call(e,t,c,f))return{i:c,v:t}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(b,e){return $jscomp.findInternal(this,b,e).v}},"es6","es3");$jscomp.polyfill("Object.setPrototypeOf",function(f){return f||$jscomp.setPrototypeOf},"es6","es5");
$jscomp.iteratorFromArray=function(f,b){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var e=0,l={next:function(){if(e<f.length){var c=e++;return{value:b(c,f[c]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");
$jscomp.polyfill("Object.entries",function(f){return f?f:function(b){var e=[],l;for(l in b)$jscomp.owns(b,l)&&e.push([l,b[l]]);return e}},"es8","es3");$jscomp.polyfill("Array.prototype.fill",function(f){return f?f:function(b,e,l){var c=this.length||0;0>e&&(e=Math.max(0,c+e));if(null==l||l>c)l=c;l=Number(l);0>l&&(l=Math.max(0,c+l));for(e=Number(e||0);e<l;e++)this[e]=b;return this}},"es6","es3");$jscomp.polyfill("Math.log10",function(f){return f?f:function(b){return Math.log(b)/Math.LN10}},"es6","es3");
function capacitor(f,b,e,l,c){l=void 0===l?{}:l;c=void 0===c?100:c;var t={fireFirst:!1,afterLast:!0};"boolean"==typeof l?t.fireFirst=l:Object.assign(t,l);var v=this,q,k,m=0,r=0,n=void 0,y=!1;this.forceSend=function(){e(q,k);r=0;clearTimeout(n);n=void 0};this.checkAndUpdate=function(){m-=c;0>=m?y||v.forceSend():n=setTimeout(v.checkAndUpdate,c)};this.submit=function(e,l){t.presubmit&&t.presubmit();q!=e&&q?v.forceSend():(0==r&&t.fireFirst?(q=e,v.forceSend(),y=!0):y=!1,r++,r>b&&(v.forceSend(),r=1),t.afterLast&&
n&&(clearTimeout(n),n=void 0),n||(m=f,n=setTimeout(v.checkAndUpdate,c)));q=e;k=l}}function htmlwrap(f,b){b=document.createElement(b||"div");b.innerHTML=f;return 1==b.children.length?(f=b.children[0],f.remove(),f):b}function waitForFn(f){var b=this;this[f]||(this[f]=function(e){var l=arguments;setTimeout(function(){return b[f].apply(b,l)},1E3)})}
function _polymorph_core(){var f=this;this.guid=function(b,l){b=void 0===b?6:b;do{var c="";for(i=0;i<b;i++)c+="1234567890qwertyuiopasdfghjklzxcvbnm"[Math.floor(36*Math.random())]}while(l&&(l[i]||void 0!=l.length&&l.includes(i)));return c};this.addEventAPI=function(b,l){l=void 0===l?console.error:l;b.events={};b.fire=function(c,e){var t=c.split(","),f=c.split(",");t.push("*");t.forEach(function(k){if(b.events[k]){var m=!0;b.events[k].cetches&&b.events[k].cetches.forEach(function(b){0!=m&&(m=b(e,!0,
c))});b.events[k].events&&b.events[k].events.forEach(function(c){if(0!=m)try{result=c(e,f),b.events[k].cetches&&b.events[k].cetches.forEach(function(b){0!=m&&(m=b(result,void 0,k))})}catch(n){l(n)}});b.events[k].cetches&&b.events[k].cetches.forEach(function(b){return b(e,!1,c)})}})};b.on=function(c,e){c.split(",").forEach(function(c){b.events[c]||(b.events[c]={});b.events[c].events||(b.events[c].events=[]);b.events[c].events.push(e)})};b.cetch=function(c,e){b.events[c]||(b.events[c]={});b.events[c].cetches||
(b.events[c].cetches=[]);b.events[c].cetches.push(e)}};this.addEventAPI(this);this._option=function(){function b(b){return"function"==typeof b?b():b}return function(e){switch(e.type){case "bool":var c=document.createElement("input");c.type="checkbox";c.addEventListener("input",function(l){var t=b(e.object);"object"!=typeof t&&(t={});e.beforeInput&&e.beforeInput(l);t[e.property]=c.checked;e.afterInput&&e.afterInput(l)});break;case "text":case "number":c=document.createElement("input");c.style.display=
"block";c.addEventListener("input",function(l){var t=b(e.object);"object"!=typeof t&&(t={});e.beforeInput&&e.beforeInput(l);t[e.property]=c.value;e.afterInput&&e.afterInput(l)});break;case "select":c=document.createElement("select");c.addEventListener("click",function(l){var t=b(e.object);"object"!=typeof t&&(t={});e.beforeInput&&e.beforeInput(l);t[e.property]=c.value;e.afterInput&&e.afterInput(l)});break;case "array":c=document.createElement("div");c.style.display="flex";c.style.flexDirection="column";
c.addEventListener("input",function(c){var l=b(e.object);l[e.property]||(l[e.property]=[]);for(var k=c.target.parentElement,m=0;k.previousElementSibling;)k=k.previousElementSibling,m++;l[e.property][m]=c.target.value});c.addEventListener("click",function(l){var t=b(e.object);if("BUTTON"==l.target.tagName)if(t[e.property]||(t[e.property]=[]),"+"==l.target.innerText)l=document.createElement("span"),l.innerHTML="<input><button>x</button>",l.style.width="100%",c.insertBefore(l,c.children[c.children.length-
1]),t[e.property].push("");else{for(var k=0,m=l.target.parentElement;m.previousElementSibling;)m=m.previousElementSibling,k++;t[e.property].splice(k,1);l.target.parentElement.remove()}});break;case "button":c=document.createElement("button"),c.innerText=e.label,c.addEventListener("click",function(b){e.fn()})}c.style.float="right";if(e.label&&"button"!=e.type){var l=document.createElement("label");l.innerHTML=e.label;l.appendChild(c);l.style.display="block";l.style.margin="3px";e.div.appendChild(l)}else e.div.appendChild(c);
this.load=function(){var l=b(e.object);if(l)switch(e.type){case "bool":c.checked=l[e.property]?l[e.property]:!1;break;case "text":case "number":c.value=l[e.property]?l[e.property]||"":"";break;case "select":c.innerHTML="";var t=b(e.source);if(t.length)t.forEach(function(b){var k=document.createElement("option");k.innerText=b;k.value=b;c.appendChild(k)});else for(var k in t){var m=document.createElement("option");m.innerText=t[k];m.value=k;c.appendChild(m)}l[e.property]&&(c.value=l[e.property]);break;
case "array":for(;c.children.length;)c.children[0].remove();if(l[e.property])for(t=0;t<l[e.property].length;t++)k=document.createElement("span"),k.innerHTML='<input value="'+l[e.property][t]+'"><button>x</button>',k.style.width="100%",c.appendChild(k);l=document.createElement("button");l.innerHTML="+";l.style.width="100%";c.appendChild(l)}else console.log("Warning: attempt to reference an undefined object")};this.appendedElement=c}}();this.saveUserData=function(){localStorage.setItem("pm_userData",
JSON.stringify(f.userData))};this.userData={documents:{},uniqueID:this.guid(7),itemsCreatedCount:0};Object.assign(this.userData,JSON.parse(localStorage.getItem("pm_userData")));this.start=function(){f.fire("UIsetup");f.fire("UIstart");f.resetDocument();f.handleURL()};Object.defineProperty(this,"currentDoc",{get:function(){return f.items._meta}});this.updateSettings=function(b){f.documentTitleElement.innerText=f.items._meta.displayName;document.querySelector("title").innerHTML=f.items._meta.displayName+
" - Polymorph";b||f.filescreen.saveRecentDocument(f.currentDocID,void 0,f.items._meta.displayName);f.fire("updateSettings")};var b=new capacitor(1E3,10,function(){polymorph_core.fire("updateDoc")});this.on("UIstart",function(){f.documentTitleElement||(f.documentTitleElement=document.createElement("a"),f.documentTitleElement.contentEditable=!0,f.topbar.add("titleElement",f.documentTitleElement));f.documentTitleElement.addEventListener("keyup",function(){f.items._meta.displayName=f.documentTitleElement.innerText;
b.submit();document.querySelector("title").innerHTML=f.items._meta.displayName+" - Polymorph"})});this.operators={};this.registerOperator=function(b,l,c){f.operators[b]=c?{constructor:c,options:l}:{constructor:l,options:{}};f.fire("operatorAdded",{type:b});for(l=0;l<f.operatorLoadCallbacks[b];l++)f.operatorLoadCallbacks[b][l].op.fromSaveData(f.operatorLoadCallbacks[b][l].data)};this.items={};this.oldCache={};this.on("updateItem",function(b){b.loadProcess||b.unedit||JSON.stringify(f.items[b.id])==
f.oldCache[b.id]||(f.items[b.id]._lu_=Date.now());f.oldCache[b.id]=JSON.stringify(f.items[b.id])});this.insertItem=function(b){for(var e=f.userData.uniqueID+"_",c,t=Date.now(),v="";c=t%64,v="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/".charAt(c)+v,t=Math.floor(t/64),0!=t;);e=e+v+"_"+f.userData.itemsCreatedCount;f.userData.itemsCreatedCount++;f.items[e]=b;return e};this.operatorLoadCallbacks={};this.rectLoadCallbacks={};this.shared={}}var polymorph_core=new _polymorph_core;
function matchContrast(f){var b={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",
darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",
goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",
slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(cols=/#(..)(..)(..)/i.exec(f))cols=[cols[0],cols[1],cols[2],cols[3]],cols[1]=parseInt(cols[1],16),cols[2]=parseInt(cols[2],16),cols[3]=parseInt(cols[3],16);else if(cols=/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/i.exec(f),
!cols)return f=f.toLowerCase(),b[f]?matchContrast(b[f]):"black";if(!cols)throw"Invalid color: "+f;return 125<Math.round((299*parseInt(cols[1])+587*parseInt(cols[2])+114*parseInt(cols[3]))/1E3)?"black":"white"}polymorph_core.userData.tutorialData||(polymorph_core.userData.tutorialData={main:{}});
var _tutorial=function(){function f(b){return"function"==typeof b?b():b}function b(b){return"function"==typeof b?b():b}var e={shader:{render:function(b,c){var e={};e.div=document.createElement("div");e.div.style.cssText="position:absolute; \n              height:100%; \n              width:100%; \n              display:flex;\n              flex-direction:column;\n              background: rgba(0,0,0,0.7);\n              z-index:300;\n              top:0;\n              left:0;";e.innerdiv=document.createElement("div");
e.div.appendChild(e.innerdiv);e.innerdiv.innerHTML=b.contents;e.innerdiv.style.cssText="flex: 0 1 auto;\n              margin: auto;\n              text-align: center;\n              color: white;\n              padding: 1em;\n              ";if(b.to)for(var l={i$18:0};l.i$18<b.to.length;l={i$18:l.i$18},l.i$18++){var q=document.createElement("button");q.innerHTML=b.to[l.i$18][0];q.addEventListener("click",function(k){return function(){c(b.to[k.i$18][1])}}(l));e.innerdiv.appendChild(q)}else e.button=
document.createElement("button"),e.button.innerHTML="Next",e.button.addEventListener("click",function(){c()}),e.innerdiv.appendChild(e.button);f(b.target).appendChild(e.div);return e},unrender:function(b){b.div.remove()}},internal:{render:function(b,c){var e={};e.div=document.createElement("div");e.div.style.cssText="position: absolute;\n              height: fit-content;\n              width: fit-content;\n              display: block;\n              background: rgba(0, 0, 0, 0.7);\n              z-index: 300;";
switch(b.location){default:case "left":e.div.style.cssText+="top: 50%;\n                      transform: translateY(-50%);";break;case "bottom":e.div.style.cssText+="bottom: 0%;\n                      left: 50%;\n                      transform: translateX(-50%);";break;case "top":e.div.style.cssText+="\n                      left: 50%;\n                      top: 0%;\n                      transform: translateX(-50%);";break;case "center":e.div.style.cssText+="\n                      left: 50%;\n                      top: 50%;\n                      transform: translate(-50%,-50%);"}e.innerdiv=
document.createElement("div");e.div.appendChild(e.innerdiv);e.innerdiv.innerHTML=b.contents;e.innerdiv.style.cssText="flex: 0 1 auto;\n              margin: auto;\n              text-align: center;\n              color: white;\n              padding: 1em;\n              ";if(b.to)for(var l={i$19:0};l.i$19<b.to.length;l={i$19:l.i$19},l.i$19++){var q=document.createElement("button");q.innerHTML=b.to[l.i$19][0];q.addEventListener("click",function(k){return function(){c(b.to[k.i$19][1])}}(l));e.innerdiv.appendChild(q)}else e.button=
document.createElement("button"),e.button.innerHTML="Next",e.button.addEventListener("click",function(){c()}),e.innerdiv.appendChild(e.button);f(b.target).appendChild(e.div);return e},unrender:function(b){b.div.remove()}}};return function(l){this.firstItem=!1;this.items={};var c,t,f=this;this.present=function(v,k){c&&e[t].unrender(c);v?(b(l.data).step=v,l.saveData&&l.saveData(),f.items[v]?(t=f.items[v].type,c=e[f.items[v].type].render(f.items[v],f.present)):k&&k()):f.end()};this.addSteps=function(b){var c=
this;b.forEach(function(b){c.addStep(b)})};this.addStep=function(b){if(!b.id){var c="object"==typeof b?JSON.stringify(b):b.toString();var e=0,l;if(0!==c.length)for(l=0;l<c.length;l++){var n=c.charCodeAt(l);e=(e<<5)-e+n;e|=0}c=e.toString();b.id=c}this.firstItem||(this.firstItem=b.id);this.items[b.id]=b;return b.id};this.start=function(b,c){b||(b=this.firstItem);this.present(b,c);return{end:function(b){f._end=b}}};this.continueStart=function(c){var k=b(l.data);k.concluded||this.start(k.step,c)};this.end=
function(){b(l.data).concluded=!0;l.saveData&&l.saveData();f._end}}}();polymorph_core.tutorial=new _tutorial({data:function(){return polymorph_core.userData.tutorialData.main},saveData:function(){polymorph_core.saveUserData()}});polymorph_core.resetTutorial=function(){polymorph_core.userData.tutorialData={main:{}};polymorph_core.tutorial.start()};
polymorph_core.on("UIstart",function(){polymorph_core.tutorial.addSteps([{target:document.body,type:"shader",contents:"<h1>Welcome to Polymorph!</h1><h2>Productivity, your way.</h2> ",to:[["Next","cnd"],["Skip"]]},{id:"cnd",target:function(){return polymorph_core.baseRect.outerDiv},type:"internal",location:"left",contents:"<p>&lt;---Shift-Click and drag this border to split the item! (Then, just click and drag to resize)</p>",to:[["Next","clickop"],["Skip"]]},{id:"clickop",target:function(){return polymorph_core.baseRect.outerDiv},
type:"internal",location:"center",contents:"<p>These boxes contain operators. Click an operator type to get started!</p>",to:[["Next","save"],["Skip"]]},{id:"save",target:document.body,type:"shader",contents:"<p>To save your work, simply press Ctrl-S. Your work will be saved in your browser.</p>",to:[["Done"]]},{id:"ideas",target:function(){return document.body},type:"shader",contents:"<h1>Ideas with Polymorph</h1><h2>A whole new space for ideas to grow!</h2> ",to:[["Next","idlist"],["Skip"]]},{id:"idlist",
target:function(){return polymorph_core.getOperator("nvd5b4").topdiv},type:"internal",location:"center",contents:"<p>Here's a list of ideas! Click an idea to view more detail about it.</p>",to:[["Next","idfs"],["Skip"]]},{id:"idfs",target:function(){return polymorph_core.baseRect.children[1].outerDiv},type:"internal",location:"top",contents:"<p>This frame contains various aspects of a project. You can click any of the purple tabs to switch between frames!</p>",to:[["Next","idsv"],["Skip"]]},{id:"idsv",
target:document.body,type:"shader",contents:"<h1>Sharing</h1>\n      <p>This document is saved in realtime, so you can collaborate with your friends. Just share the link up the top!</p>",to:[["Done"]]}]);polymorph_core.on("viewReady",function(){polymorph_core.tutorial.continueStart(function(){polymorph_core.tutorial.start()})})})(function(){Object.defineProperty(polymorph_core,"saveSourceData",{get:function(){return polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources}});var f=
function(b,e){if(b.has("src")){for(var l=!1,c=$jscomp.makeIterator(e),f=c.next();!f.done;f=c.next())if(f=f.value,f.type==b.get("src")&&1==f.load){l=!0;break}if(!l)for(c=$jscomp.makeIterator(e),f=c.next();!f.done;f=c.next())if(f=f.value,f.type==b.get("src")){l=f.load=!0;break}l||e.push({type:b.get("src"),load:!0,save:!0,data:{id:polymorph_core.currentDocID}});polymorph_core.saveUserData();return!0}return!1};polymorph_core.handleURL=function(){var b,e,l,c,t,v,q,k,m,r,n,y,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:b=
new URLSearchParams(window.location.search);polymorph_core.resetDocument();e=[];if(b.has("doc")){polymorph_core.currentDocID=b.get("doc");x.jumpTo(2);break}c=x.forIn(polymorph_core.saveSources);case 3:if(null==(l=c.getNext())){x.jumpTo(2);break}if(!polymorph_core.saveSourceOptions[l].canHandle){x.jumpTo(3);break}return x.yield(polymorph_core.saveSourceOptions[l].canHandle(b),7);case 7:if(t=x.yieldResult)polymorph_core.currentDocID=t.id,e.push({load:!0,save:!0,type:l,data:t.source});x.jumpTo(3);break;
case 2:b.has("o")&&(v=window.location.href,v=v.replace(/\?o/,""),history.pushState({},"",v));if(polymorph_core.currentDocID){polymorph_core.datautils.upgradeSaveData(polymorph_core.currentDocID);(k=f(b,polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources))&&e.push(k);polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.push.apply(polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources,e);0==polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.length&&
confirm("Warning! This document doesn't have any save sources attached to it, so all your work will be lost. Would you like to add a local storage source? [OK] Otherwise, please go to file>preferences to manually add a save source.")&&polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.push({load:!0,save:!0,type:"lf",data:{id:polymorph_core.currentDocID}});polymorph_core.saveUserData();m={};for(r=0;r<polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.length;m=
{newInstance$26:m.newInstance$26,i$25:m.i$25},r++)m.i$25=polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources[r],polymorph_core.saveSources[m.i$25.type]?(m.newInstance$26=new polymorph_core.saveSources[m.i$25.type](m.i$25),polymorph_core.saveSourceInstances.push(m.newInstance$26),m.i$25.load&&function(b){return function(){var h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.setCatchFinallyBlocks(2),c.yield(b.newInstance$26.pullAll(),
4);if(2!=c.nextAddress)return d=c.yieldResult,polymorph_core.integrateData(d,b.i$25.type),c.leaveTryBlock(0);h=c.enterCatchBlock();alert("Something went wrong with the save source: "+h);c.jumpToEnd()})}}(m)()):confirm("Ack! Looks like the "+m.i$25.type+" save source is not working right now. Remove it?")&&(polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.splice(r,1),polymorph_core.saveUserData(),r--);n=$jscomp.makeIterator(polymorph_core.saveSourceInstances);for(y=n.next();!y.done;y=
n.next())w=y.value,w.unhook&&w.unhook(),w.settings.save&&w.hook&&w.hook();window.history.pushState("","",window.location.origin+window.location.pathname+("?doc="+polymorph_core.currentDocID))}else polymorph_core.currentDocID=polymorph_core.guid(6,polymorph_core.userData.documents),polymorph_core.datautils.upgradeSaveData(polymorph_core.currentDocID),polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.push({load:!0,save:!0,type:"lf",data:{id:polymorph_core.currentDocID}}),polymorph_core.saveUserData(),
polymorph_core.templates.blankNewDoc._meta.id=polymorph_core.currentDocID,polymorph_core.integrateData(polymorph_core.templates.blankNewDoc,"CORE_FAULT"),history.pushState({},"",window.location.href+"?doc="+polymorph_core.currentDocID),q=new polymorph_core.saveSources.lf(polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources[0]),polymorph_core.saveSourceInstances.push(q);document.querySelector(".wall").style.display="none";x.jumpToEnd()}})};polymorph_core.sanityCheckDoc=function(b){b||
(b=polymorph_core.templates.blankNewDoc,b._meta.id=polymorph_core.currentDocID,polymorph_core.fire("documentCreated",{id:polymorph_core.currentDocID,data:b}));b=polymorph_core.datautils.decompress(b);b._meta||(b=polymorph_core.datautils.viewToItems(b));if(!(b._meta.currentView&&b[b._meta.currentView]&&b[b._meta.currentView]._rd)){for(var e in b)if(b[e]._rd&&!b[e]._rd.p){b._meta.currentView=e;break}if(!b._meta.currentView||!b[b._meta.currentView]._rd){e=polymorph_core.guid(6,b);b[e]={_rd:{x:0,f:0,
ps:1}};b._meta.currentView=e;var l=polymorph_core.guid(6,b);b[l]={_od:{t:"opSelect",p:e}};b[e]._rd.s=l}}for(var c in b)b[c]._lu_||(b[c]._lu_=Date.now());return b};polymorph_core.resetDocument=function(){polymorph_core.items={};polymorph_core.containers={};for(var b in polymorph_core.rects)polymorph_core.rects[b].outerDiv.remove(),delete polymorph_core.rects[b];polymorph_core.unsaved=!1;if(polymorph_core.saveSourceInstances){b=$jscomp.makeIterator(polymorph_core.saveSourceInstances);for(var e=b.next();!e.done;e=
b.next())e=e.value,e.unhook&&e.unhook()}polymorph_core.saveSourceInstances=[]};polymorph_core.saveSources={};polymorph_core.saveSourceOptions={};polymorph_core.registerSaveSource=function(b,e,l){polymorph_core.saveSources[b]=e;polymorph_core.saveSourceOptions[b]=l||{};l.createable&&polymorph_core.loadInnerDialog.querySelector(".nss select").appendChild(htmlwrap("<option value='"+b+"'>"+(l.prettyName||b)+"</option>"))};polymorph_core.switchView=function(b){for(polymorph_core.items._meta.currentView=
b;document.body.querySelector(".rectspace").children.length;)document.body.querySelector(".rectspace").children[0].remove();document.body.querySelector(".rectspace").appendChild(polymorph_core.rects[polymorph_core.items._meta.currentView].outerDiv);polymorph_core.rects[polymorph_core.items._meta.currentView].refresh()};polymorph_core.integrateData=function(b,e){b=polymorph_core.sanityCheckDoc(b);if(b._meta.id!=polymorph_core.currentDocID)if(confirm("A source ("+e+") seems to be storing a different document ("+
b._meta.id+") to the one you requested ("+polymorph_core.currentDocID+"). Continue loading?"))confirm("Overwrite the incoming data ID to "+polymorph_core.currentDocID+"? [OK] Or load the imported data in a separate window [cancel]?")?b._meta.id=polymorph_core.currentDocID:(polymorph_core.datautils.upgradeSaveData(b._meta.id,e),polymorph_core.userData.documents[b._meta.id].saveSources[e]=polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources[e],polymorph_core.saveUserData(),window.location.href=
"?doc="+b._meta.id);else return;for(var l in b)if(!polymorph_core.items[l]||b[l]._lu_>polymorph_core.items[l]._lu_)polymorph_core.items[l]=b[l];polymorph_core.rects||(polymorph_core.rects={});for(var c in b)polymorph_core.items[c]._rd&&!polymorph_core.rects[c]&&(polymorph_core.rects[c]=new polymorph_core.rect(c));polymorph_core.containers||(polymorph_core.containers={});for(var f in b)polymorph_core.items[f]._od&&!polymorph_core.containers[f]&&(polymorph_core.containers[f]=new polymorph_core.container(f));
for(var v in b)polymorph_core.fire("updateItem",{id:v,loadProcess:!0});polymorph_core.switchView(polymorph_core.items._meta.currentView);polymorph_core.datautils.linkSanitize();polymorph_core.updateSettings(!0)}})();polymorph_core.saveSourceTemplate=function(f){this.settings=f};
polymorph_core.templates={brainstorm:JSON.parse('{"displayName":"New Workspace","currentView":"default","id":"itemcluster","views":{"default":{"o":[{"name":"Itemcluster 2","opdata":{"type":"itemcluster2","uuid":"i33lyy","tabbarName":"Itemcluster 2","data":{"itemcluster":{"cx":0,"cy":0,"scale":1},"currentViewName":"7hj0","viewpath":["7hj0"]}}}],"s":0,"x":0,"f":1,"p":0}},"items":{"7hj0":{"itemcluster":{"viewName":"New Itemcluster"}}}}'),blankNewDoc:{_meta:{displayName:"New Polymorph Document",id:"blank",
contextMenuItems:["Delete::polymorph_core.deleteItem","Background::item.edit(style.background)","Foreground::item.edit(style.color)"],_lu_:0,currentView:"default_container",globalContextMenuOptions:["Style::Item Background::item.edit(item.style.background)","Style::Text color::item.edit(item.style.color)"]},default_container:{_rd:{x:0,f:0,ps:1,s:"default_operator"},_lu_:0},default_operator:{_od:{t:"welcome",data:{},inputRemaps:{},outputRemaps:{},tabbarName:"Home",p:"default_container"},_lu_:0}}};
function _dialogManager(f){var b=this;this.settings={autoDialogUpgrade:!1,addCloseButton:!0,noCloseClass:"noClose",closeButtonClass:"cb",closeButtonStyle:"\n            position: absolute;\n            top: 0px;\n            right: 0px;\n            font-size:2em;\n            margin: 26px;\n            padding: 3px;\n            border-radius:20px;\n            background: #ad2222;\n            width: 1em;\n            height: 1em;\n            text-align: center;\n            color: white;\n            font-family: sans-serif;\n        ",
dialogLayers:[{className:"dialog",styling:"\n                display: none;\n                position: absolute;\n                top: 0;\n                left: 0;\n                width:100%;\n                height:100%;\n                background-color: rgba(0,0,0,0.5);\n                z-index:1000;\n            "},{className:"midmid",styling:"\n                position: absolute;\n                top: 0;\n                left: 0;\n                height: 100%;\n                width: 100%;\n            "},
{className:"mid",styling:"\n                height:90%;\n                margin-top:5%;\n            "},{className:"innerDialog",styling:"\n                position:relative;\n                display: flex;\n                flex-direction: column;\n                margin: auto;\n                min-height: 60%;\n                max-width: 80%;\n                max-height: 80%;\n                overflow-y: auto;\n                max-width: 80%;\n                background-color: white;\n                border-radius: 5px;\n                padding: 30px;\n            "}]};
f&&Object.assign(this.settings,f);this.checkDialogs=function(e){var c=[];e||(e=document.body);for(var l=e.querySelectorAll("."+b.settings.dialogLayers[0].className),f=[],q=0;q<l.length;q++)f.push(l[q]);e.matches("."+b.settings.dialogLayers[0].className)&&f.push(e);e={};for(l=0;l<f.length;e={prediv:e.prediv,closeButton:e.closeButton},l++)if(q=f[l],!q.children.length||!q.children[0].classList.contains(b.settings.dialogLayers[1].className)){var k=q.parentElement;e.prediv=q;for(var m=b.settings.dialogLayers.length-
1;0<=m;m--){var r=document.createElement("div");r.style.cssText=b.settings.dialogLayers[m].styling;r.classList.add(b.settings.dialogLayers[m].className);r.appendChild(e.prediv);e.prediv=r}q.classList.forEach(function(b){return function(c,k){b.prediv.classList.add(c)}}(e));q.classList.contains(b.settings.noCloseClass)||(e.closeButton=document.createElement("div"),e.closeButton.innerText="X",e.closeButton.style.cssText=b.settings.closeButtonStyle,e.closeButton.classList.add(b.settings.closeButtonClass),
m=function(b){return function(){b.prediv.style.display="none"}}(e),e.closeButton.addEventListener("click",m),q.parentElement.appendChild(e.closeButton),window.addEventListener("keydown",function(b){return function(c){"Escape"==c.key&&"none"!=b.prediv.style.display&&b.closeButton.click()}}(e)));for(;q.classList.length;)q.classList.remove(q.classList[q.classList.length-1]);k&&k.appendChild(e.prediv);e.prediv.addEventListener("click",function(b){b.stopImmediatePropagation()});e.prediv.addEventListener("dblclick",
function(b){b.stopImmediatePropagation()});c.push(e.prediv)}return c};b.mo=new MutationObserver(b.checkDialogs);if(b.settings.autoDialogUpgrade){var e={childList:!0,subtree:!0};"loading"!=document.readyState?b.mo.observe(document.body,e):document.addEventListener("DOMContentLoaded",function(){return b.mo.observe(document.body,e)})}}var dialogManager=new _dialogManager;polymorph_core.dialog={};polymorph_core.dialog.div=document.createElement("div");polymorph_core.dialog.div.classList.add("dialog");
polymorph_core.dialog.div=dialogManager.checkDialogs(polymorph_core.dialog.div)[0];polymorph_core.dialog.innerDialog=polymorph_core.dialog.div.querySelector(".innerDialog");document.body.appendChild(polymorph_core.dialog.div);
polymorph_core.dialog.prompt=function(f,b){for(;2<polymorph_core.dialog.innerDialog.children.length;)polymorph_core.dialog.innerDialog.children[2].remove();polymorph_core.dialog.innerDialog.appendChild(f);polymorph_core.dialog.div.style.display="block";polymorph_core.dialog.closeCB=b};
polymorph_core.dialog.div.querySelector(".cb").addEventListener("click",function(){if(polymorph_core.dialog.closeCB){try{polymorph_core.dialog.closeCB(polymorph_core.dialog.innerDialog)}catch(f){console.log(f)}polymorph_core.dialog.closeCB=void 0}});polymorph_core.userData.tutorialData||(polymorph_core.userData.tutorialData={main:{}});
_tutorial=function(){function f(b){return"function"==typeof b?b():b}function b(b){return"function"==typeof b?b():b}var e={shader:{render:function(b,c){var e={};e.div=document.createElement("div");e.div.style.cssText="position:absolute; \n              height:100%; \n              width:100%; \n              display:flex;\n              flex-direction:column;\n              background: rgba(0,0,0,0.7);\n              z-index:300;\n              top:0;\n              left:0;";e.innerdiv=document.createElement("div");
e.div.appendChild(e.innerdiv);e.innerdiv.innerHTML=b.contents;e.innerdiv.style.cssText="flex: 0 1 auto;\n              margin: auto;\n              text-align: center;\n              color: white;\n              padding: 1em;\n              ";if(b.to)for(var l={i$39:0};l.i$39<b.to.length;l={i$39:l.i$39},l.i$39++){var q=document.createElement("button");q.innerHTML=b.to[l.i$39][0];q.addEventListener("click",function(e){return function(){c(b.to[e.i$39][1])}}(l));e.innerdiv.appendChild(q)}else e.button=
document.createElement("button"),e.button.innerHTML="Next",e.button.addEventListener("click",function(){c()}),e.innerdiv.appendChild(e.button);f(b.target).appendChild(e.div);return e},unrender:function(b){b.div.remove()}},internal:{render:function(b,c){var e={};e.div=document.createElement("div");e.div.style.cssText="position: absolute;\n              height: fit-content;\n              width: fit-content;\n              display: block;\n              background: rgba(0, 0, 0, 0.7);\n              z-index: 300;";
switch(b.location){default:case "left":e.div.style.cssText+="top: 50%;\n                      transform: translateY(-50%);";break;case "bottom":e.div.style.cssText+="bottom: 0%;\n                      left: 50%;\n                      transform: translateX(-50%);";break;case "top":e.div.style.cssText+="\n                      left: 50%;\n                      top: 0%;\n                      transform: translateX(-50%);";break;case "center":e.div.style.cssText+="\n                      left: 50%;\n                      top: 50%;\n                      transform: translate(-50%,-50%);"}e.innerdiv=
document.createElement("div");e.div.appendChild(e.innerdiv);e.innerdiv.innerHTML=b.contents;e.innerdiv.style.cssText="flex: 0 1 auto;\n              margin: auto;\n              text-align: center;\n              color: white;\n              padding: 1em;\n              ";if(b.to)for(var l={i$40:0};l.i$40<b.to.length;l={i$40:l.i$40},l.i$40++){var q=document.createElement("button");q.innerHTML=b.to[l.i$40][0];q.addEventListener("click",function(e){return function(){c(b.to[e.i$40][1])}}(l));e.innerdiv.appendChild(q)}else e.button=
document.createElement("button"),e.button.innerHTML="Next",e.button.addEventListener("click",function(){c()}),e.innerdiv.appendChild(e.button);f(b.target).appendChild(e.div);return e},unrender:function(b){b.div.remove()}}};return function(l){this.firstItem=!1;this.items={};var c,f,v=this;this.present=function(t,k){c&&e[f].unrender(c);t?(b(l.data).step=t,l.saveData&&l.saveData(),v.items[t]?(f=v.items[t].type,c=e[v.items[t].type].render(v.items[t],v.present)):k&&k()):v.end()};this.addSteps=function(b){var c=
this;b.forEach(function(b){c.addStep(b)})};this.addStep=function(b){if(!b.id){var c="object"==typeof b?JSON.stringify(b):b.toString();var e=0,l;if(0!==c.length)for(l=0;l<c.length;l++){var n=c.charCodeAt(l);e=(e<<5)-e+n;e|=0}c=e.toString();b.id=c}this.firstItem||(this.firstItem=b.id);this.items[b.id]=b;return b.id};this.start=function(b,c){b||(b=this.firstItem);this.present(b,c);return{end:function(b){v._end=b}}};this.continueStart=function(c){var e=b(l.data);e.concluded||this.start(e.step,c)};this.end=
function(){b(l.data).concluded=!0;l.saveData&&l.saveData();v._end}}}();polymorph_core.tutorial=new _tutorial({data:function(){return polymorph_core.userData.tutorialData.main},saveData:function(){polymorph_core.saveUserData()}});polymorph_core.resetTutorial=function(){polymorph_core.userData.tutorialData={main:{}};polymorph_core.tutorial.start()};
polymorph_core.on("UIstart",function(){polymorph_core.tutorial.addSteps([{target:document.body,type:"shader",contents:"<h1>Welcome to Polymorph!</h1><h2>Productivity, your way.</h2> ",to:[["Next","cnd"],["Skip"]]},{id:"cnd",target:function(){return polymorph_core.baseRect.outerDiv},type:"internal",location:"left",contents:"<p>&lt;---Shift-Click and drag this border to split the item! (Then, just click and drag to resize)</p>",to:[["Next","clickop"],["Skip"]]},{id:"clickop",target:function(){return polymorph_core.baseRect.outerDiv},
type:"internal",location:"center",contents:"<p>These boxes contain operators. Click an operator type to get started!</p>",to:[["Next","save"],["Skip"]]},{id:"save",target:document.body,type:"shader",contents:"<p>To save your work, simply press Ctrl-S. Your work will be saved in your browser.</p>",to:[["Done"]]},{id:"ideas",target:function(){return document.body},type:"shader",contents:"<h1>Ideas with Polymorph</h1><h2>A whole new space for ideas to grow!</h2> ",to:[["Next","idlist"],["Skip"]]},{id:"idlist",
target:function(){return polymorph_core.getOperator("nvd5b4").topdiv},type:"internal",location:"center",contents:"<p>Here's a list of ideas! Click an idea to view more detail about it.</p>",to:[["Next","idfs"],["Skip"]]},{id:"idfs",target:function(){return polymorph_core.baseRect.children[1].outerDiv},type:"internal",location:"top",contents:"<p>This frame contains various aspects of a project. You can click any of the purple tabs to switch between frames!</p>",to:[["Next","idsv"],["Skip"]]},{id:"idsv",
target:document.body,type:"shader",contents:"<h1>Sharing</h1>\n      <p>This document is saved in realtime, so you can collaborate with your friends. Just share the link up the top!</p>",to:[["Done"]]}]);polymorph_core.on("viewReady",function(){polymorph_core.tutorial.continueStart(function(){polymorph_core.tutorial.start()})})})(function(){Object.defineProperty(polymorph_core,"saveSourceData",{get:function(){return polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources}});var f=
function(b,e){if(b.has("src")){for(var l=!1,c=$jscomp.makeIterator(e),f=c.next();!f.done;f=c.next())if(f=f.value,f.type==b.get("src")&&1==f.load){l=!0;break}if(!l)for(c=$jscomp.makeIterator(e),f=c.next();!f.done;f=c.next())if(f=f.value,f.type==b.get("src")){l=f.load=!0;break}l||e.push({type:b.get("src"),load:!0,save:!0,data:{id:polymorph_core.currentDocID}});polymorph_core.saveUserData();return!0}return!1};polymorph_core.handleURL=function(){var b,e,l,c,t,v,q,k,m,r,n,y,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:b=
new URLSearchParams(window.location.search);polymorph_core.resetDocument();e=[];if(b.has("doc")){polymorph_core.currentDocID=b.get("doc");x.jumpTo(2);break}c=x.forIn(polymorph_core.saveSources);case 3:if(null==(l=c.getNext())){x.jumpTo(2);break}if(!polymorph_core.saveSourceOptions[l].canHandle){x.jumpTo(3);break}return x.yield(polymorph_core.saveSourceOptions[l].canHandle(b),7);case 7:if(t=x.yieldResult)polymorph_core.currentDocID=t.id,e.push({load:!0,save:!0,type:l,data:t.source});x.jumpTo(3);break;
case 2:b.has("o")&&(v=window.location.href,v=v.replace(/\?o/,""),history.pushState({},"",v));if(polymorph_core.currentDocID){polymorph_core.datautils.upgradeSaveData(polymorph_core.currentDocID);(k=f(b,polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources))&&e.push(k);polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.push.apply(polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources,e);0==polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.length&&
confirm("Warning! This document doesn't have any save sources attached to it, so all your work will be lost. Would you like to add a local storage source? [OK] Otherwise, please go to file>preferences to manually add a save source.")&&polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.push({load:!0,save:!0,type:"lf",data:{id:polymorph_core.currentDocID}});polymorph_core.saveUserData();m={};for(r=0;r<polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.length;m=
{newInstance$47:m.newInstance$47,i$46:m.i$46},r++)m.i$46=polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources[r],polymorph_core.saveSources[m.i$46.type]?(m.newInstance$47=new polymorph_core.saveSources[m.i$46.type](m.i$46),polymorph_core.saveSourceInstances.push(m.newInstance$47),m.i$46.load&&function(b){return function(){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.setCatchFinallyBlocks(2),h.yield(b.newInstance$47.pullAll(),
4);if(2!=h.nextAddress)return d=h.yieldResult,polymorph_core.integrateData(d,b.i$46.type),h.leaveTryBlock(0);c=h.enterCatchBlock();alert("Something went wrong with the save source: "+c);h.jumpToEnd()})}}(m)()):confirm("Ack! Looks like the "+m.i$46.type+" save source is not working right now. Remove it?")&&(polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.splice(r,1),polymorph_core.saveUserData(),r--);n=$jscomp.makeIterator(polymorph_core.saveSourceInstances);for(y=n.next();!y.done;y=
n.next())w=y.value,w.unhook&&w.unhook(),w.settings.save&&w.hook&&w.hook();window.history.pushState("","",window.location.origin+window.location.pathname+("?doc="+polymorph_core.currentDocID))}else polymorph_core.currentDocID=polymorph_core.guid(6,polymorph_core.userData.documents),polymorph_core.datautils.upgradeSaveData(polymorph_core.currentDocID),polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.push({load:!0,save:!0,type:"lf",data:{id:polymorph_core.currentDocID}}),polymorph_core.saveUserData(),
polymorph_core.templates.blankNewDoc._meta.id=polymorph_core.currentDocID,polymorph_core.integrateData(polymorph_core.templates.blankNewDoc,"CORE_FAULT"),history.pushState({},"",window.location.href+"?doc="+polymorph_core.currentDocID),q=new polymorph_core.saveSources.lf(polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources[0]),polymorph_core.saveSourceInstances.push(q);document.querySelector(".wall").style.display="none";x.jumpToEnd()}})};polymorph_core.sanityCheckDoc=function(b){b||
(b=polymorph_core.templates.blankNewDoc,b._meta.id=polymorph_core.currentDocID,polymorph_core.fire("documentCreated",{id:polymorph_core.currentDocID,data:b}));b=polymorph_core.datautils.decompress(b);b._meta||(b=polymorph_core.datautils.viewToItems(b));if(!(b._meta.currentView&&b[b._meta.currentView]&&b[b._meta.currentView]._rd)){for(var e in b)if(b[e]._rd&&!b[e]._rd.p){b._meta.currentView=e;break}if(!b._meta.currentView||!b[b._meta.currentView]._rd){e=polymorph_core.guid(6,b);b[e]={_rd:{x:0,f:0,
ps:1}};b._meta.currentView=e;var f=polymorph_core.guid(6,b);b[f]={_od:{t:"opSelect",p:e}};b[e]._rd.s=f}}for(var c in b)b[c]._lu_||(b[c]._lu_=Date.now());return b};polymorph_core.resetDocument=function(){polymorph_core.items={};polymorph_core.containers={};for(var b in polymorph_core.rects)polymorph_core.rects[b].outerDiv.remove(),delete polymorph_core.rects[b];polymorph_core.unsaved=!1;if(polymorph_core.saveSourceInstances){b=$jscomp.makeIterator(polymorph_core.saveSourceInstances);for(var e=b.next();!e.done;e=
b.next())e=e.value,e.unhook&&e.unhook()}polymorph_core.saveSourceInstances=[]};polymorph_core.saveSources={};polymorph_core.saveSourceOptions={};polymorph_core.registerSaveSource=function(b,e,f){polymorph_core.saveSources[b]=e;polymorph_core.saveSourceOptions[b]=f||{};f.createable&&polymorph_core.loadInnerDialog.querySelector(".nss select").appendChild(htmlwrap("<option value='"+b+"'>"+(f.prettyName||b)+"</option>"))};polymorph_core.switchView=function(b){for(polymorph_core.items._meta.currentView=
b;document.body.querySelector(".rectspace").children.length;)document.body.querySelector(".rectspace").children[0].remove();document.body.querySelector(".rectspace").appendChild(polymorph_core.rects[polymorph_core.items._meta.currentView].outerDiv);polymorph_core.rects[polymorph_core.items._meta.currentView].refresh()};polymorph_core.integrateData=function(b,e){b=polymorph_core.sanityCheckDoc(b);if(b._meta.id!=polymorph_core.currentDocID)if(confirm("A source ("+e+") seems to be storing a different document ("+
b._meta.id+") to the one you requested ("+polymorph_core.currentDocID+"). Continue loading?"))confirm("Overwrite the incoming data ID to "+polymorph_core.currentDocID+"? [OK] Or load the imported data in a separate window [cancel]?")?b._meta.id=polymorph_core.currentDocID:(polymorph_core.datautils.upgradeSaveData(b._meta.id,e),polymorph_core.userData.documents[b._meta.id].saveSources[e]=polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources[e],polymorph_core.saveUserData(),window.location.href=
"?doc="+b._meta.id);else return;for(var f in b)if(!polymorph_core.items[f]||b[f]._lu_>polymorph_core.items[f]._lu_)polymorph_core.items[f]=b[f];polymorph_core.rects||(polymorph_core.rects={});for(var c in b)polymorph_core.items[c]._rd&&!polymorph_core.rects[c]&&(polymorph_core.rects[c]=new polymorph_core.rect(c));polymorph_core.containers||(polymorph_core.containers={});for(var t in b)polymorph_core.items[t]._od&&!polymorph_core.containers[t]&&(polymorph_core.containers[t]=new polymorph_core.container(t));
for(var v in b)polymorph_core.fire("updateItem",{id:v,loadProcess:!0});polymorph_core.switchView(polymorph_core.items._meta.currentView);polymorph_core.datautils.linkSanitize();polymorph_core.updateSettings(!0)}})();polymorph_core.saveSourceTemplate=function(f){this.settings=f};
polymorph_core.templates={brainstorm:JSON.parse('{"displayName":"New Workspace","currentView":"default","id":"itemcluster","views":{"default":{"o":[{"name":"Itemcluster 2","opdata":{"type":"itemcluster2","uuid":"i33lyy","tabbarName":"Itemcluster 2","data":{"itemcluster":{"cx":0,"cy":0,"scale":1},"currentViewName":"7hj0","viewpath":["7hj0"]}}}],"s":0,"x":0,"f":1,"p":0}},"items":{"7hj0":{"itemcluster":{"viewName":"New Itemcluster"}}}}'),blankNewDoc:{_meta:{displayName:"New Polymorph Document",id:"blank",
contextMenuItems:["Delete::polymorph_core.deleteItem","Background::item.edit(style.background)","Foreground::item.edit(style.color)"],_lu_:0,currentView:"default_container",globalContextMenuOptions:["Style::Item Background::item.edit(item.style.background)","Style::Text color::item.edit(item.style.color)"]},default_container:{_rd:{x:0,f:0,ps:1,s:"default_operator"},_lu_:0},default_operator:{_od:{t:"welcome",data:{},inputRemaps:{},outputRemaps:{},tabbarName:"Home",p:"default_container"},_lu_:0}}}(function(){polymorph_core.userSave=
function(){var f=polymorph_core.items;polymorph_core.datautils.upgradeSaveData(polymorph_core.currentDocID);polymorph_core.fire("userSave",f)};document.body.addEventListener("keydown",function(f){if((f.ctrlKey||f.metaKey)&&"s"==f.key){f.preventDefault();polymorph_core.userSave();polymorph_core.unsaved=!1;try{polymorph_core.showNotification("Saved","success")}catch(b){}f=JSON.parse(localStorage.getItem("__polymorph_recent_docs"));f[polymorph_core.currentDocID]={url:window.location.href,displayName:polymorph_core.currentDoc.displayName};
localStorage.setItem("__polymorph_recent_docs",JSON.stringify(f))}});(function(){var f=document.createElement("div");f.classList.add("dialog");f=dialogManager.checkDialogs(f)[0];polymorph_core.loadInnerDialog=document.createElement("div");f.querySelector(".innerDialog").appendChild(polymorph_core.loadInnerDialog);polymorph_core.loadInnerDialog.classList.add("loadInnerDialog");polymorph_core.loadInnerDialog.innerHTML="\n    <style>\n    .loadInnerDialog>div{\n        border: 1px solid;\n        position:relative;\n    }\n    .loadInnerDialog>div>h2{\n        margin:0;\n    }\n    </style>\n          <h1>Load/Save settings</h1>\n          ";
var b=new polymorph_core._option({div:polymorph_core.loadInnerDialog,type:"bool",object:function(){return polymorph_core.userData.documents[polymorph_core.currentDocID]},property:"autosave",label:"Autosave all changes"});polymorph_core.autosaveCapacitor=new capacitor(200,20,polymorph_core.userSave);polymorph_core.on("updateItem",function(b){polymorph_core.userData.documents[polymorph_core.currentDocID].autosave&&!polymorph_core.isSaving&&polymorph_core.autosaveCapacitor.submit()});polymorph_core.loadInnerDialog.appendChild(htmlwrap('\n        <label class="nss">Add new savesource<select></select><button>Add</button></label>'));
var e=polymorph_core.loadInnerDialog.querySelector(".nss");e.querySelector("button").addEventListener("click",function(){var b={load:!1,save:!1,type:e.querySelector("select").value,data:{id:polymorph_core.currentDocID}};polymorph_core.userData.documents[polymorph_core.currentDocID].saveSources.push(b);polymorph_core.saveSourceInstances.push(new (polymorph_core.saveSources[e.querySelector("select").value])(b))});var l=[];polymorph_core.addToSaveDialog=function(b){var c="\n        <div>\n            <h2>"+
(polymorph_core.saveSourceOptions[b.settings.type].prettyName||b.settings.type)+"</h2>\n            <span>";c+='<label>Save to this source<input data-role="tsync" type="checkbox"></input></label><label>Load from this source<input data-role="lsync" type="checkbox"></input></label>';b.pullAll&&(c+='<button data-role="dlg_hardLoad">Load from this source</button>');b.pullAll&&(c+='<button data-role="dlg_softLoad">Merge from this source</button>');b.pushAll&&(c+='<button data-role="dlg_save">Save to this source</button>');
var e=htmlwrap(c+"</span>\n        </div>\n        ");c=function(b,c,m){e.querySelector(b)&&e.querySelector(b).addEventListener(c,m)};c("[data-role='tsync']","input",function(c){b.settings.save=c.target.checked;polymorph_core.saveUserData()});c("[data-role='lsync']","input",function(c){b.settings.load=c.target.checked;polymorph_core.saveUserData()});c("[data-role='dlg_save']","click",function(){b.pushAll(polymorph_core.items)});c("[data-role='dlg_hardLoad']","click",function(){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress){if(!confirm("Overwrite existing data? You will lose any unsaved work."))return e.jumpTo(0);polymorph_core.resetDocument();e.setCatchFinallyBlocks(3);return e.yield(b.pullAll(),5)}if(3!=e.nextAddress)return d=e.yieldResult,polymorph_core.integrateData(d,i.type),e.leaveTryBlock(0);c=e.enterCatchBlock();alert("Something went wrong with the save source: "+c);e.jumpToEnd()})});c("[data-role='dlg_softLoad']","click",function(){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==
e.nextAddress)return e.setCatchFinallyBlocks(2),e.yield(b.pullAll(),4);if(2!=e.nextAddress)return d=e.yieldResult,polymorph_core.integrateData(d,i.type),e.leaveTryBlock(0);c=e.enterCatchBlock();alert("Something went wrong with the save source: "+c);e.jumpToEnd()})});b.dialog&&e.appendChild(b.dialog);polymorph_core.loadInnerDialog.appendChild(e);l.push({div:e,instance:b})};document.body.appendChild(f);polymorph_core.showSavePreferencesDialog=function(){for(var c=$jscomp.makeIterator(l),e=c.next();!e.done;e=
c.next())e=e.value,e.instance.showDialog&&e.instance.showDialog(),e.instance.settings.save&&(e.div.querySelector("[data-role='tsync']").checked=!0),e.instance.settings.load&&(e.div.querySelector("[data-role='lsync']").checked=!0);b.load();f.style.display="block"};polymorph_core.on("UIstart",function(){polymorph_core.topbar.add("File/Preferences").addEventListener("click",function(){polymorph_core.showSavePreferencesDialog()})});f.querySelector(".cb").addEventListener("click",polymorph_core.saveUserData)})();
polymorph_core.unsaved=!1;polymorph_core.on("updateItem",function(f){f&&f.loadProcess||(polymorph_core.unsaved=!0)});window.addEventListener("beforeunload",function(f){polymorph_core.unsaved&&(f.preventDefault(),f.returnValue="Hold up, you seem to have some unsaved changes. Are you sure you want to close this window?")})})();polymorph_core.datautils={};
polymorph_core.datautils.decompress=function(f){if(f.compressions){for(var b=0;b<f.compressions.length;b++)f=polymorph_core.datautils[f.compressions[b].type].decompress(f,b);return f.items}return f};polymorph_core.datautils.precompress=function(f,b){f=JSON.parse(JSON.stringify(f));f.compressions||(f={compressions:[],items:f});f.compressions.push({type:b});return f};
polymorph_core.datautils.IDCompress={compress:function(f){function b(b){if(0==b)return"q";for(var c="",e=Math.floor(Math.log(b)/Math.log(26)),k=0;k<=e;k++)c="qwertyuiopasdfghjklzxcvbnm"[b%26]+c,b=Math.floor(b/26);return c}f=polymorph_core.datautils.precompress(f,"IDCompress");var e={};for(c in f.items)for(var l in f.items[c])e[l]||(e[l]=0),e[l]++;var c=1;f.compressions[f.compressions.length-1].keymap={};l=f.compressions[f.compressions.length-1].keymap;for(var t in e)if(t.length*e[t]>3*(e[t]+1)+t.length){for(;e[b(c)];)c++;
var v=b(c);l[v]=t;for(var q in f.items)f.items[q][t]&&(f.items[q][v]=f.items[q][t],delete f.items[q][t]);c++}return f},decompress:function(f,b){for(var e in f.items)for(var l in f.compressions[b].keymap)f.items[e][l]&&(f.items[e][f.compressions[b].keymap[l]]=f.items[e][l],delete f.items[e][l]);return f}};polymorph_core.datautils.linkSanitize=function(){for(var f in polymorph_core.items)if(polymorph_core.items[f].to)for(var b in polymorph_core.items[f].to)polymorph_core.items[b]||delete polymorph_core.items[f].to[b]};
polymorph_core.datautils.viewToItems=function(f){function b(c,f,k){var m={_rd:{}};Object.assign(m._rd,c);m._rd.ps=m._rd.p;delete m._rd.p;k?m._rd.vn=f:f&&(m._rd.p=f);var l=polymorph_core.guid(6,e);e[l]={};c.c?(b(c.c[0],l),b(c.c[1],l)):c.o&&(f=c.o.map(function(c){var k={_od:{}};Object.assign(k._od,c.opdata);k._od.t=k._od.type;delete k._od.type;l&&(k._od.p=l);c=polymorph_core.guid(6,e);e[c]=k;"subframe"==k._od.t&&b(k._od.data.rectUnderData,c);return c}),m._rd.s=f[c.s]);delete m._rd.c;delete m._rd.o;
e[l]=m;return l}var e={};for(l in f.items)e[l]=f.items[l];var l={};for(var c in f)"items"!=c&&"views"!=c&&(l[c]=f[c],l[c].lastChanged=Date.now());e._meta=l;for(var t in f.views)c=b(f.views[t],t,!0),t==e._meta.currentView&&(e._meta.currentView=c);return e};
polymorph_core.datautils.upgradeSaveData=function(f){polymorph_core.userData.documents[f]||(polymorph_core.userData.documents[f]={});polymorph_core.userData.documents[f].saveSources||(polymorph_core.userData.documents[f].saveSources=[]);if(!polymorph_core.userData.documents[f].saveSources.length){var b=[],e;for(e in polymorph_core.userData.documents[f].saveSources){var l={load:polymorph_core.userData.documents[f].loadHooks[e]?!0:!1,save:polymorph_core.userData.documents[f].saveHooks[e]?!0:!1,data:polymorph_core.userData.documents[f].saveSources[e],
type:e};"string"==typeof l.data&&(l.data={id:l.data});b.push(l)}polymorph_core.userData.documents[f].saveSources=b}};polymorph_core.newContainer=function(f,b){b?polymorph_core.items[b]._od={p:f}:b=polymorph_core.insertItem({_od:{p:f}});polymorph_core.containers[b]=new polymorph_core.container(b);return b};
polymorph_core.container=function(f){var b=this;this.id=f;polymorph_core.containers[f]=this;Object.defineProperty(this,"settings",{get:function(){return polymorph_core.items[f]._od}});Object.defineProperty(this,"rect",{get:function(){return polymorph_core.rects[b.settings.p]}});Object.defineProperty(this,"parent",{get:function(){return polymorph_core.rects[b.settings.p]}});Object.defineProperty(this,"path",{get:function(){for(var c=b,e=[];c.parent;)e.push(c.id),c=c.parent;return e}});var e={t:"opSelect",
data:{},inputRemaps:{},outputRemaps:{createItem:["createItem_"+f],deleteItem:["deleteItem_"+f],focusItem:["focusItem_"+f]},tabbarName:"New Operator"};Object.assign(e,this.settings);polymorph_core.items[f]._od=e;this.outerDiv=htmlwrap('<div style="width:100%;height:100%; background:rgba(230, 204, 255,0.1)"></div>');this.innerdiv=document.createElement("div");this.outerDiv.appendChild(this.innerdiv);this.innerdiv.id=polymorph_core.guid(12);this.shader=document.createElement("div");this.shader.style.width=
"100%";this.shader.style.height="100%";this.outerDiv.appendChild(this.shader);this.shadow=this.shader.attachShadow({mode:"open"});this.waitOperatorReady=function(c,e){var f=document.createElement("h1");f.innerHTML="Loading operator...";b.innerdiv.appendChild(f);b.shader.style.display="none";polymorph_core.operatorLoadCallbacks[c]||(polymorph_core.operatorLoadCallbacks[c]=[]);polymorph_core.operatorLoadCallbacks[c].push({op:b,data:e})};this.bulkhead=document.createElement("div");this.bulkhead.style.cssText=
"display: none; background: rgba(0,0,0,0.5); width: 100%; height: 100%; position: absolute; zIndex: 100";this.bulkhead.innerHTML='<div style="display: flex; width:100%; height: 100%;"><p style="margin:auto; color:white"></p></div>';this.outerDiv.appendChild(this.bulkhead);this.bulkhead.addEventListener("click",function(c){b.bulkhead.style.display="none";polymorph_core.submitTarget(f);c.stopPropagation()});this.visible=function(){return b.parent.containerVisible(f)};this.refresh=function(){this.operator&&
this.operator.refresh&&this.operator.refresh()};polymorph_core.addEventAPI(this);this._fire=this.fire;this.fire=function(c,e){c=c.split(",");(c.includes("createItem")||c.includes("deleteItem"))&&c.push("updateItem");c.includes("deleteItem")&&c.push("__polymorph_core_deleteItem");c.forEach(function(c){c=b.settings.outputRemaps[c]?b.settings.outputRemaps[c]:"updateItem"==c?[c,c+"_"+f]:[c+"_"+f];c.forEach(function(b){polymorph_core.fire(b,e)})})};polymorph_core.on("*",function(c,e){"documentCreated"!=
e&&b.settings&&e.forEach(function(e){void 0!=b.settings.inputRemaps[e]&&(e=b.settings.inputRemaps[e]);b._fire(e,c)})});this.remappingDiv=document.createElement("div");this.remappingDiv.innerHTML="\n    <h3>Input Remaps</h3>\n    <p>Remap calls from the polymorph_core to internal calls, to change operator behaviour.</p>\n    <p>This operator's ID: "+f+'</p>\n    <div>\n    </div>\n    <button>Add another input remap...</button>\n    <h3>Output Remaps</h3>\n    <div>\n    </div>\n    <button>Add another output remap...</button>\n    <h3>Mass import</h3>\n    <p>Type in an operator ID to import all items from that operator to this one.</p>\n    <input class="massImportOperatorID"><button class="importEverythingNow">Import now</button>\n    <datalist id="'+
f+'_firelist"></datalist>\n    ';var l=function(b){return b?htmlwrap("<p>we fire <input>, send out <input><button>x</button></p>"):htmlwrap('<p>polymorph_core fires <input>, we process<input list="'+f+'_firelist"></input><button>x</button></p>')};this.remappingDiv.addEventListener("click",function(b){"BUTTON"==b.target.tagName&&"x"==b.target.innerText&&b.target.parentElement.remove()});for(e=0;2>e;e++)this.remappingDiv.querySelectorAll("button")[e].addEventListener("click",function(c){c=c.currentTarget.innerText.includes("output")?
1:0;var e=l(c);b.remappingDiv.querySelectorAll("div")[c].appendChild(e)});this.readyRemappingDiv=function(){b.remappingDiv.children[2].innerText="This operator's ID: "+f;b.remappingDiv.querySelector("datalist").innerHTML="";for(var c in b.events)"*"!=c&&b.remappingDiv.querySelector("datalist").appendChild(htmlwrap("<option>"+c+"</option>"));for(c=0;2>c;c++)for(var e=b.remappingDiv.querySelectorAll("div")[c];e.children.length;)e.children[0].remove();var v=b.remappingDiv.querySelectorAll("div")[0];
for(q in b.settings.inputRemaps)c=l(0),c.children[0].value=q,c.children[1].value=b.settings.inputRemaps[q],v.appendChild(c);v=b.remappingDiv.querySelectorAll("div")[1];var q={};for(var k in b.settings.outputRemaps)q.i$72=k,b.settings.outputRemaps[q.i$72].length&&"string"!=typeof b.settings.outputRemaps[q.i$72]&&b.settings.outputRemaps[q.i$72].forEach(function(b){return function(c){var e=l(1);e.children[0].value=b.i$72;e.children[1].value=c;v.appendChild(e)}}(q)),q={i$72:q.i$72}};this.processRemappingDiv=
function(){b.settings.inputRemaps={};for(var c=b.remappingDiv.querySelectorAll("div")[0],e=0;e<c.children.length;e++){var f=c.children[e];b.settings.inputRemaps[f.children[0].value]=f.children[1].value}b.settings.outputRemaps={};c=b.remappingDiv.querySelectorAll("div")[1];for(e=0;e<c.children.length;e++)f=c.children[e],b.settings.outputRemaps[f.children[0].value]||(b.settings.outputRemaps[f.children[0].value]=[]),b.settings.outputRemaps[f.children[0].value].push(f.children[1].value)};this.remappingDiv.querySelector(".importEverythingNow").addEventListener("click",
function(){var c=b.remappingDiv.querySelector(".massImportOperatorID").value;if(c=polymorph_core.containers[c])for(var e in polymorph_core.items)c.operator.itemRelevant(e)&&(b._fire("createItem",{id:e,sender:b}),b._fire("updateItem",{id:e,sender:b}))});this.toSaveData=function(){b.operator&&b.operator.toSaveData&&b.operator.toSaveData();return b.settings};this.settings.p&&polymorph_core.items[this.settings.p]._rd&&(polymorph_core.rects[this.settings.p]?polymorph_core.rects[this.settings.p].tieContainer(f):
(polymorph_core.rectLoadCallbacks[this.settings.p]||(polymorph_core.rectLoadCallbacks[this.settings.p]=[]),polymorph_core.rectLoadCallbacks[this.settings.p].push(rectID)));if(polymorph_core.operators[this.settings.t]){e=polymorph_core.operators[this.settings.t].options;this.div=e.noShadow?this.innerdiv:this.shadow;this.outerDiv.style.overflowY=e.outerScroll?"auto":"hidden";try{this.operator=new polymorph_core.operators[this.settings.t].constructor(this,this.settings.data),this.operator.container=
this}catch(c){console.log(c)}}else this.waitOperatorReady(this.settings.t,this.settings._data)};
function _contextMenuManager(f){this.registerContextMenu=function(b,e,f,c){function l(b){q.getBoundingClientRect();var c=q.parentElement.getBoundingClientRect(),e=b.pageX-c.x;q.style.top=b.pageY-c.y;q.style.left=e;q.style.display="block"}function v(b){var c=q.getRootNode();try{var e=c.elementFromPoint(b.clientX,b.clientY);q.contains(e)||(q.style.display="none")}catch(y){console.log(y),document.removeEventListener("click",v)}}var q=document.createElement("div");q.innerHTML=b;q.style.cssText="display:none;";
q.classList.add("contextMenu");for(b=e;b.parentElement;)b=b.parentElement;b.appendChild(q);var k=function(b){b.preventDefault();c?c(b)&&l(b):l(b)};e.addEventListener("contextmenu",function(b){f?(b.target.matches(f)||b.target.matches(f+" *"))&&k(b):k(b)});document.addEventListener("mousedown",v);e=document.createElement("style");e.innerHTML=".contextMenu {\n            list-style: none;\n            background: white;\n            box-shadow: 0px 0px 5px black;\n            user-select: none;\n            position: absolute;\n            z-index:1000;\n        }\n        .contextMenu li {\n            position:relative;\n            padding: 2px;\n            display: block;\n        }\n        .contextMenu li:hover {\n            background:pink;\n        }\n        .contextMenu li>ul {\n            display:none;\n        }\n        .contextMenu li:hover>ul {\n            display: block;\n            position: absolute;\n            left: 100%;\n            margin: 0;\n            top: 0;\n            padding: 0;\n            background: white;\n            width: max-content;\n        }\n        ";
q.appendChild(e);return q}}
polymorph_core.showContextMenu=function(f,b,e){f._tempCtxSettings=b;var l=polymorph_core.currentDoc.globalContextMenuOptions||[];l.push.apply(l,e);b=f;do b instanceof polymorph_core.container&&l.push.apply(l,f.settings.commandStrings),b=b.parent;while(b&&b!=polymorph_core);var c=function(b,c,e,m){m=void 0===m?polymorph_core.items[f._tempCtxSettings.id]:m;e&&(b=b.slice(b.indexOf(".")+1));b=b.split(".");for(e=0;e<b.length-1;e++)m[b[e]]||(m[b[e]]={}),m=m[b[e]];m[b[b.length-1]]=c;polymorph_core.fire("updateItem",
{id:f._tempCtxSettings.id})};if(f.cacheCTXMenuStrings==JSON.stringify(l))var t=f.ctxMenuCache;else t=htmlwrap('<div class="_ctxbox_">\n        <style>\n        div._ctxbox_{\n            background:white\n        }\n        div._sctxbox_{\n            position:absolute;\n            left: 100%;\n            top:0;\n            display:none;\n            background:white;\n        }\n        div:hover>div._sctxbox_{\n            display:block;\n        }\n        </style>\n        </div>'),l.map(function(b,
c){var e=t;b=b.split("::");for(var m=0;m<b.length;m++)if(-1==b[m].indexOf("."))_cctx=e.querySelector('[data-name="'+b[m]+'"]'),_cctx||(_cctx=htmlwrap('<div class="_ctxbox_" data-name="'+b[m]+'"><span>'+b[m]+'</span><div class="_sctxbox_"></div></div>'),e.appendChild(_cctx)),e=_cctx.children[1];else{null!=/^item.edit\(.+\)$/.exec(b[m])&&(e=e.parentElement,e.children[0].remove(),e.insertBefore(htmlwrap('<input style="display:block;" data-property="'+/item.edit\((.+)\)/.exec(b[m])[1]+'" placeholder="'+
b[m-1]+'"></input>'),e.children[0]));break}e.dataset.index=c}),t.addEventListener("click",function(b){if(b.target.parentElement.dataset.index){for(var e=l[b.target.parentElement.dataset.index].split("::"),k=0;k<e.length;k++)if(-1!=e[k].indexOf(".")){e.splice(0,k);e=e.join("::");break}k=e.split(".")[0];var m=e.split(".")[1];switch(k){case "polymorph_core":LHS=polymorph_core;break;case "item":LHS=polymorph_core.items[f._tempCtxSettings.id];break;case "operator":LHS=f.operator;break;default:return}if(-1!=
e.slice(e.indexOf(".")+1).indexOf("="))k=e.slice(e.indexOf("=")+1),e=e.slice(e.indexOf(".")+1,e.indexOf("=")),-1!=k.indexOf("(")?c(e,eval("function __CTX_evaluator(e,container){"+k+"}")(f._tempCtxSettings,f),!1,LHS):c(e,k,!1,LHS);else if("item"!=k)LHS.ctxCommands[m](f._tempCtxSettings,f)}"INPUT"!=b.target.tagName&&(t.style.display="none")}),t.addEventListener("input",function(b){var e=!1;b.target.dataset.property.startsWith("item")&&(e=!0);c(b.target.dataset.property,b.target.value,e)}),f.ctxMenuCache=
t,f.cacheCTXMenuStrings=JSON.stringify(l),document.body.addEventListener("mousedown",function(b){b.path.includes(t)||(t.style.display="none")});document.body.appendChild(f.ctxMenuCache);f.ctxMenuCache.style.display="block";f.ctxMenuCache.style.position="absolute";f.ctxMenuCache.style.top=polymorph_core._contextMenuData.mouseY;f.ctxMenuCache.style.left=polymorph_core._contextMenuData.mouseX;Array.from(f.ctxMenuCache.querySelectorAll("input")).forEach(function(b){var c=b.dataset.property,e=c.split("."),
m=polymorph_core.items[f._tempCtxSettings.id];c.startsWith("item")&&e.shift();for(c=0;c<e.length;c++){if(!m[e[c]]){m="";break}m=m[e[c]]}b.value=m})};polymorph_core.ctxCommands={deleteItem:function(f,b){b._fire("deleteItem",{id:f.id})}};
polymorph_core.container.prototype.registerContextMenu=function(f,b){var e=this;f.addEventListener("contextmenu",function(l){var c=b(l.target);if(c){l.preventDefault();var t=f.getRootNode().host.getBoundingClientRect();c.e.x=l.clientX-t.x;c.e.y=l.clientY-t.y;polymorph_core.showContextMenu(e,c.e,c.ls)}})};polymorph_core._contextMenuData={};document.addEventListener("mousemove",function(f){polymorph_core._contextMenuData.mouseX=f.clientX;polymorph_core._contextMenuData.mouseY=f.clientY});
polymorph_core.on("UIstart",function(){var f=htmlwrap("\n    <div>\n        <h2>Context menu settings</h2>\n        <textarea></textarea>\n    </div>\n    ");polymorph_core.on("updateSettings",function(){polymorph_core.currentDoc.globalContextMenuOptions||(polymorph_core.currentDoc.globalContextMenuOptions=["Style::Item Background::item.edit(item.style.background)","Style::Text color::item.edit(item.style.color)"]);f.querySelector("textarea").value=polymorph_core.currentDoc.globalContextMenuOptions.join("\n")});
f.querySelector("textarea").addEventListener("input",function(){polymorph_core.currentDoc.globalContextMenuOptions=f.querySelector("textarea").value.split("\n")});polymorph_core.topbar.add("File");polymorph_core.topbar.add("Settings/Context menu").addEventListener("click",function(){polymorph_core.dialog.prompt(f)})});polymorph_core.isLinked=function(f,b){var e=0;polymorph_core.items[f].to&&polymorph_core.items[f].to[b]&&(e+=1);polymorph_core.items[b].to&&polymorph_core.items[b].to[f]&&(e+=2);return e};
polymorph_core.link=function(f,b,e){e=void 0===e?{}:e;1==e&&(e={undirected:!0});var l=e.toProp||"to",c=e.fromProp,t=e.undirected;polymorph_core.items[f][l]=polymorph_core.items[f][l]||{};polymorph_core.items[f][l][b]=polymorph_core.items[f][l][b]||!0;c&&(polymorph_core.items[b][c]=polymorph_core.items[b][c]||{},polymorph_core.items[b][c][f]=polymorph_core.items[b][c][f]||!0);t&&polymorph_core.link(b,f,e)};
polymorph_core.unlink=function(f,b,e){e=void 0===e?{}:e;1==e&&(e={undirected:!0});var l=e.toProp||"to",c=e.fromProp;e=e.undirected;polymorph_core.items[f][l]=polymorph_core.items[f][l]||{};delete polymorph_core.items[f][l][b];c&&(polymorph_core.items[b][c]=polymorph_core.items[b][c]||{},delete polymorph_core.items[b][c][f]);e&&polymorph_core.unlink(b,f)};
polymorph_core.operatorTemplate=function(f,b){var e=this;this.container=f;Object.defineProperty(this,"settings",{get:function(){return f.settings.data}});Object.assign(b,this.settings);this.settings={};Object.assign(this.settings,b);this.rootdiv=document.createElement("div");this.rootdiv.style.height="100%";this.rootdiv.style.overflow="auto";f.div.appendChild(this.rootdiv);this.createItem=function(b){var c={};b||(b=polymorph_core.insertItem(c));e.settings.filter&&(polymorph_core.items[b][e.settings.filter]=
!0);return b};this.deleteItem=function(b){delete polymorph_core.items[b][e.settings.filter]};this.itemRelevant=function(b){return""==e.settings.filter?!0:void 0!=polymorph_core.items[b][e.settings.filter]?!0:!1}};
polymorph_core.initiateDragDrop=function(f,b){if(!polymorph_core._dragdropdata.tempItemDiv){var e={x:polymorph_core._dragdropdata.mouseX,y:polymorph_core._dragdropdata.mouseY,property:"title",displayText:void 0,sender:void 0};Object.assign(e,b);b=htmlwrap('<div style="position:absolute; top:'+e.y+"px; left: "+e.x+'px;"></div>');b.innerText=polymorph_core.items[f][e.property];document.body.appendChild(b);polymorph_core._dragdropdata.tempItemDiv=b;e.itemID=f;polymorph_core._dragdropdata.settings=e}};
polymorph_core._dragdropdata={};document.addEventListener("mousemove",function(f){polymorph_core._dragdropdata.mouseX=f.clientX;polymorph_core._dragdropdata.mouseY=f.clientY;polymorph_core._dragdropdata.tempItemDiv&&(polymorph_core._dragdropdata.tempItemDiv.style.top=f.clientY,polymorph_core._dragdropdata.tempItemDiv.style.left=f.clientX)});
document.addEventListener("mouseup",function(f){if(polymorph_core._dragdropdata.tempItemDiv){polymorph_core._dragdropdata.tempItemDiv.remove();for(var b=document.elementFromPoint(f.clientX,f.clientY);b.shadowRoot;)b=b.shadowRoot.elementFromPoint(f.clientX,f.clientY);console.log(b);f=b.getRootNode().host.parentElement.parentElement.dataset.containerid;console.log(f);b=polymorph_core._dragdropdata.settings;f!=b.sender&&(polymorph_core.containers[f]._fire("createItem",{id:b.itemID,sender:"dragdrop"}),
polymorph_core.operators[polymorph_core.containers[f].settings.t].options.single_store||polymorph_core.containers[b.sender]._fire("deleteItem",{id:b.itemID,sender:"dragdrop"}),delete polymorph_core._dragdropdata.tempItemDiv)}});var RECT_ORIENTATION_X=0,RECT_ORIENTATION_Y=1,RECT_FIRST_SIBLING=0,RECT_SECOND_SIBLING=1,RECT_BORDER_WIDTH=5,RECT_OUTER_DIV_COLOR="rgba(230, 204, 255,0.1)",RECT_BORDER_COLOR="transparent";
polymorph_core.newRect=function(f,b){b?polymorph_core.items[b]._rd={p:f,f:RECT_FIRST_SIBLING,x:RECT_ORIENTATION_X,ps:1}:b=polymorph_core.insertItem({_rd:{p:f,f:RECT_FIRST_SIBLING,x:RECT_ORIENTATION_X,ps:1}});polymorph_core.rects[b]=new polymorph_core.rect(b);return b};
polymorph_core.rect=function(f){var b=this;this.id=f;polymorph_core.rects[f]=this;Object.defineProperty(this,"settings",{get:function(){return polymorph_core.items[f]._rd}});Object.defineProperty(this,"childrenIDs",{get:function(){b._childrenIDs||(b._childrenIDs=[]);if(2==b._childrenIDs.length&&polymorph_core.items[b._childrenIDs[0]]&&polymorph_core.items[b._childrenIDs[0]]._rd&&polymorph_core.items[b._childrenIDs[1]]&&polymorph_core.items[b._childrenIDs[1]]._rd)return b._childrenIDs;b._childrenIDs=
[];for(var c in polymorph_core.items)polymorph_core.items[c]._rd&&polymorph_core.items[c]._rd.p==f&&b._childrenIDs.push(c);if(2==b._childrenIDs.length)return b._childrenIDs}});Object.defineProperty(this,"children",{get:function(){if(b.childrenIDs&&polymorph_core.rects[b.childrenIDs[0]]&&polymorph_core.rects[b.childrenIDs[1]])return[polymorph_core.rects[b.childrenIDs[0]],polymorph_core.rects[b.childrenIDs[1]]]}});Object.defineProperty(this,"containerids",{get:function(){b._containerids=[];for(var c in polymorph_core.items)polymorph_core.items[c]._od&&
polymorph_core.items[c]._od.p==f&&b._containerids.push(c);return b._containerids}});Object.defineProperty(this,"containers",{get:function(){if(b.containerids)return b.containerids.map(function(b){return polymorph_core.containers[b]})}});Object.defineProperty(this,"parent",{get:function(){if(b.settings.p){if(polymorph_core.rects[b.settings.p])return polymorph_core.rects[b.settings.p];if(polymorph_core.containers[b.settings.p])return polymorph_core.containers[b.settings.p]}else return polymorph_core}});
Object.defineProperty(this,"otherSiblingID",{get:function(){if(b._otherSiblingID&&polymorph_core.items[b._otherSiblingID]._rd&&polymorph_core.items[b._otherSiblingID]._rd.p==b.settings.p&&b._otherSiblingID!=f)return b._otherSiblingID;for(var c in polymorph_core.items)if(polymorph_core.items[c]._rd&&polymorph_core.items[c]._rd.p==b.settings.p&&c!=f)return b._otherSiblingID=c,b._otherSiblingID}});Object.defineProperty(this,"otherSiblingSettings",{get:function(){return polymorph_core.items[b.otherSiblingID]._rd}});
Object.defineProperty(this,"otherSibling",{get:function(){return polymorph_core.rects[b.otherSiblingID]}});this.resizing=this.split=-1;this.outerDiv=document.createElement("div");this.outerDiv.style.cssText="\n        position: absolute;\n        box-sizing: border-box;\n        height: 100%; width:100%;\n        overflow: hidden;\n        display:flex;\n        flex-direction:column;\n        border-radius:5px;\n        background: "+RECT_OUTER_DIV_COLOR+"\n    ";this.createTabSpan=function(b){var c=
document.createElement("span"),e=document.createElement("button"),k=document.createElement("button"),m=document.createElement("img");e.style.cssText=k.style.cssText="\n        background: unset;\n        color:unset;\n        border:unset;\n        cursor:pointer;\n        padding: 5px;\n        ";k.style.cssText+="color:red;font-weight:bold; font-style:normal";k.innerText="x";k.style.display="none";m.src="assets/gear.png";m.style.cssText="width: 1em; height:1em;";m.style.display="none";c.style.cssText=
"\n        border: 1px solid black;\n        background: #C074E8;\n        color: white;\n        align-items: center;\n        display: inline-flex;\n        margin-right: 0.1em;\n        border-radius: 3px;\n        ";c.appendChild(e);c.appendChild(k);c.appendChild(m);c.dataset.containerid=b;return c};this.tabbar=document.createElement("p");this.tabbar.style.cssText="display:block;margin:0; width:100%;background:"+RECT_OUTER_DIV_COLOR;this.plus=document.createElement("button");this.plus.style.cssText=
"color:blue;font-weight:bold; font-style:normal";this.plus.innerText="+";this.tabbar.appendChild(this.plus);this.outerDiv.appendChild(this.tabbar);this.createInnerDiv=function(b){var c=document.createElement("div");c.style.cursor="default";c.style.height="100%";c.style.width="100%";c.style.overflow="hidden";c.style.background=RECT_OUTER_DIV_COLOR;c.style.display="none";c.dataset.containerid=b;return c};this.innerDivContainer=htmlwrap('<div style="flex:1 1 auto; overflow-y:auto; width:100%; "></div>');
this.outerDiv.appendChild(this.innerDivContainer);this.tieContainer=function(c,e){var f=polymorph_core.containers[c];if(f){void 0==e&&(e=b.tabbar.children.length-1);var k=b.tabbar.querySelector('span[data-containerid="'+c+'"]');k&&(k.remove(),e--);k=b.createTabSpan(c);k.children[0].innerText=f.settings.tabbarName;b.tabbar.insertBefore(k,b.tabbar.children[e]);(k=b.innerDivContainer.querySelector('div[data-containerid="'+c+'"]'))&&k.remove();k=b.createInnerDiv(c);k.appendChild(f.outerDiv);b.innerDivContainer.insertBefore(k,
b.innerDivContainer.children[e]);f.operator&&f.operator.refresh&&f.operator.refresh();c==b.settings.s&&b.switchOperator(b.settings.s)}else console.log("Ack!")};this.switchOperator=function(c){if(!b.innerDivContainer.querySelector('div[data-containerid="'+c+'"]'))return!1;b.settings.s=c;for(var e=0;e<b.innerDivContainer.children.length;e++)b.innerDivContainer.children[e].style.display="none";b.innerDivContainer.querySelector('div[data-containerid="'+c+'"]').style.display="block";for(e=0;e<b.tabbar.children.length-
1;e++)b.tabbar.children[e].children[1].style.display="none",b.tabbar.children[e].children[2].style.display="none",b.tabbar.children[e].style.background="#C074E8";e=b.tabbar.querySelector('span[data-containerid="'+c+'"]');e.children[1].style.display="inline";e.children[2].style.display="inline";e.style.background="#8093FF";polymorph_core.containers[c].refresh();polymorph_core.containers[b.settings.s].refresh();return!0};this.plus.addEventListener("click",function(c){c.getModifierState("Shift")&&b.parent instanceof
polymorph_core.rect?confirm("WARNING: You are about to delete this rect and all its containers. THIS CAN HAVE SERIOUS CONSEQUENCES. Are you sure you want to do this?")&&(c=b.parent.children.indexOf(b),c=b.parent.children[!c+0],b.parent.outerDiv.parentElement.insertBefore(c.outerDiv,b.parent.outerDiv),Object.assign(c.settings,b.parent.settings),c.settings.p=b.parent.settings.p,b.parent.outerDiv.remove(),c.refresh(),c=b.parent.id,delete polymorph_core.rects[c],delete polymorph_core.items[c]._rd,delete polymorph_core.rects[f],
delete polymorph_core.items[f]._rd):(c=polymorph_core.insertItem({_od:{t:"opSelect",p:f}}),polymorph_core.containers[c]=new polymorph_core.container(c),b.switchOperator(c))});this.tabbar.addEventListener("click",function(c){for(c=c.target;c!=b.tabbar;){if(c.dataset.containerid){b.switchOperator(c.dataset.containerid);break}c=c.parentElement}});this.tabbar.addEventListener("click",function(c){if("button"==c.target.tagName.toLowerCase()&&"x"==c.target.innerText&&"SPAN"==c.target.parentElement.tagName&&
confirm("Warning: closing operators is irreversible and may lead to data loss. Continue?")){var e=c.target.parentElement.dataset.containerid;c.target.parentElement.remove();c=b.innerDivContainer.querySelector('[data-containerid="'+e+'"]');if(c.previousElementSibling)var f=c.previousElementSibling.dataset.containerid;else c.nextElementSibling&&(f=c.nextElementSibling.dataset.containerid);c.remove();b.switchOperator(f);delete polymorph_core.containers[e];delete polymorph_core.items[e]._od}});this.tabbar.addEventListener("mousedown",
function(c){for(c=c.target;c!=b.tabbar;)c.dataset.containerid&&(b.pulledDiv=c,b.startPulling=!1),c=c.parentElement});document.addEventListener("mousemove",function(c){if(b.pulledDiv)if(b.startPulling){b.pulledDiv.style.position="absolute";b.pulledDiv.style.display="flex";var e=b.tabbar.getBoundingClientRect();b.pulledDiv.style.left=c.clientX-e.left+"px";b.pulledDiv.style.top=0}else for(e=0;e<c.path.length&&c.path[e]!=b.pulledDiv;e++)c.path[e]==b.pulledDiv.parentElement&&(b.startPulling=!0)});document.addEventListener("mouseup",
function(c){if(b.pulledDiv){var e=b.tabbar.getBoundingClientRect();c=b.tabbar.getRootNode().elementsFromPoint(c.clientX,e.top);b.pulledDiv.style.display="inline-flex";b.pulledDiv.style.position="static";if("SPAN"==c[1].tagName){e=Array.from(b.tabbar.children);var f=e.indexOf(b.pulledDiv);e.indexOf(c[1])<f?b.tabbar.insertBefore(b.pulledDiv,c[1]):b.tabbar.insertBefore(b.pulledDiv,c[1].nextElementSibling)}b.settings.containerOrder=Array.from(b.tabbar.children).map(function(b){return b.dataset.containerid});
b.settings.containerOrder.pop();b.pulledDiv=void 0}});document.addEventListener("keydown",function(c){c.getModifierState("Shift")&&(b.plus.innerText="x",b.plus.style.color="red")});document.addEventListener("keyup",function(c){c.getModifierState("Shift")||(b.plus.innerText="+",b.plus.style.color="blue")});var e=void 0;var l=(new _contextMenuManager(this.outerDiv)).registerContextMenu('\n    <li>Subframing\n        <ul class="submenu">\n            <li class="subframe">Subframe Contents</li>\n            <li class="subframePR">Subframe Parent Rect</li>\n        </ul>\n    </li>\n    <li>Export/Import\n    <ul class="submenu">\n        <li class="cpfr">Copy frame settings</li>\n        <li class="psfr">Paste frame settings</li>\n        \x3c!--\n        <li class="xpfr">Export frame to text...</li>\n        <li class="mpfr">Import frame from text...</li>\n        <li class="xdoc">Export frame as document...</li>\n        --\x3e\n    </ul>\n    </li>\n    ',
this.tabbar,void 0,function(c){for(c=c.target;c!=b.tabbar&&"SPAN"!=c.tagName;)c=c.parentElement;e=c.dataset.containerid;b.parent instanceof polymorph_core.rect?l.querySelector(".subframePR").style.display="block":l.querySelector(".subframePR").style.display="none";return!0});l.querySelector(".subframePR").addEventListener("click",function(){for(var c=polymorph_core.insertItem({_od:{t:"subframe",p:f,data:{},outputRemaps:{},inputRemaps:{},tabbarName:polymorph_core.containers[e].settings.tabbarName}}),
v=new polymorph_core.container(c),q=!1;1<b.innerDivContainer.children.length;){var k=b.innerDivContainer.children[0].dataset.containerid;k==c&&(q=!0);q&&(k=b.innerDivContainer.children[1].dataset.containerid);b.tabbar.querySelector('[data-containerid="'+k+'"]').remove();b.innerDivContainer.querySelector('[data-containerid="'+k+'"]').remove();v.operator.rect.tieContainer(k);polymorph_core.containers[k].settings.p=v.operator.rect.id}b.tieContainer(v,e);b.switchOperator(c);v.operator.rect.switchOperator(e);
polymorph_core.fire("updateItem",{id:f,sender:b});l.style.display="none"});l.querySelector(".subframe").addEventListener("click",function(){var c=polymorph_core.insertItem({_od:{t:"subframe",p:f,data:{},outputRemaps:{},inputRemaps:{},tabbarName:polymorph_core.containers[e].settings.tabbarName}}),v=new polymorph_core.container(c);b.tabbar.querySelector('[data-containerid="'+e+'"]').remove();b.innerDivContainer.querySelector('[data-containerid="'+e+'"]').remove();b.tieContainer(v,e);var q=polymorph_core.containers[e];
v.operator.rect.tieContainer(e,0);q.settings.p=v.operator.rect.id;polymorph_core.fire("updateItem",{id:f,sender:b});b.switchOperator(c);v.operator.rect.switchOperator(e);l.style.display="none"});l.querySelector(".cpfr").addEventListener("click",function(){polymorph_core.copiedFrameID=e;l.style.display="none"});l.querySelector(".psfr").addEventListener("click",function(){var c=e;b.tabbar.querySelector('[data-containerid="'+c+'"]').remove();b.innerDivContainer.querySelector('[data-containerid="'+c+
'"]').remove();delete polymorph_core.containers[c];delete polymorph_core.items[c]._od;c=polymorph_core.insertItem(JSON.parse(JSON.stringify(polymorph_core.items[polymorph_core.copiedFrameID])));polymorph_core.items[c]._od.p=f;polymorph_core.items[c]._od.data.operatorClonedFrom=polymorph_core.copiedFrameID;polymorph_core.containers[e]=new polymorph_core.container(c);polymorph_core.fire("updateItem",{id:f,sender:b});b.switchOperator(c);l.style.display="none"});this.tabbar.addEventListener("click",function(c){"img"==
c.target.tagName.toLowerCase()&&(polymorph_core.containers[b.settings.s].operator.dialogDiv?(b.settingsOperator=polymorph_core.containers[b.settings.s].operator,b.settingsOperator.showDialog(),b.settingsDiv=document.createElement("div"),b.settingsDiv.innerHTML='<h1>Settings</h1>\n                <h3> General settings </h3>\n                <input class="tabDisplayName" placeholder="Tab display name:"/>\n                <h3>Operator settings</h3>',b.settingsOperator.dialogDiv.style.maxWidth="50vw",
b.settingsDiv.appendChild(b.settingsOperator.dialogDiv),b.settingsDiv.querySelector(".tabDisplayName").value=b.tabbar.querySelector('[data-containerid="'+b.settings.s+'"]').children[0].innerText,polymorph_core.containers[b.settings.s].readyRemappingDiv(),b.settingsDiv.appendChild(polymorph_core.containers[b.settings.s].remappingDiv),polymorph_core.dialog.prompt(b.settingsDiv,function(c){polymorph_core.containers[b.settings.s].settings.tabbarName=c.querySelector("input.tabDisplayName").value;b.tabbar.querySelector('[data-containerid="'+
b.settings.s+'"]').children[0].innerText=polymorph_core.containers[b.settings.s].settings.tabbarName;b.settingsOperator.dialogUpdateSettings&&b.settingsOperator.dialogUpdateSettings();polymorph_core.containers[b.settings.s].processRemappingDiv();polymorph_core.fire("updateItem",{id:f})})):polymorph_core.containers[b.settings.s].operator.showSettings&&polymorph_core.containers[b.settings.s].operator.showSettings())});this.refresh=function(){if(b.settings.f==RECT_FIRST_SIBLING||b.otherSiblingID){b.settings.x==
RECT_ORIENTATION_X?(b.settings.f==RECT_FIRST_SIBLING?(b.outerDiv.style.left=0,b.outerDiv.style.width=b.outerDiv.parentElement.offsetWidth*b.settings.ps):(b.outerDiv.style.left=b.outerDiv.parentElement.offsetWidth*b.otherSiblingSettings.ps,b.outerDiv.style.width=b.outerDiv.parentElement.offsetWidth*(1-b.otherSiblingSettings.ps)),b.outerDiv.style.height=b.outerDiv.parentElement.offsetHeight,b.outerDiv.style.top=0):(b.settings.f==RECT_FIRST_SIBLING?(b.outerDiv.style.top=0,b.outerDiv.style.height=b.outerDiv.parentElement.offsetHeight*
b.settings.ps):(b.outerDiv.style.top=b.outerDiv.parentElement.offsetHeight*b.otherSiblingSettings.ps,b.outerDiv.style.height=b.outerDiv.parentElement.offsetHeight*(1-b.otherSiblingSettings.ps)),b.outerDiv.style.width=b.outerDiv.parentElement.offsetWidth,b.outerDiv.style.left=0);if(b.children)b.outerDiv.style.border="",b.children.forEach(function(b){b.outerDiv.parentElement&&b.refresh()});else{b.switchOperator(b.settings.s);b.settings.containerOrder&&(b.settings.containerOrder.forEach(function(c){(c=
b.tabbar.querySelector("[data-containerid='"+c+"']"))&&b.tabbar.appendChild(c)}),b.tabbar.appendChild(b.plus));for(var c in b.tabbar.length);}b.containers&&b.containers.forEach(function(b){b&&b.refresh()})}else console.log("refresh assert failed for "+f)};var c=!1;this.outerDiv.style.border=RECT_BORDER_WIDTH+("px "+RECT_BORDER_COLOR+" solid");this.rectsTied=[];this.tieRect=function(c){b.innerDivContainer.remove();b.tabbar.remove();b.outerDiv.appendChild(polymorph_core.rects[c].outerDiv);polymorph_core.rects[c].refresh();
b.rectsTied.push(c);if(2<b.rectsTied.length){console.log("multiple rect ties BAD; arbitration in progress");c=$jscomp.makeIterator(b.rectsTied);for(var e=c.next();!e.done;e=c.next())e=e.value,console.log(e),console.log(polymorph_core.items[e]._rd)}};this.containerVisible=function(c){return b.parent?b.settings.s==c&&(b.parent==polymorph_core||b.parent.visible()):!1};this.visible=function(){return b.parent==polymorph_core?!0:b.parent.visible()};this.mouseMoveHandler=function(e){if(b.children)b.children[0].mouseMoveHandler(e),
b.children[1].mouseMoveHandler(e);else{var l=-1,q=b.outerDiv.getClientRects()[0];0<=e.clientX-q.left&&0<=q.left+q.width-e.clientX&&0<=e.clientY-q.top&&0<=q.top+q.height-e.clientY&&(e.clientX-q.left<=RECT_BORDER_WIDTH&&0<=e.clientX-q.left?l=0:q.left+q.width-e.clientX<=RECT_BORDER_WIDTH&&0<=q.left+q.width-e.clientX?l=1:e.clientY-q.top<=RECT_BORDER_WIDTH&&0<=e.clientY-q.top?l=2:q.top+q.height-e.clientY<=RECT_BORDER_WIDTH&&0<=q.top+q.height-e.clientY&&(l=3));if(-1!=b.split&&b.split!=l){if(!(e.buttons%
2)){b.split=-1;e.preventDefault();return}e.preventDefault();for(b.outerDiv.style.border="none";b.outerDiv.children.length;)b.outerDiv.children[0].remove();q=1*(1<b.split);var k=b.split%2,m=[polymorph_core.insertItem({_rd:{p:f,x:q,f:0,ps:k}}),polymorph_core.insertItem({_rd:{p:f,x:q,f:1,ps:k}})];m.forEach(function(b){polymorph_core.rects[b]=new polymorph_core.rect(b)});b.containers.forEach(function(b,c){b.settings.p=m[1*!k];polymorph_core.rects[m[1*!k]].tieContainer(b.id);polymorph_core.rects[m[1*!k]].settings.s=
b.id});b.children.forEach(function(c){c.refresh();c.resizing=b.split^1})}if(-1!=b.resizing){if(!(e.buttons%2)||b.resizing!=2*b.settings.x+!b.settings.f){b.resizing=-1;e.preventDefault();return}e.preventDefault();b.settings.ps=b.settings.x?(e.clientY-b.outerDiv.parentElement.getClientRects()[0].top)/b.outerDiv.parentElement.getClientRects()[0].height:(e.clientX-b.outerDiv.parentElement.getClientRects()[0].left)/b.outerDiv.parentElement.getClientRects()[0].width;0>b.settings.ps&&(b.settings.ps=0,b.resizing=
-1);1<b.settings.ps&&(b.settings.ps=1,b.resizing=-1);b.parent instanceof polymorph_core.rect&&(b.otherSiblingSettings.ps=b.settings.ps,b.refresh(),b.otherSibling&&b.otherSibling.refresh());e.preventDefault();c=!0}e=["left","right","top","bottom"];b.borderInvalidated&&(b.outerDiv.style.border=b.children?"":RECT_BORDER_WIDTH+("px "+RECT_BORDER_COLOR+" solid"),b.borderInvalidated=!1);-1==l||b.children||(b.outerDiv.style["border-"+e[l]]=RECT_BORDER_WIDTH+"px red solid",b.borderInvalidated=!0)}};this.outerDiv.addEventListener("mousemove",
this.mouseMoveHandler);this.mouseUpHandler=function(e){b.resizing=-1;b.children&&(b.children[0].mouseUpHandler(e),b.children[1].mouseUpHandler(e));c&&(polymorph_core.fire("updateItem",{id:f,sender:b}),c=!1)};this.outerDiv.addEventListener("mouseup",this.mouseUpHandler);this.outerDiv.addEventListener("mouseleave",function(){b.outerDiv.style.border=b.children?"":RECT_BORDER_WIDTH+("px "+RECT_BORDER_COLOR+" solid");b.split=-1});this.outerDiv.addEventListener("mousedown",function(c){var e=-1,f=b.outerDiv.getClientRects()[0];
c.clientX-f.left<=RECT_BORDER_WIDTH&&0<=c.clientX-f.left?e=0:f.left+f.width-c.clientX<=RECT_BORDER_WIDTH&&0<=f.left+f.width-c.clientX?e=1:c.clientY-f.top<=RECT_BORDER_WIDTH&&0<=c.clientY-f.top?e=2:f.top+f.height-c.clientY<=RECT_BORDER_WIDTH&&0<=f.top+f.height-c.clientY&&(e=3);c.shiftKey?b.split=e:b.resizing=e});this.toSaveData=function(){return b.settings};this.settings.p&&polymorph_core.items[this.settings.p]&&(polymorph_core.rects[this.settings.p]?polymorph_core.rects[this.settings.p].tieRect(f):
(polymorph_core.rectLoadCallbacks[this.settings.p]||(polymorph_core.rectLoadCallbacks[this.settings.p]=[]),polymorph_core.rectLoadCallbacks[this.settings.p].push(f)));polymorph_core.rectLoadCallbacks[f]&&polymorph_core.rectLoadCallbacks[f].forEach(function(c){polymorph_core.items[c]._od?b.tieContainer(c):b.tieRect(c)})};Object.defineProperty(polymorph_core,"baseRect",{get:function(){try{return polymorph_core.rects[polymorph_core.items._meta.currentView]}catch(f){}}});polymorph_core.rects={};
function _topbar(f,b){var e=this;this.node=document.createElement("ul");this.node.classList.add("topbar");document.querySelector("style.topbar")||(b=document.createElement("style"),b.classList.add("topbar"),b.innerHTML="\n        /*General styling*/\n        ul.topbar, ul.topbar ul {\n            list-style-type: none;\n            margin: 0;\n            padding: 0;\n            background: black;\n            overflow: auto;\n            font-size: 1em;\n            z-index: 1000;\n        }\n        \n        ul.topbar li>a {\n            user-select: none;\n            cursor: pointer;\n            display: inline-block;\n            z-index: 1000;\n        }\n\n        ul.topbar li{\n            background:black;\n        }\n\n        ul.topbar li:hover{\n            background-color: lightskyblue;\n            z-index: 1000;\n        }\n\n        /*Top level specific styling*/\n        ul.topbar>li>a{\n            color: white;\n            text-align: center;\n            text-decoration: none;\n            padding: 0.5em 16px;\n            z-index: 1000;\n        }\n        \n        ul.topbar>li{\n            float:left;\n            background:black;\n            z-index: 1000;\n        }\n\n        ul.topbar>li>ul {\n            font-size: 1em;\n            z-index: 1000;\n        }\n        /*sublist specific styling*/\n        ul.topbar ul {\n            display: none;\n            color:black;\n            text-align:left;\n            position: absolute;\n            background-color: #f9f9f9;\n            z-index: 1;\n            list-style: none;\n            z-index: 1000;\n        }\n        \n        ul.topbar>li:hover>ul {\n            display: block;\n            z-index: 1000;\n        }\n\n        ul.topbar ul>li>a{\n            display:block;\n            color:white;\n            padding: 0.5em;\n            z-index: 1000;\n        }\n        ",
this.node.appendChild(b));f&&f.appendChild(this.node);var l=function(b,e,f){var c=document.createElement("a"),k=document.createElement("li");k.dataset.topbarname=f;c.appendChild(b);k.appendChild(c);e.appendChild(k);return k};this.add=this.appendChild=function(b,f){"string"!=typeof b&&(f=b,b="");b=b.split("/");f||(f=document.createElement("a"),f.innerText=b[b.length-1]);for(var c=e.node;1<b.length;){var q=b.shift();if(q){var k=c.querySelector('[data-topbarname="'+q+'"]>ul');k?c=k:(k=c.querySelector('[data-topbarname="'+
q+'"]'),k||(k=document.createElement("a"),k.innerText=q,k=l(k,c,q)),c=document.createElement("ul"),k.appendChild(c))}}if(!c.querySelector('[data-topbarname="'+b[0]+'"]'))return l(f,c,b[0])}}
polymorph_core.on("UIsetup",function(){document.body.appendChild(htmlwrap("\n    <style>\n    #popup-notification {\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        padding: 10px 20px;\n        font-size: 18px;\n        line-height: 1;\n        background: #000;\n        color: white;\n        opacity: 0;\n        visibility: hidden;\n        pointer-events: none;\n    }\n    #popup-notification.success {\n        background: green;\n    }\n    #popup-notification.alert {\n        background: red;\n    }\n\n    .showAndFadeOut {\n        transition: opacity visibility 3s;\n        animation: showAndFadeOut 3s;\n    }\n\n    @keyframes showAndFadeOut {\n        0% {opacity: 1; visibility: visible;}\n        80% {opacity: 1; visibility: visible;}\n        100% {opacity: 0; visibility: hidden;}\n    }\n\n    @keyframes precessBackground {\n        0% {background-position-x: 0%}\n        100% {background-position-x: 100%}\n    }\n    </style>"));document.body.appendChild(htmlwrap('\n    <div style="display:flex; flex-direction:column; height:100%">\n        <div class="banner">\n            <div class="installPrompt" style="right: 0;position: absolute;top: 0;display:none"><button>Install our desktop app! It\'s free!</button></div>\n            <div class="gdrivePrompt" style="right: 0;position: absolute;top: 0;display:none"><button>Try our Google Drive app for quick access to your files!</button></div>\n            \x3c!--<button class="sharer" style="background:blueviolet; border-radius:3px; border:none; padding:3px; color:white; position:absolute; top: 10px; right: 10px;">Share</button>--\x3e\n        </div>\n        <div class="rectspace" style="width:100%; background: url(\'assets/purplestars.jpeg\'); flex:1 0 auto;position:relative">\n        </div>\n    </div>\n    '));
document.body.appendChild(htmlwrap('\n    <div class="wall"\n        style="position:absolute; width:100%; height:100%; top:0; left: 0; background: rgba(0,0,0,0.5); display: block">\n        <div style="height:100%; display:flex; justify-content: center; flex-direction: column">\n            <h1 style="color:white; text-align:center">Hold on, we\'re loading your data...</h1>\n        </div>\n    </div>'));polymorph_core.topbar=new _topbar(document.querySelector(".banner"))});
polymorph_core.on("UIstart",function(){polymorph_core.topbar.add("File/Open").addEventListener("click",function(){window.open(window.location.pathname+"?o","_blank")});polymorph_core.topbar.add("File/New").addEventListener("click",function(){window.open(window.location.pathname+"?o","_blank")});polymorph_core.topbar.add("Tutorial").addEventListener("click",function(){polymorph_core.resetTutorial()});window.addEventListener("resize",function(){polymorph_core.baseRect.refresh()})});
polymorph_core.showNotification=function(f,b){b=void 0===b?"default":b;if(!document.getElementById("popup-notification")){var e=document.createElement("div");e.setAttribute("id","popup-notification");document.body.appendChild(e)}var l=document.getElementById("popup-notification");l.innerHTML=f;l.classList.add(b);l.classList.add("showAndFadeOut");setTimeout(function(){l.classList=""},2800)};
polymorph_core.registerOperator("subframe",{displayName:"Subframe",description:"Place a new frame, with its own tabs, in this current frame."},function(f){var b=this;polymorph_core.operatorTemplate.call(this,f,{});this.rootdiv.remove();this.outerDiv=document.createElement("div");this.outerDiv.innerHTML="";this.outerDiv.style.cssText="width:100%; height: 100%; position:relative";f.div.appendChild(this.outerDiv);this.refresh=function(){polymorph_core.rects[this.rectID].refresh()};Object.defineProperty(this,
"rect",{get:function(){return polymorph_core.rects[b.rectID]}});this.tieRect=function(b){this.rectID=b;this.outerDiv.appendChild(polymorph_core.rects[b].outerDiv);polymorph_core.rects[b].refresh()};if(polymorph_core.rectLoadCallbacks[f.id])this.tieRect(polymorph_core.rectLoadCallbacks[f.id][0]),delete polymorph_core.rectLoadCallbacks[f.id];else if(!this.settings.operatorClonedFrom){var e=polymorph_core.newRect(f.id);this.tieRect(e)}if(this.settings.operatorClonedFrom){for(var l in polymorph_core.rects)if(polymorph_core.rects[l].settings.p==
this.settings.operatorClonedFrom){e=JSON.parse(JSON.stringify(polymorph_core.items[l]));e._rd.p=f.id;e=polymorph_core.insertItem(e);polymorph_core.rects[e]=new polymorph_core.rect(e);this.tieRect(e);for(var c in polymorph_core.containers)if(polymorph_core.containers[c].settings.p==l){var t=JSON.parse(JSON.stringify(polymorph_core.items[c]));t._od.p=e;t._od.data.operatorClonedFrom=c;t=polymorph_core.insertItem(t);polymorph_core.containers[t]=new polymorph_core.container(t)}}polymorph_core.items[this.settings.operatorClonedFrom];
delete this.settings.operatorClonedFrom}this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML="Nothing to show yet :3";this.showDialog=function(){};this.dialogUpdateSettings=function(){}});
(function(){polymorph_core.registerOperator("opSelect",{displayName:"New Operator",hidden:!0},function(f){var b=this;b.container=f;this.settings={};this.style=document.createElement("style");this.style.innerHTML="\n    div.views>div{\n        background:lightgrey;\n        border: black 3px solid;\n    }\n    div.views>div:hover{\n        background:white;\n    }\n    ";f.div.appendChild(this.style);this.rootdiv=document.createElement("div");this.rootdiv.style.height="100%";this.rootdiv.style.overflowY=
"auto";this.rootdiv.innerHTML='\n    <div class="views">\n    </div>\n    <h1 style="color:white">Operators</h1>\n    <p style="color:white">Choose an container for this space!</p>\n    <div class="operators">\n    <div class="buttons"></div>\n    <div class="descriptions" style="height:5em;"></div>\n    </div>';this.buttondiv=this.rootdiv.querySelector("div.operators>div.buttons");this.descInnerDiv=this.rootdiv.querySelector("div.descriptions");this.viewInnerDiv=this.rootdiv.querySelector("div.views");
this.reloadContents=function(){var e=this,l={},c;for(c in polymorph_core.operators){if(!polymorph_core.operators[c].options.hidden){if(b.buttondiv.querySelector('[data-under-operator-name="'+c+'"]'))break;l.b=document.createElement("button");var t=c;polymorph_core.operators[c].options.displayName&&(t=polymorph_core.operators[c].options.displayName);l.b.innerHTML=t;l.b.dataset.underOperatorName=c;l.b.addEventListener("click",function(b){return function(){for(;f.div.children.length;)f.div.children[0].remove();
f.settings.t=b.b.dataset.underOperatorName;f.operator=new polymorph_core.operators[b.b.dataset.underOperatorName].constructor(f);"New Operator"==f.settings.tabbarName&&(f.settings.tabbarName=polymorph_core.operators[b.b.dataset.underOperatorName].options.displayName||b.b.dataset.underOperatorName);polymorph_core.rects[f.settings.p].tieContainer(f.id);f.fire("updateItem",{id:e.container.id,sender:e})}}(l));b.buttondiv.appendChild(l.b);l.descDiv=document.createElement("div");l.descDiv.innerHTML=polymorph_core.operators[c].options.description?
"<p>"+polymorph_core.operators[c].options.description+"</p>":"<p>No description provided :/</p>";l.descDiv.style.display="none";b.descInnerDiv.appendChild(l.descDiv);l.b.addEventListener("mouseover",function(c){return function(){for(var e=0;e<b.descInnerDiv.children.length;e++)b.descInnerDiv.children[e].style.display="none";c.descDiv.style.display="block"}}(l));l.b.addEventListener("mouseleave",function(b){return function(){b.descDiv.style.display="none"}}(l))}l={b:l.b,descDiv:l.descDiv}}};this.reloadContents();
f.div.appendChild(this.rootdiv);f.on("operatorAdded",b.reloadContents);this.refresh=this.reloadContents;this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML="";this.showDialog=function(){};this.toSaveData=function(){return this.settings};this.processSettings=function(){}})})();
function _dateParser(){var f=this;this.dateParserRegexes=[{name:"repetition",regex:/\((\d+)*\)/ig,operate:function(b,e){e.repetition=b[1]?Number(b[1]):-1}},{name:"pmtime",regex:/(?:^|\s)(?!:)(\d+)(am|pm)/g,operate:function(b,e){e.d.setMinutes(0);e.d.setSeconds(0);e.d.setHours(Number(b[1]));"pm"==b[2]&&e.d.setHours(Number(b[1])+12)}},{name:"time",regex:/(?:(?:(\d+)\/(\d+)(?:\/(\d+))?)|(?:(\d+):(\d+)(?::(\d+))?))/g,operate:function(b,e){e.d.setMinutes(0);e.d.setSeconds(0);b[1]&&(e.d.setDate(Number(b[1])),
e.noDateSpecific=!1);b[2]&&e.d.setMonth(Number(b[2])-1);b[3]&&(e.yr=Number(b[3]),100>e.yr&&(e.yr+=2E3),e.d.setFullYear(e.yr));b[4]&&(e.hr=Number(b[4]),6>e.hr&&(e.hr+=12));e.d.setHours(e.hr);b[5]&&e.d.setMinutes(Number(b[5]));b[6]&&e.d.setSeconds(Number(b[6]))}},{name:"ampm",regex:/(am|pm)/gi,operate:function(b,e){"am"==b[1]?12<e.d.getHours()&&e.d.setHours(e.d.getHours()-12):12>e.d.getHours()&&e.d.setHours(e.d.getHours()+12)}},{name:"dayofweek",regex:/(?:(mon)|(tue)s*|(?:(wed)(?:nes)*)|(?:(thu)r*s*)|(fri)|(sat)(?:ur)*|(sun))(?:day)*/ig,
operate:function(b,e,f){for(i=e.nextDay=0;i<b.length;i++)void 0!=b[i]&&(e.nextDay=i);e.d.getDay()==e.nextDay%7&&0<f.getTime()-e.d.getTime()?e.d.setDate(e.d.getDate()+7):e.d.setDate(e.d.getDate()+(e.nextDay+7-e.d.getDay())%7)}},{name:"weekday",regex:/weekday/ig,operate:function(b,e,f){e.nextDay=0;b=e.d.getDay();0>=f.getTime()-e.d.getTime()&&b++;0<b&&5>b||e.d.setDate(e.d.getDate()+(8-e.d.getDay())%7)}},{name:"auto",regex:/auto/ig,operate:function(b,e){e.auto=!0}},{name:"today",regex:/today/g,operate:function(b,
e){today=new Date;e.d.setDate(today.getDate());e.d.setMonth(today.getMonth());e.noDateSpecific=!1}},{name:"now",regex:/now/g,operate:function(b,e){e.d=new Date;e.noDateSpecific=!1}},{name:"delTime",regex:/(\+|-)(\d+)(?:(m)(?:in)*|(h)(?:ou)*(?:r)*|(d)(?:ay)*|(w)(?:ee)*(?:k)*|(M)(?:o)*(?:nth)*|(y(?:ea)*(?:r)*))/g,operate:function(b,e){e.freeamt=1;for(i=3;i<b.length;i++)void 0!=b[i]&&(factor=i);switch(factor){case 3:e.freeamt=6E4;break;case 4:e.freeamt=36E5;break;case 5:e.freeamt=864E5;break;case 6:e.freeamt=
6048E5;break;case 7:e.freeamt=2592E6;break;case 8:e.freeamt=31536E6}e.freeamt*=Number(b[2]);"-"==b[1]&&(e.freeamt*=-1,e.noDateSpecific=!1);e.d.setTime(e.d.getTime()+e.freeamt)}}];this.reverse=!1;this.extractTime=function(b,e){if(e)var l=new Date(e.getTime());else l=new Date,e=new Date;f.tempdata={hr:9,noDateSpecific:!0,d:l};l=!1;for(var c,t=0;t<this.dateParserRegexes.length;t++)for(this.dateParserRegexes[t].regex.lastIndex=0;null!=(c=this.dateParserRegexes[t].regex.exec(b));)this.dateParserRegexes[t].operate(c,
f.tempdata,e),l=!0;for(;f.tempdata.noDateSpecific&&0<e.getTime()-f.tempdata.d.getTime();)f.tempdata.d.setDate(f.tempdata.d.getDate()+1);if(l)return f.tempdata.d};this.richExtractTime=function(b,e){var l=e;b=b.split("&");for(var c=[],t=0;t<b.length;t++){var v=/\((?:([^\)\|]+)\|\|)?([^\)\|]+)(?:\|([^\)\|]+))?\)/ig.exec(b[t]),q=void 0,k=void 0,m=b[t];e=void 0;v?(e=v[1]&&!l?this.extractTime(v[1]):l||new Date,q=v[2],v[3]&&(k=Number(v[3])),isNaN(k)&&(k=-1),m="("+e.toLocaleString()+"||"+v[2]+"|"+k+")"):
q=b[t];l||e?l&&!e&&(e=l):e=new Date;var r=q.split(">");v=void 0;if(q=this.extractTime(r[0],e))v={date:q.getTime(),part:m,opart:b[t],refdate:e.getTime(),reps:k},r[1]?(e=f.extractTime(r[1],q),v.endDate=e?e.getTime():q.getTime()+36E5):v.endDate=q.getTime()+36E5,c.push(v)}c.sort(function(b,c){return b.date-c.date});return c};this.getCalendarTimes=function(b,e,f){for(var c=[],l=0;l<b.length;l++){var v=new Date(b[l].refdate),q=b[l].reps;if(isNaN(q))q=1;else if(0>q||100<q)q=100;do{e=this.richExtractTime(b[l].part,
v)[0];if(!e)break;c.push(e);q--;v=new Date(e.endDate)}while(e.date<f&&0!=q)}return c};this.stringToTimeObject=function(b){return{datestring:b,date:dateParser.richExtractTime(b)}};this.humanReadableRelativeDate=function(b){b=new Date(b);var e=new Date;return b.getDate()==e.getDate()&&b.getFullYear()==e.getFullYear()&&b.getMonth()==e.getMonth()?b.toTimeString().split(" ")[0]:b.toLocaleDateString().split(" ")[0]}}var dateParser=new _dateParser;
function __itemlist_searchsort(){var f=this;this.searchtemplate=htmlwrap('<span style="display:block; width:100%;">\n    <span></span>\n    <button disabled>&#128269;</button>\n    </span>');this._searchtemplate=this.searchtemplate.querySelector("span");this.taskListBar.insertBefore(this.searchtemplate,this.template.nextElementSibling);var b=new capacitor(1E3,300,function(){for(var b=Array.from(f.searchtemplate.querySelectorAll("input")),l=!1,c=0;c<b.length;c++)""!=b[c].value&&(l=!0);l?(f.searchtemplate.querySelector("button").innerHTML=
"&#9003;",f.searchtemplate.querySelector("button").disabled=!1):(f.searchtemplate.querySelector("button").innerHTML="&#128269;",f.searchtemplate.querySelector("button").disabled=!0);var t=[];f.renderedItems.forEach(function(c){var e=polymorph_core.items[c];if(l){c=f.taskList.querySelector('[data-id="'+c+'"]');c.style.display="none";for(var k=0;k<b.length;k++)if(b[k].value)switch(f.settings.properties[b[k].dataset.role]){case "text":e[b[k].dataset.role]&&-1<e[b[k].dataset.role].toLowerCase().indexOf(b[k].value.toLowerCase())&&
t.push(c)}}else e=f.taskList.querySelector('[data-id="'+c+'"]'),t.push(e)});t.forEach(function(b){for(;b!=f.taskList;)b.style.display="block",b=b.parentElement})});this.searchtemplate.addEventListener("keyup",b.submit);this.searchtemplate.querySelector("button").addEventListener("click",function(){Array.from(f.searchtemplate.querySelectorAll("input")).forEach(function(b){b.value=""});b.submit()});this.indexOf=function(b){for(var e=f.taskList.children,c=0;c<e.length;c++)if(e[c].dataset.id==b)return c;
return-1};this._sortItems=function(){f.isSorting=!0;if(f.container.visible()){f.settings.implicitOrder&&(f.settings.sortby=f.settings.filterProp);if(f.settings.sortby){for(var b=f.taskList.querySelectorAll("[data-id]"),l=[],c=0;c<b.length;c++)cpp={id:b[c].dataset.id,dt:polymorph_core.items[b[c].dataset.id][f.settings.sortby]},l.push(cpp);switch(f.settings.properties[f.settings.sortby]){case "date":b=f.settings.sortby;for(c=0;c<l.length;c++)l[c].dt&&l[c].dt.date?("number"==typeof l[c].dt.date&&(polymorph_core.items[l[c].id][b].date=
[{date:polymorph_core.items[l[c].id][b].date}]),polymorph_core.items[l[c].id][b].date[0]?(l[c].date=polymorph_core.items[l[c].id][b].date[0].date,-1!=l[c].dt.datestring.indexOf("(")&&(l[c].date=dateParser.richExtractTime(l[c].dt.datestring)[0].date)):l[c].date=1E4*Date.now()):l[c].date=1E4*Date.now();l.sort(function(b,c){return b.date-c.date});break;case "text":for(b=0;b<l.length;b++)l[b].dt||(l[b].dt="");l.sort(function(b,c){return b.dt.toString().localeCompare(c.dt.toString())});break;default:l.sort(function(b,
c){return b.dt-c.dt})}b=f.taskList.querySelector(":focus");var t;b&&(t=b.selectionStart||0);for(c=0;c<l.length;c++){var v=f.taskList.querySelector("[data-id='"+l[c].id+"']");v.parentElement==f.taskList&&f.taskList.appendChild(v)}if(b){b.focus();try{b.selectionStart=t}catch(q){}}}f.isSorting=!1}};this.sortcap=new capacitor(500,1E3,this._sortItems);this.sortItems=function(){f.sortcap.submit()};this.setSearchTemplate=function(b){f._searchtemplate.innerHTML=b;for(var e in f.settings.propertyWidths)f._searchtemplate.querySelector("[data-contains-role="+
e+"]").style.width=f.settings.propertyWidths[e]}}
polymorph_core.registerOperator("itemList",function(f){var b=this,e={properties:{title:"text"},propertyWidths:{},filter:polymorph_core.guid(),enableEntry:!0,implicitOrder:!0,linkProperty:"to"};polymorph_core.operatorTemplate.call(this,f,e);this.rootdiv.remove();this.settings.filterProp&&(this.settings.filter=this.settings.filterProp,delete this.settings.filterProp);this.taskListBar=document.createElement("div");this.taskListBar.style.cssText="flex: 1 0 auto; display: flex;height:100%; flex-direction:column;";this.template=
htmlwrap('<span style="display:block; width:fit-content;">\n    <span></span>\n    <button>&gt;</button>\n    <div class="subItemBox"></div>\n    </span>');this._template=this.template.querySelector("span");this.taskListBar.appendChild(this.template);this.taskListBar.appendChild(document.createElement("hr"));this.taskListBar.style.whiteSpace="nowrap";this.taskList=document.createElement("div");this.taskList.style.cssText="height:100%; overflow-y:auto; min-width:fit-content;";this.taskListBar.appendChild(this.taskList);
f.div.appendChild(htmlwrap('<style>\n        input{\n            background: inherit;\n            color:inherit;\n        }\n        div>span{\n            background:white;\n        }\n        span[data-id]{\n            background:white;\n        }\n        div.subItemBox>span{\n            margin-left: 10px;\n        }\n        .ffocus{\n            border-top:solid 3px purple;\n            border-bottom:solid 3px purple;\n        }\n\n        .resizable-input {\n            /* make resizable */\n            overflow-x: hidden;\n            resize: horizontal;\n            display: inline-block;\n        \n            /* no extra spaces */\n            padding: 0;\n            margin: 0;\n            white-space: nowrap;\n          \n            /* default widths */\n            width: 10em;\n            min-width: 2em;\n            max-width: 30em;\n        }\n        \n        /* let <input> assume the size of the wrapper */\n        .resizable-input > input {\n            width: 100%;\n            box-sizing: border-box;\n            margin: 0;\n        }\n        \n        /* add a visible handle */\n        .resizable-input > span {\n            display: inline-block;\n            vertical-align: bottom;\n            margin-left: -16px;\n            width: 16px;\n            height: 16px;\n            background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAJUlEQVR4AcXJRwEAIBAAIPuXxgiOW3xZYzi1Q3Nqh+bUDk1yD9sQaUG/4ehuEAAAAABJRU5ErkJggg==");\n            cursor: ew-resize;\n        }\n        </style>'));
f.div.appendChild(this.taskListBar);Object.defineProperty(this,"renderedItems",{get:function(){return Array.from(b.taskList.querySelectorAll("span[data-id]")).map(function(b){return b.dataset.id})}});this.renderItem=function(c){var e=polymorph_core.items[c],k=b.taskList.querySelector("span[data-id='"+c+"']");if(!b.itemRelevant(c))return k&&k.remove(),!1;k||(k=b.template.cloneNode(!0),k.style.display="block",k.dataset.id=c,k.children[1].innerText="X",b.taskList.appendChild(k));for(i in b.settings.properties)switch(b.settings.properties[i]){case "text":case "number":k.querySelector("[data-role='"+
i+"']").value=void 0!=e[i]?e[i]:"";break;case "object":k.querySelector("[data-role='"+i+"']").value=void 0!=e[i]?JSON.stringify(e[i]):"";break;case "date":k.querySelector("[data-role='"+i+"']").matches(":focus")||(e[i]&&e[i].datestring?k.querySelector("[data-role='"+i+"']").value=e[i].prettyDateString||e[i].datestring:e[i]&&"string"==typeof e[i]&&(e[i]={datestring:e[i]},k.querySelector("[data-role='"+i+"']").value=e[i].prettyDateString||e[i].datestring,b.datereparse&&b.datereparse(c)))}e.style?(k.style.background=
e.style.background,k.style.color=e.style.color||matchContrast((/rgba?\([\d,\s]+\)/.exec(getComputedStyle(k).background)||["#ffffff"])[0])):(k.style.background="white",k.style.color="black");e=void 0;if(b.settings.linkProperty)for(var m=b.renderedItems,f=0;f<m.length;f++){var n=m[f];if(polymorph_core.items[n][b.settings.linkProperty]&&polymorph_core.items[n][b.settings.linkProperty][c]&&c!=n)if(void 0==e)e=n;else{e=void 0;break}}if(void 0!=e&&(!k.parentElement||k.parentElement.parentElement.dataset.id!=
e))try{b.taskList.querySelector("span[data-id='"+e+"']>div.subItemBox").appendChild(k)}catch(y){if(!(y instanceof DOMException))throw y;}};this.createItem=function(){var c={};for(i in b.settings.properties){switch(b.settings.properties[i]){case "text":case "number":c[i]=b.template.querySelector("[data-role='"+i+"']").value;break;case "object":try{c[i]=JSON.parse(b.template.querySelector("[data-role='"+i+"']").value)}catch(m){}break;case "date":c[i]||(c[i]={}),"string"==typeof c[i]&&(c[i]={datestring:c[i]}),
c[i].datestring=b.template.querySelector("[data-role='"+i+"']").value}b.template.querySelector("[data-role='"+i+"']").value=""}b.settings.filter&&!c[b.settings.filter]&&(c[b.settings.filter]=Date.now());c=polymorph_core.insertItem(c);if(b.shiftDown&&b.settings.linkProperty){var e=b.taskList.querySelector(".ffocus");if(e){var k=e.dataset.id;e=polymorph_core.items[k];e[b.settings.linkProperty]||(e[b.settings.linkProperty]={});e[b.settings.linkProperty][c]=!0;f.fire("updateItem",{id:k,sender:b})}}f.fire("createItem",
{id:c,sender:b});b.renderItem(c);b.datereparse(c);f.fire("focusItem",{id:c,sender:b});return c};f.on("createItem",function(c){var e=polymorph_core.items[c.id];b.settings.filter&&!e[b.settings.filter]&&(e[b.settings.filter]=Date.now());b.renderItem(c.id)});document.body.addEventListener("keydown",function(c){c.getModifierState("Shift")&&(b.shiftDown=!0,b.template.children[1].innerHTML="&#x21a9;")});f.div.addEventListener("keydown",function(c){if("Enter"==c.key&&(c.getModifierState("Control")||c.getModifierState("Meta"))&&
c.target.dataset.role){var e=b.createItem();f.div.querySelector("[data-id='"+e+"'] [data-role='"+c.target.dataset.role+"']").focus()}});document.body.addEventListener("keyup",function(c){c.getModifierState("Shift")||(b.shiftDown=!1,b.template.children[1].innerHTML="&gt;")});this.template.querySelector("button").addEventListener("click",this.createItem);this.template.addEventListener("keydown",function(c){"Enter"==c.key&&b.createItem()});f.on("updateItem",function(c){var e=c.id;c=c.sender;b.settings.currentID=
e;"GARBAGE_COLLECTOR"!=c&&b.sortcap&&b.sortcap.submit();return b.renderItem(e)});setInterval(function(){if(b.container.visible()){for(var c in b.settings.properties)if("date"==b.settings.properties[c])for(var e=b.taskList.querySelectorAll("[data-role='"+c+"']"),k=0;k<e.length;k++)-1!=e[k].value.indexOf("auto")&&b.datereparse&&b.datereparse(e[k].parentElement.parentElement.parentElement.dataset.id);b.sortItems()}},1E4);this.taskList.addEventListener("click",function(c){"button"==c.target.tagName.toLowerCase()&&
(f.fire("deleteItem",{id:c.target.parentElement.dataset.id,sender:b}),delete polymorph_core.items[c.target.parentElement.dataset.id][b.settings.filter],f.fire("deleteItem",{id:c.target.parentElement.dataset.id,sender:b}))});f.on("deleteItem",function(c){b.deleteItem(c.id);b.renderItem(c.id)});this.reRenderEverything=function(){b.taskList.innerHTML="";for(var c in polymorph_core.items)b.renderItem(c,!0);for(var e in polymorph_core.items)b.renderItem(e)};f.div.addEventListener("mousemove",function(c){if(c.buttons)for(var e=
0;e<c.path.length;e++)if(c.path[e].dataset&&c.path[e].dataset.containsRole){for(var k=f.div.querySelectorAll("[data-contains-role="+c.path[e].dataset.containsRole+"]"),m=0;m<k.length;m++)k[m].style.width=c.path[e].clientWidth;b.settings.propertyWidths[c.path[e].dataset.containsRole]=c.path[e].clientWidth;break}else if(c.path[e]==b.taskList)break});__itemlist_searchsort.apply(this);this.updateSettings=function(){var c='<span class="draghandle">&#10247;</span>';for(i in b.settings.properties)switch(b.settings.properties[i]){case "text":case "date":case "object":c+=
'<span class="resizable-input" data-contains-role="'+i+"\"><input data-role='"+i+"' placeholder='"+i+"'><span></span></span>";break;case "number":c+="<span>"+i+":</span><input data-role='"+i+"' type='number'>"}b._template.innerHTML=c;b.setSearchTemplate(c);for(var e in b.settings.propertyWidths)b.settings.properties[e]?b._template.querySelector("[data-contains-role="+e+"]").style.width=b.settings.propertyWidths[e]:delete b.settings.propertyWidths[e];b.reRenderEverything();0==b.settings.enableEntry&&
(b.template.style.display="none");b.container.fire("updateItem",{id:b.container.id})};this.updateSettings();this.taskList.addEventListener("input",function(c){currentItem=polymorph_core.items[c.target.parentElement.parentElement.parentElement.dataset.id];switch(b.settings.properties[c.target.dataset.role]){case "text":case "number":currentItem[c.target.dataset.role]=c.target.value;break;case "object":try{currentItem[c.target.dataset.role]=JSON.parse(c.target.value),c.target.style.background="white",
c.target.style.color="black"}catch(q){q.target.style.background="red";q.target.style.color="white";return}break;case "date":currentItem[c.target.dataset.role]||(currentItem[c.target.dataset.role]={}),currentItem[c.target.dataset.role].datestring||(currentItem[c.target.dataset.role]={datestring:""}),currentItem[c.target.dataset.role].datestring=c.target.value,currentItem[c.target.dataset.role].date=dateParser.richExtractTime(currentItem[c.target.dataset.role].datestring)}f.fire("updateItem",{id:c.target.parentElement.parentElement.parentElement.dataset.id,
sender:b})});this.taskList.addEventListener("focusout",function(c){if(!b.isSorting)switch(currentItem=polymorph_core.items[c.target.parentElement.parentElement.parentElement.dataset.id],b.settings.properties[c.target.dataset.role]){case "date":currentItem[c.target.dataset.role]&&currentItem[c.target.dataset.role].date&&(currentItem[c.target.dataset.role].prettyDateString=dateParser.humanReadableRelativeDate(currentItem[c.target.dataset.role].date[0].date),c.target.value=currentItem[c.target.dataset.role].prettyDateString)}});
this.taskList.addEventListener("focusin",function(c){currentItem=polymorph_core.items[c.target.parentElement.parentElement.parentElement.dataset.id];switch(b.settings.properties[c.target.dataset.role]){case "date":currentItem[c.target.dataset.role]&&(c.target.value=currentItem[c.target.dataset.role].datestring)}});this.taskList.addEventListener("keyup",function(c){"input"==c.target.tagName.toLowerCase()&&"date"==b.settings.properties[c.target.dataset.role]&&"Enter"==c.key&&b.datereparse(c.target.parentElement.parentElement.parentElement.dataset.id)});
this.focusItem=function(c){if(c=b.taskList.querySelector("[data-id='"+c+"']")){for(var e=b.taskList.querySelectorAll("span[data-id]"),k=0;k<e.length;k++)e[k].classList.remove("ffocus");c.classList.add("ffocus");e=c.parentElement.getBoundingClientRect();k=c.getBoundingClientRect();(k.y<e.y||k.y+k.height>e.y+e.height)&&c.scrollIntoView({behavior:"smooth"})}};this.taskList.addEventListener("focusin",function(c){c.target.matches("input")&&(f.fire("focusItem",{id:c.target.parentElement.parentElement.parentElement.dataset.id,
sender:b}),b.focusItem(c.target.parentElement.parentElement.parentElement.dataset.id))});f.on("focusItem",function(c){"focus"==b.settings.operationMode&&c.sender.container.container.uuid==b.settings.focusOperatorID&&(b.settings.filter=c.id);b.focusItem(c.id)});this.datereparse=function(c){var e="",k={},m;for(m in b.settings.properties)"date"==b.settings.properties[m]&&(e=m,c&&polymorph_core.items[c][e]&&(polymorph_core.items[c][e].date=dateParser.richExtractTime(polymorph_core.items[c][e].datestring),
polymorph_core.items[c][e].date.length||(polymorph_core.items[c][e].date=void 0)),k.its$116=[],b.taskList.querySelectorAll("[data-id]").forEach(function(b){return function(c){var k={id:c.dataset.id};polymorph_core.items[k.id]?(polymorph_core.items[k.id][e]&&polymorph_core.items[k.id][e].date?("number"==typeof polymorph_core.items[k.id][e].date&&(polymorph_core.items[k.id][e].date=[{date:polymorph_core.items[k.id][e].date}]),k.date=polymorph_core.items[k.id][e].date[0]?polymorph_core.items[k.id][e].date[0].date:
1E4*Date.now()):k.date=1E4*Date.now(),b.its$116.push(k)):c.remove()}}(k))),k={its$116:k.its$116};b.sortItems();f.fire("dateUpdate")};this.datereparse();this.container.registerContextMenu(this.taskList,function(c){for(var e=c;!e.dataset.id&&e!=b.taskList;)e=e.parentElement;if(e.dataset.id){e={id:e.dataset.id};c.dataset.role&&(e.role=c.dataset.role);var k=[];"date"==b.settings.properties[c.dataset.role]&&k.push("Convert to fixed date::operator.toFixedDate");return{e:e,ls:k}}});this.ctxCommands={toFixedDate:function(c,
e){e=c.id;c=c.role;polymorph_core.items[e][c].datestring=(new Date(polymorph_core.items[e][c].date[0].date)).toLocaleString()+">"+(new Date(polymorph_core.items[e][c].date[0].endDate)).toLocaleString();b.datereparse(e)}};this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML='\n    <p>Columns to show</p>\n    <div class="proplist"></div>\n    <p>You can pick more from the list below, or add a new property! </p>\n    <span>Choose existing property:</span><select class="_prop">\n    </select><br>\n    <input class="adpt" placeholder="Or type a new property..."><br>\n    <button class="adbt">Add</button>\n    <p>Options</p>\n    <p><input type="checkbox"><span>Sort by date</span></p>\n    <p><input type="checkbox"><span>Delete items (instead of hiding)</span></p>\n    <h1>Role</h1>\n    <select data-role="operationMode">\n    <option value="static">Display static list</option>\n    <option value="focus">Display focused list</option>\n    <option value="iface">Link to another container...</option>\n    </select>\n    <p>View items with the following property:</p> \n    <input data-role=\'filter\' placeholder = \'Property name\'></input>\n    <p>container to focus on:</p> \n    <input data-role="focusOperatorID" placeholder="container UID (use the button)">\n    <button class="targeter">Select container</button>\n    ';
var l={entryok:new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"enableEntry",label:"Enable adding new items"}),implicitOrder:new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"implicitOrder",label:"Implicit ordering"}),linkProperty:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"linkProperty",label:"Property for links (leave blank to ignore links)"})},c=this.dialogDiv;this.showDialog=
function(){for(i in b.settings){var c=b.dialogDiv.querySelector("[data-role='"+i+"']");c&&(c.value=b.settings[i])}b.opList.innerHTML="";c={};for(var e in polymorph_core.items)for(var k in polymorph_core.items[e])"function"!=typeof polymorph_core.items[e][k]&&(c[k]=!0);for(var m in c)b.settings.properties[m]||(e=document.createElement("option"),e.innerText=m,e.value=m,b.opList.appendChild(e));for(i in l)l[i].load();b.proplist.innerHTML="";for(var f in b.settings.properties)m=document.createElement("p"),
m.innerHTML="<span>"+f+"</span>\n            <select data-role="+f+('>\n                <option value="text">Text</option>\n                <option value="date">Date</option>\n                <option value="object">Object</option>\n                <option value="number">Number</option>\n            </select><label>Sort <input type="radio" name="sortie" data-ssrole='+f+"></label>")+"<button data-krole="+f+">X</button>",m.querySelector("select").value=b.settings.properties[f],b.proplist.appendChild(m)};
this.proplist=this.dialogDiv.querySelector(".proplist");this.proplist.addEventListener("input",function(c){c.target.matches("[name='sortie']")&&(b.settings.implicitOrder=!1,l.implicitOrder.load())});this.dialogUpdateSettings=function(){b.updateSettings();b.sortItems();f.fire("updateItem",{id:b.container.id})};c.querySelector(".adbt").addEventListener("click",function(){""!=c.querySelector(".adpt").value?(b.settings.properties[c.querySelector(".adpt").value]="text",c.querySelector(".adpt").value=""):
b.settings.properties[c.querySelector("select._prop").value]="text";b.showDialog()});c.querySelector("input[data-role='filter']").addEventListener("input",function(c){b.settings.filter=c.target.value});this.proplist.addEventListener("change",function(c){c.target.matches("select")&&(b.settings.properties[c.target.dataset.role]=c.target.value)});this.proplist.addEventListener("click",function(c){c.target.matches("[data-krole]")&&(delete b.settings.properties[c.target.dataset.krole],b.showDialog())});
this.proplist.addEventListener("input",function(c){c.target.matches("input[type='radio']")&&(b.settings.sortby=c.target.dataset.ssrole)});this.opList=this.dialogDiv.querySelector("select._prop");var t=void 0;f.div.addEventListener("mousedown",function(b){t=void 0;for(var c=0;c<b.path.length&&b.path[c].dataset;c++)if(b.path[c].dataset.id){t=b.path[c].dataset.id;break}});f.div.addEventListener("mousedown",function(c){if(c.target.matches(".dragHandle")){var e=c.target.parentElement.parentElement;b.relrect=
c.target.getRootNode().host.getBoundingClientRect();e.style.position="absolute";e.style.left=c.clientX-b.relrect.x;e.style.top=c.clientY-b.relrect.y;b.worryRow=e;Array.from(c.target.getRootNode().children).forEach(function(b){return b.style.userSelect="none"})}});f.div.addEventListener("mousemove",function(c){c.altKey&&t&&(polymorph_core.initiateDragDrop(t,{x:c.clientX,y:c.clientY,sender:f.id}),t=void 0);b.worryRow&&(b.worryRow.style.left=c.clientX-b.relrect.x,b.worryRow.style.top=c.clientY-b.relrect.y)});
e=function(c){b.worryRow&&(b.worryRow.style.position="static",Array.from(c.target.getRootNode().children).forEach(function(b){return b.style.userSelect="unset"}),delete b.worryRow)};f.div.addEventListener("mouseup",e);f.div.addEventListener("mouseleave",e)});
polymorph_core.registerOperator("descbox",{description:"A simple text entry field.",single_store:!0},function(f){var b=this;polymorph_core.operatorTemplate.call(this,f,{property:"description",operationMode:"focus",staticItem:"",auxProperty:"title",showTags:!1});this.rootdiv.innerHTML='<p class="auxProp" style="margin: 1px;"></p><p class="parsedTags" style="margin: 1px;"></p><p style="margin: 1px;"></p><textarea style="width:100%; flex: 1 0 auto; resize:none;"></textarea>';this.rootdiv.style.cssText=
"height:100%; display:flex; flex-direction: column;";this.textarea=this.rootdiv.querySelector("textarea");this.currentIDNode=this.rootdiv.querySelector(".auxProp");this.parsedTagsNode=this.rootdiv.querySelector(".parsedTags");f.div.appendChild(this.rootdiv);var e=function(c){var e=polymorph_core.items[c][b.settings.property];polymorph_core.items[c]["_tags_"+b.settings.property]&&polymorph_core.items[c]["_tags_"+b.settings.property].tag&&polymorph_core.items[c]["_tags_"+b.settings.property].tag.forEach(function(b){delete polymorph_core.items[c]["_tag_"+
b]});var f=polymorph_core.items[c]["_tags_"+b.settings.property]={};polymorph_core.items[c]["_displayTags_"+b.settings.property]="";[/@(tag)=([\w_]+)/g,/@(from)=([\w_]+)/g,/@(to)=([\w_])+/g].forEach(function(k){for(;matches=k.exec(e);){f[matches[1]]||(f[matches[1]]=[]);f[matches[1]].push(matches[2]);switch(matches[1]){case "tag":polymorph_core.items["_tag_"+matches[2]]||(polymorph_core.items["_tag_"+matches[2]]={});polymorph_core.items["_tag_"+matches[2]][c]=!0;polymorph_core.items[c]["_tag_"+matches[2]]=
!0;break;case "from":polymorph_core.items[matches[2]].to||(polymorph_core.items[matches[2]].to={});polymorph_core.items[matches[2]].to[c]=!0;break;case "to":polymorph_core.items[c].to||(polymorph_core.items[c].to={}),polymorph_core.items[c].to[matches[2]]=!0}polymorph_core.items[c]["_displayTags_"+b.settings.property]+=matches[0]+"  "}})};this.updateMeta=function(c){c&&(b.currentIDNode.innerText="id"==b.settings.auxProperty?c:polymorph_core.items[c][b.settings.auxProperty],b.settings.showTags?(e(c),
b.parsedTagsNode.innerHTML=polymorph_core.items[c]["_displayTags_"+b.settings.property],b.parsedTagsNode.style.display="block"):b.parsedTagsNode.style.display="none")};this.updateItem=function(c){b.updateMeta(c);"putter"!=b.settings.operationMode?c==b.settings.currentID&&c&&polymorph_core.items[c]?b.textarea.matches(":focus")?setTimeout(function(){return b.updateItem(c)},500):(b.changed?polymorph_core.items[c][b.settings.property]=b.textarea.value:b.textarea.value=polymorph_core.items[c]&&polymorph_core.items[c][b.settings.property]?
polymorph_core.items[c][b.settings.property]:"",b.textarea.disabled=!1,polymorph_core.items[c].style?(b.textarea.style.background=polymorph_core.items[c].style.background,b.textarea.style.color=polymorph_core.items[c].style.color||matchContrast((/rgba?\([\d,\s]+\)/.exec(getComputedStyle(b.textarea).background)||["#ffffff"])[0])):(b.textarea.style.background="",b.textarea.style.color="")):b.settings.currentID||(b.textarea.disabled=!0,b.textarea.value="Select an item to view its description."):b.textarea.disabled=
!1};f.on("updateItem",function(c){var e=c.id;if(c.sender!=b&&e==b.settings.currentID)return b.updateItem(e),!0});this.updateItem(this.settings.currentID);this.updateSettings=function(){if("static"==b.settings.operationMode){b.settings.staticItem||(b.settings.staticItem=polymorph_core.insertItem({}));var c=b.settings.staticItem;b.settings.currentID=b.settings.staticItem;if(!polymorph_core.items[c]){var e={};e[b.settings.property]="";polymorph_core.items[c]=e;f.fire("updateItem",{sender:b,id:c})}}else"putter"==
b.settings.operationMode&&(b.settings.focusOperatorID&&(b.focusOperatorID=b.settings.focusOperatorID),b.textarea.value="",b.textarea.disabled=!1);b.textarea.placeholder=b.settings.placeholder||"";b.updateItem(b.settings.currentID)};this.updateSettings();this.updateItem(this.settings.currentID);var l=new capacitor(100,40,function(c,e){c&&polymorph_core.items[c]&&b.changed&&(polymorph_core.items[c][b.settings.property]=e,b.updateMeta(c),f.fire("updateItem",{id:c,sender:b}),b.changed=!1)},{presubmit:function(){b.changed=
!0}});this.somethingwaschanged=function(c){"Control"==c.key||"Meta"==c.key||(c.ctrlKey||c.metaKey)&&"s"==c.key||"putter"!=b.settings.operationMode&&l.submit(b.settings.currentID,b.textarea.value)};this.textarea.addEventListener("blur",function(){l.forceSend()});this.textarea.addEventListener("input",this.somethingwaschanged);this.textarea.addEventListener("keyup",this.somethingwaschanged);document.addEventListener("keydown",function(c){if(b.textarea.matches(":focus-within")){var e=c.keyCode?c.keyCode:
c.which;if(0==e||9==e)c.preventDefault(),c.stopPropagation(),document.execCommand("insertText",!1,"    ")}});this.createItem=function(c,e){polymorph_core.items[c][b.settings.property]=e};this.textarea.addEventListener("keydown",function(c){"Enter"==c.key&&"putter"==b.settings.operationMode&&(b.createItem(void 0,b.textarea.value),b.textarea.value="",c.preventDefault())});this.dialogDiv=document.createElement("div");var c={operationMode:new polymorph_core._option({div:this.dialogDiv,type:"select",object:this.settings,
property:"operationMode",source:{static:"Display static item",focus:"Display focused item",putter:"Use as data entry"},label:"Select operation mode:"}),staticItem:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"staticItem",label:"Static item to display:"}),property:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"property",label:"Property of item to display:"}),auxProperty:new polymorph_core._option({div:this.dialogDiv,
type:"text",object:this.settings,property:"auxProperty",label:"Auxillary property to display:"}),showWordCount:new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"showWordCount",label:"Show wordcount?"}),showTags:new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"showTags",label:"Show and parse tags?"})};this.showDialog=function(){for(i in c)c[i].load()};this.dialogUpdateSettings=this.updateSettings;this.dialogDiv.addEventListener("input",
function(c){c.target.dataset.role&&(b.settings[c.target.dataset.role]=c.target.value)});f.on("focusItem",function(c){c=c.id;"focus"==b.settings.operationMode&&(l.forceSend(),b.settings.currentID=c,b.updateItem(c),f.fire("updateItem",{id:b.container.id}))});this.itemRelevant=function(c){if("static"==b.settings.operationMode&&c==b.settings.staticItem)return!0};f.on("createItem",function(b){"dragdrop"==b.sender&&f._fire("focusItem",b)})});
!function(f,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=f.document?b(f,!0):function(e){if(!e.document)throw Error("jQuery requires a window with a document");return b(e)}:b(f)}("undefined"!=typeof window?window:this,function(f,b){function e(b,c){c=c||L;var g=c.createElement("script");g.text=b;c.head.appendChild(g).parentNode.removeChild(g)}function l(b){var c=!!b&&"length"in b&&b.length,g=p.type(b);return"function"!==g&&!p.isWindow(b)&&("array"===g||0===c||"number"==
typeof c&&0<c&&c-1 in b)}function c(b,c,g){if(p.isFunction(c))return p.grep(b,function(b,e){return!!c.call(b,e,b)!==g});if(c.nodeType)return p.grep(b,function(b){return b===c!==g});if("string"==typeof c){if(zb.test(c))return p.filter(c,b,g);c=p.filter(c,b)}return p.grep(b,function(b){return-1<$a.call(c,b)!==g&&1===b.nodeType})}function t(b,c){for(;(b=b[c])&&1!==b.nodeType;);return b}function v(b){var c={};return p.each(b.match(oa)||[],function(b,g){c[g]=!0}),c}function q(b){return b}function k(b){throw b;
}function m(b,c,g){var e;try{b&&p.isFunction(e=b.promise)?e.call(b).done(c).fail(g):b&&p.isFunction(e=b.then)?e.call(b,c,g):c.call(void 0,b)}catch(kb){g.call(void 0,kb)}}function r(){L.removeEventListener("DOMContentLoaded",r);f.removeEventListener("load",r);p.ready()}function n(){this.expando=p.expando+n.uid++}function y(b,c,g){var e;if(void 0===g&&1===b.nodeType)if(e="data-"+c.replace(Zb,"-$&").toLowerCase(),g=b.getAttribute(e),"string"==typeof g){try{g="true"===g||"false"!==g&&("null"===g?null:
+g+""===g?+g:Ab.test(g)?JSON.parse(g):g)}catch(kb){}W.set(b,c,g)}else g=void 0;return g}function w(b,c,g,e){var h,k=1,m=20,f=e?function(){return e.cur()}:function(){return p.css(b,c,"")},n=f(),u=g&&g[3]||(p.cssNumber[c]?"":"px"),l=(p.cssNumber[c]||"px"!==u&&+n)&&Ba.exec(p.css(b,c));if(l&&l[3]!==u){u=u||l[3];g=g||[];l=+n||1;do k=k||".5",l/=k,p.style(b,c,l+u);while(k!==(k=f()/n)&&1!==k&&--m)}return g&&(l=+l||+n||0,h=g[1]?l+(g[1]+1)*g[2]:+g[2],e&&(e.unit=u,e.start=l,e.end=h)),h}function x(b,c){for(var g,
e,h=[],k=0,m=b.length;k<m;k++)if(e=b[k],e.style)if(g=e.style.display,c){if("none"===g&&(h[k]=K.get(e,"display")||null,h[k]||(e.style.display="")),""===e.style.display&&lb(e)){g=k;var f=void 0;var n=e.ownerDocument;var u=e.nodeName;n=(e=ab[u])?e:(f=n.body.appendChild(n.createElement(u)),e=p.css(f,"display"),f.parentNode.removeChild(f),"none"===e&&(e="block"),ab[u]=e,e);h[g]=n}}else"none"!==g&&(h[k]="none",K.set(e,"display",g));for(k=0;k<m;k++)null!=h[k]&&(b[k].style.display=h[k]);return b}function h(b,
c){var g="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(c||"*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll(c||"*"):[];return void 0===c||c&&p.nodeName(b,c)?p.merge([b],g):g}function A(b,c){for(var g=0,e=b.length;g<e;g++)K.set(b[g],"globalEval",!c||K.get(c[g],"globalEval"))}function z(b,c,g,e,k){for(var m,f,n,u,l=c.createDocumentFragment(),O=[],r=0,x=b.length;r<x;r++)if(m=b[r],m||0===m)if("object"===p.type(m))p.merge(O,m.nodeType?[m]:m);else if(Ca.test(m)){f=f||l.appendChild(c.createElement("div"));
n=(mb.exec(m)||["",""])[1].toLowerCase();n=pa[n]||pa._default;f.innerHTML=n[1]+p.htmlPrefilter(m)+n[2];for(n=n[0];n--;)f=f.lastChild;p.merge(O,f.childNodes);f=l.firstChild;f.textContent=""}else O.push(c.createTextNode(m));l.textContent="";for(r=0;m=O[r++];)if(e&&-1<p.inArray(m,e))k&&k.push(m);else if(u=p.contains(m.ownerDocument,m),f=h(l.appendChild(m),"script"),u&&A(f),g)for(n=0;m=f[n++];)Cb.test(m.type||"")&&g.push(m);return l}function I(){return!0}function D(){return!1}function F(){try{return L.activeElement}catch(O){}}
function H(b,c,g,e,h,k){var m,f;if("object"==typeof c){"string"!=typeof g&&(e=e||g,g=void 0);for(f in c)H(b,f,g,e,c[f],k);return b}if(null==e&&null==h?(h=g,e=g=void 0):null==h&&("string"==typeof g?(h=e,e=void 0):(h=e,e=g,g=void 0)),!1===h)h=D;else if(!h)return b;return 1===k&&(m=h,h=function(b){return p().off(b),m.apply(this,arguments)},h.guid=m.guid||(m.guid=p.guid++)),b.each(function(){p.event.add(this,c,h,e,g)})}function g(b,c){return p.nodeName(b,"table")&&p.nodeName(11!==c.nodeType?c:c.firstChild,
"tr")?b.getElementsByTagName("tbody")[0]||b:b}function u(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function G(b){var c=$b.exec(b.type);return c?b.type=c[1]:b.removeAttribute("type"),b}function M(b,c){var g,e,h,k,m,f;if(1===c.nodeType){if(K.hasData(b)&&(g=K.access(b),e=K.set(c,g),f=g.events))for(h in delete e.handle,e.events={},f)for(g=0,e=f[h].length;g<e;g++)p.event.add(c,h,f[h][g]);W.hasData(b)&&(k=W.access(b),m=p.extend({},k),W.set(c,m))}}function J(b,c,g,k){c=nb.apply([],c);
var m,f,n,l=0,O=b.length,r=O-1,x=c[0],y=p.isFunction(x);if(y||1<O&&"string"==typeof x&&!T.checkClone&&Db.test(x))return b.each(function(e){var h=b.eq(e);y&&(c[0]=x.call(this,e,h.html()));J(h,c,g,k)});if(O&&(m=z(c,b[0].ownerDocument,!1,b,k),f=m.firstChild,1===m.childNodes.length&&(m=f),f||k)){f=p.map(h(m,"script"),u);for(n=f.length;l<O;l++){var w=m;l!==r&&(w=p.clone(w,!0,!0),n&&p.merge(f,h(w,"script")));g.call(b[l],w,l)}if(n)for(m=f[f.length-1].ownerDocument,p.map(f,G),l=0;l<n;l++)w=f[l],Cb.test(w.type||
"")&&!K.access(w,"globalEval")&&p.contains(m,w)&&(w.src?p._evalUrl&&p._evalUrl(w.src):e(w.textContent.replace(nc,""),m))}return b}function X(b,c,g){for(var e=c?p.filter(c,b):b,k=0;null!=(c=e[k]);k++)g||1!==c.nodeType||p.cleanData(h(c)),c.parentNode&&(g&&p.contains(c.ownerDocument,c)&&A(h(c,"script")),c.parentNode.removeChild(c));return b}function P(b,c,g){var e,h,k,m,f=b.style;return g=g||bb(b),g&&(m=g.getPropertyValue(c)||g[c],""!==m||p.contains(b.ownerDocument,b)||(m=p.style(b,c)),!T.pixelMarginRight()&&
Y.test(m)&&Sa.test(c)&&(e=f.width,h=f.minWidth,k=f.maxWidth,f.minWidth=f.maxWidth=f.width=m,m=g.width,f.width=e,f.minWidth=h,f.maxWidth=k)),void 0!==m?m+"":m}function C(b,c){return{get:function(){return b()?void delete this.get:(this.get=c).apply(this,arguments)}}}function ja(b){if(b in la)return b;for(var c=b[0].toUpperCase()+b.slice(1),g=Eb.length;g--;)if(b=Eb[g]+c,b in la)return b}function N(b,c,g){return(b=Ba.exec(c))?Math.max(0,b[2]-(g||0))+(b[3]||"px"):c}function E(b,c,g,e,h){c=g===(e?"border":
"content")?4:"width"===c?1:0;for(var k=0;4>c;c+=2)"margin"===g&&(k+=p.css(b,g+Da[c],!0,h)),e?("content"===g&&(k-=p.css(b,"padding"+Da[c],!0,h)),"margin"!==g&&(k-=p.css(b,"border"+Da[c]+"Width",!0,h))):(k+=p.css(b,"padding"+Da[c],!0,h),"padding"!==g&&(k+=p.css(b,"border"+Da[c]+"Width",!0,h)));return k}function ca(b,c,g){var e,h=!0,k=bb(b),m="border-box"===p.css(b,"boxSizing",!1,k);if(b.getClientRects().length&&(e=b.getBoundingClientRect()[c]),0>=e||null==e){if(e=P(b,c,k),(0>e||null==e)&&(e=b.style[c]),
Y.test(e))return e;h=m&&(T.boxSizingReliable()||e===b.style[c]);e=parseFloat(e)||0}return e+E(b,c,g||(m?"border":"content"),h,k)+"px"}function da(b,c,g,e,h){return new da.prototype.init(b,c,g,e,h)}function U(){Ea&&(f.requestAnimationFrame(U),p.fx.tick())}function ta(){return f.setTimeout(function(){Ka=void 0}),Ka=p.now()}function qa(b,c){var g=0,e={height:b};for(c=c?1:0;4>g;g+=2-c){var h=Da[g];e["margin"+h]=e["padding"+h]=b}return c&&(e.opacity=e.width=b),e}function La(b,c,g){for(var e,h=(ea.tweeners[c]||
[]).concat(ea.tweeners["*"]),k=0,m=h.length;k<m;k++)if(e=h[k].call(g,c,b))return e}function ob(b,c){var g,e,h,k,m;for(g in b)if(e=p.camelCase(g),h=c[e],k=b[g],p.isArray(k)&&(h=k[1],k=b[g]=k[0]),g!==e&&(b[e]=k,delete b[g]),m=p.cssHooks[e],m&&"expand"in m)for(g in k=m.expand(k),delete b[e],k)g in b||(b[g]=k[g],c[g]=h);else c[e]=h}function ea(b,c,g){var e,h=0,k=ea.prefilters.length,m=p.Deferred().always(function(){delete f.elem}),f=function(){if(e)return!1;var c=Ka||ta();c=Math.max(0,n.startTime+n.duration-
c);for(var g=1-(c/n.duration||0),h=0,k=n.tweens.length;h<k;h++)n.tweens[h].run(g);return m.notifyWith(b,[n,g,c]),1>g&&k?c:(m.resolveWith(b,[n]),!1)},n=m.promise({elem:b,props:p.extend({},c),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},g),originalProperties:c,originalOptions:g,startTime:Ka||ta(),duration:g.duration,tweens:[],createTween:function(c,g){c=p.Tween(b,n.opts,c,g,n.opts.specialEasing[c]||n.opts.easing);return n.tweens.push(c),c},stop:function(c){var g=0,h=c?n.tweens.length:
0;if(e)return this;for(e=!0;g<h;g++)n.tweens[g].run(1);return c?(m.notifyWith(b,[n,1,0]),m.resolveWith(b,[n,c])):m.rejectWith(b,[n,c]),this}});g=n.props;for(ob(g,n.opts.specialEasing);h<k;h++)if(c=ea.prefilters[h].call(n,b,g,n.opts))return p.isFunction(c.stop)&&(p._queueHooks(n.elem,n.opts.queue).stop=p.proxy(c.stop,c)),c;return p.map(g,La,n),p.isFunction(n.opts.start)&&n.opts.start.call(b,n),p.fx.timer(p.extend(f,{elem:b,anim:n,queue:n.opts.queue})),n.progress(n.opts.progress).done(n.opts.done,n.opts.complete).fail(n.opts.fail).always(n.opts.always)}
function ra(b){return b.getAttribute&&b.getAttribute("class")||""}function pb(b,c,g,e){var h;if(p.isArray(c))p.each(c,function(c,h){g||Fb.test(b)?e(b,h):pb(b+"["+("object"==typeof h&&null!=h?c:"")+"]",h,g,e)});else if(g||"object"!==p.type(c))e(b,c);else for(h in c)pb(b+"["+h+"]",c[h],g,e)}function Gb(b){return function(c,g){"string"!=typeof c&&(g=c,c="*");var e=0,h=c.toLowerCase().match(oa)||[];if(p.isFunction(g))for(;c=h[e++];)"+"===c[0]?(c=c.slice(1)||"*",(b[c]=b[c]||[]).unshift(g)):(b[c]=b[c]||
[]).push(g)}}function Hb(b,c,g,e){function h(n){var f;return k[n]=!0,p.each(b[n]||[],function(b,n){b=n(c,g,e);return"string"!=typeof b||m||k[b]?m?!(f=b):void 0:(c.dataTypes.unshift(b),h(b),!1)}),f}var k={},m=b===aa;return h(c.dataTypes[0])||!k["*"]&&h("*")}function Ma(b,c){var g,e,h=p.ajaxSettings.flatOptions||{};for(g in c)void 0!==c[g]&&((h[g]?b:e||(e={}))[g]=c[g]);return e&&p.extend(!0,b,e),b}function cb(b){return p.isWindow(b)?b:9===b.nodeType&&b.defaultView}var Fa=[],L=f.document,Na=Object.getPrototypeOf,
wa=Fa.slice,nb=Fa.concat,qb=Fa.push,$a=Fa.indexOf,db={},eb=db.toString,xa=db.hasOwnProperty,rb=xa.toString,Ga=rb.call(Object),T={},p=function(b,c){return new p.fn.init(b,c)},Ib=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ac=/^-ms-/,bc=/-([a-z])/g,Jb=function(b,c){return c.toUpperCase()};$jscomp.initSymbol();$jscomp.initSymbol();$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();p.fn=p.prototype={jquery:"3.1.0",constructor:p,length:0,toArray:function(){return wa.call(this)},get:function(b){return null!=
b?0>b?this[b+this.length]:this[b]:wa.call(this)},pushStack:function(b){b=p.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return p.each(this,b)},map:function(b){return this.pushStack(p.map(this,function(c,g){return b.call(c,g,c)}))},slice:function(){return this.pushStack(wa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var c=this.length;b=+b+(0>b?c:0);return this.pushStack(0<=b&&b<c?[this[b]]:[])},end:function(){return this.prevObject||
this.constructor()},push:qb,sort:Fa.sort,splice:Fa.splice};p.extend=p.fn.extend=function(){var b,c,g,e,h=arguments[0]||{},k=1,m=arguments.length,n=!1;"boolean"==typeof h&&(n=h,h=arguments[k]||{},k++);"object"==typeof h||p.isFunction(h)||(h={});for(k===m&&(h=this,k--);k<m;k++)if(null!=(b=arguments[k]))for(c in b){var f=h[c];var u=b[c];h!==u&&(n&&u&&(p.isPlainObject(u)||(g=p.isArray(u)))?(g?(g=!1,e=f&&p.isArray(f)?f:[]):e=f&&p.isPlainObject(f)?f:{},h[c]=p.extend(n,e,u)):void 0!==u&&(h[c]=u))}return h};
p.extend({expando:"jQuery"+("3.1.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===p.type(b)},isArray:Array.isArray,isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var c=p.type(b);return("number"===c||"string"===c)&&!isNaN(b-parseFloat(b))},isPlainObject:function(b){var c,g;return!(!b||"[object Object]"!==eb.call(b))&&(!(c=Na(b))||(g=xa.call(c,"constructor")&&c.constructor,"function"==
typeof g&&rb.call(g)===Ga))},isEmptyObject:function(b){for(var c in b)return!1;return!0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?db[eb.call(b)]||"object":typeof b},globalEval:function(b){e(b)},camelCase:function(b){return b.replace(ac,"ms-").replace(bc,Jb)},nodeName:function(b,c){return b.nodeName&&b.nodeName.toLowerCase()===c.toLowerCase()},each:function(b,c){var g,e=0;if(l(b))for(g=b.length;e<g&&!1!==c.call(b[e],e,b[e]);e++);else for(e in b)if(!1===c.call(b[e],
e,b[e]))break;return b},trim:function(b){return null==b?"":(b+"").replace(Ib,"")},makeArray:function(b,c){c=c||[];return null!=b&&(l(Object(b))?p.merge(c,"string"==typeof b?[b]:b):qb.call(c,b)),c},inArray:function(b,c,g){return null==c?-1:$a.call(c,b,g)},merge:function(b,c){for(var g=+c.length,e=0,h=b.length;e<g;e++)b[h++]=c[e];return b.length=h,b},grep:function(b,c,g){for(var e=[],h=0,k=b.length,m=!g;h<k;h++)g=!c(b[h],h),g!==m&&e.push(b[h]);return e},map:function(b,c,g){var e,h=0,k=[];if(l(b))for(e=
b.length;h<e;h++){var m=c(b[h],h,g);null!=m&&k.push(m)}else for(h in b)m=c(b[h],h,g),null!=m&&k.push(m);return nb.apply([],k)},guid:1,proxy:function(b,c){var g,e,h;if("string"==typeof c&&(g=b[c],c=b,b=g),p.isFunction(b))return e=wa.call(arguments,2),h=function(){return b.apply(c||this,e.concat(wa.call(arguments)))},h.guid=b.guid=b.guid||p.guid++,h},now:Date.now,support:T});"function"==typeof Symbol&&(p.fn[Symbol.iterator]=Fa[Symbol.iterator]);p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(b,c){db["[object "+c+"]"]=c.toLowerCase()});var Ia=function(b){function c(b,c,g,e){var h,k,m,n,f=c&&c.ownerDocument,u=c?c.nodeType:9;if(g=g||[],"string"!=typeof b||!b||1!==u&&9!==u&&11!==u)return g;if(!e&&((c?c.ownerDocument||c:ca)!==D&&ha(c),c=c||D,H)){if(11!==u&&(n=ia.exec(b)))if(h=n[1])if(9===u){if(!(k=c.getElementById(h)))return g;if(k.id===h)return g.push(k),g}else{if(f&&(k=f.getElementById(h))&&ja(c,k)&&k.id===h)return g.push(k),g}else{if(n[2])return Ta.apply(g,c.getElementsByTagName(b)),
g;if((h=n[3])&&fa.getElementsByClassName&&c.getElementsByClassName)return Ta.apply(g,c.getElementsByClassName(h)),g}if(!(!fa.qsa||L[b+" "]||N&&N.test(b))){if(1!==u){f=c;var l=b}else if("object"!==c.nodeName.toLowerCase()){(m=c.getAttribute("id"))?m=m.replace(ka,la):c.setAttribute("id",m=C);k=ma(b);for(h=k.length;h--;)k[h]="#"+m+" "+y(k[h]);l=k.join(",");f=ba.test(b)&&r(c.parentNode)||c}if(l)try{return Ta.apply(g,f.querySelectorAll(l)),g}catch(ed){}finally{m===C&&c.removeAttribute("id")}}}return z(b.replace(cc,
"$1"),c,g,e)}function g(){function b(g,e){return c.push(g+" ")>S.cacheLength&&delete b[c.shift()],b[g+" "]=e}var c=[];return b}function e(b){return b[C]=!0,b}function h(b){var c=D.createElement("fieldset");try{return!!b(c)}catch(cd){return!1}finally{c.parentNode&&c.parentNode.removeChild(c)}}function k(b,c){b=b.split("|");for(var g=b.length;g--;)S.attrHandle[b[g]]=c}function m(b,c){var g=c&&b,e=g&&1===b.nodeType&&1===c.nodeType&&b.sourceIndex-c.sourceIndex;if(e)return e;if(g)for(;g=g.nextSibling;)if(g===
c)return-1;return b?1:-1}function n(b){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===b}}function f(b){return function(c){var g=c.nodeName.toLowerCase();return("input"===g||"button"===g)&&c.type===b}}function u(b){return function(c){return"label"in c&&c.disabled===b||"form"in c&&c.disabled===b||"form"in c&&!1===c.disabled&&(c.isDisabled===b||c.isDisabled!==!b&&("label"in c||!oa(c))!==b)}}function l(b){return e(function(c){return c=+c,e(function(g,e){for(var h,k=b([],g.length,
c),m=k.length;m--;)g[h=k[m]]&&(g[h]=!(e[h]=g[h]))})})}function r(b){return b&&"undefined"!=typeof b.getElementsByTagName&&b}function x(){}function y(b){for(var c=0,g=b.length,e="";c<g;c++)e+=b[c].value;return e}function w(b,c,g){var e=c.dir,h=c.next,k=h||e,m=g&&"parentNode"===k,n=da++;return c.first?function(c,g,h){for(;c=c[e];)if(1===c.nodeType||m)return b(c,g,h)}:function(c,g,f){var u,l,r,na=[P,n];if(f)for(;c=c[e];){if((1===c.nodeType||m)&&b(c,g,f))return!0}else for(;c=c[e];)if(1===c.nodeType||
m)if(r=c[C]||(c[C]={}),l=r[c.uniqueID]||(r[c.uniqueID]={}),h&&h===c.nodeName.toLowerCase())c=c[e]||c;else{if((u=l[k])&&u[0]===P&&u[1]===n)return na[2]=u[2];if(l[k]=na,na[2]=b(c,g,f))return!0}}}function O(b){return 1<b.length?function(c,g,e){for(var h=b.length;h--;)if(!b[h](c,g,e))return!1;return!0}:b[0]}function G(b,c,g,e,h){for(var k,m=[],f=0,n=b.length,u=null!=c;f<n;f++)(k=b[f])&&(g&&!g(k,e,h)||(m.push(k),u&&c.push(f)));return m}function A(b,g,h,k,m,f){return k&&!k[C]&&(k=A(k)),m&&!m[C]&&(m=A(m,
f)),e(function(e,f,n,u){var l,r=[],na=[],x=f.length,y;if(!(y=e)){y=g||"*";for(var w=n.nodeType?[n]:n,O=[],A=0,t=w.length;A<t;A++)c(y,w[A],O);y=O}y=!b||!e&&g?y:G(y,r,b,n,u);w=h?m||(e?b:x||k)?[]:f:y;if(h&&h(y,w,n,u),k){var q=G(w,na);k(q,[],n,u);for(n=q.length;n--;)(l=q[n])&&(w[na[n]]=!(y[na[n]]=l))}if(e){if(m||b){if(m){q=[];for(n=w.length;n--;)(l=w[n])&&q.push(y[n]=l);m(null,w=[],q,u)}for(n=w.length;n--;)(l=w[n])&&-1<(q=m?fb(e,l):r[n])&&(e[q]=!(f[q]=l))}}else w=G(w===f?w.splice(x,w.length):w),m?m(null,
f,w,u):Ta.apply(f,w)})}function t(b){var c,g,e=b.length,h=S.relative[b[0].type];var k=h||S.relative[" "];for(var m=h?1:0,n=w(function(b){return b===c},k,!0),f=w(function(b){return-1<fb(c,b)},k,!0),u=[function(b,g,e){b=!h&&(e||g!==M)||((c=g).nodeType?n(b,g,e):f(b,g,e));return c=null,b}];m<e;m++)if(k=S.relative[b[m].type])u=[w(O(u),k)];else{if(k=S.filter[b[m].type].apply(null,b[m].matches),k[C]){for(g=++m;g<e&&!S.relative[b[g].type];g++);return A(1<m&&O(u),1<m&&y(b.slice(0,m-1).concat({value:" "===
b[m-2].type?"*":""})).replace(cc,"$1"),k,m<g&&t(b.slice(m,g)),g<e&&t(b=b.slice(g)),g<e&&y(b))}u.push(k)}return O(u)}function q(b,g){var h=0<g.length,k=0<b.length,m=function(e,m,n,f,u){var l,r,na=0,x="0",y=e&&[],w=[],O=M,A=e||k&&S.find.TAG("*",u),t=P+=null==O?1:Math.random()||.1,q=A.length;for(u&&(M=m===D||m||u);x!==q&&null!=(l=A[x]);x++){if(k&&l){var v=0;for(m||l.ownerDocument===D||(ha(l),n=!H);r=b[v++];)if(r(l,m||D,n)){f.push(l);break}u&&(P=t)}h&&((l=!r&&l)&&na--,e&&y.push(l))}if(na+=x,h&&x!==na){for(v=
0;r=g[v++];)r(y,w,m,n);if(e){if(0<na)for(;x--;)y[x]||w[x]||(w[x]=R.call(f));w=G(w)}Ta.apply(f,w);u&&!e&&0<w.length&&1<na+g.length&&c.uniqueSort(f)}return u&&(P=t,M=O),y};return h?e(m):m}var v,p,z,M,F,I,D,J,H,N,E,X,ja,C="sizzle"+1*new Date,ca=b.document,P=0,da=0,U=g(),K=g(),L=g(),ta=function(b,c){return b===c&&(I=!0),0},T={}.hasOwnProperty,Q=[],R=Q.pop,na=Q.push,Ta=Q.push,oc=Q.slice,fb=function(b,c){for(var g=0,e=b.length;g<e;g++)if(b[g]===c)return g;return-1},Wc=/[\x20\t\r\n\f]+/g,cc=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,
Xc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Yc=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Zc=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,$c=/:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,ad=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,ec={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\x00-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\x00-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\x00-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,
CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},V=/^(?:input|select|textarea|button)$/i,aa=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,
ia=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ba=/[+~]/,ea=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,W=function(b,c,g){b="0x"+c-65536;return b!==b||g?c:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320)},ka=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,la=function(b,c){return c?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},qa=function(){ha()},oa=w(function(b){return!0===b.disabled},{dir:"parentNode",next:"legend"});try{Ta.apply(Q=
oc.call(ca.childNodes),ca.childNodes),Q[ca.childNodes.length].nodeType}catch(bd){Ta={apply:Q.length?function(b,c){na.apply(b,oc.call(c))}:function(b,c){for(var g=b.length,e=0;b[g++]=c[e++];);b.length=g-1}}}var fa=c.support={};var pa=c.isXML=function(b){b=b&&(b.ownerDocument||b).documentElement;return!!b&&"HTML"!==b.nodeName};var ha=c.setDocument=function(b){var c,g;b=b?b.ownerDocument||b:ca;return b!==D&&9===b.nodeType&&b.documentElement?(D=b,J=D.documentElement,H=!pa(D),ca!==D&&(g=D.defaultView)&&
g.top!==g&&(g.addEventListener?g.addEventListener("unload",qa,!1):g.attachEvent&&g.attachEvent("onunload",qa)),fa.attributes=h(function(b){return b.className="i",!b.getAttribute("className")}),fa.getElementsByTagName=h(function(b){return b.appendChild(D.createComment("")),!b.getElementsByTagName("*").length}),fa.getElementsByClassName=Y.test(D.getElementsByClassName),fa.getById=h(function(b){return J.appendChild(b).id=C,!D.getElementsByName||!D.getElementsByName(C).length}),fa.getById?(S.find.ID=
function(b,c){if("undefined"!=typeof c.getElementById&&H)return(b=c.getElementById(b))?[b]:[]},S.filter.ID=function(b){var c=b.replace(ea,W);return function(b){return b.getAttribute("id")===c}}):(delete S.find.ID,S.filter.ID=function(b){var c=b.replace(ea,W);return function(b){return(b="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===c}}),S.find.TAG=fa.getElementsByTagName?function(b,c){return"undefined"!=typeof c.getElementsByTagName?c.getElementsByTagName(b):fa.qsa?c.querySelectorAll(b):
void 0}:function(b,c){var g=[],e=0;c=c.getElementsByTagName(b);if("*"===b){for(;b=c[e++];)1===b.nodeType&&g.push(b);return g}return c},S.find.CLASS=fa.getElementsByClassName&&function(b,c){if("undefined"!=typeof c.getElementsByClassName&&H)return c.getElementsByClassName(b)},E=[],N=[],(fa.qsa=Y.test(D.querySelectorAll))&&(h(function(b){J.appendChild(b).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&
N.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||N.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");b.querySelectorAll("[id~="+C+"-]").length||N.push("~=");b.querySelectorAll(":checked").length||N.push(":checked");b.querySelectorAll("a#"+C+"+*").length||N.push(".#.+[+~]")}),h(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
var c=D.createElement("input");c.setAttribute("type","hidden");b.appendChild(c).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&N.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&N.push(":enabled",":disabled");J.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&N.push(":enabled",":disabled");b.querySelectorAll("*,:x");N.push(",.*:")})),(fa.matchesSelector=Y.test(X=J.matches||J.webkitMatchesSelector||J.mozMatchesSelector||J.oMatchesSelector||
J.msMatchesSelector))&&h(function(b){fa.disconnectedMatch=X.call(b,"*");X.call(b,"[s!='']:x");E.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),N=N.length&&new RegExp(N.join("|")),
E=E.length&&new RegExp(E.join("|")),c=Y.test(J.compareDocumentPosition),ja=c||Y.test(J.contains)?function(b,c){var g=9===b.nodeType?b.documentElement:b;c=c&&c.parentNode;return b===c||!(!c||1!==c.nodeType||!(g.contains?g.contains(c):b.compareDocumentPosition&&16&b.compareDocumentPosition(c)))}:function(b,c){if(c)for(;c=c.parentNode;)if(c===b)return!0;return!1},ta=c?function(b,c){if(b===c)return I=!0,0;var g=!b.compareDocumentPosition-!c.compareDocumentPosition;return g?g:(g=(b.ownerDocument||b)===
(c.ownerDocument||c)?b.compareDocumentPosition(c):1,1&g||!fa.sortDetached&&c.compareDocumentPosition(b)===g?b===D||b.ownerDocument===ca&&ja(ca,b)?-1:c===D||c.ownerDocument===ca&&ja(ca,c)?1:F?fb(F,b)-fb(F,c):0:4&g?-1:1)}:function(b,c){if(b===c)return I=!0,0;var g=0,e=b.parentNode,h=c.parentNode,k=[b],n=[c];if(!e||!h)return b===D?-1:c===D?1:e?-1:h?1:F?fb(F,b)-fb(F,c):0;if(e===h)return m(b,c);for(;b=b.parentNode;)k.unshift(b);for(b=c;b=b.parentNode;)n.unshift(b);for(;k[g]===n[g];)g++;return g?m(k[g],
n[g]):k[g]===ca?-1:n[g]===ca?1:0},D):D};c.matches=function(b,g){return c(b,null,null,g)};c.matchesSelector=function(b,g){if((b.ownerDocument||b)!==D&&ha(b),g=g.replace(Zc,"='$1']"),!(!fa.matchesSelector||!H||L[g+" "]||E&&E.test(g)||N&&N.test(g)))try{var e=X.call(b,g);if(e||fa.disconnectedMatch||b.document&&11!==b.document.nodeType)return e}catch(dd){}return 0<c(g,D,null,[b]).length};c.contains=function(b,c){return(b.ownerDocument||b)!==D&&ha(b),ja(b,c)};c.attr=function(b,c){(b.ownerDocument||b)!==
D&&ha(b);var g=S.attrHandle[c.toLowerCase()];g=g&&T.call(S.attrHandle,c.toLowerCase())?g(b,c,!H):void 0;return void 0!==g?g:fa.attributes||!H?b.getAttribute(c):(g=b.getAttributeNode(c))&&g.specified?g.value:null};c.escape=function(b){return(b+"").replace(ka,la)};c.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};c.uniqueSort=function(b){var c,g=[],e=0,h=0;if(I=!fa.detectDuplicates,F=!fa.sortStable&&b.slice(0),b.sort(ta),I){for(;c=b[h++];)c===b[h]&&(e=g.push(h));for(;e--;)b.splice(g[e],
1)}return F=null,b};var ra=c.getText=function(b){var c,g="",e=0;if(c=b.nodeType)if(1===c||9===c||11===c){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)g+=ra(b)}else{if(3===c||4===c)return b.nodeValue}else for(;c=b[e++];)g+=ra(c);return g};var S=c.selectors={cacheLength:50,createPseudo:e,match:ec,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=
b[1].replace(ea,W),b[3]=(b[3]||b[4]||b[5]||"").replace(ea,W),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||c.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&c.error(b[0]),b},PSEUDO:function(b){var c,g=!b[6]&&b[2];return ec.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":g&&$c.test(g)&&(c=ma(g,!0))&&(c=g.indexOf(")",g.length-c)-g.length)&&(b[0]=b[0].slice(0,
c),b[2]=g.slice(0,c)),b.slice(0,3))}},filter:{TAG:function(b){var c=b.replace(ea,W).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===c}},CLASS:function(b){var c=U[b+" "];return c||(c=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"),U(b,function(b){return c.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||"")}))},ATTR:function(b,g,e){return function(h){h=c.attr(h,b);
return null==h?"!="===g:!g||(h+="","="===g?h===e:"!="===g?h!==e:"^="===g?e&&0===h.indexOf(e):"*="===g?e&&-1<h.indexOf(e):"$="===g?e&&h.slice(-e.length)===e:"~="===g?-1<(" "+h.replace(Wc," ")+" ").indexOf(e):"|="===g&&(h===e||h.slice(0,e.length+1)===e+"-"))}},CHILD:function(b,c,g,e,h){var k="nth"!==b.slice(0,3),m="last"!==b.slice(-4),n="of-type"===c;return 1===e&&0===h?function(b){return!!b.parentNode}:function(c,g,f){var u,l;g=k!==m?"nextSibling":"previousSibling";var r=c.parentNode,na=n&&c.nodeName.toLowerCase();
f=!f&&!n;var x=!1;if(r){if(k){for(;g;){for(u=c;u=u[g];)if(n?u.nodeName.toLowerCase()===na:1===u.nodeType)return!1;var y=g="only"===b&&!y&&"nextSibling"}return!0}if(y=[m?r.firstChild:r.lastChild],m&&f){u=r;var w=u[C]||(u[C]={});var O=w[u.uniqueID]||(w[u.uniqueID]={});var G=O[b]||[];x=(l=G[0]===P&&G[1])&&G[2];for(u=l&&r.childNodes[l];u=++l&&u&&u[g]||(x=l=0)||y.pop();)if(1===u.nodeType&&++x&&u===c){O[b]=[P,l,x];break}}else if(f&&(u=c,w=u[C]||(u[C]={}),O=w[u.uniqueID]||(w[u.uniqueID]={}),G=O[b]||[],l=
G[0]===P&&G[1],x=l),!1===x)for(;(u=++l&&u&&u[g]||(x=l=0)||y.pop())&&((n?u.nodeName.toLowerCase()!==na:1!==u.nodeType)||!++x||(f&&(w=u[C]||(u[C]={}),O=w[u.uniqueID]||(w[u.uniqueID]={}),O[b]=[P,x]),u!==c)););return x-=h,x===e||0===x%e&&0<=x/e}}},PSEUDO:function(b,g){var h,k=S.pseudos[b]||S.setFilters[b.toLowerCase()]||c.error("unsupported pseudo: "+b);return k[C]?k(g):1<k.length?(h=[b,b,"",g],S.setFilters.hasOwnProperty(b.toLowerCase())?e(function(b,c){for(var e,h=k(b,g),m=h.length;m--;)e=fb(b,h[m]),
b[e]=!(c[e]=h[m])}):function(b){return k(b,0,h)}):k}},pseudos:{not:e(function(b){var c=[],g=[],h=p(b.replace(cc,"$1"));return h[C]?e(function(b,c,g,e){var k;g=h(b,null,e,[]);for(e=b.length;e--;)(k=g[e])&&(b[e]=!(c[e]=k))}):function(b,e,k){return c[0]=b,h(c,null,k,g),c[0]=null,!g.pop()}}),has:e(function(b){return function(g){return 0<c(b,g).length}}),contains:e(function(b){return b=b.replace(ea,W),function(c){return-1<(c.textContent||c.innerText||ra(c)).indexOf(b)}}),lang:e(function(b){return ad.test(b||
"")||c.error("unsupported lang: "+b),b=b.replace(ea,W).toLowerCase(),function(c){var g;do if(g=H?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return g=g.toLowerCase(),g===b||0===g.indexOf(b+"-");while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(c){var g=b.location&&b.location.hash;return g&&g.slice(1)===c.id},root:function(b){return b===J},focus:function(b){return b===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(b.type||b.href||~b.tabIndex)},enabled:u(!1),disabled:u(!0),
checked:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&!!b.checked||"option"===c&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!S.pseudos.empty(b)},header:function(b){return aa.test(b.nodeName)},input:function(b){return V.test(b.nodeName)},button:function(b){var c=b.nodeName.toLowerCase();return"input"===c&&"button"===
b.type||"button"===c},text:function(b){var c;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(c=b.getAttribute("type"))||"text"===c.toLowerCase())},first:l(function(){return[0]}),last:l(function(b,c){return[c-1]}),eq:l(function(b,c,g){return[0>g?g+c:g]}),even:l(function(b,c){for(var g=0;g<c;g+=2)b.push(g);return b}),odd:l(function(b,c){for(var g=1;g<c;g+=2)b.push(g);return b}),lt:l(function(b,c,g){for(c=0>g?g+c:g;0<=--c;)b.push(c);return b}),gt:l(function(b,c,g){for(g=0>g?g+c:g;++g<
c;)b.push(g);return b})}};S.pseudos.nth=S.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[v]=n(v);for(v in{submit:!0,reset:!0})S.pseudos[v]=f(v);x.prototype=S.filters=S.pseudos;S.setFilters=new x;var ma=c.tokenize=function(b,g){var e,h,k,m,n;if(m=K[b+" "])return g?0:m.slice(0);m=b;var f=[];for(n=S.preFilter;m;){u&&!(e=Xc.exec(m))||(e&&(m=m.slice(e[0].length)||m),f.push(h=[]));var u=!1;(e=Yc.exec(m))&&(u=e.shift(),h.push({value:u,type:e[0].replace(cc," ")}),m=m.slice(u.length));
for(k in S.filter)!(e=ec[k].exec(m))||n[k]&&!(e=n[k](e))||(u=e.shift(),h.push({value:u,type:k,matches:e}),m=m.slice(u.length));if(!u)break}return g?m.length:m?c.error(b):K(b,f).slice(0)};return p=c.compile=function(b,c){var g,e=[],h=[],k=L[b+" "];if(!k){c||(c=ma(b));for(g=c.length;g--;)k=t(c[g]),k[C]?e.push(k):h.push(k);k=L(b,q(h,e));k.selector=b}return k},z=c.select=function(b,c,g,e){var h,k,m,n,f,u="function"==typeof b&&b,l=!e&&ma(b=u.selector||b);if(g=g||[],1===l.length){if(k=l[0]=l[0].slice(0),
2<k.length&&"ID"===(m=k[0]).type&&fa.getById&&9===c.nodeType&&H&&S.relative[k[1].type]){if(c=(S.find.ID(m.matches[0].replace(ea,W),c)||[])[0],!c)return g;u&&(c=c.parentNode);b=b.slice(k.shift().value.length)}for(h=ec.needsContext.test(b)?0:k.length;h--&&(m=k[h],!S.relative[n=m.type]);)if((f=S.find[n])&&(e=f(m.matches[0].replace(ea,W),ba.test(k[0].type)&&r(c.parentNode)||c))){if(k.splice(h,1),b=e.length&&y(k),!b)return Ta.apply(g,e),g;break}}return(u||p(b,l))(e,c,!H,g,!c||ba.test(b)&&r(c.parentNode)||
c),g},fa.sortStable=C.split("").sort(ta).join("")===C,fa.detectDuplicates=!!I,ha(),fa.sortDetached=h(function(b){return 1&b.compareDocumentPosition(D.createElement("fieldset"))}),h(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||k("type|href|height|width",function(b,c,g){if(!g)return b.getAttribute(c,"type"===c.toLowerCase()?1:2)}),fa.attributes&&h(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||
k("value",function(b,c,g){if(!g&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),h(function(b){return null==b.getAttribute("disabled")})||k("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,c,g){var e;if(!g)return!0===b[c]?c.toLowerCase():(e=b.getAttributeNode(c))&&e.specified?e.value:null}),c}(f);p.find=Ia;p.expr=Ia.selectors;p.expr[":"]=p.expr.pseudos;p.uniqueSort=p.unique=Ia.uniqueSort;p.text=Ia.getText;
p.isXMLDoc=Ia.isXML;p.contains=Ia.contains;p.escapeSelector=Ia.escape;var Pa=function(b,c,g){for(var e=[],h=void 0!==g;(b=b[c])&&9!==b.nodeType;)if(1===b.nodeType){if(h&&p(b).is(g))break;e.push(b)}return e},Q=function(b,c){for(var g=[];b;b=b.nextSibling)1===b.nodeType&&b!==c&&g.push(b);return g},Lb=p.expr.match.needsContext,gb=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,zb=/^.[^:#\[\.,]*$/;p.filter=function(b,c,g){var e=c[0];return g&&(b=":not("+b+")"),1===c.length&&1===e.nodeType?
p.find.matchesSelector(e,b)?[e]:[]:p.find.matches(b,p.grep(c,function(b){return 1===b.nodeType}))};p.fn.extend({find:function(b){var c,g=this.length,e=this;if("string"!=typeof b)return this.pushStack(p(b).filter(function(){for(c=0;c<g;c++)if(p.contains(e[c],this))return!0}));var h=this.pushStack([]);for(c=0;c<g;c++)p.find(b,e[c],h);return 1<g?p.uniqueSort(h):h},filter:function(b){return this.pushStack(c(this,b||[],!1))},not:function(b){return this.pushStack(c(this,b||[],!0))},is:function(b){return!!c(this,
"string"==typeof b&&Lb.test(b)?p(b):b||[],!1).length}});var Mb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(p.fn.init=function(b,c,g){var e,h;if(!b)return this;if(g=g||fc,"string"==typeof b){if(e="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:Mb.exec(b),!e||!e[1]&&c)return!c||c.jquery?(c||g).find(b):this.constructor(c).find(b);if(e[1]){if(c=c instanceof p?c[0]:c,p.merge(this,p.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:L,!0)),gb.test(e[1])&&p.isPlainObject(c))for(e in c)p.isFunction(this[e])?
this[e](c[e]):this.attr(e,c[e]);return this}return h=L.getElementById(e[2]),h&&(this[0]=h,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):p.isFunction(b)?void 0!==g.ready?g.ready(b):b(p):p.makeArray(b,this)}).prototype=p.fn;var fc=p(L);var Nb=/^(?:parents|prev(?:Until|All))/,Ob={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(b){var c=p(b,this),g=c.length;return this.filter(function(){for(var b=0;b<g;b++)if(p.contains(this,c[b]))return!0})},closest:function(b,
c){var g,e=0,h=this.length,k=[],m="string"!=typeof b&&p(b);if(!Lb.test(b))for(;e<h;e++)for(g=this[e];g&&g!==c;g=g.parentNode)if(11>g.nodeType&&(m?-1<m.index(g):1===g.nodeType&&p.find.matchesSelector(g,b))){k.push(g);break}return this.pushStack(1<k.length?p.uniqueSort(k):k)},index:function(b){return b?"string"==typeof b?$a.call(p(b),this[0]):$a.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,c){return this.pushStack(p.uniqueSort(p.merge(this.get(),
p(b,c))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});p.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Pa(b,"parentNode")},parentsUntil:function(b,c,g){return Pa(b,"parentNode",g)},next:function(b){return t(b,"nextSibling")},prev:function(b){return t(b,"previousSibling")},nextAll:function(b){return Pa(b,"nextSibling")},prevAll:function(b){return Pa(b,"previousSibling")},nextUntil:function(b,c,g){return Pa(b,
"nextSibling",g)},prevUntil:function(b,c,g){return Pa(b,"previousSibling",g)},siblings:function(b){return Q((b.parentNode||{}).firstChild,b)},children:function(b){return Q(b.firstChild)},contents:function(b){return b.contentDocument||p.merge([],b.childNodes)}},function(b,c){p.fn[b]=function(g,e){var h=p.map(this,c,g);return"Until"!==b.slice(-5)&&(e=g),e&&"string"==typeof e&&(h=p.filter(e,h)),1<this.length&&(Ob[b]||p.uniqueSort(h),Nb.test(b)&&h.reverse()),this.pushStack(h)}});var oa=/\S+/g;p.Callbacks=
function(b){b="string"==typeof b?v(b):p.extend({},b);var c,g,e,h,k=[],m=[],n=-1,f=function(){h=b.once;for(e=c=!0;m.length;n=-1)for(g=m.shift();++n<k.length;)!1===k[n].apply(g[0],g[1])&&b.stopOnFalse&&(n=k.length,g=!1);b.memory||(g=!1);c=!1;h&&(k=g?[]:"")},u={add:function(){return k&&(g&&!c&&(n=k.length-1,m.push(g)),function mc(c){p.each(c,function(c,g){p.isFunction(g)?b.unique&&u.has(g)||k.push(g):g&&g.length&&"string"!==p.type(g)&&mc(g)})}(arguments),g&&!c&&f()),this},remove:function(){return p.each(arguments,
function(b,c){for(var g;-1<(g=p.inArray(c,k,g));)k.splice(g,1),g<=n&&n--}),this},has:function(b){return b?-1<p.inArray(b,k):0<k.length},empty:function(){return k&&(k=[]),this},disable:function(){return h=m=[],k=g="",this},disabled:function(){return!k},lock:function(){return h=m=[],g||c||(k=g=""),this},locked:function(){return!!h},fireWith:function(b,g){return h||(g=g||[],g=[b,g.slice?g.slice():g],m.push(g),c||f()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!e}};
return u};p.extend({Deferred:function(b){var c=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],g="pending",e={state:function(){return g},always:function(){return h.done(arguments).fail(arguments),this},"catch":function(b){return e.then(null,b)},pipe:function(){var b=arguments;return p.Deferred(function(g){p.each(c,
function(c,e){var k=p.isFunction(b[e[4]])&&b[e[4]];h[e[1]](function(){var b=k&&k.apply(this,arguments);b&&p.isFunction(b.promise)?b.promise().progress(g.notify).done(g.resolve).fail(g.reject):g[e[0]+"With"](this,k?[b]:arguments)})});b=null}).promise()},then:function(b,g,e){function h(b,c,g,e){return function(){var n=this,u=arguments,l=function(){var f;if(!(b<m)){if(f=g.apply(n,u),f===c.promise())throw new TypeError("Thenable self-resolution");var l=f&&("object"==typeof f||"function"==typeof f)&&f.then;
p.isFunction(l)?e?l.call(f,h(m,c,q,e),h(m,c,k,e)):(m++,l.call(f,h(m,c,q,e),h(m,c,k,e),h(m,c,q,c.notifyWith))):(g!==q&&(n=void 0,u=[f]),(e||c.resolveWith)(n,u))}},r=e?l:function(){try{l()}catch(dc){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(dc,r.stackTrace),b+1>=m&&(g!==k&&(n=void 0,u=[dc]),c.rejectWith(n,u))}};b?r():(p.Deferred.getStackHook&&(r.stackTrace=p.Deferred.getStackHook()),f.setTimeout(r))}}var m=0;return p.Deferred(function(m){c[0][3].add(h(0,m,p.isFunction(e)?e:q,m.notifyWith));
c[1][3].add(h(0,m,p.isFunction(b)?b:q));c[2][3].add(h(0,m,p.isFunction(g)?g:k))}).promise()},promise:function(b){return null!=b?p.extend(b,e):e}},h={};return p.each(c,function(b,k){var m=k[2],n=k[5];e[k[1]]=m.add;n&&m.add(function(){g=n},c[3-b][2].disable,c[0][2].lock);m.add(k[3].fire);h[k[0]]=function(){return h[k[0]+"With"](this===h?void 0:this,arguments),this};h[k[0]+"With"]=m.fireWith}),e.promise(h),b&&b.call(h,h),h},when:function(b){var c=arguments.length,g=c,e=Array(g),h=wa.call(arguments),
k=p.Deferred(),n=function(b){return function(g){e[b]=this;h[b]=1<arguments.length?wa.call(arguments):g;--c||k.resolveWith(e,h)}};if(1>=c&&(m(b,k.done(n(g)).resolve,k.reject),"pending"===k.state()||p.isFunction(h[g]&&h[g].then)))return k.then();for(;g--;)m(h[g],n(g),k.reject);return k.promise()}});var gc=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(b,c){f.console&&f.console.warn&&b&&gc.test(b.name)&&f.console.warn("jQuery.Deferred exception: "+b.message,
b.stack,c)};p.readyException=function(b){f.setTimeout(function(){throw b;})};var ha=p.Deferred();p.fn.ready=function(b){return ha.then(b)["catch"](function(b){p.readyException(b)}),this};p.extend({isReady:!1,readyWait:1,holdReady:function(b){b?p.readyWait++:p.ready(!0)},ready:function(b){(!0===b?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==b&&0<--p.readyWait||ha.resolveWith(L,[p]))}});p.ready.then=ha.then;"complete"===L.readyState||"loading"!==L.readyState&&!L.documentElement.doScroll?f.setTimeout(p.ready):
(L.addEventListener("DOMContentLoaded",r),f.addEventListener("load",r));var ka=function(b,c,g,e,h,k,m){var n=0,f=b.length,u=null==g;if("object"===p.type(g))for(n in h=!0,g)ka(b,c,n,g[n],!0,k,m);else if(void 0!==e&&(h=!0,p.isFunction(e)||(m=!0),u&&(m?(c.call(b,e),c=null):(u=c,c=function(b,c,g){return u.call(p(b),g)})),c))for(;n<f;n++)c(b[n],g,m?e:e.call(b[n],n,c(b[n],g)));return h?b:u?c.call(b):f?c(b[0],g):k},hb=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};n.uid=1;n.prototype={cache:function(b){var c=
b[this.expando];return c||(c={},hb(b)&&(b.nodeType?b[this.expando]=c:Object.defineProperty(b,this.expando,{value:c,configurable:!0}))),c},set:function(b,c,g){var e;b=this.cache(b);if("string"==typeof c)b[p.camelCase(c)]=g;else for(e in c)b[p.camelCase(e)]=c[e];return b},get:function(b,c){return void 0===c?this.cache(b):b[this.expando]&&b[this.expando][p.camelCase(c)]},access:function(b,c,g){return void 0===c||c&&"string"==typeof c&&void 0===g?this.get(b,c):(this.set(b,c,g),void 0!==g?g:c)},remove:function(b,
c){var g,e=b[this.expando];if(void 0!==e){if(void 0!==c)for(p.isArray(c)?c=c.map(p.camelCase):(c=p.camelCase(c),c=c in e?[c]:c.match(oa)||[]),g=c.length;g--;)delete e[c[g]];(void 0===c||p.isEmptyObject(e))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=b[this.expando];return void 0!==b&&!p.isEmptyObject(b)}};var K=new n,W=new n,Ab=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Zb=/[A-Z]/g;p.extend({hasData:function(b){return W.hasData(b)||K.hasData(b)},data:function(b,c,g){return W.access(b,
c,g)},removeData:function(b,c){W.remove(b,c)},_data:function(b,c,g){return K.access(b,c,g)},_removeData:function(b,c){K.remove(b,c)}});p.fn.extend({data:function(b,c){var g,e,h,k=this[0],m=k&&k.attributes;if(void 0===b){if(this.length&&(h=W.get(k),1===k.nodeType&&!K.get(k,"hasDataAttrs"))){for(g=m.length;g--;)m[g]&&(e=m[g].name,0===e.indexOf("data-")&&(e=p.camelCase(e.slice(5)),y(k,e,h[e])));K.set(k,"hasDataAttrs",!0)}return h}return"object"==typeof b?this.each(function(){W.set(this,b)}):ka(this,
function(c){var g;if(k&&void 0===c){if((g=W.get(k,b),void 0!==g)||(g=y(k,b),void 0!==g))return g}else this.each(function(){W.set(this,b,c)})},null,c,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){W.remove(this,b)})}});p.extend({queue:function(b,c,g){var e;if(b)return c=(c||"fx")+"queue",e=K.get(b,c),g&&(!e||p.isArray(g)?e=K.access(b,c,p.makeArray(g)):e.push(g)),e||[]},dequeue:function(b,c){c=c||"fx";var g=p.queue(b,c),e=g.length,h=g.shift(),k=p._queueHooks(b,c),m=
function(){p.dequeue(b,c)};"inprogress"===h&&(h=g.shift(),e--);h&&("fx"===c&&g.unshift("inprogress"),delete k.stop,h.call(b,m,k));!e&&k&&k.empty.fire()},_queueHooks:function(b,c){var g=c+"queueHooks";return K.get(b,g)||K.access(b,g,{empty:p.Callbacks("once memory").add(function(){K.remove(b,[c+"queue",g])})})}});p.fn.extend({queue:function(b,c){var g=2;return"string"!=typeof b&&(c=b,b="fx",g--),arguments.length<g?p.queue(this[0],b):void 0===c?this:this.each(function(){var g=p.queue(this,b,c);p._queueHooks(this,
b);"fx"===b&&"inprogress"!==g[0]&&p.dequeue(this,b)})},dequeue:function(b){return this.each(function(){p.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,c){var g,e=1,h=p.Deferred(),k=this,m=this.length,n=function(){--e||h.resolveWith(k,[k])};"string"!=typeof b&&(c=b,b=void 0);for(b=b||"fx";m--;)(g=K.get(k[m],b+"queueHooks"))&&g.empty&&(e++,g.empty.add(n));return n(),h.promise(c)}});var Pb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ba=new RegExp("^(?:([+-])=|)("+
Pb+")([a-z%]*)$","i"),Da=["Top","Right","Bottom","Left"],lb=function(b,c){return b=c||b,"none"===b.style.display||""===b.style.display&&p.contains(b.ownerDocument,b)&&"none"===p.css(b,"display")},Qb=function(b,c,g,e){var h,k={};for(h in c)k[h]=b.style[h],b.style[h]=c[h];g=g.apply(b,e||[]);for(h in c)b.style[h]=k[h];return g},ab={};p.fn.extend({show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){lb(this)?
p(this).show():p(this).hide()})}});var Rb=/^(?:checkbox|radio)$/i,mb=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Cb=/^$|\/(?:java|ecma)script/i,pa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};pa.optgroup=pa.option;pa.tbody=pa.tfoot=pa.colgroup=pa.caption=pa.thead;pa.th=pa.td;var Ca=/<|&#?\w+;/;!function(){var b=
L.createDocumentFragment().appendChild(L.createElement("div")),c=L.createElement("input");c.setAttribute("type","radio");c.setAttribute("checked","checked");c.setAttribute("name","t");b.appendChild(c);T.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked;b.innerHTML="<textarea>x</textarea>";T.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var ua=L.documentElement,Wa=/^key/,sb=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Sb=/^([^.]*)(?:\.(.+)|)/;p.event={global:{},add:function(b,
c,g,e,h){var k,m,n,f,u,l,r,x;if(f=K.get(b))for(g.handler&&(k=g,g=k.handler,h=k.selector),h&&p.find.matchesSelector(ua,h),g.guid||(g.guid=p.guid++),(n=f.events)||(n=f.events={}),(m=f.handle)||(m=f.handle=function(c){return"undefined"!=typeof p&&p.event.triggered!==c.type?p.event.dispatch.apply(b,arguments):void 0}),c=(c||"").match(oa)||[""],f=c.length;f--;){var y=Sb.exec(c[f])||[];var w=x=y[1];y=(y[2]||"").split(".").sort();w&&(l=p.event.special[w]||{},w=(h?l.delegateType:l.bindType)||w,l=p.event.special[w]||
{},u=p.extend({type:w,origType:x,data:e,handler:g,guid:g.guid,selector:h,needsContext:h&&p.expr.match.needsContext.test(h),namespace:y.join(".")},k),(r=n[w])||(r=n[w]=[],r.delegateCount=0,l.setup&&!1!==l.setup.call(b,e,y,m)||b.addEventListener&&b.addEventListener(w,m)),l.add&&(l.add.call(b,u),u.handler.guid||(u.handler.guid=g.guid)),h?r.splice(r.delegateCount++,0,u):r.push(u),p.event.global[w]=!0)}},remove:function(b,c,g,e,h){var k,m,n,f,u,l,r,x,y=K.hasData(b)&&K.get(b);if(y&&(f=y.events)){c=(c||
"").match(oa)||[""];for(u=c.length;u--;)if(n=Sb.exec(c[u])||[],l=x=n[1],r=(n[2]||"").split(".").sort(),l){var w=p.event.special[l]||{};l=(e?w.delegateType:w.bindType)||l;var G=f[l]||[];n=n[2]&&new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)");for(m=k=G.length;k--;){var A=G[k];!h&&x!==A.origType||g&&g.guid!==A.guid||n&&!n.test(A.namespace)||e&&e!==A.selector&&("**"!==e||!A.selector)||(G.splice(k,1),A.selector&&G.delegateCount--,w.remove&&w.remove.call(b,A))}m&&!G.length&&(w.teardown&&!1!==w.teardown.call(b,
r,y.handle)||p.removeEvent(b,l,y.handle),delete f[l])}else for(l in f)p.event.remove(b,l+c[u],g,e,!0);p.isEmptyObject(f)&&K.remove(b,"handle events")}},dispatch:function(b){var c=p.event.fix(b),g,e,h,k,m=Array(arguments.length);var n=(K.get(this,"events")||{})[c.type]||[];var f=p.event.special[c.type]||{};m[0]=c;for(g=1;g<arguments.length;g++)m[g]=arguments[g];if(c.delegateTarget=this,!f.preDispatch||!1!==f.preDispatch.call(this,c)){var u=p.event.handlers.call(this,c,n);for(g=0;(h=u[g++])&&!c.isPropagationStopped();)for(c.currentTarget=
h.elem,n=0;(k=h.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!c.rnamespace.test(k.namespace)||(c.handleObj=k,c.data=k.data,e=((p.event.special[k.origType]||{}).handle||k.handler).apply(h.elem,m),void 0!==e&&!1===(c.result=e)&&(c.preventDefault(),c.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,c),c.result}},handlers:function(b,c){var g,e=[],h=c.delegateCount,k=b.target;if(h&&k.nodeType&&("click"!==b.type||isNaN(b.button)||1>b.button))for(;k!==this;k=k.parentNode||
this)if(1===k.nodeType&&(!0!==k.disabled||"click"!==b.type)){var m=[];for(g=0;g<h;g++){var n=c[g];var f=n.selector+" ";void 0===m[f]&&(m[f]=n.needsContext?-1<p(f,this).index(k):p.find(f,this,null,[k]).length);m[f]&&m.push(n)}m.length&&e.push({elem:k,handlers:m})}return h<c.length&&e.push({elem:this,handlers:c.slice(h)}),e},addProp:function(b,c){Object.defineProperty(p.Event.prototype,b,{enumerable:!0,configurable:!0,get:p.isFunction(c)?function(){if(this.originalEvent)return c(this.originalEvent)}:
function(){if(this.originalEvent)return this.originalEvent[b]},set:function(c){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:c})}})},fix:function(b){return b[p.expando]?b:new p.Event(b)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==F()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===F()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&
p.nodeName(this,"input"))return this.click(),!1},_default:function(b){return p.nodeName(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};p.removeEvent=function(b,c,g){b.removeEventListener&&b.removeEventListener(c,g)};p.Event=function(b,c){return this instanceof p.Event?(b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?I:D,
this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,c&&p.extend(this,c),this.timeStamp=b&&b.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(b,c)};p.Event.prototype={constructor:p.Event,isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=I;b&&!this.isSimulated&&b.preventDefault()},
stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=I;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=I;b&&!this.isSimulated&&b.stopImmediatePropagation();this.stopPropagation()}};p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,
clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var c=b.button;return null==b.which&&Wa.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==c&&sb.test(b.type)?1&c?1:2&c?3:4&c?2:0:b.which}},p.event.addProp);p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,c){p.event.special[b]={delegateType:c,bindType:c,handle:function(b){var g,
e=b.relatedTarget,h=b.handleObj;return e&&(e===this||p.contains(this,e))||(b.type=h.origType,g=h.handler.apply(this,arguments),b.type=c),g}}});p.fn.extend({on:function(b,c,g,e){return H(this,b,c,g,e)},one:function(b,c,g,e){return H(this,b,c,g,e,1)},off:function(b,c,g){var e,h;if(b&&b.preventDefault&&b.handleObj)return e=b.handleObj,p(b.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof b){for(h in b)this.off(h,c,b[h]);return this}return!1!==
c&&"function"!=typeof c||(g=c,c=void 0),!1===g&&(g=D),this.each(function(){p.event.remove(this,b,g,c)})}});var pc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Tb=/<script|<style|<link/i,Db=/checked\s*(?:[^=]|=\s*.checked.)/i,$b=/^true\/(.*)/,nc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;p.extend({htmlPrefilter:function(b){return b.replace(pc,"<$1></$2>")},clone:function(b,c,g){var e,k=b.cloneNode(!0),m=p.contains(b.ownerDocument,b);if(!(T.noCloneChecked||
1!==b.nodeType&&11!==b.nodeType||p.isXMLDoc(b))){var n=h(k);var f=h(b);var u=0;for(e=f.length;u<e;u++){var l=f[u],r=n[u],x=r.nodeName.toLowerCase();"input"===x&&Rb.test(l.type)?r.checked=l.checked:"input"!==x&&"textarea"!==x||(r.defaultValue=l.defaultValue)}}if(c)if(g)for(f=f||h(b),n=n||h(k),u=0,e=f.length;u<e;u++)M(f[u],n[u]);else M(b,k);return n=h(k,"script"),0<n.length&&A(n,!m&&h(b,"script")),k},cleanData:function(b){for(var c,g,e,h=p.event.special,k=0;void 0!==(g=b[k]);k++)if(hb(g)){if(c=g[K.expando]){if(c.events)for(e in c.events)h[e]?
p.event.remove(g,e):p.removeEvent(g,e,c.handle);g[K.expando]=void 0}g[W.expando]&&(g[W.expando]=void 0)}}});p.fn.extend({detach:function(b){return X(this,b,!0)},remove:function(b){return X(this,b)},text:function(b){return ka(this,function(b){return void 0===b?p.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,b,arguments.length)},append:function(){return J(this,arguments,function(b){1!==this.nodeType&&11!==this.nodeType&&
9!==this.nodeType||g(this,b).appendChild(b)})},prepend:function(){return J(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var c=g(this,b);c.insertBefore(b,c.firstChild)}})},before:function(){return J(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return J(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,c=0;null!=(b=this[c]);c++)1===
b.nodeType&&(p.cleanData(h(b,!1)),b.textContent="");return this},clone:function(b,c){return b=null!=b&&b,c=null==c?b:c,this.map(function(){return p.clone(this,b,c)})},html:function(b){return ka(this,function(b){var c=this[0]||{},g=0,e=this.length;if(void 0===b&&1===c.nodeType)return c.innerHTML;if("string"==typeof b&&!Tb.test(b)&&!pa[(mb.exec(b)||["",""])[1].toLowerCase()]){b=p.htmlPrefilter(b);try{for(;g<e;g++)c=this[g]||{},1===c.nodeType&&(p.cleanData(h(c,!1)),c.innerHTML=b);c=0}catch(uc){}}c&&
this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return J(this,arguments,function(c){var g=this.parentNode;0>p.inArray(this,b)&&(p.cleanData(h(this)),g&&g.replaceChild(c,this))},b)}});p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,c){p.fn[b]=function(b){for(var g=[],e=p(b),h=e.length-1,k=0;k<=h;k++)b=k===h?this:this.clone(!0),p(e[k])[c](b),qb.apply(g,b.get());return this.pushStack(g)}});
var Sa=/^margin/,Y=new RegExp("^("+Pb+")(?!px)[a-z%]+$","i"),bb=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=f),c.getComputedStyle(b)};!function(){function b(){if(m){m.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";m.innerHTML="";ua.appendChild(k);var b=f.getComputedStyle(m);c="1%"!==b.top;h="2px"===b.marginLeft;g="4px"===b.width;m.style.marginRight="50%";e="4px"===b.marginRight;ua.removeChild(k);m=
null}}var c,g,e,h,k=L.createElement("div"),m=L.createElement("div");m.style&&(m.style.backgroundClip="content-box",m.cloneNode(!0).style.backgroundClip="",T.clearCloneStyle="content-box"===m.style.backgroundClip,k.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",k.appendChild(m),p.extend(T,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),g},pixelMarginRight:function(){return b(),e},reliableMarginLeft:function(){return b(),
h}}))}();var tb=/^(none|table(?!-c[ea]).+)/,Ub={position:"absolute",visibility:"hidden",display:"block"},Qa={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","Moz","ms"],la=L.createElement("div").style;p.extend({cssHooks:{opacity:{get:function(b,c){if(c)return b=P(b,"opacity"),""===b?"1":b}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},
style:function(b,c,g,e){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var h,k,m,n=p.camelCase(c),f=b.style;return c=p.cssProps[n]||(p.cssProps[n]=ja(n)||n),m=p.cssHooks[c]||p.cssHooks[n],void 0===g?m&&"get"in m&&void 0!==(h=m.get(b,!1,e))?h:f[c]:(k=typeof g,"string"===k&&(h=Ba.exec(g))&&h[1]&&(g=w(b,c,h),k="number"),null!=g&&g===g&&("number"===k&&(g+=h&&h[3]||(p.cssNumber[n]?"":"px")),T.clearCloneStyle||""!==g||0!==c.indexOf("background")||(f[c]="inherit"),m&&"set"in m&&void 0===(g=m.set(b,g,e))||
(f[c]=g)),void 0)}},css:function(b,c,g,e){var h,k,m,n=p.camelCase(c);return c=p.cssProps[n]||(p.cssProps[n]=ja(n)||n),m=p.cssHooks[c]||p.cssHooks[n],m&&"get"in m&&(h=m.get(b,!0,g)),void 0===h&&(h=P(b,c,e)),"normal"===h&&c in Qa&&(h=Qa[c]),""===g||g?(k=parseFloat(h),!0===g||isFinite(k)?k||0:h):h}});p.each(["height","width"],function(b,c){p.cssHooks[c]={get:function(b,g,e){if(g)return!tb.test(p.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?ca(b,c,e):Qb(b,Ub,function(){return ca(b,
c,e)})},set:function(b,g,e){var h,k=e&&bb(b);e=e&&E(b,c,e,"border-box"===p.css(b,"boxSizing",!1,k),k);return e&&(h=Ba.exec(g))&&"px"!==(h[3]||"px")&&(b.style[c]=g,g=p.css(b,c)),N(b,g,e)}}});p.cssHooks.marginLeft=C(T.reliableMarginLeft,function(b,c){if(c)return(parseFloat(P(b,"marginLeft"))||b.getBoundingClientRect().left-Qb(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});p.each({margin:"",padding:"",border:"Width"},function(b,c){p.cssHooks[b+c]={expand:function(g){var e=
0,h={};for(g="string"==typeof g?g.split(" "):[g];4>e;e++)h[b+Da[e]+c]=g[e]||g[e-2]||g[0];return h}};Sa.test(b)||(p.cssHooks[b+c].set=N)});p.fn.extend({css:function(b,c){return ka(this,function(b,c,g){var e,h={},k=0;if(p.isArray(c)){g=bb(b);for(e=c.length;k<e;k++)h[c[k]]=p.css(b,c[k],!1,g);return h}return void 0!==g?p.style(b,c,g):p.css(b,c)},b,c,1<arguments.length)}});p.Tween=da;da.prototype={constructor:da,init:function(b,c,g,e,h,k){this.elem=b;this.prop=g;this.easing=h||p.easing._default;this.options=
c;this.start=this.now=this.cur();this.end=e;this.unit=k||(p.cssNumber[g]?"":"px")},cur:function(){var b=da.propHooks[this.prop];return b&&b.get?b.get(this):da.propHooks._default.get(this)},run:function(b){var c,g=da.propHooks[this.prop];return this.options.duration?this.pos=c=p.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=c=b,this.now=(this.end-this.start)*c+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),g&&g.set?g.set(this):da.propHooks._default.set(this),
this}};da.prototype.init.prototype=da.prototype;da.propHooks={_default:{get:function(b){var c;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(c=p.css(b.elem,b.prop,""),c&&"auto"!==c?c:0)},set:function(b){p.fx.step[b.prop]?p.fx.step[b.prop](b):1!==b.elem.nodeType||null==b.elem.style[p.cssProps[b.prop]]&&!p.cssHooks[b.prop]?b.elem[b.prop]=b.now:p.style(b.elem,b.prop,b.now+b.unit)}}};da.propHooks.scrollTop=da.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&
b.elem.parentNode&&(b.elem[b.prop]=b.now)}};p.easing={linear:function(b){return b},swing:function(b){return.5-Math.cos(b*Math.PI)/2},_default:"swing"};p.fx=da.prototype.init;p.fx.step={};var Ka,Ea,ub=/^(?:toggle|show|hide)$/,V=/queueHooks$/;p.Animation=p.extend(ea,{tweeners:{"*":[function(b,c){var g=this.createTween(b,c);return w(g.elem,b,Ba.exec(c),g),g}]},tweener:function(b,c){p.isFunction(b)?(c=b,b=["*"]):b=b.match(oa);for(var g,e=0,h=b.length;e<h;e++)g=b[e],ea.tweeners[g]=ea.tweeners[g]||[],ea.tweeners[g].unshift(c)},
prefilters:[function(b,c,g){var e,h,k,m,n,f,u,l,r="width"in c||"height"in c,y=this,w={},G=b.style,A=b.nodeType&&lb(b),t=K.get(b,"fxshow");g.queue||(m=p._queueHooks(b,"fx"),null==m.unqueued&&(m.unqueued=0,n=m.empty.fire,m.empty.fire=function(){m.unqueued||n()}),m.unqueued++,y.always(function(){y.always(function(){m.unqueued--;p.queue(b,"fx").length||m.empty.fire()})}));for(e in c)if(h=c[e],ub.test(h)){if(delete c[e],k=k||"toggle"===h,h===(A?"hide":"show")){if("show"!==h||!t||void 0===t[e])continue;
A=!0}w[e]=t&&t[e]||p.style(b,e)}if(f=!p.isEmptyObject(c),f||!p.isEmptyObject(w))for(e in r&&1===b.nodeType&&(g.overflow=[G.overflow,G.overflowX,G.overflowY],u=t&&t.display,null==u&&(u=K.get(b,"display")),l=p.css(b,"display"),"none"===l&&(u?l=u:(x([b],!0),u=b.style.display||u,l=p.css(b,"display"),x([b]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===p.css(b,"float")&&(f||(y.done(function(){G.display=u}),null==u&&(l=G.display,u="none"===l?"":l)),G.display="inline-block")),g.overflow&&(G.overflow=
"hidden",y.always(function(){G.overflow=g.overflow[0];G.overflowX=g.overflow[1];G.overflowY=g.overflow[2]})),f=!1,w)f||(t?"hidden"in t&&(A=t.hidden):t=K.access(b,"fxshow",{display:u}),k&&(t.hidden=!A),A&&x([b],!0),y.done(function(){A||x([b]);K.remove(b,"fxshow");for(e in w)p.style(b,e,w[e])})),f=La(A?t[e]:0,e,y),e in t||(t[e]=f.start,A&&(f.end=f.start,f.start=0))}],prefilter:function(b,c){c?ea.prefilters.unshift(b):ea.prefilters.push(b)}});p.speed=function(b,c,g){var e=b&&"object"==typeof b?p.extend({},
b):{complete:g||!g&&c||p.isFunction(b)&&b,duration:b,easing:g&&c||c&&!p.isFunction(c)&&c};return p.fx.off||L.hidden?e.duration=0:e.duration="number"==typeof e.duration?e.duration:e.duration in p.fx.speeds?p.fx.speeds[e.duration]:p.fx.speeds._default,null!=e.queue&&!0!==e.queue||(e.queue="fx"),e.old=e.complete,e.complete=function(){p.isFunction(e.old)&&e.old.call(this);e.queue&&p.dequeue(this,e.queue)},e};p.fn.extend({fadeTo:function(b,c,g,e){return this.filter(lb).css("opacity",0).show().end().animate({opacity:c},
b,g,e)},animate:function(b,c,g,e){var h=p.isEmptyObject(b),k=p.speed(c,g,e);c=function(){var c=ea(this,p.extend({},b),k);(h||K.get(this,"finish"))&&c.stop(!0)};return c.finish=c,h||!1===k.queue?this.each(c):this.queue(k.queue,c)},stop:function(b,c,g){var e=function(b){var c=b.stop;delete b.stop;c(g)};return"string"!=typeof b&&(g=c,c=b,b=void 0),c&&!1!==b&&this.queue(b||"fx",[]),this.each(function(){var c=!0,h=null!=b&&b+"queueHooks",k=p.timers,m=K.get(this);if(h)m[h]&&m[h].stop&&e(m[h]);else for(h in m)m[h]&&
m[h].stop&&V.test(h)&&e(m[h]);for(h=k.length;h--;)k[h].elem!==this||null!=b&&k[h].queue!==b||(k[h].anim.stop(g),c=!1,k.splice(h,1));!c&&g||p.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var c=K.get(this),g=c[b+"queue"];var e=c[b+"queueHooks"];var h=p.timers,k=g?g.length:0;c.finish=!0;p.queue(this,b,[]);e&&e.stop&&e.stop.call(this,!0);for(e=h.length;e--;)h[e].elem===this&&h[e].queue===b&&(h[e].anim.stop(!0),h.splice(e,1));for(e=0;e<k;e++)g[e]&&g[e].finish&&g[e].finish.call(this);
delete c.finish})}});p.each(["toggle","show","hide"],function(b,c){var g=p.fn[c];p.fn[c]=function(b,e,h){return null==b||"boolean"==typeof b?g.apply(this,arguments):this.animate(qa(c,!0),b,e,h)}});p.each({slideDown:qa("show"),slideUp:qa("hide"),slideToggle:qa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,c){p.fn[b]=function(b,g,e){return this.animate(c,b,g,e)}});p.timers=[];p.fx.tick=function(){var b=0,c=p.timers;for(Ka=p.now();b<c.length;b++){var g=
c[b];g()||c[b]!==g||c.splice(b--,1)}c.length||p.fx.stop();Ka=void 0};p.fx.timer=function(b){p.timers.push(b);b()?p.fx.start():p.timers.pop()};p.fx.interval=13;p.fx.start=function(){Ea||(Ea=f.requestAnimationFrame?f.requestAnimationFrame(U):f.setInterval(p.fx.tick,p.fx.interval))};p.fx.stop=function(){f.cancelAnimationFrame?f.cancelAnimationFrame(Ea):f.clearInterval(Ea);Ea=null};p.fx.speeds={slow:600,fast:200,_default:400};p.fn.delay=function(b,c){return b=p.fx?p.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,
function(c,g){var e=f.setTimeout(c,b);g.stop=function(){f.clearTimeout(e)}})};(function(){var b=L.createElement("input"),c=L.createElement("select").appendChild(L.createElement("option"));b.type="checkbox";T.checkOn=""!==b.value;T.optSelected=c.selected;b=L.createElement("input");b.value="t";b.type="radio";T.radioValue="t"===b.value})();var Xa=p.expr.attrHandle;p.fn.extend({attr:function(b,c){return ka(this,p.attr,b,c,1<arguments.length)},removeAttr:function(b){return this.each(function(){p.removeAttr(this,
b)})}});p.extend({attr:function(b,c,g){var e,h,k=b.nodeType;if(3!==k&&8!==k&&2!==k)return"undefined"==typeof b.getAttribute?p.prop(b,c,g):(1===k&&p.isXMLDoc(b)||(h=p.attrHooks[c.toLowerCase()]||(p.expr.match.bool.test(c)?hc:void 0)),void 0!==g?null===g?void p.removeAttr(b,c):h&&"set"in h&&void 0!==(e=h.set(b,g,c))?e:(b.setAttribute(c,g+""),g):h&&"get"in h&&null!==(e=h.get(b,c))?e:(e=p.find.attr(b,c),null==e?void 0:e))},attrHooks:{type:{set:function(b,c){if(!T.radioValue&&"radio"===c&&p.nodeName(b,
"input")){var g=b.value;return b.setAttribute("type",c),g&&(b.value=g),c}}}},removeAttr:function(b,c){var g=0,e=c&&c.match(oa);if(e&&1===b.nodeType)for(;c=e[g++];)b.removeAttribute(c)}});var hc={set:function(b,c,g){return!1===c?p.removeAttr(b,g):b.setAttribute(g,g),g}};p.each(p.expr.match.bool.source.match(/\w+/g),function(b,c){var g=Xa[c]||p.find.attr;Xa[c]=function(b,c,e){var h,k,m=c.toLowerCase();return e||(k=Xa[m],Xa[m]=h,h=null!=g(b,c,e)?m:null,Xa[m]=k),h}});var vb=/^(?:input|select|textarea|button)$/i,
Vb=/^(?:a|area)$/i;p.fn.extend({prop:function(b,c){return ka(this,p.prop,b,c,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[p.propFix[b]||b]})}});p.extend({prop:function(b,c,g){var e,h,k=b.nodeType;if(3!==k&&8!==k&&2!==k)return 1===k&&p.isXMLDoc(b)||(c=p.propFix[c]||c,h=p.propHooks[c]),void 0!==g?h&&"set"in h&&void 0!==(e=h.set(b,g,c))?e:b[c]=g:h&&"get"in h&&null!==(e=h.get(b,c))?e:b[c]},propHooks:{tabIndex:{get:function(b){var c=p.find.attr(b,"tabindex");return c?
parseInt(c,10):vb.test(b.nodeName)||Vb.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});T.optSelected||(p.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){p.propFix[this.toLowerCase()]=
this});var Ya=/[\t\r\n\f]/g;p.fn.extend({addClass:function(b){var c,g,e,h,k,m,n=0;if(p.isFunction(b))return this.each(function(c){p(this).addClass(b.call(this,c,ra(this)))});if("string"==typeof b&&b)for(c=b.match(oa)||[];g=this[n++];)if(h=ra(g),e=1===g.nodeType&&(" "+h+" ").replace(Ya," ")){for(m=0;k=c[m++];)0>e.indexOf(" "+k+" ")&&(e+=k+" ");e=p.trim(e);h!==e&&g.setAttribute("class",e)}return this},removeClass:function(b){var c,g,e,h,k,m,n=0;if(p.isFunction(b))return this.each(function(c){p(this).removeClass(b.call(this,
c,ra(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof b&&b)for(c=b.match(oa)||[];g=this[n++];)if(h=ra(g),e=1===g.nodeType&&(" "+h+" ").replace(Ya," ")){for(m=0;k=c[m++];)for(;-1<e.indexOf(" "+k+" ");)e=e.replace(" "+k+" "," ");e=p.trim(e);h!==e&&g.setAttribute("class",e)}return this},toggleClass:function(b,c){var g=typeof b;return"boolean"==typeof c&&"string"===g?c?this.addClass(b):this.removeClass(b):p.isFunction(b)?this.each(function(g){p(this).toggleClass(b.call(this,
g,ra(this),c),c)}):this.each(function(){var c,e;if("string"===g){var h=0;var k=p(this);for(e=b.match(oa)||[];c=e[h++];)k.hasClass(c)?k.removeClass(c):k.addClass(c)}else void 0!==b&&"boolean"!==g||(c=ra(this),c&&K.set(this,"__className__",c),this.setAttribute&&this.setAttribute("class",c||!1===b?"":K.get(this,"__className__")||""))})},hasClass:function(b){var c,g=0;for(b=" "+b+" ";c=this[g++];)if(1===c.nodeType&&-1<(" "+ra(c)+" ").replace(Ya," ").indexOf(b))return!0;return!1}});var qc=/\r/g,wb=/[\x20\t\r\n\f]+/g;
p.fn.extend({val:function(b){var c,g,e,h=this[0];if(arguments.length)return e=p.isFunction(b),this.each(function(g){var h;1===this.nodeType&&(h=e?b.call(this,g,p(this).val()):b,null==h?h="":"number"==typeof h?h+="":p.isArray(h)&&(h=p.map(h,function(b){return null==b?"":b+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&void 0!==c.set(this,h,"value")||(this.value=h))});if(h)return c=p.valHooks[h.type]||p.valHooks[h.nodeName.toLowerCase()],c&&"get"in c&&void 0!==
(g=c.get(h,"value"))?g:(g=h.value,"string"==typeof g?g.replace(qc,""):null==g?"":g)}});p.extend({valHooks:{option:{get:function(b){var c=p.find.attr(b,"value");return null!=c?c:p.trim(p.text(b)).replace(wb," ")}},select:{get:function(b){for(var c,g=b.options,e=b.selectedIndex,h="select-one"===b.type,k=h?null:[],m=h?e+1:g.length,n=0>e?m:h?e:0;n<m;n++)if(c=g[n],!(!c.selected&&n!==e||c.disabled||c.parentNode.disabled&&p.nodeName(c.parentNode,"optgroup"))){if(b=p(c).val(),h)return b;k.push(b)}return k},
set:function(b,c){for(var g,e=b.options,h=p.makeArray(c),k=e.length;k--;)c=e[k],(c.selected=-1<p.inArray(p.valHooks.option.get(c),h))&&(g=!0);return g||(b.selectedIndex=-1),h}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(b,c){if(p.isArray(c))return b.checked=-1<p.inArray(p(b).val(),c)}};T.checkOn||(p.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var ic=/^(?:focusinfocus|focusoutblur)$/;p.extend(p.event,{trigger:function(b,c,g,e){var h,
k,m,n,u,l=[g||L],r=xa.call(b,"type")?b.type:b;var x=xa.call(b,"namespace")?b.namespace.split("."):[];if(h=k=g=g||L,3!==g.nodeType&&8!==g.nodeType&&!ic.test(r+p.event.triggered)&&(-1<r.indexOf(".")&&(x=r.split("."),r=x.shift(),x.sort()),m=0>r.indexOf(":")&&"on"+r,b=b[p.expando]?b:new p.Event(r,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=x.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=g),c=null==c?[b]:p.makeArray(c,
[b]),u=p.event.special[r]||{},e||!u.trigger||!1!==u.trigger.apply(g,c))){if(!e&&!u.noBubble&&!p.isWindow(g)){var y=u.delegateType||r;for(ic.test(y+r)||(h=h.parentNode);h;h=h.parentNode)l.push(h),k=h;k===(g.ownerDocument||L)&&l.push(k.defaultView||k.parentWindow||f)}for(x=0;(h=l[x++])&&!b.isPropagationStopped();)b.type=1<x?y:u.bindType||r,(n=(K.get(h,"events")||{})[b.type]&&K.get(h,"handle"))&&n.apply(h,c),(n=m&&h[m])&&n.apply&&hb(h)&&(b.result=n.apply(h,c),!1===b.result&&b.preventDefault());return b.type=
r,e||b.isDefaultPrevented()||u._default&&!1!==u._default.apply(l.pop(),c)||!hb(g)||m&&p.isFunction(g[r])&&!p.isWindow(g)&&(k=g[m],k&&(g[m]=null),p.event.triggered=r,g[r](),p.event.triggered=void 0,k&&(g[m]=k)),b.result}},simulate:function(b,c,g){b=p.extend(new p.Event,g,{type:b,isSimulated:!0});p.event.trigger(b,null,c)}});p.fn.extend({trigger:function(b,c){return this.each(function(){p.event.trigger(b,c,this)})},triggerHandler:function(b,c){var g=this[0];if(g)return p.event.trigger(b,c,g,!0)}});
p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(b,c){p.fn[c]=function(b,g){return 0<arguments.length?this.on(c,null,b,g):this.trigger(c)}});p.fn.extend({hover:function(b,c){return this.mouseenter(b).mouseleave(c||b)}});T.focusin="onfocusin"in f;T.focusin||p.each({focus:"focusin",blur:"focusout"},function(b,c){var g=function(b){p.event.simulate(c,
b.target,p.event.fix(b))};p.event.special[c]={setup:function(){var e=this.ownerDocument||this,h=K.access(e,c);h||e.addEventListener(b,g,!0);K.access(e,c,(h||0)+1)},teardown:function(){var e=this.ownerDocument||this,h=K.access(e,c)-1;h?K.access(e,c,h):(e.removeEventListener(b,g,!0),K.remove(e,c))}}});var Ja=f.location,Za=p.now(),ib=/\?/;p.parseXML=function(b){if(!b||"string"!=typeof b)return null;try{var c=(new f.DOMParser).parseFromString(b,"text/xml")}catch(tc){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||
p.error("Invalid XML: "+b),c};var Fb=/\[\]$/,ma=/\r?\n/g,ya=/^(?:submit|button|image|reset|file)$/i,va=/^(?:input|select|textarea|keygen)/i;p.param=function(b,c){var g,e=[],h=function(b,c){c=p.isFunction(c)?c():c;e[e.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==c?"":c)};if(p.isArray(b)||b.jquery&&!p.isPlainObject(b))p.each(b,function(){h(this.name,this.value)});else for(g in b)pb(g,b[g],c,h);return e.join("&")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},
serializeArray:function(){return this.map(function(){var b=p.prop(this,"elements");return b?p.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!p(this).is(":disabled")&&va.test(this.nodeName)&&!ya.test(b)&&(this.checked||!Rb.test(b))}).map(function(b,c){b=p(this).val();return null==b?null:p.isArray(b)?p.map(b,function(b){return{name:c.name,value:b.replace(ma,"\r\n")}}):{name:c.name,value:b.replace(ma,"\r\n")}}).get()}});var ia=/%20/g,sa=/#.*$/,za=/([?&])_=[^&]*/,Ra=/^(.*?):[ \t]*([^\r\n]*)$/gm,
rc=/^(?:GET|HEAD)$/,sc=/^\/\//,Wb={},aa={},Xb="*/".concat("*"),xb=L.createElement("a");xb.href=Ja.href;p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ja.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ja.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,
html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,c){return c?Ma(Ma(b,p.ajaxSettings),c):Ma(p.ajaxSettings,b)},ajaxPrefilter:Gb(Wb),ajaxTransport:Gb(aa),ajax:function(b,c){function g(b,c,g,k){var u,l,t,q=c;if(!F){F=!0;m&&f.clearTimeout(m);e=void 0;h=k||"";z.readyState=0<b?4:0;k=200<=b&&300>b||304===b;
if(g){var v=r;for(var I=z,D,J,H,N,E=v.contents,O=v.dataTypes;"*"===O[0];)O.shift(),void 0===D&&(D=v.mimeType||I.getResponseHeader("Content-Type"));if(D)for(J in E)if(E[J]&&E[J].test(D)){O.unshift(J);break}if(O[0]in g)H=O[0];else{for(J in g){if(!O[0]||v.converters[J+" "+O[0]]){H=J;break}N||(N=J)}H=H||N}g=H?(H!==O[0]&&O.unshift(H),g[H]):void 0;v=g}a:{g=r;D=v;J=z;H=k;var X,C,ja;v={};I=g.dataTypes.slice();if(I[1])for(X in g.converters)v[X.toLowerCase()]=g.converters[X];for(N=I.shift();N;)if(g.responseFields[N]&&
(J[g.responseFields[N]]=D),!ja&&H&&g.dataFilter&&(D=g.dataFilter(D,g.dataType)),ja=N,N=I.shift())if("*"===N)N=ja;else if("*"!==ja&&ja!==N){if(X=v[ja+" "+N]||v["* "+N],!X)for(ca in v)if(C=ca.split(" "),C[1]===N&&(X=v[ja+" "+C[0]]||v["* "+C[0]])){!0===X?X=v[ca]:!0!==v[ca]&&(N=C[0],I.unshift(C[1]));break}if(!0!==X)if(X&&g["throws"])D=X(D);else try{D=X(D)}catch(Kb){var ca={state:"parsererror",error:X?Kb:"No conversion from "+ja+" to "+N};break a}}ca={state:"success",data:D}}v=ca;k?(r.ifModified&&(t=z.getResponseHeader("Last-Modified"),
t&&(p.lastModified[M]=t),t=z.getResponseHeader("etag"),t&&(p.etag[M]=t)),204===b||"HEAD"===r.type?q="nocontent":304===b?q="notmodified":(q=v.state,u=v.data,l=v.error,k=!l)):(l=q,!b&&q||(q="error",0>b&&(b=0)));z.status=b;z.statusText=(c||q)+"";k?w.resolveWith(x,[u,q,z]):w.rejectWith(x,[z,q,l]);z.statusCode(A);A=void 0;n&&y.trigger(k?"ajaxSuccess":"ajaxError",[z,r,k?u:l]);G.fireWith(x,[z,q]);n&&(y.trigger("ajaxComplete",[z,r]),--p.active||p.event.trigger("ajaxStop"))}}"object"==typeof b&&(c=b,b=void 0);
c=c||{};var e,h,k,m,n,u,l,r=p.ajaxSetup({},c),x=r.context||r,y=r.context&&(x.nodeType||x.jquery)?p(x):p.event,w=p.Deferred(),G=p.Callbacks("once memory"),A=r.statusCode||{},t={},q={},v="canceled",z={readyState:0,getResponseHeader:function(b){var c;if(F){if(!k)for(k={};c=Ra.exec(h);)k[c[1].toLowerCase()]=c[2];c=k[b.toLowerCase()]}return null==c?null:c},getAllResponseHeaders:function(){return F?h:null},setRequestHeader:function(b,c){return null==F&&(b=q[b.toLowerCase()]=q[b.toLowerCase()]||b,t[b]=c),
this},overrideMimeType:function(b){return null==F&&(r.mimeType=b),this},statusCode:function(b){var c;if(b)if(F)z.always(b[z.status]);else for(c in b)A[c]=[A[c],b[c]];return this},abort:function(b){b=b||v;return e&&e.abort(b),g(0,b),this}};if(w.promise(z),r.url=((b||r.url||Ja.href)+"").replace(sc,Ja.protocol+"//"),r.type=c.method||c.type||r.method||r.type,r.dataTypes=(r.dataType||"*").toLowerCase().match(oa)||[""],null==r.crossDomain){b=L.createElement("a");try{b.href=r.url,b.href=b.href,r.crossDomain=
xb.protocol+"//"+xb.host!=b.protocol+"//"+b.host}catch(B){r.crossDomain=!0}}if(r.data&&r.processData&&"string"!=typeof r.data&&(r.data=p.param(r.data,r.traditional)),Hb(Wb,r,c,z),F)return z;(n=p.event&&r.global)&&0===p.active++&&p.event.trigger("ajaxStart");r.type=r.type.toUpperCase();r.hasContent=!rc.test(r.type);var M=r.url.replace(sa,"");r.hasContent?r.data&&r.processData&&0===(r.contentType||"").indexOf("application/x-www-form-urlencoded")&&(r.data=r.data.replace(ia,"+")):(l=r.url.slice(M.length),
r.data&&(M+=(ib.test(M)?"&":"?")+r.data,delete r.data),!1===r.cache&&(M=M.replace(za,""),l=(ib.test(M)?"&":"?")+"_="+Za++ +l),r.url=M+l);r.ifModified&&(p.lastModified[M]&&z.setRequestHeader("If-Modified-Since",p.lastModified[M]),p.etag[M]&&z.setRequestHeader("If-None-Match",p.etag[M]));(r.data&&r.hasContent&&!1!==r.contentType||c.contentType)&&z.setRequestHeader("Content-Type",r.contentType);z.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?
", "+Xb+"; q=0.01":""):r.accepts["*"]);for(u in r.headers)z.setRequestHeader(u,r.headers[u]);if(r.beforeSend&&(!1===r.beforeSend.call(x,z,r)||F))return z.abort();if(v="abort",G.add(r.complete),z.done(r.success),z.fail(r.error),e=Hb(aa,r,c,z)){if(z.readyState=1,n&&y.trigger("ajaxSend",[z,r]),F)return z;r.async&&0<r.timeout&&(m=f.setTimeout(function(){z.abort("timeout")},r.timeout));try{var F=!1;e.send(t,g)}catch(B){if(F)throw B;g(-1,B)}}else g(-1,"No Transport");return z},getJSON:function(b,c,g){return p.get(b,
c,g,"json")},getScript:function(b,c){return p.get(b,void 0,c,"script")}});p.each(["get","post"],function(b,c){p[c]=function(b,g,e,h){return p.isFunction(g)&&(h=h||e,e=g,g=void 0),p.ajax(p.extend({url:b,type:c,dataType:h,data:g,success:e},p.isPlainObject(b)&&b))}});p._evalUrl=function(b){return p.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};p.fn.extend({wrapAll:function(b){var c;return this[0]&&(p.isFunction(b)&&(b=b.call(this[0])),c=p(b,this[0].ownerDocument).eq(0).clone(!0),
this[0].parentNode&&c.insertBefore(this[0]),c.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),this},wrapInner:function(b){return p.isFunction(b)?this.each(function(c){p(this).wrapInner(b.call(this,c))}):this.each(function(){var c=p(this),g=c.contents();g.length?g.wrapAll(b):c.append(b)})},wrap:function(b){var c=p.isFunction(b);return this.each(function(g){p(this).wrapAll(c?b.call(this,g):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){p(this).replaceWith(this.childNodes)}),
this}});p.expr.pseudos.hidden=function(b){return!p.expr.pseudos.visible(b)};p.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)};p.ajaxSettings.xhr=function(){try{return new f.XMLHttpRequest}catch(O){}};var jc={0:200,1223:204},Aa=p.ajaxSettings.xhr();T.cors=!!Aa&&"withCredentials"in Aa;T.ajax=Aa=!!Aa;p.ajaxTransport(function(b){var c,g;if(T.cors||Aa&&!b.crossDomain)return{send:function(e,h){var k,m=b.xhr();if(m.open(b.type,b.url,b.async,b.username,
b.password),b.xhrFields)for(k in b.xhrFields)m[k]=b.xhrFields[k];b.mimeType&&m.overrideMimeType&&m.overrideMimeType(b.mimeType);b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(k in e)m.setRequestHeader(k,e[k]);c=function(b){return function(){c&&(c=g=m.onload=m.onerror=m.onabort=m.onreadystatechange=null,"abort"===b?m.abort():"error"===b?"number"!=typeof m.status?h(0,"error"):h(m.status,m.statusText):h(jc[m.status]||m.status,m.statusText,"text"!==(m.responseType||
"text")||"string"!=typeof m.responseText?{binary:m.response}:{text:m.responseText},m.getAllResponseHeaders()))}};m.onload=c();g=m.onerror=c("error");void 0!==m.onabort?m.onabort=g:m.onreadystatechange=function(){4===m.readyState&&f.setTimeout(function(){c&&g()})};c=c("abort");try{m.send(b.hasContent&&b.data||null)}catch(lc){if(c)throw lc;}},abort:function(){c&&c()}}});p.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return p.globalEval(b),b}}});p.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});p.ajaxTransport("script",function(b){if(b.crossDomain){var c,g;return{send:function(e,h){c=p("<script>").prop({charset:b.scriptCharset,src:b.url}).on("load error",g=function(b){c.remove();g=null;b&&h("error"===b.type?404:200,b.type)});L.head.appendChild(c[0])},abort:function(){g&&g()}}}});
var kc=[],yb=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=kc.pop()||p.expando+"_"+Za++;return this[b]=!0,b}});p.ajaxPrefilter("json jsonp",function(b,c,g){var e,h,k,m=!1!==b.jsonp&&(yb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&yb.test(b.data)&&"data");if(m||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=p.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,m?b[m]=b[m].replace(yb,
"$1"+e):!1!==b.jsonp&&(b.url+=(ib.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return k||p.error(e+" was not called"),k[0]},b.dataTypes[0]="json",h=f[e],f[e]=function(){k=arguments},g.always(function(){void 0===h?p(f).removeProp(e):f[e]=h;b[e]&&(b.jsonpCallback=c.jsonpCallback,kc.push(e));k&&p.isFunction(h)&&h(k[0]);k=h=void 0}),"script"});T.createHTMLDocument=function(){var b=L.implementation.createHTMLDocument("").body;return b.innerHTML="<form></form><form></form>",
2===b.childNodes.length}();p.parseHTML=function(b,c,g){if("string"!=typeof b)return[];"boolean"==typeof c&&(g=c,c=!1);var e,h,k;return c||(T.createHTMLDocument?(c=L.implementation.createHTMLDocument(""),e=c.createElement("base"),e.href=L.location.href,c.head.appendChild(e)):c=L),h=gb.exec(b),k=!g&&[],h?[c.createElement(h[1])]:(h=z([b],c,k),k&&k.length&&p(k).remove(),p.merge([],h.childNodes))};p.fn.load=function(b,c,g){var e,h,k,m=this,n=b.indexOf(" ");return-1<n&&(e=p.trim(b.slice(n)),b=b.slice(0,
n)),p.isFunction(c)?(g=c,c=void 0):c&&"object"==typeof c&&(h="POST"),0<m.length&&p.ajax({url:b,type:h||"GET",dataType:"html",data:c}).done(function(b){k=arguments;m.html(e?p("<div>").append(p.parseHTML(b)).find(e):b)}).always(g&&function(b,c){m.each(function(){g.apply(this,k||[b.responseText,c,b])})}),this};p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,c){p.fn[c]=function(b){return this.on(c,b)}});p.expr.pseudos.animated=function(b){return p.grep(p.timers,
function(c){return b===c.elem}).length};p.offset={setOffset:function(b,c,g){var e,h,k,m=p.css(b,"position"),n=p(b),f={};"static"===m&&(b.style.position="relative");var u=n.offset();var l=p.css(b,"top");var r=p.css(b,"left");("absolute"===m||"fixed"===m)&&-1<(l+r).indexOf("auto")?(e=n.position(),k=e.top,h=e.left):(k=parseFloat(l)||0,h=parseFloat(r)||0);p.isFunction(c)&&(c=c.call(b,g,p.extend({},u)));null!=c.top&&(f.top=c.top-u.top+k);null!=c.left&&(f.left=c.left-u.left+h);"using"in c?c.using.call(b,
f):n.css(f)}};p.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(c){p.offset.setOffset(this,b,c)});var c,g,e,h,k=this[0];if(k)return k.getClientRects().length?(e=k.getBoundingClientRect(),e.width||e.height?(h=k.ownerDocument,g=cb(h),c=h.documentElement,{top:e.top+g.pageYOffset-c.clientTop,left:e.left+g.pageXOffset-c.clientLeft}):e):{top:0,left:0}},position:function(){if(this[0]){var b,c,g=this[0],e={top:0,left:0};return"fixed"===p.css(g,"position")?c=g.getBoundingClientRect():
(b=this.offsetParent(),c=this.offset(),p.nodeName(b[0],"html")||(e=b.offset()),e={top:e.top+p.css(b[0],"borderTopWidth",!0),left:e.left+p.css(b[0],"borderLeftWidth",!0)}),{top:c.top-e.top-p.css(g,"marginTop",!0),left:c.left-e.left-p.css(g,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===p.css(b,"position");)b=b.offsetParent;return b||ua})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var g="pageYOffset"===
c;p.fn[b]=function(e){return ka(this,function(b,e,h){var k=cb(b);return void 0===h?k?k[c]:b[e]:void(k?k.scrollTo(g?k.pageXOffset:h,g?h:k.pageYOffset):b[e]=h)},b,e,arguments.length)}});p.each(["top","left"],function(b,c){p.cssHooks[c]=C(T.pixelPosition,function(b,g){if(g)return g=P(b,c),Y.test(g)?p(b).position()[c]+"px":g})});p.each({Height:"height",Width:"width"},function(b,c){p.each({padding:"inner"+b,content:c,"":"outer"+b},function(g,e){p.fn[e]=function(h,k){var m=arguments.length&&(g||"boolean"!=
typeof h),n=g||(!0===h||!0===k?"margin":"border");return ka(this,function(c,g,h){var k;return p.isWindow(c)?0===e.indexOf("outer")?c["inner"+b]:c.document.documentElement["client"+b]:9===c.nodeType?(k=c.documentElement,Math.max(c.body["scroll"+b],k["scroll"+b],c.body["offset"+b],k["offset"+b],k["client"+b])):void 0===h?p.css(c,g,n):p.style(c,g,h,n)},c,m?h:void 0,m)}})});p.fn.extend({bind:function(b,c,g){return this.on(b,null,c,g)},unbind:function(b,c){return this.off(b,null,c)},delegate:function(b,
c,g,e){return this.on(c,b,g,e)},undelegate:function(b,c,g){return 1===arguments.length?this.off(b,"**"):this.off(c,b||"**",g)}});p.parseJSON=JSON.parse;"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var ba=f.jQuery,jb=f.$;return p.noConflict=function(b){return f.$===p&&(f.$=jb),b&&f.jQuery===p&&(f.jQuery=ba),p},b||(f.jQuery=f.$=p),p});
!function(f,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):f.moment=b()}(this,function(){function f(){return Sb.apply(null,arguments)}function b(b){return b instanceof Array||"[object Array]"===Object.prototype.toString.call(b)}function e(b){return null!=b&&"[object Object]"===Object.prototype.toString.call(b)}function l(b){return void 0===b}function c(b){return"number"==typeof b||"[object Number]"===Object.prototype.toString.call(b)}
function t(b){return b instanceof Date||"[object Date]"===Object.prototype.toString.call(b)}function v(b,c){var g,e=[];for(g=0;g<b.length;++g)e.push(c(b[g],g));return e}function q(b,c){return Object.prototype.hasOwnProperty.call(b,c)}function k(b,c){for(var g in c)q(c,g)&&(b[g]=c[g]);return q(c,"toString")&&(b.toString=c.toString),q(c,"valueOf")&&(b.valueOf=c.valueOf),b}function m(b,c,g,e){return Pa(b,c,g,e,!0).utc()}function r(b){return null==b._pf&&(b._pf={empty:!1,unusedTokens:[],unusedInput:[],
overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),b._pf}function n(b){if(null==b._isValid){var c=r(b),g=pc.call(c.parsedDateParts,function(b){return null!=b});g=!isNaN(b._d.getTime())&&0>c.overflow&&!c.empty&&!c.invalidMonth&&!c.invalidWeekday&&!c.weekdayMismatch&&!c.nullInput&&!c.invalidFormat&&!c.userInvalidated&&(!c.meridiem||c.meridiem&&g);if(b._strict&&(g=g&&0===c.charsLeftOver&&
0===c.unusedTokens.length&&void 0===c.bigHour),null!=Object.isFrozen&&Object.isFrozen(b))return g;b._isValid=g}return b._isValid}function y(b){var c=m(NaN);return null!=b?k(r(c),b):r(c).userInvalidated=!0,c}function w(b,c){var g,e,h;if(l(c._isAMomentObject)||(b._isAMomentObject=c._isAMomentObject),l(c._i)||(b._i=c._i),l(c._f)||(b._f=c._f),l(c._l)||(b._l=c._l),l(c._strict)||(b._strict=c._strict),l(c._tzm)||(b._tzm=c._tzm),l(c._isUTC)||(b._isUTC=c._isUTC),l(c._offset)||(b._offset=c._offset),l(c._pf)||
(b._pf=r(c)),l(c._locale)||(b._locale=c._locale),0<Tb.length)for(g=0;g<Tb.length;g++)l(h=c[e=Tb[g]])||(b[e]=h);return b}function x(b){w(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Db&&(Db=!0,f.updateOffset(this),Db=!1)}function h(b){return b instanceof x||null!=b&&null!=b._isAMomentObject}function A(b){return 0>b?Math.ceil(b)||0:Math.floor(b)}function z(b){b=+b;var c=0;return 0!==b&&isFinite(b)&&(c=A(b)),c}function I(b,c,g){var e,h=Math.min(b.length,
c.length),k=Math.abs(b.length-c.length),m=0;for(e=0;e<h;e++)(g&&b[e]!==c[e]||!g&&z(b[e])!==z(c[e]))&&m++;return m+k}function D(b){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function F(b,c){var g=!0;return k(function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,b),g){for(var e,h=[],k=0;k<arguments.length;k++){if(e="","object"==typeof arguments[k]){for(var m in e+="\n["+k+"] ",arguments[0])e+=m+": "+arguments[0][m]+
", ";e=e.slice(0,-2)}else e=arguments[k];h.push(e)}D(b+"\nArguments: "+Array.prototype.slice.call(h).join("")+"\n"+Error().stack);g=!1}return c.apply(this,arguments)},c)}function H(b,c){null!=f.deprecationHandler&&f.deprecationHandler(b,c);$b[b]||(D(c),$b[b]=!0)}function g(b){return b instanceof Function||"[object Function]"===Object.prototype.toString.call(b)}function u(b,c){var g,h=k({},b);for(g in c)q(c,g)&&(e(b[g])&&e(c[g])?(h[g]={},k(h[g],b[g]),k(h[g],c[g])):null!=c[g]?h[g]=c[g]:delete h[g]);
for(g in b)q(b,g)&&!q(c,g)&&e(b[g])&&(h[g]=k({},h[g]));return h}function G(b){null!=b&&this.set(b)}function M(b,c){var g=b.toLowerCase();Sa[g]=Sa[g+"s"]=Sa[c]=b}function J(b){return"string"==typeof b?Sa[b]||Sa[b.toLowerCase()]:void 0}function X(b){var c,g,e={};for(g in b)q(b,g)&&(c=J(g))&&(e[c]=b[g]);return e}function P(b,c,g){var e=""+Math.abs(b);return(0<=b?g?"+":"":"-")+Math.pow(10,Math.max(0,c-e.length)).toString().substr(1)+e}function C(b,c,g,e){var h=e;"string"==typeof e&&(h=function(){return this[e]()});
b&&(Qa[b]=h);c&&(Qa[c[0]]=function(){return P(h.apply(this,arguments),c[1],c[2])});g&&(Qa[g]=function(){return this.localeData().ordinal(h.apply(this,arguments),b)})}function ja(b,c){return b.isValid()?(c=N(c,b.localeData()),Ub[c]=Ub[c]||function(b){var c,e,h=b.match(bb);var k=0;for(c=h.length;k<c;k++)Qa[h[k]]?h[k]=Qa[h[k]]:h[k]=(e=h[k]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){var k,m="";for(k=0;k<c;k++)m+=g(h[k])?h[k].call(e,b):h[k];return m}}(c),Ub[c](b)):
b.localeData().invalidDate()}function N(b,c){function g(b){return c.longDateFormat(b)||b}var e=5;for(tb.lastIndex=0;0<=e&&tb.test(b);)b=b.replace(tb,g),tb.lastIndex=0,--e;return b}function E(b,c,e){ib[b]=g(c)?c:function(b,g){return b&&e?e:c}}function ca(b,c){return q(ib,b)?ib[b](c._strict,c._locale):new RegExp(da(b.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(b,c,g,e,h){return c||g||e||h})))}function da(b){return b.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function U(b,g){var e,
h=g;"string"==typeof b&&(b=[b]);c(g)&&(h=function(b,c){c[g]=z(b)});for(e=0;e<b.length;e++)Fb[b[e]]=h}function ta(b,c){U(b,function(b,g,e,h){e._w=e._w||{};c(b,e._w,e,h)})}function qa(b){return 0==b%4&&0!=b%100||0==b%400}function La(b,c){return function(g){return null!=g?(ea(this,b,g),f.updateOffset(this,c),this):ob(this,b)}}function ob(b,c){return b.isValid()?b._d["get"+(b._isUTC?"UTC":"")+c]():NaN}function ea(b,c,g){b.isValid()&&!isNaN(g)&&("FullYear"===c&&qa(b.year())&&1===b.month()&&29===b.date()?
b._d["set"+(b._isUTC?"UTC":"")+c](g,b.month(),ra(g,b.month())):b._d["set"+(b._isUTC?"UTC":"")+c](g))}function ra(b,c){if(isNaN(b)||isNaN(c))return NaN;var g=(c%12+12)%12;return b+=(c-g)/12,1===g?qa(b)?29:28:31-g%7%2}function pb(b,g){var e;if(!b.isValid())return b;if("string"==typeof g)if(/^\d+$/.test(g))g=z(g);else if(!c(g=b.localeData().monthsParse(g)))return b;return e=Math.min(b.date(),ra(b.year(),g)),b._d["set"+(b._isUTC?"UTC":"")+"Month"](g,e),b}function Gb(b){return null!=b?(pb(this,b),f.updateOffset(this,
!0),this):ob(this,"Month")}function Hb(){function b(b,c){return c.length-b.length}var c,g=[],e=[],h=[];for(c=0;12>c;c++){var k=m([2E3,c]);g.push(this.monthsShort(k,""));e.push(this.months(k,""));h.push(this.months(k,""));h.push(this.monthsShort(k,""))}g.sort(b);e.sort(b);h.sort(b);for(c=0;12>c;c++)g[c]=da(g[c]),e[c]=da(e[c]);for(c=0;24>c;c++)h[c]=da(h[c]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+h.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i");this._monthsShortStrictRegex=
new RegExp("^("+g.join("|")+")","i")}function Ma(b){var c=new Date(Date.UTC.apply(null,arguments));return 100>b&&0<=b&&isFinite(c.getUTCFullYear())&&c.setUTCFullYear(b),c}function cb(b,c,g){g=7+c-g;return-((7+Ma(b,0,g).getUTCDay()-c)%7)+g-1}function Fa(b,c,g,e,h){var k,m;c=1+7*(c-1)+(7+g-e)%7+cb(b,e,h);0>=c?(b=k=b-1,b=(qa(b)?366:365)+c):b=c>(qa(b)?366:365)?(k=b+1,c-(qa(b)?366:365)):(k=b,c);return m=b,{year:k,dayOfYear:m}}function L(b,c,g){var e,h,k=cb(b.year(),c,g);k=Math.floor((b.dayOfYear()-k-1)/
7)+1;return 1>k?e=k+Na(h=b.year()-1,c,g):k>Na(b.year(),c,g)?(e=k-Na(b.year(),c,g),h=b.year()+1):(h=b.year(),e=k),{week:e,year:h}}function Na(b,c,g){var e=cb(b,c,g);c=cb(b+1,c,g);return((qa(b)?366:365)-e+c)/7}function wa(){function b(b,c){return c.length-b.length}var c,g=[],e=[],h=[],k=[];for(c=0;7>c;c++){var n=m([2E3,1]).day(c);var f=this.weekdaysMin(n,"");var u=this.weekdaysShort(n,"");n=this.weekdays(n,"");g.push(f);e.push(u);h.push(n);k.push(f);k.push(u);k.push(n)}g.sort(b);e.sort(b);h.sort(b);
k.sort(b);for(c=0;7>c;c++)e[c]=da(e[c]),h[c]=da(h[c]),k[c]=da(k[c]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+k.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+h.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function nb(){return this.hours()%12||12}function qb(b,c){C(b,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),
c)})}function $a(b,c){return c._meridiemParse}function db(b){return b?b.toLowerCase().replace("_","-"):b}function eb(b){var c=null;if(!ba[b]&&"undefined"!=typeof module&&module&&module.exports)try{c=Aa._abbr,require("./locale/"+b),xa(c)}catch(oc){}return ba[b]}function xa(b,c){var g;return b&&((g=l(c)?Ga(b):rb(b,c))?Aa=g:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+b+" not found. Did you forget to load it?")),Aa._abbr}function rb(b,c){if(null===c)return delete ba[b],null;var g=
yb;if(c.abbr=b,null!=ba[b])H("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),g=ba[b]._config;else if(null!=c.parentLocale)if(null!=ba[c.parentLocale])g=ba[c.parentLocale]._config;else{if(null==(g=eb(c.parentLocale)))return jb[c.parentLocale]||(jb[c.parentLocale]=[]),jb[c.parentLocale].push({name:b,
config:c}),null;g=g._config}return ba[b]=new G(u(g,c)),jb[b]&&jb[b].forEach(function(b){rb(b.name,b.config)}),xa(b),ba[b]}function Ga(c){var g;if(c&&c._locale&&c._locale._abbr&&(c=c._locale._abbr),!c)return Aa;if(!b(c)){if(g=eb(c))return g;c=[c]}var e;a:{for(var h,k,m=0;m<c.length;){g=(k=db(c[m]).split("-")).length;for(e=(e=db(c[m+1]))?e.split("-"):null;0<g;){if(h=eb(k.slice(0,g).join("-"))){e=h;break a}if(e&&e.length>=g&&I(k,e,!0)>=g-1)break;g--}m++}e=Aa}return e}function T(b){var c,g=b._a;return g&&
-2===r(b).overflow&&(c=0>g[ya]||11<g[ya]?ya:1>g[va]||g[va]>ra(g[ma],g[ya])?va:0>g[ia]||24<g[ia]||24===g[ia]&&(0!==g[sa]||0!==g[za]||0!==g[Ra])?ia:0>g[sa]||59<g[sa]?sa:0>g[za]||59<g[za]?za:0>g[Ra]||999<g[Ra]?Ra:-1,r(b)._overflowDayOfYear&&(c<ma||va<c)&&(c=va),r(b)._overflowWeeks&&-1===c&&(c=rc),r(b)._overflowWeekday&&-1===c&&(c=sc),r(b).overflow=c),b}function p(b,c,g){return null!=b?b:null!=c?c:g}function Ib(b){var c,g;var e=[];if(!b._d){var h=new Date(f.now());h=b._useUTC?[h.getUTCFullYear(),h.getUTCMonth(),
h.getUTCDate()]:[h.getFullYear(),h.getMonth(),h.getDate()];b._w&&null==b._a[va]&&null==b._a[ya]&&function(b){var c,g,e,h;if(null!=(c=b._w).GG||null!=c.W||null!=c.E){var k=1;var m=4;var n=p(c.GG,b._a[ma],L(Q(),1,4).year);var f=p(c.W,1);(1>(g=p(c.E,1))||7<g)&&(h=!0)}else k=b._locale._week.dow,m=b._locale._week.doy,f=L(Q(),k,m),n=p(c.gg,b._a[ma],f.year),f=p(c.w,f.week),null!=c.d?(0>(g=c.d)||6<g)&&(h=!0):null!=c.e?(g=c.e+k,(0>c.e||6<c.e)&&(h=!0)):g=k;1>f||f>Na(n,k,m)?r(b)._overflowWeeks=!0:null!=h?r(b)._overflowWeekday=
!0:(e=Fa(n,f,g,k,m),b._a[ma]=e.year,b._dayOfYear=e.dayOfYear)}(b);null!=b._dayOfYear&&(g=p(b._a[ma],h[ma]),(b._dayOfYear>(qa(g)?366:365)||0===b._dayOfYear)&&(r(b)._overflowDayOfYear=!0),c=Ma(g,0,b._dayOfYear),b._a[ya]=c.getUTCMonth(),b._a[va]=c.getUTCDate());for(c=0;3>c&&null==b._a[c];++c)b._a[c]=e[c]=h[c];for(;7>c;c++)b._a[c]=e[c]=null==b._a[c]?2===c?1:0:b._a[c];24===b._a[ia]&&0===b._a[sa]&&0===b._a[za]&&0===b._a[Ra]&&(b._nextDay=!0,b._a[ia]=0);b._d=(b._useUTC?Ma:function(b,c,g,e,h,k,m){c=new Date(b,
c,g,e,h,k,m);return 100>b&&0<=b&&isFinite(c.getFullYear())&&c.setFullYear(b),c}).apply(null,e);e=b._useUTC?b._d.getUTCDay():b._d.getDay();null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[ia]=24);b._w&&void 0!==b._w.d&&b._w.d!==e&&(r(b).weekdayMismatch=!0)}}function ac(b){var c;var g=b._i;var e=O.exec(g)||xc.exec(g);if(e){r(b).iso=!0;g=0;for(c=Yb.length;g<c;g++)if(Yb[g][1].exec(e[1])){var h=Yb[g][0];var k=!1!==Yb[g][2];break}if(null==h)return void(b._isValid=!1);if(e[3]){g=
0;for(c=kb.length;g<c;g++)if(kb[g][1].exec(e[3])){var m=(e[2]||" ")+kb[g][0];break}if(null==m)return void(b._isValid=!1)}if(!k&&null!=m)return void(b._isValid=!1);if(e[4]){if(!tc.exec(e[4]))return void(b._isValid=!1);var n="Z"}b._f=h+(m||"")+(n||"");Jb(b)}else b._isValid=!1}function bc(b){var c,g=yc.exec(b._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(g){var e=g[3],h=g[2],k=g[5],m=g[6];var n=g[7];var f=parseInt(g[4],10);e=[49>=f?2E3+f:999>=
f?1900+f:f,xb.indexOf(e),parseInt(h,10),parseInt(k,10),parseInt(m,10)];n=(n&&e.push(parseInt(n,10)),e);if(c=g[1],!c||jc.indexOf(c)===(new Date(n[0],n[1],n[2])).getDay()||(r(b).weekdayMismatch=!0,b._isValid=!1))b._a=n,(c=g[8])?g=lc[c]:g[9]?g=0:(g=parseInt(g[10],10),c=g%100,g=(g-c)/100*60+c),b._tzm=g,b._d=Ma.apply(null,b._a),b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm),r(b).rfc2822=!0}else b._isValid=!1}function Jb(b){if(b._f!==f.ISO_8601)if(b._f!==f.RFC_2822){b._a=[];r(b).empty=!0;var c,g,e,h,k,
m,n=""+b._i,u=n.length,l=0;var x=N(b._f,b._locale).match(bb)||[];for(c=0;c<x.length;c++){var y=x[c];(g=(n.match(ca(y,b))||[])[0])&&(0<(e=n.substr(0,n.indexOf(g))).length&&r(b).unusedInput.push(e),n=n.slice(n.indexOf(g)+g.length),l+=g.length);Qa[y]?(g?r(b).empty=!1:r(b).unusedTokens.push(y),h=y,m=b,null!=(k=g)&&q(Fb,h)&&Fb[h](k,m._a,m,h)):b._strict&&!g&&r(b).unusedTokens.push(y)}r(b).charsLeftOver=u-l;0<n.length&&r(b).unusedInput.push(n);12>=b._a[ia]&&!0===r(b).bigHour&&0<b._a[ia]&&(r(b).bigHour=void 0);
r(b).parsedDateParts=b._a.slice(0);r(b).meridiem=b._meridiem;c=b._a;g=ia;y=b._locale;x=b._a[ia];e=b._meridiem;var w;y=null==e?x:null!=y.meridiemHour?y.meridiemHour(x,e):(null!=y.isPM&&((w=y.isPM(e))&&12>x&&(x+=12),w||12!==x||(x=0)),x);c[g]=y;Ib(b);T(b)}else bc(b);else ac(b)}function Ia(g){var m,u,G=g._i,A=g._f;return g._locale=g._locale||Ga(g._l),null===G||void 0===A&&""===G?y({nullInput:!0}):("string"==typeof G&&(g._i=G=g._locale.preparse(G)),h(G)?new x(T(G)):(t(G)?g._d=G:b(A)?function(b){var c,
g,e;if(0===b._f.length)return r(b).invalidFormat=!0,b._d=new Date(NaN);for(e=0;e<b._f.length;e++){var h=0;var m=w({},b);null!=b._useUTC&&(m._useUTC=b._useUTC);m._f=b._f[e];Jb(m);n(m)&&(h+=r(m).charsLeftOver,h+=10*r(m).unusedTokens.length,r(m).score=h,(null==g||h<g)&&(g=h,c=m))}k(b,c||m)}(g):A?Jb(g):l(m=g._i)?g._d=new Date(f.now()):t(m)?g._d=new Date(m.valueOf()):"string"==typeof m?null===(u=uc.exec(g._i))?(ac(g),!1===g._isValid&&(delete g._isValid,bc(g),!1===g._isValid&&(delete g._isValid,f.createFromInputFallback(g)))):
g._d=new Date(+u[1]):b(m)?(g._a=v(m.slice(0),function(b){return parseInt(b,10)}),Ib(g)):e(m)?function(b){if(!b._d){var c=X(b._i);b._a=v([c.year,c.month,c.day||c.date,c.hour,c.minute,c.second,c.millisecond],function(b){return b&&parseInt(b,10)});Ib(b)}}(g):c(m)?g._d=new Date(m):f.createFromInputFallback(g),n(g)||(g._d=null),g))}function Pa(c,g,h,k,m){var n,f={};!0!==h&&!1!==h||(k=h,h=void 0);var u;if(u=e(c))a:if(u=c,Object.getOwnPropertyNames)u=0===Object.getOwnPropertyNames(u).length;else{for(var l in u)if(u.hasOwnProperty(l)){u=
!1;break a}u=!0}return(u||b(c)&&0===c.length)&&(c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=m,f._l=h,f._i=c,f._f=g,f._strict=k,(n=new x(T(Ia(f))))._nextDay&&(n.add(1,"d"),n._nextDay=void 0),n}function Q(b,c,g,e){return Pa(b,c,g,e,!1)}function Lb(c,g){var e;if(1===g.length&&b(g[0])&&(g=g[0]),!g.length)return Q();var h=g[0];for(e=1;e<g.length;++e)g[e].isValid()&&!g[e][c](h)||(h=g[e]);return h}function gb(b){var c=X(b);b=c.year||0;var g=c.quarter||0,e=c.month||0,h=c.week||c.isoWeek||0,k=c.day||
0,m=c.hour||0,n=c.minute||0,f=c.second||0,u=c.millisecond||0;a:{for(var l in c)if(-1===aa.call(Bb,l)||null!=c[l]&&isNaN(c[l])){c=!1;break a}l=!1;for(var r=0;r<Bb.length;++r)if(c[Bb[r]]){if(l){c=!1;break a}parseFloat(c[Bb[r]])!==z(c[Bb[r]])&&(l=!0)}c=!0}this._isValid=c;this._milliseconds=+u+1E3*f+6E4*n+36E5*m;this._days=+k+7*h;this._months=+e+3*g+12*b;this._data={};this._locale=Ga();this._bubble()}function zb(b){return b instanceof gb}function Mb(b){return 0>b?-1*Math.round(-1*b):Math.round(b)}function fc(b,
c){C(b,0,0,function(){var b=this.utcOffset(),g="+";return 0>b&&(b=-b,g="-"),g+P(~~(b/60),2)+c+P(~~b%60,2)})}function Nb(b,c){b=(c||"").match(b);if(null===b)return null;b=((b[b.length-1]||[])+"").match(Bc)||["-",0,0];c=60*b[1]+z(b[2]);return 0===c?0:"+"===b[0]?c:-c}function Ob(b,c){var g,e;return c._isUTC?(g=c.clone(),e=(h(b)||t(b)?b.valueOf():Q(b).valueOf())-g.valueOf(),g._d.setTime(g._d.valueOf()+e),f.updateOffset(g,!1),g):Q(b).local()}function oa(b){return 15*-Math.round(b._d.getTimezoneOffset()/
15)}function gc(){return!!this.isValid()&&this._isUTC&&0===this._offset}function ha(b,g){var e,h=b;if(zb(b))h={ms:b._milliseconds,d:b._days,M:b._months};else if(c(b))h={},g?h[g]=b:h.milliseconds=b;else if(g=mc.exec(b)){var k="-"===g[1]?-1:1;h={y:0,d:z(g[va])*k,h:z(g[ia])*k,m:z(g[sa])*k,s:z(g[za])*k,ms:z(Mb(1E3*g[Ra]))*k}}else if(g=Cc.exec(b))k="-"===g[1]?-1:1,h={y:ka(g[2],k),M:ka(g[3],k),w:ka(g[4],k),d:ka(g[5],k),h:ka(g[6],k),m:ka(g[7],k),s:ka(g[8],k)};else if(null==h)h={};else if("object"==typeof h&&
("from"in h||"to"in h)){var m;k=Q(h.from);g=Q(h.to);k.isValid()&&g.isValid()?(g=Ob(g,k),k.isBefore(g)?m=hb(k,g):((m=hb(g,k)).milliseconds=-m.milliseconds,m.months=-m.months)):m={milliseconds:0,months:0};var n=m;(h={}).ms=n.milliseconds;h.M=n.months}return e=new gb(h),zb(b)&&q(b,"_locale")&&(e._locale=b._locale),e}function ka(b,c){b=b&&parseFloat(b.replace(",","."));return(isNaN(b)?0:b)*c}function hb(b,c){var g={milliseconds:0,months:0};return g.months=c.month()-b.month()+12*(c.year()-b.year()),b.clone().add(g.months,
"M").isAfter(c)&&--g.months,g.milliseconds=+c-+b.clone().add(g.months,"M"),g}function K(b,c){return function(g,e){var h;return null===e||isNaN(+e)||(H(c,"moment()."+c+"(period, number) is deprecated. Please use moment()."+c+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),h=g,g=e,e=h),W(this,ha("string"==typeof g?+g:g,e),b),this}}function W(b,c,g,e){var h=c._milliseconds,k=Mb(c._days);c=Mb(c._months);b.isValid()&&(e=null==e||e,c&&pb(b,ob(b,"Month")+
c*g),k&&ea(b,"Date",ob(b,"Date")+k*g),h&&b._d.setTime(b._d.valueOf()+h*g),e&&f.updateOffset(b,k||c))}function Ab(b,c){var g=12*(c.year()-b.year())+(c.month()-b.month()),e=b.clone().add(g,"months");return-(g+(0>c-e?(c-e)/(e-b.clone().add(g-1,"months")):(c-e)/(b.clone().add(g+1,"months")-e)))||0}function Zb(b){var c;return void 0===b?this._locale._abbr:(null!=(c=Ga(b))&&(this._locale=c),this)}function Pb(){return this._locale}function Ba(b,c){C(0,[b,b.length],0,c)}function Da(b,c,g,e,h){var k;null==
b?b=L(this,e,h).year:((k=Na(b,e,h))<c&&(c=k),b=Fa(b,c,g,e,h),b=Ma(b.year,0,b.dayOfYear),b=(this.year(b.getUTCFullYear()),this.month(b.getUTCMonth()),this.date(b.getUTCDate()),this));return b}function lb(b,c){c[Ra]=z(1E3*("0."+b))}function Qb(b){return b}function ab(b,c,g,e){var h=Ga();c=m().set(e,c);return h[g](c,b)}function Rb(b,g,e){if(c(b)&&(g=b,b=void 0),b=b||"",null!=g)return ab(b,g,e,"month");var h=[];for(g=0;12>g;g++)h[g]=ab(b,g,e,"month");return h}function mb(b,g,e,h){g=("boolean"==typeof b?
c(g)&&(e=g,g=void 0):(g=b,b=!1,c(e=g)&&(e=g,g=void 0)),g||"");var k=Ga();b=b?k._week.dow:0;if(null!=e)return ab(g,(e+b)%7,h,"day");k=[];for(e=0;7>e;e++)k[e]=ab(g,(e+b)%7,h,"day");return k}function Cb(b,c,g,e){c=ha(c,g);return b._milliseconds+=e*c._milliseconds,b._days+=e*c._days,b._months+=e*c._months,b._bubble()}function pa(b){return 0>b?Math.floor(b):Math.ceil(b)}function Ca(b){return function(){return this.as(b)}}function ua(b){return function(){return this.isValid()?this._data[b]:NaN}}function Wa(b){return(0<
b)-(0>b)||+b}function sb(){if(!this.isValid())return this.localeData().invalidDate();var b,c=Kb(this._milliseconds)/1E3,g=Kb(this._days),e=Kb(this._months);var h=A((b=A(c/60))/60);c%=60;b%=60;var k=A(e/12);e%=12;c=c?c.toFixed(3).replace(/\.?0+$/,""):"";var m=this.asSeconds();if(!m)return"P0D";var n=0>m?"-":"",f=Wa(this._months)!==Wa(m)?"-":"",u=Wa(this._days)!==Wa(m)?"-":"";m=Wa(this._milliseconds)!==Wa(m)?"-":"";return n+"P"+(k?f+k+"Y":"")+(e?f+e+"M":"")+(g?u+g+"D":"")+(h||b||c?"T":"")+(h?m+h+"H":
"")+(b?m+b+"M":"")+(c?m+c+"S":"")}var Sb;var pc=Array.prototype.some?Array.prototype.some:function(b){for(var c=Object(this),g=c.length>>>0,e=0;e<g;e++)if(e in c&&b.call(this,c[e],e,c))return!0;return!1};var Tb=f.momentProperties=[],Db=!1,$b={};f.suppressDeprecationWarnings=!1;f.deprecationHandler=null;var nc=Object.keys?Object.keys:function(b){var c,g=[];for(c in b)q(b,c)&&g.push(c);return g};var Sa={},Y={},bb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
tb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ub={},Qa={},Eb=/\d/,la=/\d\d/,Ka=/\d{3}/,Ea=/\d{4}/,ub=/[+-]?\d{6}/,V=/\d\d?/,Xa=/\d\d\d\d?/,hc=/\d\d\d\d\d\d?/,vb=/\d{1,3}/,Vb=/\d{1,4}/,Ya=/[+-]?\d{1,6}/,qc=/\d+/,wb=/[+-]?\d+/,ic=/Z|[+-]\d\d:?\d\d/gi,Ja=/Z|[+-]\d\d(?::?\d\d)?/gi,Za=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ib={},Fb={},ma=0,ya=1,va=2,ia=3,sa=4,za=5,Ra=6,rc=7,sc=8;C("Y",0,0,
function(){var b=this.year();return 9999>=b?""+b:"+"+b});C(0,["YY",2],0,function(){return this.year()%100});C(0,["YYYY",4],0,"year");C(0,["YYYYY",5],0,"year");C(0,["YYYYYY",6,!0],0,"year");M("year","y");Y.year=1;E("Y",wb);E("YY",V,la);E("YYYY",Vb,Ea);E("YYYYY",Ya,ub);E("YYYYYY",Ya,ub);U(["YYYYY","YYYYYY"],ma);U("YYYY",function(b,c){c[ma]=2===b.length?f.parseTwoDigitYear(b):z(b)});U("YY",function(b,c){c[ma]=f.parseTwoDigitYear(b)});U("Y",function(b,c){c[ma]=parseInt(b,10)});f.parseTwoDigitYear=function(b){return z(b)+
(68<z(b)?1900:2E3)};var Wb=La("FullYear",!0);var aa=Array.prototype.indexOf?Array.prototype.indexOf:function(b){var c;for(c=0;c<this.length;++c)if(this[c]===b)return c;return-1};C("M",["MM",2],"Mo",function(){return this.month()+1});C("MMM",0,0,function(b){return this.localeData().monthsShort(this,b)});C("MMMM",0,0,function(b){return this.localeData().months(this,b)});M("month","M");Y.month=8;E("M",V);E("MM",V,la);E("MMM",function(b,c){return c.monthsShortRegex(b)});E("MMMM",function(b,c){return c.monthsRegex(b)});
U(["M","MM"],function(b,c){c[ya]=z(b)-1});U(["MMM","MMMM"],function(b,c,g,e){e=g._locale.monthsParse(b,e,g._strict);null!=e?c[ya]=e:r(g).invalidMonth=b});var Xb=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,xb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");C("w",["ww",2],"wo","week");C("W",["WW",2],"Wo","isoWeek");M("week","w");M("isoWeek","W");Y.week=5;Y.isoWeek=5;E("w",V);E("ww",V,la);E("W",V);E("WW",V,la);ta(["w","ww","W","WW"],function(b,c,g,e){c[e.substr(0,1)]=z(b)});C("d",0,"do","day");C("dd",
0,0,function(b){return this.localeData().weekdaysMin(this,b)});C("ddd",0,0,function(b){return this.localeData().weekdaysShort(this,b)});C("dddd",0,0,function(b){return this.localeData().weekdays(this,b)});C("e",0,0,"weekday");C("E",0,0,"isoWeekday");M("day","d");M("weekday","e");M("isoWeekday","E");Y.day=11;Y.weekday=11;Y.isoWeekday=11;E("d",V);E("e",V);E("E",V);E("dd",function(b,c){return c.weekdaysMinRegex(b)});E("ddd",function(b,c){return c.weekdaysShortRegex(b)});E("dddd",function(b,c){return c.weekdaysRegex(b)});
ta(["dd","ddd","dddd"],function(b,c,g,e){e=g._locale.weekdaysParse(b,e,g._strict);null!=e?c.d=e:r(g).invalidWeekday=b});ta(["d","e","E"],function(b,c,g,e){c[e]=z(b)});var jc="Sun Mon Tue Wed Thu Fri Sat".split(" ");C("H",["HH",2],0,"hour");C("h",["hh",2],0,nb);C("k",["kk",2],0,function(){return this.hours()||24});C("hmm",0,0,function(){return""+nb.apply(this)+P(this.minutes(),2)});C("hmmss",0,0,function(){return""+nb.apply(this)+P(this.minutes(),2)+P(this.seconds(),2)});C("Hmm",0,0,function(){return""+
this.hours()+P(this.minutes(),2)});C("Hmmss",0,0,function(){return""+this.hours()+P(this.minutes(),2)+P(this.seconds(),2)});qb("a",!0);qb("A",!1);M("hour","h");Y.hour=13;E("a",$a);E("A",$a);E("H",V);E("h",V);E("k",V);E("HH",V,la);E("hh",V,la);E("kk",V,la);E("hmm",Xa);E("hmmss",hc);E("Hmm",Xa);E("Hmmss",hc);U(["H","HH"],ia);U(["k","kk"],function(b,c,g){b=z(b);c[ia]=24===b?0:b});U(["a","A"],function(b,c,g){g._isPm=g._locale.isPM(b);g._meridiem=b});U(["h","hh"],function(b,c,g){c[ia]=z(b);r(g).bigHour=
!0});U("hmm",function(b,c,g){var e=b.length-2;c[ia]=z(b.substr(0,e));c[sa]=z(b.substr(e));r(g).bigHour=!0});U("hmmss",function(b,c,g){var e=b.length-4,h=b.length-2;c[ia]=z(b.substr(0,e));c[sa]=z(b.substr(e,2));c[za]=z(b.substr(h));r(g).bigHour=!0});U("Hmm",function(b,c,g){g=b.length-2;c[ia]=z(b.substr(0,g));c[sa]=z(b.substr(g))});U("Hmmss",function(b,c,g){g=b.length-4;var e=b.length-2;c[ia]=z(b.substr(0,g));c[sa]=z(b.substr(g,2));c[za]=z(b.substr(e))});var Aa,kc=La("Hours",!0),yb={calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",
MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:xb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:jc,meridiemParse:/[ap]\.?m?\.?/i},ba={},jb={},O=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
xc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tc=/Z|[+-]\d\d(?::?\d\d)?/,Yb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],kb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],uc=/^\/?Date\((\-?\d+)/i,yc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,lc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};f.createFromInputFallback=F("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(b){b._d=new Date(b._i+(b._useUTC?" UTC":""))});f.ISO_8601=function(){};
f.RFC_2822=function(){};var zc=F("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var b=Q.apply(null,arguments);return this.isValid()&&b.isValid()?b<this?this:b:y()}),Ac=F("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var b=Q.apply(null,arguments);return this.isValid()&&b.isValid()?this<b?this:b:y()}),Bb="year quarter month week day hour minute second millisecond".split(" ");
fc("Z",":");fc("ZZ","");E("Z",Ja);E("ZZ",Ja);U(["Z","ZZ"],function(b,c,g){g._useUTC=!0;g._tzm=Nb(Ja,b)});var Bc=/([\+\-]|\d\d)/gi;f.updateOffset=function(){};var mc=/^(\-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Cc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;ha.fn=gb.prototype;ha.invalid=function(){return ha(NaN)};var Dc=K(1,"add"),Nc=K(-1,"subtract");f.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var vc=F("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(b){return void 0===b?this.localeData():this.locale(b)});C(0,["gg",2],0,function(){return this.weekYear()%100});C(0,["GG",2],0,function(){return this.isoWeekYear()%100});Ba("gggg","weekYear");Ba("ggggg","weekYear");Ba("GGGG","isoWeekYear");Ba("GGGGG","isoWeekYear");M("weekYear",
"gg");M("isoWeekYear","GG");Y.weekYear=1;Y.isoWeekYear=1;E("G",wb);E("g",wb);E("GG",V,la);E("gg",V,la);E("GGGG",Vb,Ea);E("gggg",Vb,Ea);E("GGGGG",Ya,ub);E("ggggg",Ya,ub);ta(["gggg","ggggg","GGGG","GGGGG"],function(b,c,g,e){c[e.substr(0,2)]=z(b)});ta(["gg","GG"],function(b,c,g,e){c[e]=f.parseTwoDigitYear(b)});C("Q",0,"Qo","quarter");M("quarter","Q");Y.quarter=7;E("Q",Eb);U("Q",function(b,c){c[ya]=3*(z(b)-1)});C("D",["DD",2],"Do","date");M("date","D");Y.date=9;E("D",V);E("DD",V,la);E("Do",function(b,
c){return b?c._dayOfMonthOrdinalParse||c._ordinalParse:c._dayOfMonthOrdinalParseLenient});U(["D","DD"],va);U("Do",function(b,c){c[va]=z(b.match(V)[0])});var wc=La("Date",!0);C("DDD",["DDDD",3],"DDDo","dayOfYear");M("dayOfYear","DDD");Y.dayOfYear=4;E("DDD",vb);E("DDDD",Ka);U(["DDD","DDDD"],function(b,c,g){g._dayOfYear=z(b)});C("m",["mm",2],0,"minute");M("minute","m");Y.minute=14;E("m",V);E("mm",V,la);U(["m","mm"],sa);var dc=La("Minutes",!1);C("s",["ss",2],0,"second");M("second","s");Y.second=15;E("s",
V);E("ss",V,la);U(["s","ss"],za);var Ua,Oc=La("Seconds",!1);C("S",0,0,function(){return~~(this.millisecond()/100)});C(0,["SS",2],0,function(){return~~(this.millisecond()/10)});C(0,["SSS",3],0,"millisecond");C(0,["SSSS",4],0,function(){return 10*this.millisecond()});C(0,["SSSSS",5],0,function(){return 100*this.millisecond()});C(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});C(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});C(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});
C(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});M("millisecond","ms");Y.millisecond=16;E("S",vb,Eb);E("SS",vb,la);E("SSS",vb,Ka);for(Ua="SSSS";9>=Ua.length;Ua+="S")E(Ua,qc);for(Ua="S";9>=Ua.length;Ua+="S")U(Ua,lb);var Pc=La("Milliseconds",!1);C("z",0,0,"zoneAbbr");C("zz",0,0,"zoneName");var B=x.prototype;B.add=Dc;B.calendar=function(b,c){b=b||Q();var e=Ob(b,this).startOf("day");e=f.calendarFormat(this,e)||"sameElse";c=c&&(g(c[e])?c[e].call(this,b):c[e]);return this.format(c||this.localeData().calendar(e,
this,Q(b)))};B.clone=function(){return new x(this)};B.diff=function(b,c,g){var e;if(!this.isValid()||!(e=Ob(b,this)).isValid())return NaN;switch(b=6E4*(e.utcOffset()-this.utcOffset()),J(c)){case "year":c=Ab(this,e)/12;break;case "month":c=Ab(this,e);break;case "quarter":c=Ab(this,e)/3;break;case "second":c=(this-e)/1E3;break;case "minute":c=(this-e)/6E4;break;case "hour":c=(this-e)/36E5;break;case "day":c=(this-e-b)/864E5;break;case "week":c=(this-e-b)/6048E5;break;default:c=this-e}return g?c:A(c)};
B.endOf=function(b){return void 0===(b=J(b))||"millisecond"===b?this:("date"===b&&(b="day"),this.startOf(b).add(1,"isoWeek"===b?"week":b).subtract(1,"ms"))};B.format=function(b){b||(b=this.isUtc()?f.defaultFormatUtc:f.defaultFormat);b=ja(this,b);return this.localeData().postformat(b)};B.from=function(b,c){return this.isValid()&&(h(b)&&b.isValid()||Q(b).isValid())?ha({to:this,from:b}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()};B.fromNow=function(b){return this.from(Q(),b)};
B.to=function(b,c){return this.isValid()&&(h(b)&&b.isValid()||Q(b).isValid())?ha({from:this,to:b}).locale(this.locale()).humanize(!c):this.localeData().invalidDate()};B.toNow=function(b){return this.to(Q(),b)};B.get=function(b){return g(this[b=J(b)])?this[b]():this};B.invalidAt=function(){return r(this).overflow};B.isAfter=function(b,c){b=h(b)?b:Q(b);return!(!this.isValid()||!b.isValid())&&("millisecond"===(c=J(c)||"millisecond")?this.valueOf()>b.valueOf():b.valueOf()<this.clone().startOf(c).valueOf())};
B.isBefore=function(b,c){b=h(b)?b:Q(b);return!(!this.isValid()||!b.isValid())&&("millisecond"===(c=J(c)||"millisecond")?this.valueOf()<b.valueOf():this.clone().endOf(c).valueOf()<b.valueOf())};B.isBetween=function(b,c,g,e){b=h(b)?b:Q(b);c=h(c)?c:Q(c);return!!(this.isValid()&&b.isValid()&&c.isValid())&&("("===(e=e||"()")[0]?this.isAfter(b,g):!this.isBefore(b,g))&&(")"===e[1]?this.isBefore(c,g):!this.isAfter(c,g))};B.isSame=function(b,c){var g;b=h(b)?b:Q(b);return!(!this.isValid()||!b.isValid())&&("millisecond"===
(c=J(c)||"millisecond")?this.valueOf()===b.valueOf():(g=b.valueOf(),this.clone().startOf(c).valueOf()<=g&&g<=this.clone().endOf(c).valueOf()))};B.isSameOrAfter=function(b,c){return this.isSame(b,c)||this.isAfter(b,c)};B.isSameOrBefore=function(b,c){return this.isSame(b,c)||this.isBefore(b,c)};B.isValid=function(){return n(this)};B.lang=vc;B.locale=Zb;B.localeData=Pb;B.max=Ac;B.min=zc;B.parsingFlags=function(){return k({},r(this))};B.set=function(b,c){if("object"==typeof b){c=function(b){var c=[],
g;for(g in b)c.push({unit:g,priority:Y[g]});return c.sort(function(b,c){return b.priority-c.priority}),c}(b=X(b));for(var e=0;e<c.length;e++)this[c[e].unit](b[c[e].unit])}else if(g(this[b=J(b)]))return this[b](c);return this};B.startOf=function(b){switch(b=J(b)){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return"week"===
b&&this.weekday(0),"isoWeek"===b&&this.isoWeekday(1),"quarter"===b&&this.month(3*Math.floor(this.month()/3)),this};B.subtract=Nc;B.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};B.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};B.toDate=function(){return new Date(this.valueOf())};B.toISOString=
function(b){if(!this.isValid())return null;var c=(b=!0!==b)?this.clone().utc():this;return 0>c.year()||9999<c.year()?ja(c,b?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):g(Date.prototype.toISOString)?b?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",ja(c,"Z")):ja(c,b?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};B.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var b="moment",c=
"";this.isLocal()||(b=0===this.utcOffset()?"moment.utc":"moment.parseZone",c="Z");b="["+b+'("]';var g=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(b+g+"-MM-DD[T]HH:mm:ss.SSS"+(c+'[")]'))};B.toJSON=function(){return this.isValid()?this.toISOString():null};B.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};B.unix=function(){return Math.floor(this.valueOf()/1E3)};B.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};
B.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};B.year=Wb;B.isLeapYear=function(){return qa(this.year())};B.weekYear=function(b){return Da.call(this,b,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};B.isoWeekYear=function(b){return Da.call(this,b,this.isoWeek(),this.isoWeekday(),1,4)};B.quarter=B.quarters=function(b){return null==b?Math.ceil((this.month()+1)/3):this.month(3*(b-1)+this.month()%
3)};B.month=Gb;B.daysInMonth=function(){return ra(this.year(),this.month())};B.week=B.weeks=function(b){var c=this.localeData().week(this);return null==b?c:this.add(7*(b-c),"d")};B.isoWeek=B.isoWeeks=function(b){var c=L(this,1,4).week;return null==b?c:this.add(7*(b-c),"d")};B.weeksInYear=function(){var b=this.localeData()._week;return Na(this.year(),b.dow,b.doy)};B.isoWeeksInYear=function(){return Na(this.year(),1,4)};B.date=wc;B.day=B.days=function(b){if(!this.isValid())return null!=b?this:NaN;var c,
g,e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=b?(c=b,g=this.localeData(),b="string"!=typeof c?c:isNaN(c)?"number"==typeof(c=g.weekdaysParse(c))?c:null:parseInt(c,10),this.add(b-e,"d")):e};B.weekday=function(b){if(!this.isValid())return null!=b?this:NaN;var c=(this.day()+7-this.localeData()._week.dow)%7;return null==b?c:this.add(b-c,"d")};B.isoWeekday=function(b){if(!this.isValid())return null!=b?this:NaN;if(null==b)return this.day()||7;var c;b=(c=this.localeData(),"string"==typeof b?
c.weekdaysParse(b)%7||7:isNaN(b)?null:b);return this.day(this.day()%7?b:b-7)};B.dayOfYear=function(b){var c=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==b?c:this.add(b-c,"d")};B.hour=B.hours=kc;B.minute=B.minutes=dc;B.second=B.seconds=Oc;B.millisecond=B.milliseconds=Pc;B.utcOffset=function(b,c,g){var e,h=this._offset||0;if(!this.isValid())return null!=b?this:NaN;if(null==b)return this._isUTC?h:oa(this);if("string"==typeof b){if(null===(b=Nb(Ja,b)))return this}else 16>
Math.abs(b)&&!g&&(b*=60);return!this._isUTC&&c&&(e=oa(this)),this._offset=b,this._isUTC=!0,null!=e&&this.add(e,"m"),h!==b&&(!c||this._changeInProgress?W(this,ha(b-h,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this};B.utc=function(b){return this.utcOffset(0,b)};B.local=function(b){return this._isUTC&&(this.utcOffset(0,b),this._isUTC=!1,b&&this.subtract(oa(this),"m")),this};B.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,
!1,!0);else if("string"==typeof this._i){var b=Nb(ic,this._i);null!=b?this.utcOffset(b):this.utcOffset(0,!0)}return this};B.hasAlignedHourOffset=function(b){return!!this.isValid()&&(b=b?Q(b).utcOffset():0,0==(this.utcOffset()-b)%60)};B.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};B.isLocal=function(){return!!this.isValid()&&!this._isUTC};B.isUtcOffset=function(){return!!this.isValid()&&this._isUTC};B.isUtc=gc;B.isUTC=
gc;B.zoneAbbr=function(){return this._isUTC?"UTC":""};B.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};B.dates=F("dates accessor is deprecated. Use date instead.",wc);B.months=F("months accessor is deprecated. Use month instead",Gb);B.years=F("years accessor is deprecated. Use year instead",Wb);B.zone=F("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(b,c){return null!=b?("string"!=typeof b&&(b=-b),this.utcOffset(b,
c),this):-this.utcOffset()});B.isDSTShifted=F("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!l(this._isDSTShifted))return this._isDSTShifted;var b={};if(w(b,this),(b=Ia(b))._a){var c=b._isUTC?m(b._a):Q(b._a);this._isDSTShifted=this.isValid()&&0<I(b._a,c.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var Z=G.prototype;Z.calendar=function(b,c,e){b=this._calendar[b]||this._calendar.sameElse;return g(b)?b.call(c,
e):b};Z.longDateFormat=function(b){var c=this._longDateFormat[b],g=this._longDateFormat[b.toUpperCase()];return c||!g?c:(this._longDateFormat[b]=g.replace(/MMMM|MM|DD|dddd/g,function(b){return b.slice(1)}),this._longDateFormat[b])};Z.invalidDate=function(){return this._invalidDate};Z.ordinal=function(b){return this._ordinal.replace("%d",b)};Z.preparse=Qb;Z.postformat=Qb;Z.relativeTime=function(b,c,e,h){var k=this._relativeTime[e];return g(k)?k(b,c,e,h):k.replace(/%d/i,b)};Z.pastFuture=function(b,
c){b=this._relativeTime[0<b?"future":"past"];return g(b)?b(c):b.replace(/%s/i,c)};Z.set=function(b){var c,e;for(e in b)g(c=b[e])?this[e]=c:this["_"+e]=c;this._config=b;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Z.months=function(c,g){return c?b(this._months)?this._months[c.month()]:this._months[(this._months.isFormat||Xb).test(g)?"format":"standalone"][c.month()]:b(this._months)?this._months:this._months.standalone};
Z.monthsShort=function(c,g){return c?b(this._monthsShort)?this._monthsShort[c.month()]:this._monthsShort[Xb.test(g)?"format":"standalone"][c.month()]:b(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};Z.monthsParse=function(b,c,g){var e;if(this._monthsParseExact){var h=b.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],b=0;12>b;++b){var k=m([2E3,b]);this._shortMonthsParse[b]=this.monthsShort(k,"").toLocaleLowerCase();
this._longMonthsParse[b]=this.months(k,"").toLocaleLowerCase()}return g?"MMM"===c?-1!==(e=aa.call(this._shortMonthsParse,h))?e:null:-1!==(e=aa.call(this._longMonthsParse,h))?e:null:"MMM"===c?-1!==(e=aa.call(this._shortMonthsParse,h))?e:-1!==(e=aa.call(this._longMonthsParse,h))?e:null:-1!==(e=aa.call(this._longMonthsParse,h))?e:-1!==(e=aa.call(this._shortMonthsParse,h))?e:null}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(e=0;12>e;e++)if((k=m([2E3,
e]),g&&!this._longMonthsParse[e]&&(this._longMonthsParse[e]=new RegExp("^"+this.months(k,"").replace(".","")+"$","i"),this._shortMonthsParse[e]=new RegExp("^"+this.monthsShort(k,"").replace(".","")+"$","i")),g||this._monthsParse[e]||(h="^"+this.months(k,"")+"|^"+this.monthsShort(k,""),this._monthsParse[e]=new RegExp(h.replace(".",""),"i")),g&&"MMMM"===c&&this._longMonthsParse[e].test(b))||g&&"MMM"===c&&this._shortMonthsParse[e].test(b)||!g&&this._monthsParse[e].test(b))return e};Z.monthsRegex=function(b){return this._monthsParseExact?
(q(this,"_monthsRegex")||Hb.call(this),b?this._monthsStrictRegex:this._monthsRegex):(q(this,"_monthsRegex")||(this._monthsRegex=Za),this._monthsStrictRegex&&b?this._monthsStrictRegex:this._monthsRegex)};Z.monthsShortRegex=function(b){return this._monthsParseExact?(q(this,"_monthsRegex")||Hb.call(this),b?this._monthsShortStrictRegex:this._monthsShortRegex):(q(this,"_monthsShortRegex")||(this._monthsShortRegex=Za),this._monthsShortStrictRegex&&b?this._monthsShortStrictRegex:this._monthsShortRegex)};
Z.week=function(b){return L(b,this._week.dow,this._week.doy).week};Z.firstDayOfYear=function(){return this._week.doy};Z.firstDayOfWeek=function(){return this._week.dow};Z.weekdays=function(c,g){return c?b(this._weekdays)?this._weekdays[c.day()]:this._weekdays[this._weekdays.isFormat.test(g)?"format":"standalone"][c.day()]:b(this._weekdays)?this._weekdays:this._weekdays.standalone};Z.weekdaysMin=function(b){return b?this._weekdaysMin[b.day()]:this._weekdaysMin};Z.weekdaysShort=function(b){return b?
this._weekdaysShort[b.day()]:this._weekdaysShort};Z.weekdaysParse=function(b,c,g){var e;if(this._weekdaysParseExact){var h=b.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],b=0;7>b;++b){var k=m([2E3,1]).day(b);this._minWeekdaysParse[b]=this.weekdaysMin(k,"").toLocaleLowerCase();this._shortWeekdaysParse[b]=this.weekdaysShort(k,"").toLocaleLowerCase();this._weekdaysParse[b]=this.weekdays(k,"").toLocaleLowerCase()}return g?
"dddd"===c?-1!==(e=aa.call(this._weekdaysParse,h))?e:null:"ddd"===c?-1!==(e=aa.call(this._shortWeekdaysParse,h))?e:null:-1!==(e=aa.call(this._minWeekdaysParse,h))?e:null:"dddd"===c?-1!==(e=aa.call(this._weekdaysParse,h))?e:-1!==(e=aa.call(this._shortWeekdaysParse,h))?e:-1!==(e=aa.call(this._minWeekdaysParse,h))?e:null:"ddd"===c?-1!==(e=aa.call(this._shortWeekdaysParse,h))?e:-1!==(e=aa.call(this._weekdaysParse,h))?e:-1!==(e=aa.call(this._minWeekdaysParse,h))?e:null:-1!==(e=aa.call(this._minWeekdaysParse,
h))?e:-1!==(e=aa.call(this._weekdaysParse,h))?e:-1!==(e=aa.call(this._shortWeekdaysParse,h))?e:null}this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(e=0;7>e;e++)if((k=m([2E3,1]).day(e),g&&!this._fullWeekdaysParse[e]&&(this._fullWeekdaysParse[e]=new RegExp("^"+this.weekdays(k,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[e]=new RegExp("^"+this.weekdaysShort(k,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[e]=
new RegExp("^"+this.weekdaysMin(k,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[e]||(h="^"+this.weekdays(k,"")+"|^"+this.weekdaysShort(k,"")+"|^"+this.weekdaysMin(k,""),this._weekdaysParse[e]=new RegExp(h.replace(".",""),"i")),g&&"dddd"===c&&this._fullWeekdaysParse[e].test(b))||g&&"ddd"===c&&this._shortWeekdaysParse[e].test(b)||g&&"dd"===c&&this._minWeekdaysParse[e].test(b)||!g&&this._weekdaysParse[e].test(b))return e};Z.weekdaysRegex=function(b){return this._weekdaysParseExact?(q(this,"_weekdaysRegex")||
wa.call(this),b?this._weekdaysStrictRegex:this._weekdaysRegex):(q(this,"_weekdaysRegex")||(this._weekdaysRegex=Za),this._weekdaysStrictRegex&&b?this._weekdaysStrictRegex:this._weekdaysRegex)};Z.weekdaysShortRegex=function(b){return this._weekdaysParseExact?(q(this,"_weekdaysRegex")||wa.call(this),b?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(q(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Za),this._weekdaysShortStrictRegex&&b?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)};
Z.weekdaysMinRegex=function(b){return this._weekdaysParseExact?(q(this,"_weekdaysRegex")||wa.call(this),b?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(q(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Za),this._weekdaysMinStrictRegex&&b?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)};Z.isPM=function(b){return"p"===(b+"").toLowerCase().charAt(0)};Z.meridiem=function(b,c,g){return 11<b?g?"pm":"PM":g?"am":"AM"};xa("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(b){var c=
b%10;return b+(1===z(b%100/10)?"th":1===c?"st":2===c?"nd":3===c?"rd":"th")}});f.lang=F("moment.lang is deprecated. Use moment.locale instead.",xa);f.langData=F("moment.langData is deprecated. Use moment.localeData instead.",Ga);var Oa=Math.abs,Qc=Ca("ms"),Fc=Ca("s"),Rc=Ca("m"),Gc=Ca("h"),Jc=Ca("d"),Sc=Ca("w"),Tc=Ca("M"),Hc=Ca("y"),Kc=ua("milliseconds"),Ec=ua("seconds"),Mc=ua("minutes"),Lc=ua("hours"),Uc=ua("days"),Vc=ua("months"),Ic=ua("years"),Va=Math.round,Ha={ss:44,s:45,m:45,h:22,d:26,M:11},Kb=
Math.abs,R=gb.prototype;return R.isValid=function(){return this._isValid},R.abs=function(){var b=this._data;return this._milliseconds=Oa(this._milliseconds),this._days=Oa(this._days),this._months=Oa(this._months),b.milliseconds=Oa(b.milliseconds),b.seconds=Oa(b.seconds),b.minutes=Oa(b.minutes),b.hours=Oa(b.hours),b.months=Oa(b.months),b.years=Oa(b.years),this},R.add=function(b,c){return Cb(this,b,c,1)},R.subtract=function(b,c){return Cb(this,b,c,-1)},R.as=function(b){if(!this.isValid())return NaN;
var c,g,e=this._milliseconds;if("month"===(b=J(b))||"year"===b)return c=this._days+e/864E5,g=this._months+4800*c/146097,"month"===b?g:g/12;switch(c=this._days+Math.round(146097*this._months/4800),b){case "week":return c/7+e/6048E5;case "day":return c+e/864E5;case "hour":return 24*c+e/36E5;case "minute":return 1440*c+e/6E4;case "second":return 86400*c+e/1E3;case "millisecond":return Math.floor(864E5*c)+e;default:throw Error("Unknown unit "+b);}},R.asMilliseconds=Qc,R.asSeconds=Fc,R.asMinutes=Rc,R.asHours=
Gc,R.asDays=Jc,R.asWeeks=Sc,R.asMonths=Tc,R.asYears=Hc,R.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*z(this._months/12):NaN},R._bubble=function(){var b,c,g,e,h,k=this._milliseconds,m=this._days,n=this._months,f=this._data;return 0<=k&&0<=m&&0<=n||0>=k&&0>=m&&0>=n||(k+=864E5*pa(146097*n/4800+m),n=m=0),f.milliseconds=k%1E3,b=A(k/1E3),f.seconds=b%60,c=A(b/60),f.minutes=c%60,g=A(c/60),f.hours=g%24,n+=h=A(4800*(m+=A(g/24))/146097),m-=pa(146097*
h/4800),e=A(n/12),n%=12,f.days=m,f.months=n,f.years=e,this},R.clone=function(){return ha(this)},R.get=function(b){return b=J(b),this.isValid()?this[b+"s"]():NaN},R.milliseconds=Kc,R.seconds=Ec,R.minutes=Mc,R.hours=Lc,R.days=Uc,R.weeks=function(){return A(this.days()/7)},R.months=Vc,R.years=Ic,R.humanize=function(b){if(!this.isValid())return this.localeData().invalidDate();var c,g,e,h,k,m,n,f,u,l=this.localeData(),r=(c=!b,g=ha(this).abs(),e=Va(g.as("s")),h=Va(g.as("m")),k=Va(g.as("h")),m=Va(g.as("d")),
n=Va(g.as("M")),f=Va(g.as("y")),(u=e<=Ha.ss&&["s",e]||e<Ha.s&&["ss",e]||1>=h&&["m"]||h<Ha.m&&["mm",h]||1>=k&&["h"]||k<Ha.h&&["hh",k]||1>=m&&["d"]||m<Ha.d&&["dd",m]||1>=n&&["M"]||n<Ha.M&&["MM",n]||1>=f&&["y"]||["yy",f])[2]=c,u[3]=0<+this,u[4]=l,function(b,c,g,e,h){return h.relativeTime(c||1,!!g,b,e)}.apply(null,u));return b&&(r=l.pastFuture(+this,r)),l.postformat(r)},R.toISOString=sb,R.toString=sb,R.toJSON=sb,R.locale=Zb,R.localeData=Pb,R.toIsoString=F("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
sb),R.lang=vc,C("X",0,0,"unix"),C("x",0,0,"valueOf"),E("x",wb),E("X",/[+-]?\d+(\.\d{1,3})?/),U("X",function(b,c,g){g._d=new Date(1E3*parseFloat(b,10))}),U("x",function(b,c,g){g._d=new Date(z(b))}),f.version="2.23.0",Sb=Q,f.fn=B,f.min=function(){return Lb("isBefore",[].slice.call(arguments,0))},f.max=function(){return Lb("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=m,f.unix=function(b){return Q(1E3*b)},f.months=function(b,c){return Rb(b,c,"months")},
f.isDate=t,f.locale=xa,f.invalid=y,f.duration=ha,f.isMoment=h,f.weekdays=function(b,c,g){return mb(b,c,g,"weekdays")},f.parseZone=function(){return Q.apply(null,arguments).parseZone()},f.localeData=Ga,f.isDuration=zb,f.monthsShort=function(b,c){return Rb(b,c,"monthsShort")},f.weekdaysMin=function(b,c,g){return mb(b,c,g,"weekdaysMin")},f.defineLocale=rb,f.updateLocale=function(b,c){if(null!=c){var g,e=yb;null!=(g=eb(b))&&(e=g._config);(g=new G(c=u(e,c))).parentLocale=ba[b];ba[b]=g;xa(b)}else null!=
ba[b]&&(null!=ba[b].parentLocale?ba[b]=ba[b].parentLocale:null!=ba[b]&&delete ba[b]);return ba[b]},f.locales=function(){return nc(ba)},f.weekdaysShort=function(b,c,g){return mb(b,c,g,"weekdaysShort")},f.normalizeUnits=J,f.relativeTimeRounding=function(b){return void 0===b?Va:"function"==typeof b&&(Va=b,!0)},f.relativeTimeThreshold=function(b,c){return void 0!==Ha[b]&&(void 0===c?Ha[b]:(Ha[b]=c,"s"===b&&(Ha.ss=c-1),!0))},f.calendarFormat=function(b,c){b=b.diff(c,"days",!0);return-6>b?"sameElse":-1>
b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse"},f.prototype=B,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f});
!function(f,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("moment"),require("jquery")):"function"==typeof define&&define.amd?define(["moment","jquery"],b):"object"==typeof exports?exports.FullCalendar=b(require("moment"),require("jquery")):f.FullCalendar=b(f.moment,f.jQuery)}("undefined"!=typeof self?self:this,function(f,b){return function(b){function e(f){if(c[f])return c[f].exports;var l=c[f]={i:f,l:!1,exports:{}};return b[f].call(l.exports,l,l.exports,e),l.l=!0,
l.exports}var c={};return e.m=b,e.c=c,e.d=function(b,c,f){e.o(b,c)||Object.defineProperty(b,c,{configurable:!1,enumerable:!0,get:f})},e.n=function(b){var c=b&&b.__esModule?function(){return b.default}:function(){return b};return e.d(c,"a",c),c},e.o=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)},e.p="",e(e.s=256)}([function(b,l){b.exports=f},,function(b,f){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var e in c)c.hasOwnProperty(e)&&
(b[e]=c[e])};f.__extends=function(b,e){function f(){this.constructor=b}c(b,e);b.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)}},function(e,f){e.exports=b},function(b,f,c){function e(b){b.height("")}function l(b){var c=b[0].offsetWidth-b[0].clientWidth;var g=b[0].offsetHeight-b[0].clientHeight;c=q(c);g=q(g);g={left:0,right:0,top:0,bottom:g};if(null===H){var e=F("<div><div/></div>").css({position:"absolute",top:-1E3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),
h=e.children().offset().left>e.offset().left;H=(e.remove(),h)}return H&&"rtl"===b.css("direction")?g.left=c:g.right=c,g}function q(b){return b=Math.max(0,b),Math.round(b)}function k(b){b.preventDefault()}function m(b,c,g,e,h){if(g.func)return g.func(b,c);b=b[g.field];c=c[g.field];return null==b&&e&&(b=e[g.field]),null==c&&h&&(c=h[g.field]),r(b,c)*(g.order||1)}function r(b,c){return b||c?null==c?-1:null==b?1:"string"===F.type(b)||"string"===F.type(c)?String(b).localeCompare(String(c)):b-c:0}function n(b,
c){var g,e,h;for(g=0;g<f.unitsDesc.length&&(e=f.unitsDesc[g],!(1<=(h=y(e,b,c))&&I(h)));g++);return e}function y(b,c,g){return null!=g?g.diff(c,b,!0):D.isDuration(c)?c.as(b):c.end.diff(c.start,b,!0)}function w(b){return!!(b.hours()||b.minutes()||b.seconds()||b.milliseconds())}function x(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];if((c=window.console)&&c.log)return c.log.apply(c,b)}function h(b,c){var g,e,k,m={};if(c)for(g=0;g<c.length;g++){var f=c[g];var n=[];for(e=b.length-1;0<=e;e--)if("object"==
typeof(k=b[e][f]))n.unshift(k);else if(void 0!==k){m[f]=k;break}n.length&&(m[f]=h(n))}for(g=b.length-1;0<=g;g--)for(f in c=b[g],c)f in m||(m[f]=c[f]);return m}function A(b,c){return g.call(b,c)}function z(b){return(b+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function I(b){return 0==b%1}Object.defineProperty(f,"__esModule",{value:!0});var D=c(0),F=c(3);f.compensateScroll=function(b,c){c.left&&b.css({"border-left-width":1,
"margin-left":c.left-1});c.right&&b.css({"border-right-width":1,"margin-right":c.right-1})};f.uncompensateScroll=function(b){b.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})};f.disableCursor=function(){F("body").addClass("fc-not-allowed")};f.enableCursor=function(){F("body").removeClass("fc-not-allowed")};f.distributeHeight=function(b,c,g){var h=Math.floor(c/b.length),k=Math.floor(c-h*(b.length-1)),m=[],f=[],n=[],u=0;e(b);b.each(function(c,g){c=c===b.length-
1?k:h;var e=F(g).outerHeight(!0);e<c?(m.push(g),f.push(e),n.push(F(g).height())):u+=e});g&&(c-=u,h=Math.floor(c/m.length),k=Math.floor(c-h*(m.length-1)));F(m).each(function(b,c){var g=b===m.length-1?k:h,e=f[b];b=g-(e-n[b]);e<g&&F(c).height(b)})};f.undistributeHeight=e;f.matchCellWidths=function(b){var c=0;return b.find("> *").each(function(b,g){b=F(g).outerWidth();b>c&&(c=b)}),c++,b.width(c),c};f.subtractInnerElHeight=function(b,c){var g,e=b.add(c);return e.css({position:"relative",left:-1}),g=b.outerHeight()-
c.outerHeight(),e.css({position:"",left:""}),g};f.getScrollParent=function(b){var c=b.css("position"),g=b.parents().filter(function(){var b=F(this);return/(auto|scroll)/.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&g.length?g:F(b[0].ownerDocument||document)};f.getOuterRect=function(b,c){var g=b.offset(),e=g.left-(c?c.left:0);c=g.top-(c?c.top:0);return{left:e,right:e+b.outerWidth(),top:c,bottom:c+b.outerHeight()}};f.getClientRect=function(b,c){var g=b.offset(),
e=l(b),h=g.left+(parseFloat(b.css("border-left-width"))||0)+e.left-(c?c.left:0);c=g.top+(parseFloat(b.css("border-top-width"))||0)+e.top-(c?c.top:0);return{left:h,right:h+b[0].clientWidth,top:c,bottom:c+b[0].clientHeight}};f.getContentRect=function(b,c){var g=b.offset(),e=g.left+(parseFloat(b.css("border-left-width"))||0)+(parseFloat(b.css("padding-left"))||0)-(c?c.left:0);c=g.top+(parseFloat(b.css("border-top-width"))||0)+(parseFloat(b.css("padding-top"))||0)-(c?c.top:0);return{left:e,right:e+b.width(),
top:c,bottom:c+b.height()}};f.getScrollbarWidths=l;var H=null;f.isPrimaryMouseButton=function(b){return 1===b.which&&!b.ctrlKey};f.getEvX=function(b){var c=b.originalEvent.touches;return c&&c.length?c[0].pageX:b.pageX};f.getEvY=function(b){var c=b.originalEvent.touches;return c&&c.length?c[0].pageY:b.pageY};f.getEvIsTouch=function(b){return/^touch/.test(b.type)};f.preventSelection=function(b){b.addClass("fc-unselectable").on("selectstart",k)};f.allowSelection=function(b){b.removeClass("fc-unselectable").off("selectstart",
k)};f.preventDefault=k;f.intersectRects=function(b,c){b={left:Math.max(b.left,c.left),right:Math.min(b.right,c.right),top:Math.max(b.top,c.top),bottom:Math.min(b.bottom,c.bottom)};return b.left<b.right&&b.top<b.bottom&&b};f.constrainPoint=function(b,c){return{left:Math.min(Math.max(b.left,c.left),c.right),top:Math.min(Math.max(b.top,c.top),c.bottom)}};f.getRectCenter=function(b){return{left:(b.left+b.right)/2,top:(b.top+b.bottom)/2}};f.diffPoints=function(b,c){return{left:b.left-c.left,top:b.top-
c.top}};f.parseFieldSpecs=function(b){var c=[],g=[];"string"==typeof b?g=b.split(/\s*,\s*/):"function"==typeof b?g=[b]:F.isArray(b)&&(g=b);for(b=0;b<g.length;b++){var e=g[b];"string"==typeof e?c.push("-"===e.charAt(0)?{field:e.substring(1),order:-1}:{field:e,order:1}):"function"==typeof e&&c.push({func:e})}return c};f.compareByFieldSpecs=function(b,c,g,e,h){var k,f;for(k=0;k<g.length;k++)if(f=m(b,c,g[k],e,h))return f;return 0};f.compareByFieldSpec=m;f.flexibleCompare=r;f.dayIDs="sun mon tue wed thu fri sat".split(" ");
f.unitsDesc="year month week day hour minute second millisecond".split(" ");f.diffDayTime=function(b,c){return D.duration({days:b.clone().stripTime().diff(c.clone().stripTime(),"days"),ms:b.time()-c.time()})};f.diffDay=function(b,c){return D.duration({days:b.clone().stripTime().diff(c.clone().stripTime(),"days")})};f.diffByUnit=function(b,c,g){return D.duration(Math.round(b.diff(c,g,!0)),g)};f.computeGreatestUnit=n;f.computeDurationGreatestUnit=function(b,c){b=n(b);return"week"===b&&"object"==typeof c&&
c.days&&(b="day"),b};f.divideRangeByDuration=function(b,c,g){var e;return w(g)?(c-b)/g:(e=g.asMonths(),1<=Math.abs(e)&&I(e)?c.diff(b,"months",!0)/e:c.diff(b,"days",!0)/g.asDays())};f.divideDurationByDuration=function(b,c){var g,e;return w(b)||w(c)?b/c:(g=b.asMonths(),e=c.asMonths(),1<=Math.abs(g)&&I(g)&&1<=Math.abs(e)&&I(e)?g/e:b.asDays()/c.asDays())};f.multiplyDuration=function(b,c){var g;return w(b)?D.duration(b*c):(g=b.asMonths(),1<=Math.abs(g)&&I(g)?D.duration({months:g*c}):D.duration({days:b.asDays()*
c}))};f.durationHasTime=w;f.isNativeDate=function(b){return"[object Date]"===Object.prototype.toString.call(b)||b instanceof Date};f.isTimeString=function(b){return"string"==typeof b&&/^\d+:\d+(?::\d+\.?(?:\d{3})?)?$/.test(b)};f.log=x;f.warn=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(c=window.console)&&c.warn?c.warn.apply(c,b):x.apply(null,b)};var g={}.hasOwnProperty;f.mergeProps=h;f.copyOwnProps=function(b,c){for(var g in b)A(b,g)&&(c[g]=b[g])};f.hasOwnProp=A;f.applyAll=
function(b,c,g){if(F.isFunction(b)&&(b=[b]),b){var e,h=void 0;for(e=0;e<b.length;e++)h=b[e].apply(c,g)||h;return h}};f.removeMatching=function(b,c){for(var g=0,e=0;e<b.length;)c(b[e])?(b.splice(e,1),g++):e++;return g};f.removeExact=function(b,c){for(var g=0,e=0;e<b.length;)b[e]===c?(b.splice(e,1),g++):e++;return g};f.isArraysEqual=function(b,c){var g,e=b.length;if(null==e||e!==c.length)return!1;for(g=0;g<e;g++)if(b[g]!==c[g])return!1;return!0};f.firstDefined=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=
arguments[c];for(c=0;c<b.length;c++)if(void 0!==b[c])return b[c]};f.htmlEscape=z;f.stripHtmlEntities=function(b){return b.replace(/&.*?;/g,"")};f.cssToStr=function(b){var c=[];return F.each(b,function(b,g){null!=g&&c.push(b+":"+g)}),c.join(";")};f.attrsToStr=function(b){var c=[];return F.each(b,function(b,g){null!=g&&c.push(b+'="'+z(g)+'"')}),c.join(" ")};f.capitaliseFirstLetter=function(b){return b.charAt(0).toUpperCase()+b.slice(1)};f.compareNumbers=function(b,c){return b-c};f.isInt=I;f.proxy=function(b,
c){var g=b[c];return function(){return g.apply(b,arguments)}};f.debounce=function(b,c,g){void 0===g&&(g=!1);var e,h,k,m,f,n=function(){var l=+new Date-m;l<c?e=setTimeout(n,c-l):(e=null,g||(f=b.apply(k,h),k=h=null))};return function(){k=this;h=arguments;m=+new Date;var l=g&&!e;return e||(e=setTimeout(n,c)),l&&(f=b.apply(k,h),k=h=null),f}}},function(b,f,c){function e(b,c){return b.startMs-c.startMs}Object.defineProperty(f,"__esModule",{value:!0});var l=c(0),q=c(11);b=function(){function b(b,c){this.isEnd=
this.isStart=!0;l.isMoment(b)&&(b=b.clone().stripZone());l.isMoment(c)&&(c=c.clone().stripZone());b&&(this.startMs=b.valueOf());c&&(this.endMs=c.valueOf())}return b.invertRanges=function(c,k){var m,f=[],l=k.startMs;c.sort(e);for(m=0;m<c.length;m++){var r=c[m];r.startMs>l&&f.push(new b(l,r.startMs));r.endMs>l&&(l=r.endMs)}return l<k.endMs&&f.push(new b(l,k.endMs)),f},b.prototype.intersect=function(c){var e=this.startMs,k=this.endMs,m=null;return null!=c.startMs&&(e=null==e?c.startMs:Math.max(e,c.startMs)),
null!=c.endMs&&(k=null==k?c.endMs:Math.min(k,c.endMs)),(null==e||null==k||e<k)&&(m=new b(e,k),m.isStart=this.isStart&&e===this.startMs,m.isEnd=this.isEnd&&k===this.endMs),m},b.prototype.intersectsWith=function(b){return(null==this.endMs||null==b.startMs||this.endMs>b.startMs)&&(null==this.startMs||null==b.endMs||this.startMs<b.endMs)},b.prototype.containsRange=function(b){return(null==this.startMs||null!=b.startMs&&b.startMs>=this.startMs)&&(null==this.endMs||null!=b.endMs&&b.endMs<=this.endMs)},
b.prototype.containsDate=function(b){b=b.valueOf();return(null==this.startMs||b>=this.startMs)&&(null==this.endMs||b<this.endMs)},b.prototype.constrainDate=function(b){b=b.valueOf();return null!=this.startMs&&b<this.startMs&&(b=this.startMs),null!=this.endMs&&b>=this.endMs&&(b=this.endMs-1),b},b.prototype.equals=function(b){return this.startMs===b.startMs&&this.endMs===b.endMs},b.prototype.clone=function(){var c=new b(this.startMs,this.endMs);return c.isStart=this.isStart,c.isEnd=this.isEnd,c},b.prototype.getStart=
function(){return null!=this.startMs?q.default.utc(this.startMs).stripZone():null},b.prototype.getEnd=function(){return null!=this.endMs?q.default.utc(this.endMs).stripZone():null},b.prototype.as=function(b){return l.utc(this.endMs).diff(l.utc(this.startMs),b,!0)},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(52);b=c(35);var k=c(36);c=function(b){function c(e){var k=b.call(this)||this;return k.calendar=e,k.className=[],k.uid=String(c.uuid++),
k}return e.__extends(c,b),c.parse=function(b,c){c=new this(c);return!("object"!=typeof b||!c.applyProps(b))&&c},c.normalizeId=function(b){return b?String(b):null},c.prototype.fetch=function(b,c,e){},c.prototype.removeEventDefsById=function(b){},c.prototype.removeAllEventDefs=function(){},c.prototype.getPrimitive=function(b){},c.prototype.parseEventDefs=function(b){var c,e,k=[];for(c=0;c<b.length;c++)(e=this.parseEventDef(b[c]))&&k.push(e);return k},c.prototype.parseEventDef=function(b){var c=this.calendar.opt("eventDataTransform"),
e=this.eventDataTransform;return c&&(b=c(b,this.calendar)),e&&(b=e(b,this.calendar)),k.default.parse(b,this)},c.prototype.applyManualStandardProps=function(b){return null!=b.id&&(this.id=c.normalizeId(b.id)),l.isArray(b.className)?this.className=b.className:"string"==typeof b.className&&(this.className=b.className.split(/\s+/)),!0},c.uuid=0,c.defineStandardProps=q.default.defineStandardProps,c.copyVerbatimStandardProps=q.default.copyVerbatimStandardProps,c}(b.default);f.default=c;q.default.mixInto(c);
c.defineStandardProps({id:!1,className:!1,color:!0,backgroundColor:!0,borderColor:!0,textColor:!0,editable:!0,startEditable:!0,durationEditable:!0,rendering:!0,overlap:!0,constraint:!0,allDayDefault:!0,eventDataTransform:!0})},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=0;b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.listenTo=function(b,c,e){if("object"==typeof c)for(var k in c)c.hasOwnProperty(k)&&
this.listenTo(b,k,c[k]);else"string"==typeof c&&b.on(c+"."+this.getListenerNamespace(),l.proxy(e,this))},c.prototype.stopListeningTo=function(b,c){b.off((c||"")+"."+this.getListenerNamespace())},c.prototype.getListenerNamespace=function(){return null==this.listenerId&&(this.listenerId=q++),"_listener"+this.listenerId},c}(c(15).default);f.default=b},,function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=c(37);var l=c(53),q=c(16);c=function(b){function c(){return null!==b&&b.apply(this,
arguments)||this}return e.__extends(c,b),c.prototype.buildInstances=function(){return[this.buildInstance()]},c.prototype.buildInstance=function(){return new l.default(this,this.dateProfile)},c.prototype.isAllDay=function(){return this.dateProfile.isAllDay()},c.prototype.clone=function(){var c=b.prototype.clone.call(this);return c.dateProfile=this.dateProfile,c},c.prototype.rezone=function(){var b=this.source.calendar,c=this.dateProfile;this.dateProfile=new q.default(b.moment(c.start),c.end?b.moment(c.end):
null,b)},c.prototype.applyManualStandardProps=function(c){var e=b.prototype.applyManualStandardProps.call(this,c),k=q.default.parse(c,this.source);return!!k&&(this.dateProfile=k,null!=c.date&&(this.miscProps.date=c.date),e)},c}(b.default);f.default=c;c.defineStandardProps({start:!1,date:!1,end:!1,allDay:!1})},,function(b,f,c){function e(b,c,e){void 0===c&&(c=!1);void 0===e&&(e=!1);var h,f,n,x,y=b[0],w=1===b.length&&"string"==typeof y;return l.isMoment(y)||k.isNativeDate(y)||void 0===y?x=l.apply(null,
b):(h=!1,f=!1,w?m.test(y)?(y+="-01",b=[y],h=!0,f=!0):(n=r.exec(y))&&(h=!n[5],f=!0):q.isArray(y)&&(f=!0),x=c||h?l.utc.apply(l,b):l.apply(null,b),h?(x._ambigTime=!0,x._ambigZone=!0):e&&(f?x._ambigZone=!0:w&&x.utcOffset(y))),x._fullCalendar=!0,x}Object.defineProperty(f,"__esModule",{value:!0});var l=c(0),q=c(3),k=c(4),m=/^\s*\d{4}-\d\d$/,r=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;b=l.fn;f.newMomentProto=b;var n=q.extend({},b);f.oldMomentProto=n;
c=l.momentProperties;c.push("_fullCalendar");c.push("_ambigTime");c.push("_ambigZone");f.oldMomentFormat=function(b,c){return n.format.call(b,c)};c=function(){return e(arguments)};f.default=c;c.utc=function(){var b=e(arguments,!0);return b.hasTime()&&b.utc(),b};c.parseZone=function(){return e(arguments,!0,!0)};b.week=b.weeks=function(b){var c=this._locale._fullCalendar_weekCalc;return null==b&&"function"==typeof c?c(this):"ISO"===c?n.isoWeek.apply(this,arguments):n.week.apply(this,arguments)};b.time=
function(b){if(!this._fullCalendar)return n.time.apply(this,arguments);if(null==b)return l.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1;l.isDuration(b)||l.isMoment(b)||(b=l.duration(b));var c=0;return l.isDuration(b)&&(c=24*Math.floor(b.asDays())),this.hours(c+b.hours()).minutes(b.minutes()).seconds(b.seconds()).milliseconds(b.milliseconds())};b.stripTime=function(){return this._ambigTime||(this.utc(!0),this.set({hours:0,
minutes:0,seconds:0,ms:0}),this._ambigTime=!0,this._ambigZone=!0),this};b.hasTime=function(){return!this._ambigTime};b.stripZone=function(){var b;return this._ambigZone||(b=this._ambigTime,this.utc(!0),this._ambigTime=b||!1,this._ambigZone=!0),this};b.hasZone=function(){return!this._ambigZone};b.local=function(b){return n.local.call(this,this._ambigZone||b),this._ambigTime=!1,this._ambigZone=!1,this};b.utc=function(b){return n.utc.call(this,b),this._ambigTime=!1,this._ambigZone=!1,this};b.utcOffset=
function(b){return null!=b&&(this._ambigTime=!1,this._ambigZone=!1),n.utcOffset.apply(this,arguments)}},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(b,c){this.isAllDay=!1;this.unzonedRange=b;this.isAllDay=c}return b.prototype.toLegacy=function(b){return{start:b.msToMoment(this.unzonedRange.startMs,this.isAllDay),end:b.msToMoment(this.unzonedRange.endMs,this.isAllDay)}},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=
c(2),l=c(3);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.on=function(b,c){return l(this).on(b,this._prepareIntercept(c)),this},c.prototype.one=function(b,c){return l(this).one(b,this._prepareIntercept(c)),this},c.prototype._prepareIntercept=function(b){var c=function(c,e){return b.apply(e.context||this,e.args||[])};return b.guid||(b.guid=l.guid++),c.guid=b.guid,c},c.prototype.off=function(b,c){return l(this).off(b,c),this},c.prototype.trigger=
function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];return l(this).triggerHandler(b,{args:c}),this},c.prototype.triggerWith=function(b,c,e){return l(this).triggerHandler(b,{context:c,args:e}),this},c.prototype.hasHandlers=function(b){var c=l._data(this,"events");return c&&c[b]&&0<c[b].length},c}(c(15).default);f.default=b},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(b){this.view=b._getView();this.component=b}return b.prototype.opt=function(b){return this.view.opt(b)},
b.prototype.end=function(){},b}();f.default=b},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(){}return b.mixInto=function(b){var c=this;Object.getOwnPropertyNames(this.prototype).forEach(function(e){b.prototype[e]||(b.prototype[e]=c.prototype[e])})},b.mixOver=function(b){var c=this;Object.getOwnPropertyNames(this.prototype).forEach(function(e){b.prototype[e]=c.prototype[e]})},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});
var e=c(5);b=function(){function b(b,c,e){this.start=b;this.end=c||null;this.unzonedRange=this.buildUnzonedRange(e)}return b.parse=function(c,e){var k=c.start||c.date,f=c.end;if(!k)return!1;var n=e.calendar;k=n.moment(k);f=f?n.moment(f):null;c=c.allDay;var l=n.opt("forceEventDuration");return!!k.isValid()&&(null==c&&null==(c=e.allDayDefault)&&(c=n.opt("allDayDefault")),!0===c?(k.stripTime(),f&&f.stripTime()):!1===c&&(k.hasTime()||k.time(0),f&&!f.hasTime()&&f.time(0)),!f||f.isValid()&&f.isAfter(k)||
(f=null),!f&&l&&(f=n.getDefaultEventEnd(!k.hasTime(),k)),new b(k,f,n))},b.isStandardProp=function(b){return"start"===b||"date"===b||"end"===b||"allDay"===b},b.prototype.isAllDay=function(){return!(this.start.hasTime()||this.end&&this.end.hasTime())},b.prototype.buildUnzonedRange=function(b){var c=this.start.clone().stripZone().valueOf();b=this.getEnd(b).stripZone().valueOf();return new e.default(c,b)},b.prototype.getEnd=function(b){return this.end?this.end.clone():b.getDefaultEventEnd(this.isAllDay(),
this.start)},b}();f.default=b},function(b,f,c){function e(b,c){return!b&&!c||!(!b||!c)&&b.component===c.component&&l(b,c)&&l(c,b)}function l(b,c){for(var e in b)if(!/^(component|left|right|top|bottom)$/.test(e)&&b[e]!==c[e])return!1;return!0}Object.defineProperty(f,"__esModule",{value:!0});var q=c(2),k=c(4);b=function(b){function c(c,e){e=b.call(this,e)||this;return e.component=c,e}return q.__extends(c,b),c.prototype.handleInteractionStart=function(c){var e,f,m,h=this.subjectEl;this.component.hitsNeeded();
this.computeScrollBounds();c?(f={left:k.getEvX(c),top:k.getEvY(c)},m=f,h&&(e=k.getOuterRect(h),m=k.constrainPoint(m,e)),this.origHit=this.queryHit(m.left,m.top),h&&this.options.subjectCenter&&(this.origHit&&(e=k.intersectRects(this.origHit,e)||e),m=k.getRectCenter(e)),this.coordAdjust=k.diffPoints(m,f)):(this.origHit=null,this.coordAdjust=null);b.prototype.handleInteractionStart.call(this,c)},c.prototype.handleDragStart=function(c){var e;b.prototype.handleDragStart.call(this,c);(e=this.queryHit(k.getEvX(c),
k.getEvY(c)))&&this.handleHitOver(e)},c.prototype.handleDrag=function(c,f,m){b.prototype.handleDrag.call(this,c,f,m);c=this.queryHit(k.getEvX(m),k.getEvY(m));e(c,this.hit)||(this.hit&&this.handleHitOut(),c&&this.handleHitOver(c))},c.prototype.handleDragEnd=function(c){this.handleHitDone();b.prototype.handleDragEnd.call(this,c)},c.prototype.handleHitOver=function(b){var c=e(b,this.origHit);this.hit=b;this.trigger("hitOver",this.hit,c,this.origHit)},c.prototype.handleHitOut=function(){this.hit&&(this.trigger("hitOut",
this.hit),this.handleHitDone(),this.hit=null)},c.prototype.handleHitDone=function(){this.hit&&this.trigger("hitDone",this.hit)},c.prototype.handleInteractionEnd=function(c,e){b.prototype.handleInteractionEnd.call(this,c,e);this.hit=this.origHit=null;this.component.hitsNotNeeded()},c.prototype.handleScrollEnd=function(){b.prototype.handleScrollEnd.call(this);this.isDragging&&(this.component.releaseHits(),this.component.prepareHits())},c.prototype.queryHit=function(b,c){return this.coordAdjust&&(b+=
this.coordAdjust.left,c+=this.coordAdjust.top),this.component.queryHit(b,c)},c}(c(59).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});f.version="3.10.0";f.internalApiVersion=12;b=c(4);f.applyAll=b.applyAll;f.debounce=b.debounce;f.isInt=b.isInt;f.htmlEscape=b.htmlEscape;f.cssToStr=b.cssToStr;f.proxy=b.proxy;f.capitaliseFirstLetter=b.capitaliseFirstLetter;f.getOuterRect=b.getOuterRect;f.getClientRect=b.getClientRect;f.getContentRect=b.getContentRect;f.getScrollbarWidths=
b.getScrollbarWidths;f.preventDefault=b.preventDefault;f.parseFieldSpecs=b.parseFieldSpecs;f.compareByFieldSpecs=b.compareByFieldSpecs;f.compareByFieldSpec=b.compareByFieldSpec;f.flexibleCompare=b.flexibleCompare;f.computeGreatestUnit=b.computeGreatestUnit;f.divideRangeByDuration=b.divideRangeByDuration;f.divideDurationByDuration=b.divideDurationByDuration;f.multiplyDuration=b.multiplyDuration;f.durationHasTime=b.durationHasTime;f.log=b.log;f.warn=b.warn;f.removeExact=b.removeExact;f.intersectRects=
b.intersectRects;f.allowSelection=b.allowSelection;f.attrsToStr=b.attrsToStr;f.compareNumbers=b.compareNumbers;f.compensateScroll=b.compensateScroll;f.computeDurationGreatestUnit=b.computeDurationGreatestUnit;f.constrainPoint=b.constrainPoint;f.copyOwnProps=b.copyOwnProps;f.diffByUnit=b.diffByUnit;f.diffDay=b.diffDay;f.diffDayTime=b.diffDayTime;f.diffPoints=b.diffPoints;f.disableCursor=b.disableCursor;f.distributeHeight=b.distributeHeight;f.enableCursor=b.enableCursor;f.firstDefined=b.firstDefined;
f.getEvIsTouch=b.getEvIsTouch;f.getEvX=b.getEvX;f.getEvY=b.getEvY;f.getRectCenter=b.getRectCenter;f.getScrollParent=b.getScrollParent;f.hasOwnProp=b.hasOwnProp;f.isArraysEqual=b.isArraysEqual;f.isNativeDate=b.isNativeDate;f.isPrimaryMouseButton=b.isPrimaryMouseButton;f.isTimeString=b.isTimeString;f.matchCellWidths=b.matchCellWidths;f.mergeProps=b.mergeProps;f.preventSelection=b.preventSelection;f.removeMatching=b.removeMatching;f.stripHtmlEntities=b.stripHtmlEntities;f.subtractInnerElHeight=b.subtractInnerElHeight;
f.uncompensateScroll=b.uncompensateScroll;f.undistributeHeight=b.undistributeHeight;f.dayIDs=b.dayIDs;f.unitsDesc=b.unitsDesc;b=c(49);f.formatDate=b.formatDate;f.formatRange=b.formatRange;f.queryMostGranularFormatUnit=b.queryMostGranularFormatUnit;b=c(32);f.datepickerLocale=b.datepickerLocale;f.locale=b.locale;f.getMomentLocaleData=b.getMomentLocaleData;f.populateInstanceComputableOptions=b.populateInstanceComputableOptions;b=c(19);f.eventDefsToEventInstances=b.eventDefsToEventInstances;f.eventFootprintToComponentFootprint=
b.eventFootprintToComponentFootprint;f.eventInstanceToEventRange=b.eventInstanceToEventRange;f.eventInstanceToUnzonedRange=b.eventInstanceToUnzonedRange;f.eventRangeToEventFootprint=b.eventRangeToEventFootprint;b=c(11);f.moment=b.default;b=c(13);f.EmitterMixin=b.default;b=c(7);f.ListenerMixin=b.default;b=c(51);f.Model=b.default;b=c(217);f.Constraints=b.default;b=c(55);f.DateProfileGenerator=b.default;b=c(5);f.UnzonedRange=b.default;b=c(12);f.ComponentFootprint=b.default;b=c(218);f.BusinessHourGenerator=
b.default;b=c(219);f.EventPeriod=b.default;b=c(220);f.EventManager=b.default;b=c(37);f.EventDef=b.default;b=c(39);f.EventDefMutation=b.default;b=c(36);f.EventDefParser=b.default;b=c(53);f.EventInstance=b.default;b=c(50);f.EventRange=b.default;b=c(54);f.RecurringEventDef=b.default;b=c(9);f.SingleEventDef=b.default;b=c(40);f.EventDefDateMutation=b.default;b=c(16);f.EventDateProfile=b.default;b=c(38);f.EventSourceParser=b.default;b=c(6);f.EventSource=b.default;b=c(57);f.defineThemeSystem=b.defineThemeSystem;
f.getThemeSystemClass=b.getThemeSystemClass;b=c(20);f.EventInstanceGroup=b.default;b=c(56);f.ArrayEventSource=b.default;b=c(223);f.FuncEventSource=b.default;b=c(224);f.JsonFeedEventSource=b.default;b=c(34);f.EventFootprint=b.default;b=c(35);f.Class=b.default;b=c(15);f.Mixin=b.default;b=c(58);f.CoordCache=b.default;b=c(225);f.Iterator=b.default;b=c(59);f.DragListener=b.default;b=c(17);f.HitDragListener=b.default;b=c(226);f.MouseFollower=b.default;b=c(52);f.ParsableModelMixin=b.default;b=c(227);f.Popover=
b.default;b=c(21);f.Promise=b.default;b=c(228);f.TaskQueue=b.default;b=c(229);f.RenderQueue=b.default;b=c(41);f.Scroller=b.default;b=c(22);f.Theme=b.default;b=c(230);f.Component=b.default;b=c(231);f.DateComponent=b.default;b=c(42);f.InteractiveDateComponent=b.default;b=c(232);f.Calendar=b.default;b=c(43);f.View=b.default;b=c(24);f.defineView=b.defineView;f.getViewConfig=b.getViewConfig;b=c(60);f.DayTableMixin=b.default;b=c(61);f.BusinessHourRenderer=b.default;b=c(44);f.EventRenderer=b.default;b=c(62);
f.FillRenderer=b.default;b=c(63);f.HelperRenderer=b.default;b=c(233);f.ExternalDropping=b.default;b=c(234);f.EventResizing=b.default;b=c(64);f.EventPointing=b.default;b=c(235);f.EventDragging=b.default;b=c(236);f.DateSelecting=b.default;b=c(237);f.DateClicking=b.default;b=c(14);f.Interaction=b.default;b=c(65);f.StandardInteractionsMixin=b.default;b=c(238);f.AgendaView=b.default;b=c(239);f.TimeGrid=b.default;b=c(240);f.TimeGridEventRenderer=b.default;b=c(242);f.TimeGridFillRenderer=b.default;b=c(241);
f.TimeGridHelperRenderer=b.default;b=c(66);f.DayGrid=b.default;b=c(243);f.DayGridEventRenderer=b.default;b=c(245);f.DayGridFillRenderer=b.default;b=c(244);f.DayGridHelperRenderer=b.default;b=c(67);f.BasicView=b.default;b=c(68);f.BasicViewDateProfileGenerator=b.default;b=c(246);f.MonthView=b.default;b=c(247);f.MonthViewDateProfileGenerator=b.default;b=c(248);f.ListView=b.default;b=c(250);f.ListEventPointing=b.default;c=c(249);f.ListEventRenderer=c.default},function(b,f,c){Object.defineProperty(f,"__esModule",
{value:!0});var e=c(50),l=c(34),q=c(12);f.eventDefsToEventInstances=function(b,c){var e,k=[];for(e=0;e<b.length;e++)k.push.apply(k,b[e].buildInstances(c));return k};f.eventInstanceToEventRange=function(b){return new e.default(b.dateProfile.unzonedRange,b.def,b)};f.eventRangeToEventFootprint=function(b){return new l.default(new q.default(b.unzonedRange,b.eventDef.isAllDay()),b.eventDef,b.eventInstance)};f.eventInstanceToUnzonedRange=function(b){return b.dateProfile.unzonedRange};f.eventFootprintToComponentFootprint=
function(b){return b.componentFootprint}},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(5),l=c(19),q=c(50);b=function(){function b(b){this.eventInstances=b||[]}return b.prototype.getAllEventRanges=function(b){return b?this.sliceNormalRenderRanges(b):this.eventInstances.map(l.eventInstanceToEventRange)},b.prototype.sliceRenderRanges=function(b){return this.isInverse()?this.sliceInverseRenderRanges(b):this.sliceNormalRenderRanges(b)},b.prototype.sliceNormalRenderRanges=function(b){var c,
e,k=this.eventInstances,f=[];for(c=0;c<k.length;c++){var m=k[c];(e=m.dateProfile.unzonedRange.intersect(b))&&f.push(new q.default(e,m.def,m))}return f},b.prototype.sliceInverseRenderRanges=function(b){var c=this.eventInstances.map(l.eventInstanceToUnzonedRange),k=this.getEventDef();return c=e.default.invertRanges(c,b),c.map(function(b){return new q.default(b,k)})},b.prototype.isInverse=function(){return this.getEventDef().hasInverseRendering()},b.prototype.getEventDef=function(){return this.explicitEventDef||
this.eventInstances[0].def},b}();f.default=b},function(b,f,c){function e(b,c){b.then=function(e){return"function"==typeof e?k.resolve(e(c)):b}}function l(b){b.then=function(c,e){return"function"==typeof e&&e(),b}}Object.defineProperty(f,"__esModule",{value:!0});var q=c(3),k={construct:function(b){var c=q.Deferred(),k=c.promise();return"function"==typeof b&&b(function(b){c.resolve(b);e(k,b)},function(){c.reject();l(k)}),k},resolve:function(b){var c=q.Deferred().resolve(b).promise();return e(c,b),c},
reject:function(){var b=q.Deferred().reject().promise();return l(b),b}};f.default=k},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3);b=function(){function b(b){this.optionsManager=b;this.processIconOverride()}return b.prototype.processIconOverride=function(){this.iconOverrideOption&&this.setIconOverride(this.optionsManager.get(this.iconOverrideOption))},b.prototype.setIconOverride=function(b){var c;if(e.isPlainObject(b)){var f=e.extend({},this.iconClasses);for(c in b)f[c]=
this.applyIconOverridePrefix(b[c]);this.iconClasses=f}else!1===b&&(this.iconClasses={})},b.prototype.applyIconOverridePrefix=function(b){var c=this.iconOverridePrefix;return c&&0!==b.indexOf(c)&&(b=c+b),b},b.prototype.getClass=function(b){return this.classes[b]||""},b.prototype.getIconClass=function(b){return(b=this.iconClasses[b])?this.baseIconClass+" "+b:""},b.prototype.getCustomButtonIconClass=function(b){var c;return this.iconOverrideCustomButtonOption&&(c=b[this.iconOverrideCustomButtonOption])?
this.baseIconClass+" "+this.applyIconOverridePrefix(c):""},b}();f.default=b;b.prototype.classes={};b.prototype.iconClasses={};b.prototype.baseIconClass="";b.prototype.iconOverridePrefix=""},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(18);b=c(13);c=c(7);l.touchMouseIgnoreWait=500;var q=null,k=0,m=function(){function b(){this.isTouching=!1;this.mouseIgnoreDepth=0}return b.get=function(){return q||(q=new b,q.bind()),q},b.needed=function(){b.get();k++},b.unneeded=function(){--k||
(q.unbind(),q=null)},b.prototype.bind=function(){var b=this;this.listenTo(e(document),{touchstart:this.handleTouchStart,touchcancel:this.handleTouchCancel,touchend:this.handleTouchEnd,mousedown:this.handleMouseDown,mousemove:this.handleMouseMove,mouseup:this.handleMouseUp,click:this.handleClick,selectstart:this.handleSelectStart,contextmenu:this.handleContextMenu});window.addEventListener("touchmove",this.handleTouchMoveProxy=function(c){b.handleTouchMove(e.Event(c))},{passive:!1});window.addEventListener("scroll",
this.handleScrollProxy=function(c){b.handleScroll(e.Event(c))},!0)},b.prototype.unbind=function(){this.stopListeningTo(e(document));window.removeEventListener("touchmove",this.handleTouchMoveProxy,{passive:!1});window.removeEventListener("scroll",this.handleScrollProxy,!0)},b.prototype.handleTouchStart=function(b){this.stopTouch(b,!0);this.isTouching=!0;this.trigger("touchstart",b)},b.prototype.handleTouchMove=function(b){this.isTouching&&this.trigger("touchmove",b)},b.prototype.handleTouchCancel=
function(b){this.isTouching&&(this.trigger("touchcancel",b),this.stopTouch(b))},b.prototype.handleTouchEnd=function(b){this.stopTouch(b)},b.prototype.handleMouseDown=function(b){this.shouldIgnoreMouse()||this.trigger("mousedown",b)},b.prototype.handleMouseMove=function(b){this.shouldIgnoreMouse()||this.trigger("mousemove",b)},b.prototype.handleMouseUp=function(b){this.shouldIgnoreMouse()||this.trigger("mouseup",b)},b.prototype.handleClick=function(b){this.shouldIgnoreMouse()||this.trigger("click",
b)},b.prototype.handleSelectStart=function(b){this.trigger("selectstart",b)},b.prototype.handleContextMenu=function(b){this.trigger("contextmenu",b)},b.prototype.handleScroll=function(b){this.trigger("scroll",b)},b.prototype.stopTouch=function(b,c){void 0===c&&(c=!1);this.isTouching&&(this.isTouching=!1,this.trigger("touchend",b),c||this.startTouchMouseIgnore())},b.prototype.startTouchMouseIgnore=function(){var b=this,c=l.touchMouseIgnoreWait;c&&(this.mouseIgnoreDepth++,setTimeout(function(){b.mouseIgnoreDepth--},
c))},b.prototype.shouldIgnoreMouse=function(){return this.isTouching||!!this.mouseIgnoreDepth},b}();f.default=m;c.default.mixInto(m);b.default.mixInto(m)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});b=c(18);f.viewHash={};b.views=f.viewHash;f.defineView=function(b,c){f.viewHash[b]=c};f.getViewConfig=function(b){return f.viewHash[b]}},,,,,,,,function(b,f,c){function e(b,c){var e=f.localeOptionHash[b]||(f.localeOptionHash[b]={});c&&(e=f.localeOptionHash[b]=m.mergeOptions([e,c]));
var h=l(b);q.each(y,function(b,c){null==e[b]&&(e[b]=c(h,e))});m.globalDefaults.locale=b}function l(b){return k.localeData(b)||k.localeData("en")}Object.defineProperty(f,"__esModule",{value:!0});var q=c(3),k=c(0);b=c(18);var m=c(33),r=c(4);f.localeOptionHash={};b.locales=f.localeOptionHash;var n={buttonText:function(b){return{prev:r.stripHtmlEntities(b.prevText),next:r.stripHtmlEntities(b.nextText),today:r.stripHtmlEntities(b.currentText)}},monthYearFormat:function(b){return b.showMonthAfterYear?"YYYY["+
b.yearSuffix+"] MMMM":"MMMM YYYY["+b.yearSuffix+"]"}},y={dayOfMonthFormat:function(b,c){b=b.longDateFormat("l");return b=b.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),c.isRTL?b+=" ddd":b="ddd "+b,b},mediumTimeFormat:function(b){return b.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(b){return b.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,
"($1)").replace(/\s*a$/i,"t")},hourFormat:function(b){return b.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(b){return b.longDateFormat("LT").replace(/\s*a$/i,"")}},w={smallDayDateFormat:function(b){return b.isRTL?"D dd":"dd D"},weekFormat:function(b){return b.isRTL?"w[ "+b.weekNumberTitle+"]":"["+b.weekNumberTitle+" ]w"},smallWeekFormat:function(b){return b.isRTL?"w["+b.weekNumberTitle+"]":"["+b.weekNumberTitle+"]w"}};f.populateInstanceComputableOptions=
function(b){q.each(w,function(c,e){null==b[c]&&(b[c]=e(b))})};f.datepickerLocale=function(b,c,e){var h=f.localeOptionHash[b]||(f.localeOptionHash[b]={});h.isRTL=e.isRTL;h.weekNumberTitle=e.weekHeader;q.each(n,function(b,c){h[b]=c(e)});var k=q.datepicker;k&&(k.regional[c]=k.regional[b]=e,k.regional.en=k.regional[""],k.setDefaults(e))};f.locale=e;f.getMomentLocaleData=l;e("en",m.englishDefaults)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(4);f.globalDefaults={titleRangeSeparator:" \u2013 ",
monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",columnHeader:!0,defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",minTime:"00:00:00",maxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,
locale:null,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},allDayText:"all-day",agendaEventMinHeight:0,theme:!1,dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1E3};f.englishDefaults={dayPopoverFormat:"dddd, MMMM D"};
f.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var l=["header","footer","buttonText","buttonIcons","themeButtonIcons"];f.mergeOptions=function(b){return e.mergeProps(b,l)}},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(b,
c,e){this.componentFootprint=b;this.eventDef=c;e&&(this.eventInstance=e)}return b.prototype.getEventLegacy=function(){return(this.eventInstance||this.eventDef).toLegacy()},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(4);b=function(){function b(){}return b.extend=function(b){var c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c}(this);return l.copyOwnProps(b,c.prototype),c},b.mixin=function(b){l.copyOwnProps(b,
this.prototype)},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(0),l=c(4),q=c(9),k=c(54);f.default={parse:function(b,c){return l.isTimeString(b.start)||e.isDuration(b.start)||l.isTimeString(b.end)||e.isDuration(b.end)?k.default.parse(b,c):q.default.parse(b,c)}}},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(52);b=function(){function b(b){this.source=b;this.className=[];this.miscProps={}}return b.parse=function(b,c){c=new this(c);
return!!c.applyProps(b)&&c},b.normalizeId=function(b){return String(b)},b.generateId=function(){return"_fc"+b.uuid++},b.prototype.clone=function(){var c=new this.constructor(this.source);return c.id=this.id,c.rawId=this.rawId,c.uid=this.uid,b.copyVerbatimStandardProps(this,c),c.className=this.className.slice(),c.miscProps=e.extend({},this.miscProps),c},b.prototype.hasInverseRendering=function(){return"inverse-background"===this.getRendering()},b.prototype.hasBgRendering=function(){var b=this.getRendering();
return"inverse-background"===b||"background"===b},b.prototype.getRendering=function(){return null!=this.rendering?this.rendering:this.source.rendering},b.prototype.getConstraint=function(){return null!=this.constraint?this.constraint:null!=this.source.constraint?this.source.constraint:this.source.calendar.opt("eventConstraint")},b.prototype.getOverlap=function(){return null!=this.overlap?this.overlap:null!=this.source.overlap?this.source.overlap:this.source.calendar.opt("eventOverlap")},b.prototype.isStartExplicitlyEditable=
function(){return null!=this.startEditable?this.startEditable:this.source.startEditable},b.prototype.isDurationExplicitlyEditable=function(){return null!=this.durationEditable?this.durationEditable:this.source.durationEditable},b.prototype.isExplicitlyEditable=function(){return null!=this.editable?this.editable:this.source.editable},b.prototype.toLegacy=function(){var c=e.extend({},this.miscProps);return c._id=this.uid,c.source=this.source,c.className=this.className.slice(),c.allDay=this.isAllDay(),
null!=this.rawId&&(c.id=this.rawId),b.copyVerbatimStandardProps(this,c),c},b.prototype.applyManualStandardProps=function(c){return null!=c.id?this.id=b.normalizeId(this.rawId=c.id):this.id=b.generateId(),null!=c._id?this.uid=String(c._id):this.uid=b.generateId(),e.isArray(c.className)&&(this.className=c.className),"string"==typeof c.className&&(this.className=c.className.split(/\s+/)),!0},b.prototype.applyMiscProps=function(b){e.extend(this.miscProps,b)},b.uuid=0,b.defineStandardProps=l.default.defineStandardProps,
b.copyVerbatimStandardProps=l.default.copyVerbatimStandardProps,b}();f.default=b;l.default.mixInto(b);b.defineStandardProps({_id:!1,id:!1,className:!1,source:!1,title:!0,url:!0,rendering:!0,constraint:!0,overlap:!0,editable:!0,startEditable:!0,durationEditable:!0,color:!0,backgroundColor:!0,borderColor:!0,textColor:!0})},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});f.default={sourceClasses:[],registerClass:function(b){this.sourceClasses.unshift(b)},parse:function(b,e){var c,f,k=
this.sourceClasses;for(c=0;c<k.length;c++)if(f=k[c].parse(b,e))return f}}},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(4),l=c(16),q=c(37),k=c(40),m=c(9);b=function(){function b(){}return b.createFromRawProps=function(c,f,m){var n,h,r,w,y=c.def,t={},v={},H={},g={},u=null,G=null;for(n in f)l.default.isStandardProp(n)?t[n]=f[n]:y.isStandardProp(n)?v[n]=f[n]:y.miscProps[n]!==f[n]&&(H[n]=f[n]);return h=l.default.parse(t,y.source),h&&(r=k.default.createFromDiff(c.dateProfile,
h,m)),v.id!==y.id&&(u=v.id),e.isArraysEqual(v.className,y.className)||(G=v.className),q.default.copyVerbatimStandardProps(v,g),w=new b,w.eventDefId=u,w.className=G,w.verbatimStandardProps=g,w.miscProps=H,r&&(w.dateMutation=r),w},b.prototype.mutateSingle=function(b){var c;return this.dateMutation&&(c=b.dateProfile,b.dateProfile=this.dateMutation.buildNewDateProfile(c,b.source.calendar)),null!=this.eventDefId&&(b.id=q.default.normalizeId(b.rawId=this.eventDefId)),this.className&&(b.className=this.className),
this.verbatimStandardProps&&m.default.copyVerbatimStandardProps(this.verbatimStandardProps,b),this.miscProps&&b.applyMiscProps(this.miscProps),c?function(){b.dateProfile=c}:function(){}},b.prototype.setDateMutation=function(b){b&&!b.isEmpty()?this.dateMutation=b:this.dateMutation=null},b.prototype.isEmpty=function(){return!this.dateMutation},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(4),l=c(16);b=function(){function b(){this.forceAllDay=this.forceTimed=
this.clearEnd=!1}return b.createFromDiff=function(c,f,l){function k(b,c){return l?e.diffByUnit(b,c,l):f.isAllDay()?e.diffDay(b,c):e.diffDayTime(b,c)}var m,r,x,h,A=c.end&&!f.end,t=c.isAllDay()&&!f.isAllDay(),q=!c.isAllDay()&&f.isAllDay();return m=k(f.start,c.start),f.end&&(r=k(f.unzonedRange.getEnd(),c.unzonedRange.getEnd()),x=r.subtract(m)),h=new b,h.clearEnd=A,h.forceTimed=t,h.forceAllDay=q,h.setDateDelta(m),h.setEndDelta(x),h},b.prototype.buildNewDateProfile=function(b,c){var e=b.start.clone(),
f=null,k=!1;return b.end&&!this.clearEnd?f=b.end.clone():this.endDelta&&!f&&(f=c.getDefaultEventEnd(b.isAllDay(),e)),this.forceTimed?(k=!0,e.hasTime()||e.time(0),f&&!f.hasTime()&&f.time(0)):this.forceAllDay&&(e.hasTime()&&e.stripTime(),f&&f.hasTime()&&f.stripTime()),this.dateDelta&&(k=!0,e.add(this.dateDelta),f&&f.add(this.dateDelta)),this.endDelta&&(k=!0,f.add(this.endDelta)),this.startDelta&&(k=!0,e.add(this.startDelta)),k&&(e=c.applyTimezone(e),f&&(f=c.applyTimezone(f))),!f&&c.opt("forceEventDuration")&&
(f=c.getDefaultEventEnd(b.isAllDay(),e)),new l.default(e,f,c)},b.prototype.setDateDelta=function(b){b&&b.valueOf()?this.dateDelta=b:this.dateDelta=null},b.prototype.setStartDelta=function(b){b&&b.valueOf()?this.startDelta=b:this.startDelta=null},b.prototype.setEndDelta=function(b){b&&b.valueOf()?this.endDelta=b:this.endDelta=null},b.prototype.isEmpty=function(){return!(this.clearEnd||this.forceTimed||this.forceAllDay||this.dateDelta||this.startDelta||this.endDelta)},b}();f.default=b},function(b,f,
c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(4);b=function(b){function c(c){var e=b.call(this)||this;return c=c||{},e.overflowX=c.overflowX||c.overflow||"auto",e.overflowY=c.overflowY||c.overflow||"auto",e}return e.__extends(c,b),c.prototype.render=function(){this.el=this.renderEl();this.applyOverflow()},c.prototype.renderEl=function(){return this.scrollEl=l('<div class="fc-scroller"></div>')},c.prototype.clear=function(){this.setHeight("auto");this.applyOverflow()},c.prototype.destroy=
function(){this.el.remove()},c.prototype.applyOverflow=function(){this.scrollEl.css({"overflow-x":this.overflowX,"overflow-y":this.overflowY})},c.prototype.lockOverflow=function(b){var c=this.overflowX,e=this.overflowY;b=b||this.getScrollbarWidths();"auto"===c&&(c=b.top||b.bottom||this.scrollEl[0].scrollWidth-1>this.scrollEl[0].clientWidth?"scroll":"hidden");"auto"===e&&(e=b.left||b.right||this.scrollEl[0].scrollHeight-1>this.scrollEl[0].clientHeight?"scroll":"hidden");this.scrollEl.css({"overflow-x":c,
"overflow-y":e})},c.prototype.setHeight=function(b){this.scrollEl.height(b)},c.prototype.getScrollTop=function(){return this.scrollEl.scrollTop()},c.prototype.setScrollTop=function(b){this.scrollEl.scrollTop(b)},c.prototype.getClientWidth=function(){return this.scrollEl[0].clientWidth},c.prototype.getClientHeight=function(){return this.scrollEl[0].clientHeight},c.prototype.getScrollbarWidths=function(){return q.getScrollbarWidths(this.scrollEl)},c}(c(35).default);f.default=b},function(b,f,c){Object.defineProperty(f,
"__esModule",{value:!0});var e=c(2),l=c(3),q=c(4);b=c(231);var k=c(23);c=function(b){function c(c,e){c=b.call(this,c,e)||this;return c.segSelector=".fc-event-container > *",c.dateSelectingClass&&(c.dateClicking=new c.dateClickingClass(c)),c.dateSelectingClass&&(c.dateSelecting=new c.dateSelectingClass(c)),c.eventPointingClass&&(c.eventPointing=new c.eventPointingClass(c)),c.eventDraggingClass&&c.eventPointing&&(c.eventDragging=new c.eventDraggingClass(c,c.eventPointing)),c.eventResizingClass&&c.eventPointing&&
(c.eventResizing=new c.eventResizingClass(c,c.eventPointing)),c.externalDroppingClass&&(c.externalDropping=new c.externalDroppingClass(c)),c}return e.__extends(c,b),c.prototype.setElement=function(c){b.prototype.setElement.call(this,c);this.dateClicking&&this.dateClicking.bindToEl(c);this.dateSelecting&&this.dateSelecting.bindToEl(c);this.bindAllSegHandlersToEl(c)},c.prototype.removeElement=function(){this.endInteractions();b.prototype.removeElement.call(this)},c.prototype.executeEventUnrender=function(){this.endInteractions();
b.prototype.executeEventUnrender.call(this)},c.prototype.bindGlobalHandlers=function(){b.prototype.bindGlobalHandlers.call(this);this.externalDropping&&this.externalDropping.bindToDocument()},c.prototype.unbindGlobalHandlers=function(){b.prototype.unbindGlobalHandlers.call(this);this.externalDropping&&this.externalDropping.unbindFromDocument()},c.prototype.bindDateHandlerToEl=function(b,c,e){var f=this;this.el.on(c,function(b){if(!l(b.target).is(f.segSelector+":not(.fc-helper),"+f.segSelector+":not(.fc-helper) *,.fc-more,a[data-goto]"))return e.call(f,
b)})},c.prototype.bindAllSegHandlersToEl=function(b){[this.eventPointing,this.eventDragging,this.eventResizing].forEach(function(c){c&&c.bindToEl(b)})},c.prototype.bindSegHandlerToEl=function(b,c,e){var f=this;b.on(c,this.segSelector,function(b){var c=l(b.currentTarget);if(!c.is(".fc-helper")&&(c=c.data("fc-seg"))&&!f.shouldIgnoreEventPointing())return e.call(f,c,b)})},c.prototype.shouldIgnoreMouse=function(){return k.default.get().shouldIgnoreMouse()},c.prototype.shouldIgnoreTouch=function(){var b=
this._getView();return b.isSelected||b.selectedEvent},c.prototype.shouldIgnoreEventPointing=function(){return this.eventDragging&&this.eventDragging.isDragging||this.eventResizing&&this.eventResizing.isResizing},c.prototype.canStartSelection=function(b,c){return q.getEvIsTouch(c)&&!this.canStartResize(b,c)&&(this.isEventDefDraggable(b.footprint.eventDef)||this.isEventDefResizable(b.footprint.eventDef))},c.prototype.canStartDrag=function(b,c){return!this.canStartResize(b,c)&&this.isEventDefDraggable(b.footprint.eventDef)},
c.prototype.canStartResize=function(b,c){var e=this._getView();b=b.footprint.eventDef;return(!q.getEvIsTouch(c)||e.isEventDefSelected(b))&&this.isEventDefResizable(b)&&l(c.target).is(".fc-resizer")},c.prototype.endInteractions=function(){[this.dateClicking,this.dateSelecting,this.eventPointing,this.eventDragging,this.eventResizing].forEach(function(b){b&&b.end()})},c.prototype.isEventDefDraggable=function(b){return this.isEventDefStartEditable(b)},c.prototype.isEventDefStartEditable=function(b){var c=
b.isStartExplicitlyEditable();return null==c&&null==(c=this.opt("eventStartEditable"))&&(c=this.isEventDefGenerallyEditable(b)),c},c.prototype.isEventDefGenerallyEditable=function(b){b=b.isExplicitlyEditable();return null==b&&(b=this.opt("editable")),b},c.prototype.isEventDefResizableFromStart=function(b){return this.opt("eventResizableFromStart")&&this.isEventDefResizable(b)},c.prototype.isEventDefResizableFromEnd=function(b){return this.isEventDefResizable(b)},c.prototype.isEventDefResizable=function(b){var c=
b.isDurationExplicitlyEditable();return null==c&&null==(c=this.opt("eventDurationEditable"))&&(c=this.isEventDefGenerallyEditable(b)),c},c.prototype.diffDates=function(b,c){return this.largeUnit?q.diffByUnit(b,c,this.largeUnit):q.diffDayTime(b,c)},c.prototype.isEventInstanceGroupAllowed=function(b){var c,e=this._getView(),f=this.dateProfile,h=this.eventRangesToEventFootprints(b.getAllEventRanges());for(c=0;c<h.length;c++)if(!f.validUnzonedRange.containsRange(h[c].componentFootprint.unzonedRange))return!1;
return e.calendar.constraints.isEventInstanceGroupAllowed(b)},c.prototype.isExternalInstanceGroupAllowed=function(b){var c=this._getView(),e=this.dateProfile,f=this.eventRangesToEventFootprints(b.getAllEventRanges());for(b=0;b<f.length;b++)if(!e.validUnzonedRange.containsRange(f[b].componentFootprint.unzonedRange))return!1;for(b=0;b<f.length;b++)if(!c.calendar.constraints.isSelectionFootprintAllowed(f[b].componentFootprint))return!1;return!0},c}(b.default);f.default=c},function(b,f,c){Object.defineProperty(f,
"__esModule",{value:!0});var e=c(2),l=c(3),q=c(0),k=c(4),m=c(229);b=c(55);var r=c(42),n=c(23),y=c(5);c=function(b){function c(c,e){var h=b.call(this,null,e.options)||this;return h.batchRenderDepth=0,h.isSelected=!1,h.calendar=c,h.viewSpec=e,h.type=e.type,h.name=h.type,h.initRenderQueue(),h.initHiddenDays(),h.dateProfileGenerator=new h.dateProfileGeneratorClass(h),h.bindBaseRenderHandlers(),h.eventOrderSpecs=k.parseFieldSpecs(h.opt("eventOrder")),h.initialize&&h.initialize(),h}return e.__extends(c,
b),c.prototype._getView=function(){return this},c.prototype.opt=function(b){return this.options[b]},c.prototype.initRenderQueue=function(){this.renderQueue=new m.default({event:this.opt("eventRenderWait")});this.renderQueue.on("start",this.onRenderQueueStart.bind(this));this.renderQueue.on("stop",this.onRenderQueueStop.bind(this));this.on("before:change",this.startBatchRender);this.on("change",this.stopBatchRender)},c.prototype.onRenderQueueStart=function(){this.calendar.freezeContentHeight();this.addScroll(this.queryScroll())},
c.prototype.onRenderQueueStop=function(){this.calendar.updateViewSize()&&this.popScroll();this.calendar.thawContentHeight()},c.prototype.startBatchRender=function(){this.batchRenderDepth++||this.renderQueue.pause()},c.prototype.stopBatchRender=function(){--this.batchRenderDepth||this.renderQueue.resume()},c.prototype.requestRender=function(b,c,e){this.renderQueue.queue(b,c,e)},c.prototype.whenSizeUpdated=function(b){this.renderQueue.isRunning?this.renderQueue.one("stop",b.bind(this)):b.call(this)},
c.prototype.computeTitle=function(b){var c;return c=/^(year|month)$/.test(b.currentRangeUnit)?b.currentUnzonedRange:b.activeUnzonedRange,this.formatRange({start:this.calendar.msToMoment(c.startMs,b.isRangeAllDay),end:this.calendar.msToMoment(c.endMs,b.isRangeAllDay)},b.isRangeAllDay,this.opt("titleFormat")||this.computeTitleFormat(b),this.opt("titleRangeSeparator"))},c.prototype.computeTitleFormat=function(b){var c=b.currentRangeUnit;return"year"===c?"YYYY":"month"===c?this.opt("monthYearFormat"):
1<b.currentUnzonedRange.as("days")?"ll":"LL"},c.prototype.setDate=function(b){var c=this.get("dateProfile");b=this.dateProfileGenerator.build(b,void 0,!0);c&&c.activeUnzonedRange.equals(b.activeUnzonedRange)||this.set("dateProfile",b)},c.prototype.unsetDate=function(){this.unset("dateProfile")},c.prototype.fetchInitialEvents=function(b){var c=this.calendar,e=b.isRangeAllDay&&!this.usesMinMaxTime;return c.requestEvents(c.msToMoment(b.activeUnzonedRange.startMs,e),c.msToMoment(b.activeUnzonedRange.endMs,
e))},c.prototype.bindEventChanges=function(){this.listenTo(this.calendar,"eventsReset",this.resetEvents)},c.prototype.unbindEventChanges=function(){this.stopListeningTo(this.calendar,"eventsReset")},c.prototype.setEvents=function(b){this.set("currentEvents",b);this.set("hasEvents",!0)},c.prototype.unsetEvents=function(){this.unset("currentEvents");this.unset("hasEvents")},c.prototype.resetEvents=function(b){this.startBatchRender();this.unsetEvents();this.setEvents(b);this.stopBatchRender()},c.prototype.requestDateRender=
function(b){var c=this;this.requestRender(function(){c.executeDateRender(b)},"date","init")},c.prototype.requestDateUnrender=function(){var b=this;this.requestRender(function(){b.executeDateUnrender()},"date","destroy")},c.prototype.executeDateRender=function(c){b.prototype.executeDateRender.call(this,c);this.render&&this.render();this.trigger("datesRendered");this.addScroll({isDateInit:!0});this.startNowIndicator()},c.prototype.executeDateUnrender=function(){this.unselect();this.stopNowIndicator();
this.trigger("before:datesUnrendered");this.destroy&&this.destroy();b.prototype.executeDateUnrender.call(this)},c.prototype.bindBaseRenderHandlers=function(){var b=this;this.on("datesRendered",function(){b.whenSizeUpdated(b.triggerViewRender)});this.on("before:datesUnrendered",function(){b.triggerViewDestroy()})},c.prototype.triggerViewRender=function(){this.publiclyTrigger("viewRender",{context:this,args:[this,this.el]})},c.prototype.triggerViewDestroy=function(){this.publiclyTrigger("viewDestroy",
{context:this,args:[this,this.el]})},c.prototype.requestEventsRender=function(b){var c=this;this.requestRender(function(){c.executeEventRender(b);c.whenSizeUpdated(c.triggerAfterEventsRendered)},"event","init")},c.prototype.requestEventsUnrender=function(){var b=this;this.requestRender(function(){b.triggerBeforeEventsDestroyed();b.executeEventUnrender()},"event","destroy")},c.prototype.requestBusinessHoursRender=function(b){var c=this;this.requestRender(function(){c.renderBusinessHours(b)},"businessHours",
"init")},c.prototype.requestBusinessHoursUnrender=function(){var b=this;this.requestRender(function(){b.unrenderBusinessHours()},"businessHours","destroy")},c.prototype.bindGlobalHandlers=function(){b.prototype.bindGlobalHandlers.call(this);this.listenTo(n.default.get(),{touchstart:this.processUnselect,mousedown:this.handleDocumentMousedown})},c.prototype.unbindGlobalHandlers=function(){b.prototype.unbindGlobalHandlers.call(this);this.stopListeningTo(n.default.get())},c.prototype.startNowIndicator=
function(){var b,c,e,f=this;this.opt("nowIndicator")&&(b=this.getNowIndicatorUnit())&&(c=k.proxy(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=(new Date).valueOf(),e=this.initialNowDate.clone().startOf(b).add(1,b).valueOf()-this.initialNowDate.valueOf(),this.nowIndicatorTimeoutID=setTimeout(function(){f.nowIndicatorTimeoutID=null;c();e=+q.duration(1,b);e=Math.max(100,e);f.nowIndicatorIntervalID=setInterval(c,e)},e))},c.prototype.updateNowIndicator=
function(){this.isDatesRendered&&this.initialNowDate&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add((new Date).valueOf()-this.initialNowQueriedMs)),this.isNowIndicatorRendered=!0)},c.prototype.stopNowIndicator=function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearInterval(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),
this.isNowIndicatorRendered=!1)},c.prototype.updateSize=function(c,e,f){this.setHeight?this.setHeight(c,e):b.prototype.updateSize.call(this,c,e,f);this.updateNowIndicator()},c.prototype.addScroll=function(b){var c=this.queuedScroll||(this.queuedScroll={});l.extend(c,b)},c.prototype.popScroll=function(){this.applyQueuedScroll();this.queuedScroll=null},c.prototype.applyQueuedScroll=function(){this.queuedScroll&&this.applyScroll(this.queuedScroll)},c.prototype.queryScroll=function(){var b={};return this.isDatesRendered&&
l.extend(b,this.queryDateScroll()),b},c.prototype.applyScroll=function(b){b.isDateInit&&this.isDatesRendered&&l.extend(b,this.computeInitialDateScroll());this.isDatesRendered&&this.applyDateScroll(b)},c.prototype.computeInitialDateScroll=function(){return{}},c.prototype.queryDateScroll=function(){return{}},c.prototype.applyDateScroll=function(b){},c.prototype.reportEventDrop=function(b,c,e,f){var h=this.calendar.eventManager.mutateEventsWithId(b.def.id,c);(c=c.dateMutation)&&(b.dateProfile=c.buildNewDateProfile(b.dateProfile,
this.calendar));this.triggerEventDrop(b,c&&c.dateDelta||q.duration(),h,e,f)},c.prototype.triggerEventDrop=function(b,c,e,f,k){this.publiclyTrigger("eventDrop",{context:f[0],args:[b.toLegacy(),c,e,k,{},this]})},c.prototype.reportExternalDrop=function(b,c,e,f,k,m){c&&this.calendar.eventManager.addEventDef(b,e);this.triggerExternalDrop(b,c,f,k,m)},c.prototype.triggerExternalDrop=function(b,c,e,f,k){this.publiclyTrigger("drop",{context:e[0],args:[b.dateProfile.start.clone(),f,k,this]});c&&this.publiclyTrigger("eventReceive",
{context:this,args:[b.buildInstance().toLegacy(),this]})},c.prototype.reportEventResize=function(b,c,e,f){var h=this.calendar.eventManager.mutateEventsWithId(b.def.id,c);b.dateProfile=c.dateMutation.buildNewDateProfile(b.dateProfile,this.calendar);this.triggerEventResize(b,c.dateMutation.endDelta||c.dateMutation.startDelta,h,e,f)},c.prototype.triggerEventResize=function(b,c,e,f,k){this.publiclyTrigger("eventResize",{context:f[0],args:[b.toLegacy(),c,e,k,{},this]})},c.prototype.select=function(b,c){this.unselect(c);
this.renderSelectionFootprint(b);this.reportSelection(b,c)},c.prototype.renderSelectionFootprint=function(c){this.renderSelection?this.renderSelection(c.toLegacy(this.calendar)):b.prototype.renderSelectionFootprint.call(this,c)},c.prototype.reportSelection=function(b,c){this.isSelected=!0;this.triggerSelect(b,c)},c.prototype.triggerSelect=function(b,c){b=this.calendar.footprintToDateProfile(b);this.publiclyTrigger("select",{context:this,args:[b.start,b.end,c,this]})},c.prototype.unselect=function(b){this.isSelected&&
(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.publiclyTrigger("unselect",{context:this,args:[b,this]}))},c.prototype.selectEventInstance=function(b){this.selectedEventInstance&&this.selectedEventInstance===b||(this.unselectEventInstance(),this.getEventSegs().forEach(function(c){c.footprint.eventInstance===b&&c.el&&c.el.addClass("fc-selected")}),this.selectedEventInstance=b)},c.prototype.unselectEventInstance=function(){this.selectedEventInstance&&
(this.getEventSegs().forEach(function(b){b.el&&b.el.removeClass("fc-selected")}),this.selectedEventInstance=null)},c.prototype.isEventDefSelected=function(b){return this.selectedEventInstance&&this.selectedEventInstance.def.id===b.id},c.prototype.handleDocumentMousedown=function(b){k.isPrimaryMouseButton(b)&&this.processUnselect(b)},c.prototype.processUnselect=function(b){this.processRangeUnselect(b);this.processEventUnselect(b)},c.prototype.processRangeUnselect=function(b){var c;this.isSelected&&
this.opt("unselectAuto")&&((c=this.opt("unselectCancel"))&&l(b.target).closest(c).length||this.unselect(b))},c.prototype.processEventUnselect=function(b){this.selectedEventInstance&&(l(b.target).closest(".fc-selected").length||this.unselectEventInstance())},c.prototype.triggerBaseRendered=function(){this.publiclyTrigger("viewRender",{context:this,args:[this,this.el]})},c.prototype.triggerBaseUnrendered=function(){this.publiclyTrigger("viewDestroy",{context:this,args:[this,this.el]})},c.prototype.triggerDayClick=
function(b,c,e){b=this.calendar.footprintToDateProfile(b);this.publiclyTrigger("dayClick",{context:c,args:[b.start,e,this]})},c.prototype.isDateInOtherMonth=function(b,c){return!1},c.prototype.getUnzonedRangeOption=function(b){var c=this.opt(b);if("function"==typeof c&&(c=c.apply(null,Array.prototype.slice.call(arguments,1))),c)return this.calendar.parseUnzonedRange(c)},c.prototype.initHiddenDays=function(){var b,c=this.opt("hiddenDays")||[],e=[],f=0;!1===this.opt("weekends")&&c.push(0,6);for(b=0;7>
b;b++)(e[b]=-1!==l.inArray(b,c))||f++;if(!f)throw Error("invalid hiddenDays");this.isHiddenDayHash=e},c.prototype.trimHiddenDays=function(b){var c=b.getStart();b=b.getEnd();return c&&(c=this.skipHiddenDays(c)),b&&(b=this.skipHiddenDays(b,-1,!0)),null===c||null===b||c<b?new y.default(c,b):null},c.prototype.isHiddenDay=function(b){return q.isMoment(b)&&(b=b.day()),this.isHiddenDayHash[b]},c.prototype.skipHiddenDays=function(b,c,e){void 0===c&&(c=1);void 0===e&&(e=!1);for(b=b.clone();this.isHiddenDayHash[(b.day()+
(e?c:0)+7)%7];)b.add(c,"days");return b},c}(r.default);f.default=c;c.prototype.usesMinMaxTime=!1;c.prototype.dateProfileGeneratorClass=b.default;c.watch("displayingDates",["isInDom","dateProfile"],function(b){this.requestDateRender(b.dateProfile)},function(){this.requestDateUnrender()});c.watch("displayingBusinessHours",["displayingDates","businessHourGenerator"],function(b){this.requestBusinessHoursRender(b.businessHourGenerator)},function(){this.requestBusinessHoursUnrender()});c.watch("initialEvents",
["dateProfile"],function(b){return this.fetchInitialEvents(b.dateProfile)});c.watch("bindingEvents",["initialEvents"],function(b){this.setEvents(b.initialEvents);this.bindEventChanges()},function(){this.unbindEventChanges();this.unsetEvents()});c.watch("displayingEvents",["displayingDates","hasEvents"],function(){this.requestEventsRender(this.get("currentEvents"))},function(){this.requestEventsUnrender()});c.watch("title",["dateProfile"],function(b){return this.title=this.computeTitle(b.dateProfile)});
c.watch("legacyDateProps",["dateProfile"],function(b){var c=this.calendar;b=b.dateProfile;this.start=c.msToMoment(b.activeUnzonedRange.startMs,b.isRangeAllDay);this.end=c.msToMoment(b.activeUnzonedRange.endMs,b.isRangeAllDay);this.intervalStart=c.msToMoment(b.currentUnzonedRange.startMs,b.isRangeAllDay);this.intervalEnd=c.msToMoment(b.currentUnzonedRange.endMs,b.isRangeAllDay)})},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(4);b=function(){function b(b,c){this.view=
b._getView();this.component=b;this.fillRenderer=c}return b.prototype.opt=function(b){return this.view.opt(b)},b.prototype.rangeUpdated=function(){this.eventTimeFormat=this.opt("eventTimeFormat")||this.opt("timeFormat")||this.computeEventTimeFormat();var b=this.opt("displayEventTime");null==b&&(b=this.computeDisplayEventTime());var c=this.opt("displayEventEnd");null==c&&(c=this.computeDisplayEventEnd());this.displayEventTime=b;this.displayEventEnd=c},b.prototype.render=function(b){var c,e=this.component._getDateProfile(),
f=[],k=[];for(c in b){var l=b[c];var x=l.sliceRenderRanges(e.activeUnzonedRange);l.getEventDef().hasBgRendering()?f.push.apply(f,x):k.push.apply(k,x)}this.renderBgRanges(f);this.renderFgRanges(k)},b.prototype.unrender=function(){this.unrenderBgRanges();this.unrenderFgRanges()},b.prototype.renderFgRanges=function(b){b=this.component.eventRangesToEventFootprints(b);b=this.component.eventFootprintsToSegs(b);b=this.renderFgSegEls(b);!1!==this.renderFgSegs(b)&&(this.fgSegs=b)},b.prototype.unrenderFgRanges=
function(){this.unrenderFgSegs(this.fgSegs||[]);this.fgSegs=null},b.prototype.renderBgRanges=function(b){b=this.component.eventRangesToEventFootprints(b);b=this.component.eventFootprintsToSegs(b);!1!==this.renderBgSegs(b)&&(this.bgSegs=b)},b.prototype.unrenderBgRanges=function(){this.unrenderBgSegs();this.bgSegs=null},b.prototype.getSegs=function(){return(this.bgSegs||[]).concat(this.fgSegs||[])},b.prototype.renderFgSegs=function(b){return!1},b.prototype.unrenderFgSegs=function(b){},b.prototype.renderBgSegs=
function(b){var c=this;if(!this.fillRenderer)return!1;this.fillRenderer.renderSegs("bgEvent",b,{getClasses:function(b){return c.getBgClasses(b.footprint.eventDef)},getCss:function(b){return{"background-color":c.getBgColor(b.footprint.eventDef)}},filterEl:function(b,e){return c.filterEventRenderEl(b.footprint,e)}})},b.prototype.unrenderBgSegs=function(){this.fillRenderer&&this.fillRenderer.unrender("bgEvent")},b.prototype.renderFgSegEls=function(b,c){var f=this;void 0===c&&(c=!1);var k,m=this.view.hasPublicHandlers("eventRender"),
l="",x=[];if(b.length){for(k=0;k<b.length;k++)this.beforeFgSegHtml(b[k]),l+=this.fgSegHtml(b[k],c);e(l).each(function(c,k){c=b[c];k=e(k);m&&(k=f.filterEventRenderEl(c.footprint,k));k&&(k.data("fc-seg",c),c.el=k,x.push(c))})}return x},b.prototype.beforeFgSegHtml=function(b){},b.prototype.fgSegHtml=function(b,c){},b.prototype.getSegClasses=function(b,c,e){var f=["fc-event",b.isStart?"fc-start":"fc-not-start",b.isEnd?"fc-end":"fc-not-end"].concat(this.getClasses(b.footprint.eventDef));return c&&f.push("fc-draggable"),
e&&f.push("fc-resizable"),this.view.isEventDefSelected(b.footprint.eventDef)&&f.push("fc-selected"),f},b.prototype.filterEventRenderEl=function(b,c){b=b.getEventLegacy();b=this.view.publiclyTrigger("eventRender",{context:b,args:[b,c,this.view]});return!1===b?c=null:b&&!0!==b&&(c=e(b)),c},b.prototype.getTimeText=function(b,c,e){return this._getTimeText(b.eventInstance.dateProfile.start,b.eventInstance.dateProfile.end,b.componentFootprint.isAllDay,c,e)},b.prototype._getTimeText=function(b,c,e,f,l){return null==
f&&(f=this.eventTimeFormat),null==l&&(l=this.displayEventEnd),this.displayEventTime&&!e?l&&c?this.view.formatRange({start:b,end:c},!1,f):b.format(f):""},b.prototype.computeEventTimeFormat=function(){return this.opt("smallTimeFormat")},b.prototype.computeDisplayEventTime=function(){return!0},b.prototype.computeDisplayEventEnd=function(){return!0},b.prototype.getBgClasses=function(b){b=this.getClasses(b);return b.push("fc-bgevent"),b},b.prototype.getClasses=function(b){var c=this.getStylingObjs(b),
e=[];for(b=0;b<c.length;b++)e.push.apply(e,c[b].eventClassName||c[b].className||[]);return e},b.prototype.getSkinCss=function(b){return{"background-color":this.getBgColor(b),"border-color":this.getBorderColor(b),color:this.getTextColor(b)}},b.prototype.getBgColor=function(b){var c=this.getStylingObjs(b);for(b=0;b<c.length&&!e;b++)var e=c[b].eventBackgroundColor||c[b].eventColor||c[b].backgroundColor||c[b].color;return e||(e=this.opt("eventBackgroundColor")||this.opt("eventColor")),e},b.prototype.getBorderColor=
function(b){var c=this.getStylingObjs(b);for(b=0;b<c.length&&!e;b++)var e=c[b].eventBorderColor||c[b].eventColor||c[b].borderColor||c[b].color;return e||(e=this.opt("eventBorderColor")||this.opt("eventColor")),e},b.prototype.getTextColor=function(b){var c=this.getStylingObjs(b);for(b=0;b<c.length&&!e;b++)var e=c[b].eventTextColor||c[b].textColor;return e||(e=this.opt("eventTextColor")),e},b.prototype.getStylingObjs=function(b){var c=this.getFallbackStylingObjs(b);return c.unshift(b),c},b.prototype.getFallbackStylingObjs=
function(b){return[b.source]},b.prototype.sortEventSegs=function(b){b.sort(l.proxy(this,"compareEventSegs"))},b.prototype.compareEventSegs=function(b,c){b=b.footprint;c=c.footprint;var e=b.componentFootprint,f=c.componentFootprint,k=e.unzonedRange,m=f.unzonedRange;return k.startMs-m.startMs||m.endMs-m.startMs-(k.endMs-k.startMs)||f.isAllDay-e.isAllDay||l.compareByFieldSpecs(b.eventDef,c.eventDef,this.view.eventOrderSpecs,b.eventDef.miscProps,c.eventDef.miscProps)},b}();f.default=b},,,,,function(b,
f,c){function e(b){return"en"!==b.locale()?b.clone().locale("en"):b}function l(b,c){c=(H[c]||(H[c]=q(c))).fakeFormatString;return w(y(c,b).join(""))}function q(b){b=k(b);return{fakeFormatString:r(b),sameUnits:n(b)}}function k(b){for(var c,g=[],e=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;c=e.exec(b);)c[1]?g.push.apply(g,m(c[1])):c[2]?g.push({maybe:k(c[2])}):c[3]?g.push({token:c[3]}):c[5]&&g.push.apply(g,m(c[5]));return g}function m(b){return". "===b?["."," "]:[b]}function r(b){var c,
g=[];for(c=0;c<b.length;c++){var e=b[c];"string"==typeof e?g.push("["+e+"]"):e.token?e.token in D?g.push(A+"["+e.token+"]"):g.push(e.token):e.maybe&&g.push(z+r(e.maybe)+z)}return g.join(h)}function n(b){var c,g,e=[];for(c=0;c<b.length;c++){var h=b[c];h.token?(g=F[h.token.charAt(0)],e.push(g?g.unit:"second")):h.maybe?e.push.apply(e,n(h.maybe)):e.push(null)}return e}function y(b,c){var g=[],e=x.oldMomentFormat(c,b).split(h);for(b=0;b<e.length;b++){var f=e[b];f.charAt(0)===A?g.push(D[f.substring(1)](c)):
g.push(f)}return g}function w(b){return b.replace(I,function(b,c){return c.match(/[1-9]/)?c:""})}Object.defineProperty(f,"__esModule",{value:!0});var x=c(11);x.newMomentProto.format=function(){return this._fullCalendar&&arguments[0]?l(this,arguments[0]):this._ambigTime?x.oldMomentFormat(e(this),"YYYY-MM-DD"):this._ambigZone?x.oldMomentFormat(e(this),"YYYY-MM-DD[T]HH:mm:ss"):this._fullCalendar?x.oldMomentFormat(e(this)):x.oldMomentProto.format.apply(this,arguments)};x.newMomentProto.toISOString=function(){return this._ambigTime?
x.oldMomentFormat(e(this),"YYYY-MM-DD"):this._ambigZone?x.oldMomentFormat(e(this),"YYYY-MM-DD[T]HH:mm:ss"):this._fullCalendar?x.oldMomentProto.toISOString.apply(e(this),arguments):x.oldMomentProto.toISOString.apply(this,arguments)};var h="\v",A="\u001f",z="\u001e",I=new RegExp(z+"([^"+z+"]*)"+z,"g"),D={t:function(b){return x.oldMomentFormat(b,"a").charAt(0)},T:function(b){return x.oldMomentFormat(b,"A").charAt(0)}},F={Y:{value:1,unit:"year"},M:{value:2,unit:"month"},W:{value:3,unit:"week"},w:{value:3,
unit:"week"},D:{value:4,unit:"day"},d:{value:4,unit:"day"}};f.formatDate=l;f.formatRange=function(b,c,e,h,f){b=x.default.parseZone(b);c=x.default.parseZone(c);e=b.localeData().longDateFormat(e)||e;var g=H[e]||(H[e]=q(e)),k=b,m=c;h=h||" - ";var n;c=g.sameUnits;b=k.clone().stripZone();e=m.clone().stripZone();k=y(g.fakeFormatString,k);m=y(g.fakeFormatString,m);var u="",l="",r="",A="",t="";for(n=0;n<c.length&&(!c[n]||b.isSame(e,c[n]));n++)u+=k[n];for(g=c.length-1;g>n&&(!c[g]||b.isSame(e,c[g]))&&(g-1!==
n||"."!==k[g]);g--)l=k[g]+l;for(c=n;c<=g;c++)r+=k[c],A+=m[c];return(r||A)&&(t=f?A+h+r:r+h+A),w(u+t+l)};var H={};f.queryMostGranularFormatUnit=function(b){var c,g,e=k(b);for(b=0;b<e.length;b++){var h=e[b];h.token&&(c=F[h.token.charAt(0)])&&(!g||c.value>g.value)&&(g=c)}return g?g.unit:null}},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){return function(b,e,f){this.unzonedRange=b;this.eventDef=e;f&&(this.eventInstance=f)}}();f.default=b},function(b,f,c){Object.defineProperty(f,
"__esModule",{value:!0});var e=c(2),l=c(35);b=c(13);c=c(7);l=function(b){function c(){var c=b.call(this)||this;return c._watchers={},c._props={},c.applyGlobalWatchers(),c.constructed(),c}return e.__extends(c,b),c.watch=function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];this.prototype.hasOwnProperty("_globalWatchArgs")||(this.prototype._globalWatchArgs=Object.create(this.prototype._globalWatchArgs));this.prototype._globalWatchArgs[b]=c},c.prototype.constructed=function(){},c.prototype.applyGlobalWatchers=
function(){var b,c=this._globalWatchArgs;for(b in c)this.watch.apply(this,[b].concat(c[b]))},c.prototype.has=function(b){return b in this._props},c.prototype.get=function(b){return void 0===b?this._props:this._props[b]},c.prototype.set=function(b,c){var e;"string"==typeof b?(e={},e[b]=void 0===c?null:c):e=b;this.setProps(e)},c.prototype.reset=function(b){var c,e=this._props,f={};for(c in e)f[c]=void 0;for(c in b)f[c]=b[c];this.setProps(f)},c.prototype.unset=function(b){var c,e={};b="string"==typeof b?
[b]:b;for(c=0;c<b.length;c++)e[b[c]]=void 0;this.setProps(e)},c.prototype.setProps=function(b){var c,e,f={},k=0;for(c in b)"object"!=typeof(e=b[c])&&e===this._props[c]||(f[c]=e,k++);if(k){this.trigger("before:batchChange",f);for(c in f)e=f[c],this.trigger("before:change",c,e),this.trigger("before:change:"+c,e);for(c in f)e=f[c],void 0===e?delete this._props[c]:this._props[c]=e,this.trigger("change:"+c,e),this.trigger("change",c,e);this.trigger("batchChange",f)}},c.prototype.watch=function(b,c,e,f){var k=
this;this.unwatch(b);this._watchers[b]=this._watchDeps(c,function(c){(c=e.call(k,c))&&c.then?(k.unset(b),c.then(function(c){k.set(b,c)})):k.set(b,c)},function(c){k.unset(b);f&&f.call(k,c)})},c.prototype.unwatch=function(b){var c=this._watchers[b];c&&(delete this._watchers[b],c.teardown())},c.prototype._watchDeps=function(b,c,e){var f=this,k=0,m=b.length,h=0,n={},l=[],r=!1,t=function(b,c){f.on(b,c);l.push([b,c])};return b.forEach(function(b){var f=!1;"?"===b.charAt(0)&&(b=b.substring(1),f=!0);t("before:change:"+
b,function(b){1===++k&&h===m&&(r=!0,e(n),r=!1)});t("change:"+b,function(g){var e=b,l=f;void 0===g?(l||void 0===n[e]||h--,delete n[e]):(l||void 0!==n[e]||h++,n[e]=g);--k||h===m&&(r||c(n))})}),b.forEach(function(b){var c=!1;"?"===b.charAt(0)&&(b=b.substring(1),c=!0);f.has(b)?(n[b]=f.get(b),h++):c&&h++}),h===m&&c(n),{teardown:function(){for(var b=0;b<l.length;b++)f.off(l[b][0],l[b][1]);l=null;h===m&&e()},flash:function(){h===m&&(e(),c(n))}}},c.prototype.flash=function(b){(b=this._watchers[b])&&b.flash()},
c}(l.default);f.default=l;l.prototype._globalWatchArgs={};b.default.mixInto(l);c.default.mixInto(l)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(4);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.defineStandardProps=function(b){var c=this.prototype;c.hasOwnProperty("standardPropMap")||(c.standardPropMap=Object.create(c.standardPropMap));l.copyOwnProps(b,c.standardPropMap)},c.copyVerbatimStandardProps=function(b,
c){var e,f=this.prototype.standardPropMap;for(e in f)null!=b[e]&&!0===f[e]&&(c[e]=b[e])},c.prototype.applyProps=function(b){var c,e=this.standardPropMap,f={},k={};for(c in b)!0===e[c]?this[c]=b[c]:!1===e[c]?f[c]=b[c]:k[c]=b[c];return this.applyMiscProps(k),this.applyManualStandardProps(f)},c.prototype.applyManualStandardProps=function(b){return!0},c.prototype.applyMiscProps=function(b){},c.prototype.isStandardProp=function(b){return b in this.standardPropMap},c}(c(15).default);f.default=b;b.prototype.standardPropMap=
{}},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(b,c){this.def=b;this.dateProfile=c}return b.prototype.toLegacy=function(){var b=this.dateProfile,c=this.def.toLegacy();return c.start=b.start.clone(),c.end=b.end?b.end.clone():null,c},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(0),k=c(37),m=c(53),r=c(16);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,
b),c.prototype.isAllDay=function(){return!this.startTime&&!this.endTime},c.prototype.buildInstances=function(b){var c,e,f,k=this.source.calendar,n=b.getStart();b=b.getEnd();for(var l=[];n.isBefore(b);)this.dowHash&&!this.dowHash[n.day()]||(c=k.applyTimezone(n),e=c.clone(),f=null,this.startTime?e.time(this.startTime):e.stripTime(),this.endTime&&(f=c.clone().time(this.endTime)),l.push(new m.default(this,new r.default(e,f,k)))),n.add(1,"days");return l},c.prototype.setDow=function(b){this.dowHash||(this.dowHash=
{});for(var c=0;c<b.length;c++)this.dowHash[b[c]]=!0},c.prototype.clone=function(){var c=b.prototype.clone.call(this);return c.startTime&&(c.startTime=q.duration(this.startTime)),c.endTime&&(c.endTime=q.duration(this.endTime)),this.dowHash&&(c.dowHash=l.extend({},this.dowHash)),c},c}(k.default);f.default=b;b.prototype.applyProps=function(b){var c=k.default.prototype.applyProps.call(this,b);return b.start&&(this.startTime=q.duration(b.start)),b.end&&(this.endTime=q.duration(b.end)),b.dow&&this.setDow(b.dow),
c};b.defineStandardProps({start:!1,end:!1,dow:!1})},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(0),l=c(4),q=c(5);b=function(){function b(b){this._view=b}return b.prototype.opt=function(b){return this._view.opt(b)},b.prototype.trimHiddenDays=function(b){return this._view.trimHiddenDays(b)},b.prototype.msToUtcMoment=function(b,c){return this._view.calendar.msToUtcMoment(b,c)},b.prototype.buildPrev=function(b){b=b.date.clone().startOf(b.currentRangeUnit).subtract(b.dateIncrement);
return this.build(b,-1)},b.prototype.buildNext=function(b){b=b.date.clone().startOf(b.currentRangeUnit).add(b.dateIncrement);return this.build(b,1)},b.prototype.build=function(b,c,f){void 0===f&&(f=!1);var k,m,n,h,l,r,t=!b.hasTime(),q=null,v=null;return k=this.buildValidRange(),k=this.trimHiddenDays(k),f&&(b=this.msToUtcMoment(k.constrainDate(b),t)),m=this.buildCurrentRangeInfo(b,c),n=/^(year|month|week|day)$/.test(m.unit),h=this.buildRenderRange(this.trimHiddenDays(m.unzonedRange),m.unit,n),h=this.trimHiddenDays(h),
l=h.clone(),this.opt("showNonCurrentDates")||(l=l.intersect(m.unzonedRange)),q=e.duration(this.opt("minTime")),v=e.duration(this.opt("maxTime")),l=this.adjustActiveRange(l,q,v),l=l.intersect(k),l&&(b=this.msToUtcMoment(l.constrainDate(b),t)),r=m.unzonedRange.intersectsWith(k),{validUnzonedRange:k,currentUnzonedRange:m.unzonedRange,currentRangeUnit:m.unit,isRangeAllDay:n,activeUnzonedRange:l,renderUnzonedRange:h,minTime:q,maxTime:v,isValid:r,date:b,dateIncrement:this.buildDateIncrement(m.duration)}},
b.prototype.buildValidRange=function(){return this._view.getUnzonedRangeOption("validRange",this._view.calendar.getNow())||new q.default},b.prototype.buildCurrentRangeInfo=function(b,c){var e,f=this._view.viewSpec,k=null,m=null,h=null;return f.duration?(k=f.duration,m=f.durationUnit,h=this.buildRangeFromDuration(b,c,k,m)):(e=this.opt("dayCount"))?(m="day",h=this.buildRangeFromDayCount(b,c,e)):(h=this.buildCustomVisibleRange(b))?m=l.computeGreatestUnit(h.getStart(),h.getEnd()):(k=this.getFallbackDuration(),
m=l.computeGreatestUnit(k),h=this.buildRangeFromDuration(b,c,k,m)),{duration:k,unit:m,unzonedRange:h}},b.prototype.getFallbackDuration=function(){return e.duration({days:1})},b.prototype.adjustActiveRange=function(b,c,e){var f=b.getStart();b=b.getEnd();return this._view.usesMinMaxTime&&(0>c&&f.time(0).add(c),864E5<e&&b.time(e-864E5)),new q.default(f,b)},b.prototype.buildRangeFromDuration=function(b,c,f,k){function m(){r=b.clone().startOf(v);y=r.clone().add(f);t=new q.default(r,y)}var n,h,r,y,t,v=
this.opt("dateAlignment");return v||(n=this.opt("dateIncrement"),n?(h=e.duration(n),v=h<f?l.computeDurationGreatestUnit(h,n):k):v=k),1>=f.as("days")&&this._view.isHiddenDay(r)&&(r=this._view.skipHiddenDays(r,c),r.startOf("day")),m(),this.trimHiddenDays(t)||(b=this._view.skipHiddenDays(b,c),m()),t},b.prototype.buildRangeFromDayCount=function(b,c,e){var f=this.opt("dateAlignment");var k=0;if(f||-1!==c){b=b.clone();f&&b.startOf(f);b.startOf("day");b=this._view.skipHiddenDays(b);f=b.clone();do f.add(1,
"day"),this._view.isHiddenDay(f)||k++;while(k<e)}else{f=b.clone().startOf("day").add(1,"day");f=this._view.skipHiddenDays(f,-1,!0);b=f.clone();do b.add(-1,"day"),this._view.isHiddenDay(b)||k++;while(k<e)}return new q.default(b,f)},b.prototype.buildCustomVisibleRange=function(b){b=this._view.getUnzonedRangeOption("visibleRange",this._view.calendar.applyTimezone(b));return!b||null!=b.startMs&&null!=b.endMs?b:null},b.prototype.buildRenderRange=function(b,c,e){return b.clone()},b.prototype.buildDateIncrement=
function(b){var c,f=this.opt("dateIncrement");return f?e.duration(f):(c=this.opt("dateAlignment"))?e.duration(1,c):b||e.duration({days:1})},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(4),k=c(21),m=c(6),r=c(9);b=function(b){function c(c){c=b.call(this,c)||this;return c.eventDefs=[],c}return e.__extends(c,b),c.parse=function(b,c){var e;return l.isArray(b.events)?e=b:l.isArray(b)&&(e={events:b}),!!e&&m.default.parse.call(this,e,c)},c.prototype.setRawEventDefs=
function(b){this.rawEventDefs=b;this.eventDefs=this.parseEventDefs(b)},c.prototype.fetch=function(b,c,e){c=this.eventDefs;if(null!=this.currentTimezone&&this.currentTimezone!==e)for(b=0;b<c.length;b++)c[b]instanceof r.default&&c[b].rezone();return this.currentTimezone=e,k.default.resolve(c)},c.prototype.addEventDef=function(b){this.eventDefs.push(b)},c.prototype.removeEventDefsById=function(b){return q.removeMatching(this.eventDefs,function(c){return c.id===b})},c.prototype.removeAllEventDefs=function(){this.eventDefs=
[]},c.prototype.getPrimitive=function(){return this.rawEventDefs},c.prototype.applyManualStandardProps=function(c){var e=b.prototype.applyManualStandardProps.call(this,c);return this.setRawEventDefs(c.events),e},c}(m.default);f.default=b;b.defineStandardProps({events:!1})},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(221),l=c(222),q={};f.defineThemeSystem=function(b,c){q[b]=c};f.getThemeSystemClass=function(b){return b?!0===b?l.default:q[b]:e.default}},function(b,f,c){Object.defineProperty(f,
"__esModule",{value:!0});var e=c(3),l=c(4);b=function(){function b(b){this.isVertical=this.isHorizontal=!1;this.els=e(b.els);this.isHorizontal=b.isHorizontal;this.isVertical=b.isVertical;this.forcedOffsetParentEl=b.offsetParent?e(b.offsetParent):null}return b.prototype.build=function(){var b=this.forcedOffsetParentEl;!b&&0<this.els.length&&(b=this.els.eq(0).offsetParent());this.origin=b?b.offset():null;this.boundingRect=this.queryBoundingRect();this.isHorizontal&&this.buildElHorizontals();this.isVertical&&
this.buildElVerticals()},b.prototype.clear=function(){this.bottoms=this.tops=this.rights=this.lefts=this.boundingRect=this.origin=null},b.prototype.ensureBuilt=function(){this.origin||this.build()},b.prototype.buildElHorizontals=function(){var b=[],c=[];this.els.each(function(f,k){k=e(k);f=k.offset().left;k=k.outerWidth();b.push(f);c.push(f+k)});this.lefts=b;this.rights=c},b.prototype.buildElVerticals=function(){var b=[],c=[];this.els.each(function(f,k){k=e(k);f=k.offset().top;k=k.outerHeight();b.push(f);
c.push(f+k)});this.tops=b;this.bottoms=c},b.prototype.getHorizontalIndex=function(b){this.ensureBuilt();var c,e=this.lefts,f=this.rights,k=e.length;for(c=0;c<k;c++)if(b>=e[c]&&b<f[c])return c},b.prototype.getVerticalIndex=function(b){this.ensureBuilt();var c,e=this.tops,f=this.bottoms,k=e.length;for(c=0;c<k;c++)if(b>=e[c]&&b<f[c])return c},b.prototype.getLeftOffset=function(b){return this.ensureBuilt(),this.lefts[b]},b.prototype.getLeftPosition=function(b){return this.ensureBuilt(),this.lefts[b]-
this.origin.left},b.prototype.getRightOffset=function(b){return this.ensureBuilt(),this.rights[b]},b.prototype.getRightPosition=function(b){return this.ensureBuilt(),this.rights[b]-this.origin.left},b.prototype.getWidth=function(b){return this.ensureBuilt(),this.rights[b]-this.lefts[b]},b.prototype.getTopOffset=function(b){return this.ensureBuilt(),this.tops[b]},b.prototype.getTopPosition=function(b){return this.ensureBuilt(),this.tops[b]-this.origin.top},b.prototype.getBottomOffset=function(b){return this.ensureBuilt(),
this.bottoms[b]},b.prototype.getBottomPosition=function(b){return this.ensureBuilt(),this.bottoms[b]-this.origin.top},b.prototype.getHeight=function(b){return this.ensureBuilt(),this.bottoms[b]-this.tops[b]},b.prototype.queryBoundingRect=function(){var b;return 0<this.els.length&&(b=l.getScrollParent(this.els.eq(0)),!b.is(document)&&!b.is("html,body"))?l.getClientRect(b):null},b.prototype.isPointInBounds=function(b,c){return this.isLeftInBounds(b)&&this.isTopInBounds(c)},b.prototype.isLeftInBounds=
function(b){return!this.boundingRect||b>=this.boundingRect.left&&b<this.boundingRect.right},b.prototype.isTopInBounds=function(b){return!this.boundingRect||b>=this.boundingRect.top&&b<this.boundingRect.bottom},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(4);b=c(7);var q=c(23);c=function(){function b(b){this.isGeneric=this.isTouch=this.isDragging=this.isDelayEnded=this.isDistanceSurpassed=this.isInteracting=!1;this.shouldCancelTouchScroll=!0;this.isAutoScroll=
this.scrollAlwaysKills=!1;this.scrollSensitivity=30;this.scrollSpeed=200;this.scrollIntervalMs=50;this.options=b||{}}return b.prototype.startInteraction=function(b,c){if(void 0===c&&(c={}),"mousedown"===b.type){if(q.default.get().shouldIgnoreMouse()||!l.isPrimaryMouseButton(b))return;b.preventDefault()}this.isInteracting||(this.delay=l.firstDefined(c.delay,this.options.delay,0),this.minDistance=l.firstDefined(c.distance,this.options.distance,0),this.subjectEl=this.options.subjectEl,l.preventSelection(e("body")),
this.isInteracting=!0,this.isTouch=l.getEvIsTouch(b),this.isGeneric="dragstart"===b.type,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.originX=l.getEvX(b),this.originY=l.getEvY(b),this.scrollEl=l.getScrollParent(e(b.target)),this.bindHandlers(),this.initAutoScroll(),this.handleInteractionStart(b),this.startDelay(b),this.minDistance||this.handleDistanceSurpassed(b))},b.prototype.handleInteractionStart=function(b){this.trigger("interactionStart",b)},b.prototype.endInteraction=function(b,c){this.isInteracting&&
(this.endDrag(b),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null),this.destroyAutoScroll(),this.unbindHandlers(),this.isInteracting=!1,this.handleInteractionEnd(b,c),l.allowSelection(e("body")))},b.prototype.handleInteractionEnd=function(b,c){this.trigger("interactionEnd",b,c||!1)},b.prototype.bindHandlers=function(){var b=q.default.get();this.isGeneric?this.listenTo(e(document),{drag:this.handleMove,dragstop:this.endInteraction}):this.isTouch?this.listenTo(b,{touchmove:this.handleTouchMove,
touchend:this.endInteraction,scroll:this.handleTouchScroll}):this.listenTo(b,{mousemove:this.handleMouseMove,mouseup:this.endInteraction});this.listenTo(b,{selectstart:l.preventDefault,contextmenu:l.preventDefault})},b.prototype.unbindHandlers=function(){this.stopListeningTo(q.default.get());this.stopListeningTo(e(document))},b.prototype.startDrag=function(b,c){this.startInteraction(b,c);this.isDragging||(this.isDragging=!0,this.handleDragStart(b))},b.prototype.handleDragStart=function(b){this.trigger("dragStart",
b)},b.prototype.handleMove=function(b){var c=l.getEvX(b)-this.originX,e=l.getEvY(b)-this.originY,f=this.minDistance;this.isDistanceSurpassed||c*c+e*e>=f*f&&this.handleDistanceSurpassed(b);this.isDragging&&this.handleDrag(c,e,b)},b.prototype.handleDrag=function(b,c,e){this.trigger("drag",b,c,e);this.updateAutoScroll(e)},b.prototype.endDrag=function(b){this.isDragging&&(this.isDragging=!1,this.handleDragEnd(b))},b.prototype.handleDragEnd=function(b){this.trigger("dragEnd",b)},b.prototype.startDelay=
function(b){var c=this;this.delay?this.delayTimeoutId=setTimeout(function(){c.handleDelayEnd(b)},this.delay):this.handleDelayEnd(b)},b.prototype.handleDelayEnd=function(b){this.isDelayEnded=!0;this.isDistanceSurpassed&&this.startDrag(b)},b.prototype.handleDistanceSurpassed=function(b){this.isDistanceSurpassed=!0;this.isDelayEnded&&this.startDrag(b)},b.prototype.handleTouchMove=function(b){this.isDragging&&this.shouldCancelTouchScroll&&b.preventDefault();this.handleMove(b)},b.prototype.handleMouseMove=
function(b){this.handleMove(b)},b.prototype.handleTouchScroll=function(b){this.isDragging&&!this.scrollAlwaysKills||this.endInteraction(b,!0)},b.prototype.trigger=function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];this.options[b]&&this.options[b].apply(this,c);this["_"+b]&&this["_"+b].apply(this,c)},b.prototype.initAutoScroll=function(){var b=this.scrollEl;(this.isAutoScroll=this.options.scroll&&b&&!b.is(window)&&!b.is(document))&&this.listenTo(b,"scroll",l.debounce(this.handleDebouncedScroll,
100))},b.prototype.destroyAutoScroll=function(){this.endAutoScroll();this.isAutoScroll&&this.stopListeningTo(this.scrollEl,"scroll")},b.prototype.computeScrollBounds=function(){this.isAutoScroll&&(this.scrollBounds=l.getOuterRect(this.scrollEl))},b.prototype.updateAutoScroll=function(b){var c,e,f,k,m=this.scrollSensitivity,h=this.scrollBounds,A=0,t=0;h&&(c=(m-(l.getEvY(b)-h.top))/m,e=(m-(h.bottom-l.getEvY(b)))/m,f=(m-(l.getEvX(b)-h.left))/m,k=(m-(h.right-l.getEvX(b)))/m,0<=c&&1>=c?A=c*this.scrollSpeed*
-1:0<=e&&1>=e&&(A=e*this.scrollSpeed),0<=f&&1>=f?t=f*this.scrollSpeed*-1:0<=k&&1>=k&&(t=k*this.scrollSpeed));this.setScrollVel(A,t)},b.prototype.setScrollVel=function(b,c){this.scrollTopVel=b;this.scrollLeftVel=c;this.constrainScrollVel();!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(l.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs))},b.prototype.constrainScrollVel=function(){var b=this.scrollEl;0>this.scrollTopVel?0>=b.scrollTop()&&(this.scrollTopVel=
0):0<this.scrollTopVel&&b.scrollTop()+b[0].clientHeight>=b[0].scrollHeight&&(this.scrollTopVel=0);0>this.scrollLeftVel?0>=b.scrollLeft()&&(this.scrollLeftVel=0):0<this.scrollLeftVel&&b.scrollLeft()+b[0].clientWidth>=b[0].scrollWidth&&(this.scrollLeftVel=0)},b.prototype.scrollIntervalFunc=function(){var b=this.scrollEl,c=this.scrollIntervalMs/1E3;this.scrollTopVel&&b.scrollTop(b.scrollTop()+this.scrollTopVel*c);this.scrollLeftVel&&b.scrollLeft(b.scrollLeft()+this.scrollLeftVel*c);this.constrainScrollVel();
this.scrollTopVel||this.scrollLeftVel||this.endAutoScroll()},b.prototype.endAutoScroll=function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.handleScrollEnd())},b.prototype.handleDebouncedScroll=function(){this.scrollIntervalId||this.handleScrollEnd()},b.prototype.handleScrollEnd=function(){},b}();f.default=c;b.default.mixInto(c)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(4);b=function(b){function c(){return null!==
b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.updateDayTable=function(){var b=this.view;var c=b.calendar;var e=c.msToUtcMoment(this.dateProfile.renderUnzonedRange.startMs,!0);var f=c.msToUtcMoment(this.dateProfile.renderUnzonedRange.endMs,!0),k=-1;c=[];for(var l=[];e.isBefore(f);)b.isHiddenDay(e)?c.push(k+.5):(k++,c.push(k),l.push(e.clone())),e.add(1,"days");if(this.breakOnWeeks){e=l[0].day();for(b=1;b<l.length&&l[b].day()!==e;b++);e=Math.ceil(l.length/b)}else e=1,b=l.length;
this.dayDates=l;this.dayIndices=c;this.daysPerRow=b;this.rowCnt=e;this.updateDayTableCols()},c.prototype.updateDayTableCols=function(){this.colCnt=this.computeColCnt();this.colHeadFormat=this.opt("columnHeaderFormat")||this.opt("columnFormat")||this.computeColHeadFormat()},c.prototype.computeColCnt=function(){return this.daysPerRow},c.prototype.getCellDate=function(b,c){return this.dayDates[this.getCellDayIndex(b,c)].clone()},c.prototype.getCellRange=function(b,c){b=this.getCellDate(b,c);return{start:b,
end:b.clone().add(1,"days")}},c.prototype.getCellDayIndex=function(b,c){return b*this.daysPerRow+this.getColDayIndex(c)},c.prototype.getColDayIndex=function(b){return this.isRTL?this.colCnt-1-b:b},c.prototype.getDateDayIndex=function(b){var c=this.dayIndices;b=b.diff(this.dayDates[0],"days");return 0>b?c[0]-1:b>=c.length?c[c.length-1]+1:c[b]},c.prototype.computeColHeadFormat=function(){return 1<this.rowCnt||10<this.colCnt?"ddd":1<this.colCnt?this.opt("dayOfMonthFormat"):"dddd"},c.prototype.sliceRangeByRow=
function(b){var c=this.daysPerRow;var e=this.view.computeDayRange(b);b=this.getDateDayIndex(e.start);var f=this.getDateDayIndex(e.end.clone().subtract(1,"days")),k=[];for(e=0;e<this.rowCnt;e++){var m=e*c;var h=m+c-1;var l=Math.max(b,m);h=Math.min(f,h);l=Math.ceil(l);h=Math.floor(h);l<=h&&k.push({row:e,firstRowDayIndex:l-m,lastRowDayIndex:h-m,isStart:l===b,isEnd:h===f})}return k},c.prototype.sliceRangeByDay=function(b){var c,e=this.daysPerRow;var f=this.view.computeDayRange(b);b=this.getDateDayIndex(f.start);
var k=this.getDateDayIndex(f.end.clone().subtract(1,"days")),m=[];for(f=0;f<this.rowCnt;f++){var h=f*e;var l=h+e-1;for(c=h;c<=l;c++){var t=Math.max(b,c);var q=Math.min(k,c);t=Math.ceil(t);q=Math.floor(q);t<=q&&m.push({row:f,firstRowDayIndex:t-h,lastRowDayIndex:q-h,isStart:t===b,isEnd:q===k})}}return m},c.prototype.renderHeadHtml=function(){var b=this.view.calendar.theme;return'<div class="fc-row '+b.getClass("headerRow")+'"><table class="'+b.getClass("tableGrid")+'"><thead>'+this.renderHeadTrHtml()+
"</thead></table></div>"},c.prototype.renderHeadIntroHtml=function(){return this.renderIntroHtml()},c.prototype.renderHeadTrHtml=function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},c.prototype.renderHeadDateCellsHtml=function(){var b,c=[];for(b=0;b<this.colCnt;b++){var e=this.getCellDate(0,b);c.push(this.renderHeadDateCellHtml(e))}return c.join("")},c.prototype.renderHeadDateCellHtml=function(b,c,e){var f,
k=this.view,m=this.dateProfile.activeUnzonedRange.containsDate(b),h=["fc-day-header",k.calendar.theme.getClass("widgetHeader")];return f="function"==typeof this.opt("columnHeaderHtml")?this.opt("columnHeaderHtml")(b):"function"==typeof this.opt("columnHeaderText")?l.htmlEscape(this.opt("columnHeaderText")(b)):l.htmlEscape(b.format(this.colHeadFormat)),1===this.rowCnt?h=h.concat(this.getDayClasses(b,!0)):h.push("fc-"+l.dayIDs[b.day()]),'<th class="'+h.join(" ")+'"'+(1===(m&&this.rowCnt)?' data-date="'+
b.format("YYYY-MM-DD")+'"':"")+(1<c?' colspan="'+c+'"':"")+(e?" "+e:"")+">"+(m?k.buildGotoAnchorHtml({date:b,forceOff:1<this.rowCnt||1===this.colCnt},f):f)+"</th>"},c.prototype.renderBgTrHtml=function(b){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(b))+this.renderBgCellsHtml(b)+(this.isRTL?this.renderBgIntroHtml(b):"")+"</tr>"},c.prototype.renderBgIntroHtml=function(b){return this.renderIntroHtml()},c.prototype.renderBgCellsHtml=function(b){var c,e=[];for(c=0;c<this.colCnt;c++){var f=this.getCellDate(b,
c);e.push(this.renderBgCellHtml(f))}return e.join("")},c.prototype.renderBgCellHtml=function(b,c){var e=this.view,f=this.dateProfile.activeUnzonedRange.containsDate(b),k=this.getDayClasses(b);return k.unshift("fc-day",e.calendar.theme.getClass("widgetContent")),'<td class="'+k.join(" ")+'"'+(f?' data-date="'+b.format("YYYY-MM-DD")+'"':"")+(c?" "+c:"")+"></td>"},c.prototype.renderIntroHtml=function(){},c.prototype.bookendCells=function(b){var c=this.renderIntroHtml();c&&(this.isRTL?b.append(c):b.prepend(c))},
c}(c(15).default);f.default=b},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(b,c){this.component=b;this.fillRenderer=c}return b.prototype.render=function(b){var c=this.component,e=c._getDateProfile().activeUnzonedRange;c=(b=b.buildEventInstanceGroup(c.hasAllDayBusinessHours,e))?c.eventRangesToEventFootprints(b.sliceRenderRanges(e)):[];this.renderEventFootprints(c)},b.prototype.renderEventFootprints=function(b){b=this.component.eventFootprintsToSegs(b);this.renderSegs(b);
this.segs=b},b.prototype.renderSegs=function(b){this.fillRenderer&&this.fillRenderer.renderSegs("businessHours",b,{getClasses:function(b){return["fc-nonbusiness","fc-bgevent"]}})},b.prototype.unrender=function(){this.fillRenderer&&this.fillRenderer.unrender("businessHours");this.segs=null},b.prototype.getSegs=function(){return this.segs||[]},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(4);b=function(){function b(b){this.fillSegTag="div";this.component=
b;this.elsByFill={}}return b.prototype.renderFootprint=function(b,c,e){this.renderSegs(b,this.component.componentFootprintToSegs(c),e)},b.prototype.renderSegs=function(b,c,e){var f;return c=this.buildSegEls(b,c,e),f=this.attachSegEls(b,c),f&&this.reportEls(b,f),c},b.prototype.unrender=function(b){var c=this.elsByFill[b];c&&(c.remove(),delete this.elsByFill[b])},b.prototype.buildSegEls=function(b,c,f){var k,m=this,l="",r=[];if(c.length){for(k=0;k<c.length;k++)l+=this.buildSegHtml(b,c[k],f);e(l).each(function(b,
k){b=c[b];k=e(k);f.filterEl&&(k=f.filterEl(b,k));k&&(k=e(k),k.is(m.fillSegTag)&&(b.el=k,r.push(b)))})}return r},b.prototype.buildSegHtml=function(b,c,e){b=e.getClasses?e.getClasses(c):[];c=l.cssToStr(e.getCss?e.getCss(c):{});return"<"+this.fillSegTag+(b.length?' class="'+b.join(" ")+'"':"")+(c?' style="'+c+'"':"")+" />"},b.prototype.attachSegEls=function(b,c){},b.prototype.reportEls=function(b,c){this.elsByFill[b]?this.elsByFill[b]=this.elsByFill[b].add(c):this.elsByFill[b]=e(c)},b}();f.default=b},
function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(9),l=c(34),q=c(6);b=function(){function b(b,c){this.view=b._getView();this.component=b;this.eventRenderer=c}return b.prototype.renderComponentFootprint=function(b){this.renderEventFootprints([this.fabricateEventFootprint(b)])},b.prototype.renderEventDraggingFootprints=function(b,c,e){this.renderEventFootprints(b,c,"fc-dragging",e?null:this.view.opt("dragOpacity"))},b.prototype.renderEventResizingFootprints=function(b,c,e){this.renderEventFootprints(b,
c,"fc-resizing")},b.prototype.renderEventFootprints=function(b,c,e,f){b=this.component.eventFootprintsToSegs(b);var k="fc-helper "+(e||"");b=this.eventRenderer.renderFgSegEls(b);for(e=0;e<b.length;e++)b[e].el.addClass(k);if(null!=f)for(e=0;e<b.length;e++)b[e].el.css("opacity",f);this.helperEls=this.renderSegs(b,c)},b.prototype.renderSegs=function(b,c){},b.prototype.unrender=function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},b.prototype.fabricateEventFootprint=function(b){var c,
f=this.view.calendar,k=f.footprintToDateProfile(b);f=new e.default(new q.default(f));return f.dateProfile=k,c=f.buildInstance(),new l.default(b,f,c)},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(23);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.bindToEl=function(b){var c=this.component;c.bindSegHandlerToEl(b,"click",this.handleClick.bind(this));c.bindSegHandlerToEl(b,"mouseenter",this.handleMouseover.bind(this));
c.bindSegHandlerToEl(b,"mouseleave",this.handleMouseout.bind(this))},c.prototype.handleClick=function(b,c){!1===this.component.publiclyTrigger("eventClick",{context:b.el[0],args:[b.footprint.getEventLegacy(),c,this.view]})&&c.preventDefault()},c.prototype.handleMouseover=function(b,c){l.default.get().shouldIgnoreMouse()||this.mousedOverSeg||(this.mousedOverSeg=b,this.view.isEventDefResizable(b.footprint.eventDef)&&b.el.addClass("fc-allow-mouse-resize"),this.component.publiclyTrigger("eventMouseover",
{context:b.el[0],args:[b.footprint.getEventLegacy(),c,this.view]}))},c.prototype.handleMouseout=function(b,c){this.mousedOverSeg&&(this.mousedOverSeg=null,this.view.isEventDefResizable(b.footprint.eventDef)&&b.el.removeClass("fc-allow-mouse-resize"),this.component.publiclyTrigger("eventMouseout",{context:b.el[0],args:[b.footprint.getEventLegacy(),c||{},this.view]}))},c.prototype.end=function(){this.mousedOverSeg&&this.handleMouseout(this.mousedOverSeg)},c}(c(14).default);f.default=b},function(b,f,
c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(15);b=c(237);var q=c(236),k=c(64),m=c(235),r=c(234);c=c(233);l=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c}(l.default);f.default=l;l.prototype.dateClickingClass=b.default;l.prototype.dateSelectingClass=q.default;l.prototype.eventPointingClass=k.default;l.prototype.eventDraggingClass=m.default;l.prototype.eventResizingClass=r.default;l.prototype.externalDroppingClass=c.default},
function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(4),k=c(58),m=c(227),r=c(5),n=c(12),y=c(34);b=c(61);var w=c(65),x=c(42),h=c(60),A=c(243),z=c(244);c=c(245);x=function(b){function c(c){c=b.call(this,c)||this;return c.cellWeekNumbersVisible=!1,c.bottomCoordPadding=0,c.isRigid=!1,c.hasAllDayBusinessHours=!0,c}return e.__extends(c,b),c.prototype.componentFootprintToSegs=function(b){var c=this.sliceRangeByRow(b.unzonedRange);for(b=0;b<c.length;b++){var g=c[b];this.isRTL?
(g.leftCol=this.daysPerRow-1-g.lastRowDayIndex,g.rightCol=this.daysPerRow-1-g.firstRowDayIndex):(g.leftCol=g.firstRowDayIndex,g.rightCol=g.lastRowDayIndex)}return c},c.prototype.renderDates=function(b){this.dateProfile=b;this.updateDayTable();this.renderGrid()},c.prototype.unrenderDates=function(){this.removeSegPopover()},c.prototype.renderGrid=function(){var b,c=this.view,g=this.rowCnt,e=this.colCnt;var h="";this.headContainerEl&&this.headContainerEl.html(this.renderHeadHtml());for(b=0;b<g;b++)h+=
this.renderDayRowHtml(b,this.isRigid);this.el.html(h);this.rowEls=this.el.find(".fc-row");this.cellEls=this.el.find(".fc-day, .fc-disabled-day");this.rowCoordCache=new k.default({els:this.rowEls,isVertical:!0});this.colCoordCache=new k.default({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0});for(b=0;b<g;b++)for(h=0;h<e;h++)this.publiclyTrigger("dayRender",{context:c,args:[this.getCellDate(b,h),this.getCellEl(b,h),c]})},c.prototype.renderDayRowHtml=function(b,c){var g=this.view.calendar.theme,
e=["fc-row","fc-week",g.getClass("dayRow")];return c&&e.push("fc-rigid"),'<div class="'+e.join(" ")+'"><div class="fc-bg"><table class="'+g.getClass("tableGrid")+'">'+this.renderBgTrHtml(b)+'</table></div><div class="fc-content-skeleton"><table>'+(this.getIsNumbersVisible()?"<thead>"+this.renderNumberTrHtml(b)+"</thead>":"")+"</table></div></div>"},c.prototype.getIsNumbersVisible=function(){return this.getIsDayNumbersVisible()||this.cellWeekNumbersVisible},c.prototype.getIsDayNumbersVisible=function(){return 1<
this.rowCnt},c.prototype.renderNumberTrHtml=function(b){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(b))+this.renderNumberCellsHtml(b)+(this.isRTL?this.renderNumberIntroHtml(b):"")+"</tr>"},c.prototype.renderNumberIntroHtml=function(b){return this.renderIntroHtml()},c.prototype.renderNumberCellsHtml=function(b){var c,g=[];for(c=0;c<this.colCnt;c++){var e=this.getCellDate(b,c);g.push(this.renderNumberCellHtml(e))}return g.join("")},c.prototype.renderNumberCellHtml=function(b){var c,g,e=this.view,
h="",f=this.dateProfile.activeUnzonedRange.containsDate(b),k=this.getIsDayNumbersVisible()&&f;return k||this.cellWeekNumbersVisible?(c=this.getDayClasses(b),c.unshift("fc-day-top"),this.cellWeekNumbersVisible&&(g="ISO"===b._locale._fullCalendar_weekCalc?1:b._locale.firstDayOfWeek()),h+='<td class="'+c.join(" ")+'"'+(f?' data-date="'+b.format()+'"':"")+">",this.cellWeekNumbersVisible&&b.day()===g&&(h+=e.buildGotoAnchorHtml({date:b,type:"week"},{class:"fc-week-number"},b.format("w"))),k&&(h+=e.buildGotoAnchorHtml(b,
{class:"fc-day-number"},b.format("D"))),h+"</td>"):"<td/>"},c.prototype.prepareHits=function(){this.colCoordCache.build();this.rowCoordCache.build();this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},c.prototype.releaseHits=function(){this.colCoordCache.clear();this.rowCoordCache.clear()},c.prototype.queryHit=function(b,c){if(this.colCoordCache.isLeftInBounds(b)&&this.rowCoordCache.isTopInBounds(c)&&(b=this.colCoordCache.getHorizontalIndex(b),c=this.rowCoordCache.getVerticalIndex(c),
null!=c&&null!=b))return this.getCellHit(c,b)},c.prototype.getHitFootprint=function(b){b=this.getCellRange(b.row,b.col);return new n.default(new r.default(b.start,b.end),!0)},c.prototype.getHitEl=function(b){return this.getCellEl(b.row,b.col)},c.prototype.getCellHit=function(b,c){return{row:b,col:c,component:this,left:this.colCoordCache.getLeftOffset(c),right:this.colCoordCache.getRightOffset(c),top:this.rowCoordCache.getTopOffset(b),bottom:this.rowCoordCache.getBottomOffset(b)}},c.prototype.getCellEl=
function(b,c){return this.cellEls.eq(b*this.colCnt+c)},c.prototype.executeEventUnrender=function(){this.removeSegPopover();b.prototype.executeEventUnrender.call(this)},c.prototype.getOwnEventSegs=function(){return b.prototype.getOwnEventSegs.call(this).concat(this.popoverSegs||[])},c.prototype.renderDrag=function(b,c,g){var e;for(e=0;e<b.length;e++)this.renderHighlight(b[e].componentFootprint);if(b.length&&c&&c.component!==this)return this.helperRenderer.renderEventDraggingFootprints(b,c,g),!0},c.prototype.unrenderDrag=
function(){this.unrenderHighlight();this.helperRenderer.unrender()},c.prototype.renderEventResize=function(b,c,g){var e;for(e=0;e<b.length;e++)this.renderHighlight(b[e].componentFootprint);this.helperRenderer.renderEventResizingFootprints(b,c,g)},c.prototype.unrenderEventResize=function(){this.unrenderHighlight();this.helperRenderer.unrender()},c.prototype.removeSegPopover=function(){this.segPopover&&this.segPopover.hide()},c.prototype.limitRows=function(b){var c,g,e=this.eventRenderer.rowStructs||
[];for(c=0;c<e.length;c++)this.unlimitRow(c),!1!==(g=!!b&&("number"==typeof b?b:this.computeRowLevelLimit(c)))&&this.limitRow(c,g)},c.prototype.computeRowLevelLimit=function(b){function c(b,c){e=Math.max(e,l(c).outerHeight())}var g,e,h=this.rowEls.eq(b).height(),f=this.eventRenderer.rowStructs[b].tbodyEl.children();for(b=0;b<f.length;b++)if(g=f.eq(b).removeClass("fc-limited"),e=0,g.find("> td > :first-child").each(c),g.position().top+e>h)return b;return!1},c.prototype.limitRow=function(b,c){var g,
e,h,f=this,k=this.eventRenderer.rowStructs[b],m=[],n=0,w=function(g){for(;n<g;)q=f.getCellSegs(b,n,c),q.length&&(z=x[c-1][n],I=f.renderMoreLink(b,n,q),D=l("<div/>").append(I),z.append(D),m.push(D[0])),n++};if(c&&c<k.segLevels.length){var r=k.segLevels[c-1];var x=k.cellMatrix;var y=k.tbodyEl.children().slice(c).addClass("fc-limited").get();for(g=0;g<r.length;g++){var A=r[g];w(A.leftCol);var t=[];for(e=0;n<=A.rightCol;){var q=this.getCellSegs(b,n,c);t.push(q);e+=q.length;n++}if(e){var z=x[c-1][A.leftCol];
e=z.attr("rowspan")||1;var v=[];for(h=0;h<t.length;h++){var F=l('<td class="fc-more-cell"/>').attr("rowspan",e);q=t[h];var I=this.renderMoreLink(b,A.leftCol+h,[A].concat(q));var D=l("<div/>").append(I);F.append(D);v.push(F[0]);m.push(F[0])}z.addClass("fc-limited").after(l(v));y.push(z[0])}}w(this.colCnt);k.moreEls=l(m);k.limitedEls=l(y)}},c.prototype.unlimitRow=function(b){b=this.eventRenderer.rowStructs[b];b.moreEls&&(b.moreEls.remove(),b.moreEls=null);b.limitedEls&&(b.limitedEls.removeClass("fc-limited"),
b.limitedEls=null)},c.prototype.renderMoreLink=function(b,c,g){var e=this,h=this.view;return l('<a class="fc-more"/>').text(this.getMoreLinkText(g.length)).on("click",function(f){var k=e.opt("eventLimitClick"),m=e.getCellDate(b,c),n=l(f.currentTarget),u=e.getCellEl(b,c),w=e.getCellSegs(b,c);w=e.resliceDaySegs(w,m);var r=e.resliceDaySegs(g,m);"function"==typeof k&&(k=e.publiclyTrigger("eventLimitClick",{context:h,args:[{date:m.clone(),dayEl:u,moreEl:n,segs:w,hiddenSegs:r},f,h]}));"popover"===k?e.showSegPopover(b,
c,n,w):"string"==typeof k&&h.calendar.zoomTo(m,k)})},c.prototype.showSegPopover=function(b,c,g,e){var h=this,f=this.view;g=g.parent();var k=1===this.rowCnt?f.el:this.rowEls.eq(b);b={className:"fc-more-popover "+f.calendar.theme.getClass("popover"),content:this.renderSegPopoverContent(b,c,e),parentEl:f.el,top:k.offset().top,autoHide:!0,viewportConstrain:this.opt("popoverViewportConstrain"),hide:function(){h.popoverSegs&&h.triggerBeforeEventSegsDestroyed(h.popoverSegs);h.segPopover.removeElement();
h.segPopover=null;h.popoverSegs=null}};this.isRTL?b.right=g.offset().left+g.outerWidth()+1:b.left=g.offset().left-1;this.segPopover=new m.default(b);this.segPopover.show();this.bindAllSegHandlersToEl(this.segPopover.el);this.triggerAfterEventSegsRendered(e)},c.prototype.renderSegPopoverContent=function(b,c,g){var e=this.view.calendar.theme;var h=this.getCellDate(b,c).format(this.opt("dayPopoverFormat"));h=l('<div class="fc-header '+e.getClass("popoverHeader")+'"><span class="fc-close '+e.getIconClass("close")+
'"></span><span class="fc-title">'+q.htmlEscape(h)+'</span><div class="fc-clear"/></div><div class="fc-body '+e.getClass("popoverContent")+'"><div class="fc-event-container"></div></div>');var f=h.find(".fc-event-container");this.popoverSegs=g=this.eventRenderer.renderFgSegEls(g,!0);for(e=0;e<g.length;e++)this.hitsNeeded(),g[e].hit=this.getCellHit(b,c),this.hitsNotNeeded(),f.append(g[e].el);return h},c.prototype.resliceDaySegs=function(b,c){var g;c=c.clone();var e=c.clone().add(1,"days");var h=new r.default(c,
e),f=[];for(c=0;c<b.length;c++)e=b[c],(g=e.footprint.componentFootprint.unzonedRange.intersect(h))&&f.push(l.extend({},e,{footprint:new y.default(new n.default(g,e.footprint.componentFootprint.isAllDay),e.footprint.eventDef,e.footprint.eventInstance),isStart:e.isStart&&g.isStart,isEnd:e.isEnd&&g.isEnd}));return this.eventRenderer.sortEventSegs(f),f},c.prototype.getMoreLinkText=function(b){var c=this.opt("eventLimitText");return"function"==typeof c?c(b):"+"+b+" "+c},c.prototype.getCellSegs=function(b,
c,g){b=this.eventRenderer.rowStructs[b].segMatrix;for(var e=g||0,h=[];e<b.length;)(g=b[e][c])&&h.push(g),e++;return h},c}(x.default);f.default=x;x.prototype.eventRendererClass=A.default;x.prototype.businessHourRendererClass=b.default;x.prototype.helperRendererClass=z.default;x.prototype.fillRendererClass=c.default;w.default.mixInto(x);h.default.mixInto(x)},function(b,f,c){function e(b){return function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;return c.colWeekNumbersVisible=!1,
c}return l.__extends(c,b),c.prototype.renderHeadIntroHtml=function(){var b=this.view;return this.colWeekNumbersVisible?'<th class="fc-week-number '+b.calendar.theme.getClass("widgetHeader")+'" '+b.weekNumberStyleAttr()+"><span>"+k.htmlEscape(this.opt("weekNumberTitle"))+"</span></th>":""},c.prototype.renderNumberIntroHtml=function(b){var c=this.view;b=this.getCellDate(b,0);return this.colWeekNumbersVisible?'<td class="fc-week-number" '+c.weekNumberStyleAttr()+">"+c.buildGotoAnchorHtml({date:b,type:"week",
forceOff:1===this.colCnt},b.format("w"))+"</td>":""},c.prototype.renderBgIntroHtml=function(){var b=this.view;return this.colWeekNumbersVisible?'<td class="fc-week-number '+b.calendar.theme.getClass("widgetContent")+'" '+b.weekNumberStyleAttr()+"></td>":""},c.prototype.renderIntroHtml=function(){var b=this.view;return this.colWeekNumbersVisible?'<td class="fc-week-number" '+b.weekNumberStyleAttr()+"></td>":""},c.prototype.getIsNumbersVisible=function(){return n.default.prototype.getIsNumbersVisible.apply(this,
arguments)||this.colWeekNumbersVisible},c}(b)}Object.defineProperty(f,"__esModule",{value:!0});var l=c(2),q=c(3),k=c(4),m=c(41),r=c(43);b=c(68);var n=c(66);c=function(b){function c(c,e){c=b.call(this,c,e)||this;return c.dayGrid=c.instantiateDayGrid(),c.dayGrid.isRigid=c.hasRigidRows(),c.opt("weekNumbers")&&(c.opt("weekNumbersWithinDays")?(c.dayGrid.cellWeekNumbersVisible=!0,c.dayGrid.colWeekNumbersVisible=!1):(c.dayGrid.cellWeekNumbersVisible=!1,c.dayGrid.colWeekNumbersVisible=!0)),c.addChild(c.dayGrid),
c.scroller=new m.default({overflowX:"hidden",overflowY:"auto"}),c}return l.__extends(c,b),c.prototype.instantiateDayGrid=function(){return new (e(this.dayGridClass))(this)},c.prototype.executeDateRender=function(c){this.dayGrid.breakOnWeeks=/year|month|week/.test(c.currentRangeUnit);b.prototype.executeDateRender.call(this,c)},c.prototype.renderSkeleton=function(){this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml());this.scroller.render();var b=this.scroller.el.addClass("fc-day-grid-container");
var c=q('<div class="fc-day-grid" />').appendTo(b);this.el.find(".fc-body > tr > td").append(b);this.dayGrid.headContainerEl=this.el.find(".fc-head-container");this.dayGrid.setElement(c)},c.prototype.unrenderSkeleton=function(){this.dayGrid.removeElement();this.scroller.destroy()},c.prototype.renderSkeletonHtml=function(){var b=this.calendar.theme;return'<table class="'+b.getClass("tableGrid")+'">'+(this.opt("columnHeader")?'<thead class="fc-head"><tr><td class="fc-head-container '+b.getClass("widgetHeader")+
'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+b.getClass("widgetContent")+'"></td></tr></tbody></table>'},c.prototype.weekNumberStyleAttr=function(){return null!=this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},c.prototype.hasRigidRows=function(){var b=this.opt("eventLimit");return b&&"number"!=typeof b},c.prototype.updateSize=function(c,e,f){var h,m,l=this.opt("eventLimit"),n=this.dayGrid.headContainerEl.find(".fc-row");if(!this.dayGrid.rowEls)return void(e||
(h=this.computeScrollerHeight(c),this.scroller.setHeight(h)));b.prototype.updateSize.call(this,c,e,f);this.dayGrid.colWeekNumbersVisible&&(this.weekNumberWidth=k.matchCellWidths(this.el.find(".fc-week-number")));this.scroller.clear();k.uncompensateScroll(n);this.dayGrid.removeSegPopover();l&&"number"==typeof l&&this.dayGrid.limitRows(l);h=this.computeScrollerHeight(c);this.setGridHeight(h,e);l&&"number"!=typeof l&&this.dayGrid.limitRows(l);e||(this.scroller.setHeight(h),m=this.scroller.getScrollbarWidths(),
(m.left||m.right)&&(k.compensateScroll(n,m),h=this.computeScrollerHeight(c),this.scroller.setHeight(h)),this.scroller.lockOverflow(m))},c.prototype.computeScrollerHeight=function(b){return b-k.subtractInnerElHeight(this.el,this.scroller.el)},c.prototype.setGridHeight=function(b,c){c?k.undistributeHeight(this.dayGrid.rowEls):k.distributeHeight(this.dayGrid.rowEls,b,!0)},c.prototype.computeInitialDateScroll=function(){return{top:0}},c.prototype.queryDateScroll=function(){return{top:this.scroller.getScrollTop()}},
c.prototype.applyDateScroll=function(b){void 0!==b.top&&this.scroller.setScrollTop(b.top)},c}(r.default);f.default=c;c.prototype.dateProfileGeneratorClass=b.default;c.prototype.dayGridClass=n.default},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(5);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.buildRenderRange=function(c,e,f){var k=b.prototype.buildRenderRange.call(this,c,e,f);c=this.msToUtcMoment(k.startMs,
f);f=this.msToUtcMoment(k.endMs,f);return/^(year|month)$/.test(e)&&(c.startOf("week"),f.weekday()&&f.add(1,"week").startOf("week")),new l.default(c,f)},c}(c(55).default);f.default=b},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(5),l=c(12),q=c(36),k=c(6),m=c(19);b=function(){function b(b,c){this.eventManager=b;this._calendar=
c}return b.prototype.opt=function(b){return this._calendar.opt(b)},b.prototype.isEventInstanceGroupAllowed=function(b){var c=b.getEventDef();b=this.eventRangesToEventFootprints(b.getAllEventRanges());var e=this.getPeerEventInstances(c).map(m.eventInstanceToEventRange);e=this.eventRangesToEventFootprints(e);var f=c.getConstraint(),h=c.getOverlap(),k=this.opt("eventAllow");for(c=0;c<b.length;c++)if(!this.isFootprintAllowed(b[c].componentFootprint,e,f,h,b[c].eventInstance))return!1;if(k)for(c=0;c<b.length;c++)if(!1===
k(b[c].componentFootprint.toLegacy(this._calendar),b[c].getEventLegacy()))return!1;return!0},b.prototype.getPeerEventInstances=function(b){return this.eventManager.getEventInstancesWithoutId(b.id)},b.prototype.isSelectionFootprintAllowed=function(b){var c,e=this.eventManager.getEventInstances().map(m.eventInstanceToEventRange);e=this.eventRangesToEventFootprints(e);return!!this.isFootprintAllowed(b,e,this.opt("selectConstraint"),this.opt("selectOverlap"))&&(!(c=this.opt("selectAllow"))||!1!==c(b.toLegacy(this._calendar)))},
b.prototype.isFootprintAllowed=function(b,c,e,f,h){var k;if(null!=e&&(k=this.constraintValToFootprints(e,b.isAllDay),!this.isFootprintWithinConstraints(b,k)))return!1;if(b=this.collectOverlapEventFootprints(c,b),!1===f){if(b.length)return!1}else{if(c="function"==typeof f){a:{for(c=0;c<b.length;c++)if(!f(b[c].eventInstance.toLegacy(),h?h.toLegacy():null)){f=!1;break a}f=!0}c=!f}if(c)return!1}if(f=h){var m;a:{var l;c=h.toLegacy();for(h=0;h<b.length;h++){if(m=b[h].eventInstance,l=m.def,!1===(f=l.getOverlap())){m=
!1;break a}if("function"==typeof f&&!f(m.toLegacy(),c)){m=!1;break a}}m=!0}f=!m}return!f},b.prototype.isFootprintWithinConstraints=function(b,c){var e;for(e=0;e<c.length;e++)if(this.footprintContainsFootprint(c[e],b))return!0;return!1},b.prototype.constraintValToFootprints=function(b,c){var e;return"businessHours"===b?this.buildCurrentBusinessFootprints(c):"object"==typeof b?(e=this.parseEventDefToInstances(b),e?this.eventInstancesToFootprints(e):this.parseFootprints(b)):null!=b?(e=this.eventManager.getEventInstancesWithId(b),
this.eventInstancesToFootprints(e)):void 0},b.prototype.buildCurrentBusinessFootprints=function(b){var c=this._calendar.view;return(b=c.get("businessHourGenerator").buildEventInstanceGroup(b,c.dateProfile.activeUnzonedRange))?this.eventInstancesToFootprints(b.eventInstances):[]},b.prototype.eventInstancesToFootprints=function(b){b=b.map(m.eventInstanceToEventRange);return this.eventRangesToEventFootprints(b).map(m.eventFootprintToComponentFootprint)},b.prototype.collectOverlapEventFootprints=function(b,
c){var e,f=[];for(e=0;e<b.length;e++)this.footprintsIntersect(c,b[e].componentFootprint)&&f.push(b[e]);return f},b.prototype.parseEventDefToInstances=function(b){var c=this.eventManager;b=q.default.parse(b,new k.default(this._calendar));return!!b&&b.buildInstances(c.currentPeriod.unzonedRange)},b.prototype.eventRangesToEventFootprints=function(b){var c,e=[];for(c=0;c<b.length;c++)e.push.apply(e,this.eventRangeToEventFootprints(b[c]));return e},b.prototype.eventRangeToEventFootprints=function(b){return[m.eventRangeToEventFootprint(b)]},
b.prototype.parseFootprints=function(b){var c,f;return b.start&&(c=this._calendar.moment(b.start),c.isValid()||(c=null)),b.end&&(f=this._calendar.moment(b.end),f.isValid()||(f=null)),[new l.default(new e.default(c,f),c&&!c.hasTime()||f&&!f.hasTime())]},b.prototype.footprintContainsFootprint=function(b,c){return b.unzonedRange.containsRange(c.unzonedRange)},b.prototype.footprintsIntersect=function(b,c){return b.unzonedRange.intersectsWith(c.unzonedRange)},b}();f.default=b},function(b,f,c){Object.defineProperty(f,
"__esModule",{value:!0});var e=c(3),l=c(19),q=c(20),k=c(54),m=c(6),r={start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};b=function(){function b(b,c){this.rawComplexDef=b;this.calendar=c}return b.prototype.buildEventInstanceGroup=function(b,c){var e;b=this.buildEventDefs(b);if(b.length)return e=new q.default(l.eventDefsToEventInstances(b,c)),e.explicitEventDef=b[0],e},b.prototype.buildEventDefs=function(b){var c=this.rawComplexDef;var f=[],h=!1,k=[];!0===c?f=[{}]:e.isPlainObject(c)?
f=[c]:e.isArray(c)&&(f=c,h=!0);for(c=0;c<f.length;c++)h&&!f[c].dow||k.push(this.buildEventDef(b,f[c]));return k},b.prototype.buildEventDef=function(b,c){c=e.extend({},r,c);return b&&(c.start=null,c.end=null),k.default.parse(c,new m.default(this.calendar))},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(4),q=c(21);b=c(13);var k=c(5),m=c(20);c=function(){function b(b,c,e){this.releaseCnt=this.stuntedReleaseCnt=this.freezeDepth=this.pendingCnt=0;this.start=
b;this.end=c;this.timezone=e;this.unzonedRange=new k.default(b.clone().stripZone(),c.clone().stripZone());this.requestsByUid={};this.eventDefsByUid={};this.eventDefsById={};this.eventInstanceGroupsById={}}return b.prototype.isWithinRange=function(b,c){return!b.isBefore(this.start)&&!c.isAfter(this.end)},b.prototype.requestSources=function(b){this.freeze();for(var c=0;c<b.length;c++)this.requestSource(b[c]);this.thaw()},b.prototype.requestSource=function(b){var c=this,e={source:b,status:"pending",
eventDefs:null};this.requestsByUid[b.uid]=e;this.pendingCnt+=1;b.fetch(this.start,this.end,this.timezone).then(function(b){"cancelled"!==e.status&&(e.status="completed",e.eventDefs=b,c.addEventDefs(b),c.pendingCnt--,c.tryRelease())},function(){"cancelled"!==e.status&&(e.status="failed",c.pendingCnt--,c.tryRelease())})},b.prototype.purgeSource=function(b){var c=this.requestsByUid[b.uid];c&&(delete this.requestsByUid[b.uid],"pending"===c.status?(c.status="cancelled",this.pendingCnt--,this.tryRelease()):
"completed"===c.status&&c.eventDefs.forEach(this.removeEventDef.bind(this)))},b.prototype.purgeAllSources=function(){var b,c=this.requestsByUid,e=0;for(b in c){var f=c[b];"pending"===f.status?f.status="cancelled":"completed"===f.status&&e++}this.requestsByUid={};this.pendingCnt=0;e&&this.removeAllEventDefs()},b.prototype.getEventDefByUid=function(b){return this.eventDefsByUid[b]},b.prototype.getEventDefsById=function(b){return(b=this.eventDefsById[b])?b.slice():[]},b.prototype.addEventDefs=function(b){for(var c=
0;c<b.length;c++)this.addEventDef(b[c])},b.prototype.addEventDef=function(b){var c=this.eventDefsById,e=b.id,f=c[e]||(c[e]=[]);c=b.buildInstances(this.unzonedRange);f.push(b);this.eventDefsByUid[b.uid]=b;for(b=0;b<c.length;b++)this.addEventInstance(c[b],e)},b.prototype.removeEventDefsById=function(b){var c=this;this.getEventDefsById(b).forEach(function(b){c.removeEventDef(b)})},b.prototype.removeAllEventDefs=function(){var b=e.isEmptyObject(this.eventDefsByUid);this.eventDefsByUid={};this.eventDefsById=
{};this.eventInstanceGroupsById={};b||this.tryRelease()},b.prototype.removeEventDef=function(b){var c=this.eventDefsById,e=c[b.id];delete this.eventDefsByUid[b.uid];e&&(l.removeExact(e,b),e.length||delete c[b.id],this.removeEventInstancesForDef(b))},b.prototype.getEventInstances=function(){var b,c=this.eventInstanceGroupsById,e=[];for(b in c)e.push.apply(e,c[b].eventInstances);return e},b.prototype.getEventInstancesWithId=function(b){return(b=this.eventInstanceGroupsById[b])?b.eventInstances.slice():
[]},b.prototype.getEventInstancesWithoutId=function(b){var c,e=this.eventInstanceGroupsById,f=[];for(c in e)c!==b&&f.push.apply(f,e[c].eventInstances);return f},b.prototype.addEventInstance=function(b,c){var e=this.eventInstanceGroupsById;(e[c]||(e[c]=new m.default)).eventInstances.push(b);this.tryRelease()},b.prototype.removeEventInstancesForDef=function(b){var c,e=this.eventInstanceGroupsById,f=e[b.id];f&&(c=l.removeMatching(f.eventInstances,function(c){return c.def===b}),f.eventInstances.length||
delete e[b.id],c&&this.tryRelease())},b.prototype.tryRelease=function(){this.pendingCnt||(this.freezeDepth?this.stuntedReleaseCnt++:this.release())},b.prototype.release=function(){this.releaseCnt++;this.trigger("release",this.eventInstanceGroupsById)},b.prototype.whenReleased=function(){var b=this;return this.releaseCnt?q.default.resolve(this.eventInstanceGroupsById):q.default.construct(function(c){b.one("release",c)})},b.prototype.freeze=function(){this.freezeDepth++||(this.stuntedReleaseCnt=0)},
b.prototype.thaw=function(){--this.freezeDepth||!this.stuntedReleaseCnt||this.pendingCnt||this.release()},b}();f.default=c;b.default.mixInto(c)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(4),q=c(219),k=c(56),m=c(6),r=c(38),n=c(9),y=c(20);b=c(13);c=c(7);var w=function(){function b(b){this.calendar=b;this.stickySource=new k.default(b);this.otherSources=[]}return b.prototype.requestEvents=function(b,c,e,f){return!f&&this.currentPeriod&&this.currentPeriod.isWithinRange(b,
c)&&e===this.currentPeriod.timezone||this.setPeriod(new q.default(b,c,e)),this.currentPeriod.whenReleased()},b.prototype.addSource=function(b){this.otherSources.push(b);this.currentPeriod&&this.currentPeriod.requestSource(b)},b.prototype.removeSource=function(b){l.removeExact(this.otherSources,b);this.currentPeriod&&this.currentPeriod.purgeSource(b)},b.prototype.removeAllSources=function(){this.otherSources=[];this.currentPeriod&&this.currentPeriod.purgeAllSources()},b.prototype.refetchSource=function(b){var c=
this.currentPeriod;c&&(c.freeze(),c.purgeSource(b),c.requestSource(b),c.thaw())},b.prototype.refetchAllSources=function(){var b=this.currentPeriod;b&&(b.freeze(),b.purgeAllSources(),b.requestSources(this.getSources()),b.thaw())},b.prototype.getSources=function(){return[this.stickySource].concat(this.otherSources)},b.prototype.multiQuerySources=function(b){b?e.isArray(b)||(b=[b]):b=[];var c,f=[];for(c=0;c<b.length;c++)f.push.apply(f,this.querySources(b[c]));return f},b.prototype.querySources=function(b){var c,
f,h=this.otherSources;for(c=0;c<h.length;c++)if((f=h[c])===b)return[f];return(f=this.getSourceById(m.default.normalizeId(b)))?[f]:(b=r.default.parse(b,this.calendar),b?e.grep(h,function(c){return b.getPrimitive()===c.getPrimitive()}):void 0)},b.prototype.getSourceById=function(b){return e.grep(this.otherSources,function(c){return c.id&&c.id===b})[0]},b.prototype.setPeriod=function(b){this.currentPeriod&&(this.unbindPeriod(this.currentPeriod),this.currentPeriod=null);this.currentPeriod=b;this.bindPeriod(b);
b.requestSources(this.getSources())},b.prototype.bindPeriod=function(b){this.listenTo(b,"release",function(b){this.trigger("release",b)})},b.prototype.unbindPeriod=function(b){this.stopListeningTo(b)},b.prototype.getEventDefByUid=function(b){if(this.currentPeriod)return this.currentPeriod.getEventDefByUid(b)},b.prototype.addEventDef=function(b,c){c&&this.stickySource.addEventDef(b);this.currentPeriod&&this.currentPeriod.addEventDef(b)},b.prototype.removeEventDefsById=function(b){this.getSources().forEach(function(c){c.removeEventDefsById(b)});
this.currentPeriod&&this.currentPeriod.removeEventDefsById(b)},b.prototype.removeAllEventDefs=function(){this.getSources().forEach(function(b){b.removeAllEventDefs()});this.currentPeriod&&this.currentPeriod.removeAllEventDefs()},b.prototype.mutateEventsWithId=function(b,c){var e,f=this.currentPeriod,h=[];return f?(f.freeze(),e=f.getEventDefsById(b),e.forEach(function(b){f.removeEventDef(b);h.push(c.mutateSingle(b));f.addEventDef(b)}),f.thaw(),function(){f.freeze();for(var b=0;b<e.length;b++)f.removeEventDef(e[b]),
h[b](),f.addEventDef(e[b]);f.thaw()}):function(){}},b.prototype.buildMutatedEventInstanceGroup=function(b,c){var e,f=this.getEventDefsById(b),h=[];for(b=0;b<f.length;b++)(e=f[b].clone())instanceof n.default&&(c.mutateSingle(e),h.push.apply(h,e.buildInstances()));return new y.default(h)},b.prototype.freeze=function(){this.currentPeriod&&this.currentPeriod.freeze()},b.prototype.thaw=function(){this.currentPeriod&&this.currentPeriod.thaw()},b.prototype.getEventDefsById=function(b){return this.currentPeriod.getEventDefsById(b)},
b.prototype.getEventInstances=function(){return this.currentPeriod.getEventInstances()},b.prototype.getEventInstancesWithId=function(b){return this.currentPeriod.getEventInstancesWithId(b)},b.prototype.getEventInstancesWithoutId=function(b){return this.currentPeriod.getEventInstancesWithoutId(b)},b}();f.default=w;b.default.mixInto(w);c.default.mixInto(w)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||
this}return e.__extends(c,b),c}(c(22).default);f.default=b;b.prototype.classes={widget:"fc-unthemed",widgetHeader:"fc-widget-header",widgetContent:"fc-widget-content",buttonGroup:"fc-button-group",button:"fc-button",cornerLeft:"fc-corner-left",cornerRight:"fc-corner-right",stateDefault:"fc-state-default",stateActive:"fc-state-active",stateDisabled:"fc-state-disabled",stateHover:"fc-state-hover",stateDown:"fc-state-down",popoverHeader:"fc-widget-header",popoverContent:"fc-widget-content",headerRow:"fc-widget-header",
dayRow:"fc-widget-content",listView:"fc-widget-content"};b.prototype.baseIconClass="fc-icon";b.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-left-single-arrow",next:"fc-icon-right-single-arrow",prevYear:"fc-icon-left-double-arrow",nextYear:"fc-icon-right-double-arrow"};b.prototype.iconOverrideOption="buttonIcons";b.prototype.iconOverrideCustomButtonOption="icon";b.prototype.iconOverridePrefix="fc-icon-"},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=function(b){function c(){return null!==
b&&b.apply(this,arguments)||this}return e.__extends(c,b),c}(c(22).default);f.default=b;b.prototype.classes={widget:"ui-widget",widgetHeader:"ui-widget-header",widgetContent:"ui-widget-content",buttonGroup:"fc-button-group",button:"ui-button",cornerLeft:"ui-corner-left",cornerRight:"ui-corner-right",stateDefault:"ui-state-default",stateActive:"ui-state-active",stateDisabled:"ui-state-disabled",stateHover:"ui-state-hover",stateDown:"ui-state-down",today:"ui-state-highlight",popoverHeader:"ui-widget-header",
popoverContent:"ui-widget-content",headerRow:"ui-widget-header",dayRow:"ui-widget-content",listView:"ui-widget-content"};b.prototype.baseIconClass="ui-icon";b.prototype.iconClasses={close:"ui-icon-closethick",prev:"ui-icon-circle-triangle-w",next:"ui-icon-circle-triangle-e",prevYear:"ui-icon-seek-prev",nextYear:"ui-icon-seek-next"};b.prototype.iconOverrideOption="themeButtonIcons";b.prototype.iconOverrideCustomButtonOption="themeIcon";b.prototype.iconOverridePrefix="ui-icon-"},function(b,f,c){Object.defineProperty(f,
"__esModule",{value:!0});var e=c(2),l=c(3),q=c(21),k=c(6);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.parse=function(b,c){var e;return l.isFunction(b.events)?e=b:l.isFunction(b)&&(e={events:b}),!!e&&k.default.parse.call(this,e,c)},c.prototype.fetch=function(b,c,e){var f=this;return this.calendar.pushLoading(),q.default.construct(function(h){f.func.call(f.calendar,b.clone(),c.clone(),e,function(b){f.calendar.popLoading();h(f.parseEventDefs(b))})})},
c.prototype.getPrimitive=function(){return this.func},c.prototype.applyManualStandardProps=function(c){var e=b.prototype.applyManualStandardProps.call(this,c);return this.func=c.events,e},c}(k.default);f.default=b;b.defineStandardProps({events:!1})},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(4),k=c(21),m=c(6);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.parse=function(b,c){var e;return"string"==typeof b.url?
e=b:"string"==typeof b&&(e={url:b}),!!e&&m.default.parse.call(this,e,c)},c.prototype.fetch=function(b,e,f){var h=this,m=this.ajaxSettings,n=m.success,r=m.error,w=this.buildRequestParams(b,e,f);return this.calendar.pushLoading(),k.default.construct(function(b,e){l.ajax(l.extend({},c.AJAX_DEFAULTS,m,{url:h.url,data:w,success:function(c,f,k){var g;h.calendar.popLoading();c?(g=q.applyAll(n,h,[c,f,k]),l.isArray(g)&&(c=g),b(h.parseEventDefs(c))):e()},error:function(b,c,f){h.calendar.popLoading();q.applyAll(r,
h,[b,c,f]);e()}}))})},c.prototype.buildRequestParams=function(b,c,e){var f,k,m,n,r=this.calendar,w=this.ajaxSettings,x={};return f=this.startParam,null==f&&(f=r.opt("startParam")),k=this.endParam,null==k&&(k=r.opt("endParam")),m=this.timezoneParam,null==m&&(m=r.opt("timezoneParam")),n=l.isFunction(w.data)?w.data():w.data||{},l.extend(x,n),x[f]=b.format(),x[k]=c.format(),e&&"local"!==e&&(x[m]=e),x},c.prototype.getPrimitive=function(){return this.url},c.prototype.applyMiscProps=function(b){this.ajaxSettings=
b},c.AJAX_DEFAULTS={dataType:"json",cache:!1},c}(m.default);f.default=b;b.defineStandardProps({url:!0,startParam:!0,endParam:!0,timezoneParam:!0})},function(b,f){Object.defineProperty(f,"__esModule",{value:!0});b=function(){function b(b){this.items=b||[]}return b.prototype.proxyCall=function(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];var f=[];return this.items.forEach(function(e){f.push(e[b].apply(e,c))}),f},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",
{value:!0});var e=c(3),l=c(4);b=c(7);c=function(){function b(b,c){this.isAnimating=this.isHidden=this.isFollowing=!1;this.options=c=c||{};this.sourceEl=b;this.parentEl=c.parentEl?e(c.parentEl):b.parent()}return b.prototype.start=function(b){this.isFollowing||(this.isFollowing=!0,this.y0=l.getEvY(b),this.x0=l.getEvX(b),this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),l.getEvIsTouch(b)?this.listenTo(e(document),"touchmove",this.handleMove):this.listenTo(e(document),"mousemove",
this.handleMove))},b.prototype.stop=function(b,c){var f=this,k=this.options.revertDuration,m=function(){f.isAnimating=!1;f.removeElement();f.top0=f.left0=null;c&&c()};this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,this.stopListeningTo(e(document)),b&&k&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:k,complete:m})):m())},b.prototype.getEl=function(){var b=this.el;return b||(b=this.el=this.sourceEl.clone().addClass(this.options.additionalClass||
"").css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}),b.addClass("fc-unselectable"),b.appendTo(this.parentEl)),b},b.prototype.removeElement=function(){this.el&&(this.el.remove(),this.el=null)},b.prototype.updatePosition=function(){var b,c;this.getEl();null==this.top0&&(b=this.sourceEl.offset(),c=this.el.offsetParent().offset(),
this.top0=b.top-c.top,this.left0=b.left-c.left);this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},b.prototype.handleMove=function(b){this.topDelta=l.getEvY(b)-this.y0;this.leftDelta=l.getEvX(b)-this.x0;this.isHidden||this.updatePosition()},b.prototype.hide=function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},b.prototype.show=function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())},b}();f.default=c;b.default.mixInto(c)},function(b,
f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(4);b=c(7);c=function(){function b(b){this.isHidden=!0;this.margin=10;this.options=b||{}}return b.prototype.show=function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},b.prototype.hide=function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},b.prototype.render=function(){var b=this,c=this.options;this.el=e('<div class="fc-popover"/>').addClass(c.className||
"").css({top:0,left:0}).append(c.content).appendTo(c.parentEl);this.el.on("click",".fc-close",function(){b.hide()});c.autoHide&&this.listenTo(e(document),"mousedown",this.documentMousedown)},b.prototype.documentMousedown=function(b){this.el&&!e(b.target).closest(this.el).length&&this.hide()},b.prototype.removeElement=function(){this.hide();this.el&&(this.el.remove(),this.el=null);this.stopListeningTo(e(document),"mousedown")},b.prototype.position=function(){var b,c,f,n=this.options,t=this.el.offsetParent().offset(),
w=this.el.outerWidth(),x=this.el.outerHeight(),h=e(window),A=l.getScrollParent(this.el);var q=n.top||0;var v=void 0!==n.left?n.left:void 0!==n.right?n.right-w:0;A.is(window)||A.is(document)?(A=h,b=0,c=0):(f=A.offset(),b=f.top,c=f.left);b+=h.scrollTop();c+=h.scrollLeft();!1!==n.viewportConstrain&&(q=Math.min(q,b+A.outerHeight()-x-this.margin),q=Math.max(q,b+this.margin),v=Math.min(v,c+A.outerWidth()-w-this.margin),v=Math.max(v,c+this.margin));this.el.css({top:q-t.top,left:v-t.left})},b.prototype.trigger=
function(b){this.options[b]&&this.options[b].apply(this,Array.prototype.slice.call(arguments,1))},b}();f.default=c;b.default.mixInto(c)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});b=c(13);c=function(){function b(){this.q=[];this.isRunning=this.isPaused=!1}return b.prototype.queue=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];this.q.push.apply(this.q,b);this.tryStart()},b.prototype.pause=function(){this.isPaused=!0},b.prototype.resume=function(){this.isPaused=
!1;this.tryStart()},b.prototype.getIsIdle=function(){return!this.isRunning&&!this.isPaused},b.prototype.tryStart=function(){!this.isRunning&&this.canRunNext()&&(this.isRunning=!0,this.trigger("start"),this.runRemaining())},b.prototype.canRunNext=function(){return!this.isPaused&&this.q.length},b.prototype.runRemaining=function(){var b,c,e=this;do if(b=this.q.shift(),(c=this.runTask(b))&&c.then)return void c.then(function(){e.canRunNext()&&e.runRemaining()});while(this.canRunNext());this.trigger("stop");
this.isRunning=!1;this.tryStart()},b.prototype.runTask=function(b){return b()},b}();f.default=c;b.default.mixInto(c)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=function(b){function c(c){var e=b.call(this)||this;return e.waitsByNamespace=c||{},e}return e.__extends(c,b),c.prototype.queue=function(b,c,e){var f;b={func:b,namespace:c,type:e};c&&(f=this.waitsByNamespace[c]);this.waitNamespace&&(c===this.waitNamespace&&null!=f?this.delayWait(f):(this.clearWait(),this.tryStart()));
this.compoundTask(b)&&(this.waitNamespace||null==f?this.tryStart():this.startWait(c,f))},c.prototype.startWait=function(b,c){this.waitNamespace=b;this.spawnWait(c)},c.prototype.delayWait=function(b){clearTimeout(this.waitId);this.spawnWait(b)},c.prototype.spawnWait=function(b){var c=this;this.waitId=setTimeout(function(){c.waitNamespace=null;c.tryStart()},b)},c.prototype.clearWait=function(){this.waitNamespace&&(clearTimeout(this.waitId),this.waitId=null,this.waitNamespace=null)},c.prototype.canRunNext=
function(){if(!b.prototype.canRunNext.call(this))return!1;if(this.waitNamespace){for(var c=this.q,e=0;e<c.length;e++)if(c[e].namespace!==this.waitNamespace)return!0;return!1}return!0},c.prototype.runTask=function(b){b.func()},c.prototype.compoundTask=function(b){var c,e,f=this.q,k=!0;if(b.namespace&&"destroy"===b.type)for(c=f.length-1;0<=c;c--)if(e=f[c],e.namespace===b.namespace)switch(e.type){case "init":k=!1;case "add":case "remove":f.splice(c,1)}return k&&f.push(b),k},c}(c(228).default);f.default=
b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.setElement=function(b){this.el=b;this.bindGlobalHandlers();this.renderSkeleton();this.set("isInDom",!0)},c.prototype.removeElement=function(){this.unset("isInDom");this.unrenderSkeleton();this.unbindGlobalHandlers();this.el.remove()},c.prototype.bindGlobalHandlers=function(){},c.prototype.unbindGlobalHandlers=function(){},
c.prototype.renderSkeleton=function(){},c.prototype.unrenderSkeleton=function(){},c}(c(51).default);f.default=b},function(b,f,c){function e(b){var c,e,f=[];for(c in b){var k=b[c].eventInstances;for(e=0;e<k.length;e++)f.push(k[e].toLegacy())}return f}Object.defineProperty(f,"__esModule",{value:!0});var l=c(2),q=c(3),k=c(0),m=c(4),r=c(11),n=c(49);b=c(230);var y=c(19);c=function(b){function c(e,f){var h=b.call(this)||this;return h.isRTL=!1,h.hitsNeededDepth=0,h.hasAllDayBusinessHours=!1,h.isDatesRendered=
!1,e&&(h.view=e),f&&(h.options=f),h.uid=String(c.guid++),h.childrenByUid={},h.nextDayThreshold=k.duration(h.opt("nextDayThreshold")),h.isRTL=h.opt("isRTL"),h.fillRendererClass&&(h.fillRenderer=new h.fillRendererClass(h)),h.eventRendererClass&&(h.eventRenderer=new h.eventRendererClass(h,h.fillRenderer)),h.helperRendererClass&&h.eventRenderer&&(h.helperRenderer=new h.helperRendererClass(h,h.eventRenderer)),h.businessHourRendererClass&&h.fillRenderer&&(h.businessHourRenderer=new h.businessHourRendererClass(h,
h.fillRenderer)),h}return l.__extends(c,b),c.prototype.addChild=function(b){return!this.childrenByUid[b.uid]&&(this.childrenByUid[b.uid]=b,!0)},c.prototype.removeChild=function(b){return!!this.childrenByUid[b.uid]&&(delete this.childrenByUid[b.uid],!0)},c.prototype.updateSize=function(b,c,e){this.callChildren("updateSize",arguments)},c.prototype.opt=function(b){return this._getView().opt(b)},c.prototype.publiclyTrigger=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];c=this._getCalendar();
return c.publiclyTrigger.apply(c,b)},c.prototype.hasPublicHandlers=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];c=this._getCalendar();return c.hasPublicHandlers.apply(c,b)},c.prototype.executeDateRender=function(b){this.dateProfile=b;this.renderDates(b);this.isDatesRendered=!0;this.callChildren("executeDateRender",arguments)},c.prototype.executeDateUnrender=function(){this.callChildren("executeDateUnrender",arguments);this.dateProfile=null;this.unrenderDates();this.isDatesRendered=
!1},c.prototype.renderDates=function(b){},c.prototype.unrenderDates=function(){},c.prototype.getNowIndicatorUnit=function(){},c.prototype.renderNowIndicator=function(b){this.callChildren("renderNowIndicator",arguments)},c.prototype.unrenderNowIndicator=function(){this.callChildren("unrenderNowIndicator",arguments)},c.prototype.renderBusinessHours=function(b){this.businessHourRenderer&&this.businessHourRenderer.render(b);this.callChildren("renderBusinessHours",arguments)},c.prototype.unrenderBusinessHours=
function(){this.callChildren("unrenderBusinessHours",arguments);this.businessHourRenderer&&this.businessHourRenderer.unrender()},c.prototype.executeEventRender=function(b){this.eventRenderer?(this.eventRenderer.rangeUpdated(),this.eventRenderer.render(b)):this.renderEvents&&this.renderEvents(e(b));this.callChildren("executeEventRender",arguments)},c.prototype.executeEventUnrender=function(){this.callChildren("executeEventUnrender",arguments);this.eventRenderer?this.eventRenderer.unrender():this.destroyEvents&&
this.destroyEvents()},c.prototype.getBusinessHourSegs=function(){var b=this.getOwnBusinessHourSegs();return this.iterChildren(function(c){b.push.apply(b,c.getBusinessHourSegs())}),b},c.prototype.getOwnBusinessHourSegs=function(){return this.businessHourRenderer?this.businessHourRenderer.getSegs():[]},c.prototype.getEventSegs=function(){var b=this.getOwnEventSegs();return this.iterChildren(function(c){b.push.apply(b,c.getEventSegs())}),b},c.prototype.getOwnEventSegs=function(){return this.eventRenderer?
this.eventRenderer.getSegs():[]},c.prototype.triggerAfterEventsRendered=function(){this.triggerAfterEventSegsRendered(this.getEventSegs());this.publiclyTrigger("eventAfterAllRender",{context:this,args:[this]})},c.prototype.triggerAfterEventSegsRendered=function(b){var c=this;this.hasPublicHandlers("eventAfterRender")&&b.forEach(function(b){var e;b.el&&(e=b.footprint.getEventLegacy(),c.publiclyTrigger("eventAfterRender",{context:e,args:[e,b.el,c]}))})},c.prototype.triggerBeforeEventsDestroyed=function(){this.triggerBeforeEventSegsDestroyed(this.getEventSegs())},
c.prototype.triggerBeforeEventSegsDestroyed=function(b){var c=this;this.hasPublicHandlers("eventDestroy")&&b.forEach(function(b){var e;b.el&&(e=b.footprint.getEventLegacy(),c.publiclyTrigger("eventDestroy",{context:e,args:[e,b.el,c]}))})},c.prototype.showEventsWithId=function(b){this.getEventSegs().forEach(function(c){c.footprint.eventDef.id===b&&c.el&&c.el.css("visibility","")});this.callChildren("showEventsWithId",arguments)},c.prototype.hideEventsWithId=function(b){this.getEventSegs().forEach(function(c){c.footprint.eventDef.id===
b&&c.el&&c.el.css("visibility","hidden")});this.callChildren("hideEventsWithId",arguments)},c.prototype.renderDrag=function(b,c,e){var f=!1;return this.iterChildren(function(h){h.renderDrag(b,c,e)&&(f=!0)}),f},c.prototype.unrenderDrag=function(){this.callChildren("unrenderDrag",arguments)},c.prototype.renderEventResize=function(b,c,e){this.callChildren("renderEventResize",arguments)},c.prototype.unrenderEventResize=function(){this.callChildren("unrenderEventResize",arguments)},c.prototype.renderSelectionFootprint=
function(b){this.renderHighlight(b);this.callChildren("renderSelectionFootprint",arguments)},c.prototype.unrenderSelection=function(){this.unrenderHighlight();this.callChildren("unrenderSelection",arguments)},c.prototype.renderHighlight=function(b){this.fillRenderer&&this.fillRenderer.renderFootprint("highlight",b,{getClasses:function(){return["fc-highlight"]}});this.callChildren("renderHighlight",arguments)},c.prototype.unrenderHighlight=function(){this.fillRenderer&&this.fillRenderer.unrender("highlight");
this.callChildren("unrenderHighlight",arguments)},c.prototype.hitsNeeded=function(){this.hitsNeededDepth++||this.prepareHits();this.callChildren("hitsNeeded",arguments)},c.prototype.hitsNotNeeded=function(){this.hitsNeededDepth&&!--this.hitsNeededDepth&&this.releaseHits();this.callChildren("hitsNotNeeded",arguments)},c.prototype.prepareHits=function(){},c.prototype.releaseHits=function(){},c.prototype.queryHit=function(b,c){var e,f,h=this.childrenByUid;for(e in h)if(f=h[e].queryHit(b,c))break;return f},
c.prototype.getSafeHitFootprint=function(b){b=this.getHitFootprint(b);return this.dateProfile.activeUnzonedRange.containsRange(b.unzonedRange)?b:null},c.prototype.getHitFootprint=function(b){},c.prototype.getHitEl=function(b){},c.prototype.eventRangesToEventFootprints=function(b){var c,e=[];for(c=0;c<b.length;c++)e.push.apply(e,this.eventRangeToEventFootprints(b[c]));return e},c.prototype.eventRangeToEventFootprints=function(b){return[y.eventRangeToEventFootprint(b)]},c.prototype.eventFootprintsToSegs=
function(b){var c,e=[];for(c=0;c<b.length;c++)e.push.apply(e,this.eventFootprintToSegs(b[c]));return e},c.prototype.eventFootprintToSegs=function(b){var c,e=b.componentFootprint.unzonedRange;var f=this.componentFootprintToSegs(b.componentFootprint);for(c=0;c<f.length;c++){var h=f[c];e.isStart||(h.isStart=!1);e.isEnd||(h.isEnd=!1);h.footprint=b}return f},c.prototype.componentFootprintToSegs=function(b){return[]},c.prototype.callChildren=function(b,c){this.iterChildren(function(e){e[b].apply(e,c)})},
c.prototype.iterChildren=function(b){var c,e=this.childrenByUid;for(c in e)b(e[c])},c.prototype._getCalendar=function(){return this.calendar||this.view.calendar},c.prototype._getView=function(){return this.view},c.prototype._getDateProfile=function(){return this._getView().get("dateProfile")},c.prototype.buildGotoAnchorHtml=function(b,c,e){var f,h,k,l;return q.isPlainObject(b)?(f=b.date,h=b.type,k=b.forceOff):f=b,f=r.default(f),l={date:f.format("YYYY-MM-DD"),type:h||"day"},"string"==typeof c&&(e=
c,c=null),c=c?" "+m.attrsToStr(c):"",e=e||"",!k&&this.opt("navLinks")?"<a"+c+' data-goto="'+m.htmlEscape(JSON.stringify(l))+'">'+e+"</a>":"<span"+c+">"+e+"</span>"},c.prototype.getAllDayHtml=function(){return this.opt("allDayHtml")||m.htmlEscape(this.opt("allDayText"))},c.prototype.getDayClasses=function(b,c){var e,f=this._getView(),h=[];return this.dateProfile.activeUnzonedRange.containsDate(b)?(h.push("fc-"+m.dayIDs[b.day()]),f.isDateInOtherMonth(b,this.dateProfile)&&h.push("fc-other-month"),e=
f.calendar.getNow(),b.isSame(e,"day")?(h.push("fc-today"),!0!==c&&h.push(f.calendar.theme.getClass("today"))):b<e?h.push("fc-past"):h.push("fc-future")):h.push("fc-disabled-day"),h},c.prototype.formatRange=function(b,c,e,f){var h=b.end;return c&&(h=h.clone().subtract(1)),n.formatRange(b.start,h,e,f,this.isRTL)},c.prototype.currentRangeAs=function(b){return this._getDateProfile().currentUnzonedRange.as(b)},c.prototype.computeDayRange=function(b){var c=this._getCalendar(),e=c.msToUtcMoment(b.startMs,
!0);c=c.msToUtcMoment(b.endMs);b=+c.time();c=c.clone().stripTime();return b&&b>=this.nextDayThreshold&&c.add(1,"days"),c<=e&&(c=e.clone().add(1,"days")),{start:e,end:c}},c.prototype.isMultiDayRange=function(b){b=this.computeDayRange(b);return 1<b.end.diff(b.start,"days")},c.guid=0,c}(b.default);f.default=c},function(b,f,c){function e(b,c){return null==c?b:l.isFunction(c)?b.filter(c):(c+="",b.filter(function(b){return b.id==c||b._id===c}))}Object.defineProperty(f,"__esModule",{value:!0});var l=c(3),
q=c(0),k=c(4),m=c(33),r=c(225),n=c(23);b=c(13);var y=c(7),w=c(257),x=c(258),h=c(259),A=c(217),z=c(32),I=c(11),D=c(5),F=c(12),H=c(16),g=c(220),u=c(218),G=c(38),M=c(36),J=c(9),X=c(39),P=c(6),C=c(57);c=function(){function b(b,c){this.freezeContentHeightDepth=this.ignoreUpdateViewSize=this.loadingLevel=0;n.default.needed();this.el=b;this.viewsByType={};this.optionsManager=new x.default(this,c);this.viewSpecManager=new h.default(this.optionsManager,this);this.initMomentInternals();this.initCurrentDate();
this.initEventManager();this.constraints=new A.default(this.eventManager,this);this.constructed()}return b.prototype.constructed=function(){},b.prototype.getView=function(){return this.view},b.prototype.publiclyTrigger=function(b,c){var g,e,f=this.opt(b);if(l.isPlainObject(c)?(g=c.context,e=c.args):l.isArray(c)&&(e=c),null==g&&(g=this.el[0]),e||(e=[]),this.triggerWith(b,g,e),f)return f.apply(g,e)},b.prototype.hasPublicHandlers=function(b){return this.hasHandlers(b)||this.opt(b)},b.prototype.option=
function(b,c){if("string"==typeof b){if(void 0===c)return this.optionsManager.get(b);var g={};g[b]=c;this.optionsManager.add(g)}else"object"==typeof b&&this.optionsManager.add(b)},b.prototype.opt=function(b){return this.optionsManager.get(b)},b.prototype.instantiateView=function(b){var c=this.viewSpecManager.getViewSpec(b);if(!c)throw Error('View type "'+b+'" is not valid');return new c.class(this,c)},b.prototype.isValidViewType=function(b){return!!this.viewSpecManager.getViewSpec(b)},b.prototype.changeView=
function(b,c){c&&(c.start&&c.end?this.optionsManager.recordOverrides({visibleRange:c}):this.currentDate=this.moment(c).stripZone());this.renderView(b)},b.prototype.zoomTo=function(b,c){c=c||"day";c=this.viewSpecManager.getViewSpec(c)||this.viewSpecManager.getUnitViewSpec(c);this.currentDate=b.clone();this.renderView(c?c.type:null)},b.prototype.initCurrentDate=function(){var b=this.opt("defaultDate");this.currentDate=null!=b?this.moment(b).stripZone():this.getNow()},b.prototype.prev=function(){var b=
this.view;b=b.dateProfileGenerator.buildPrev(b.get("dateProfile"));b.isValid&&(this.currentDate=b.date,this.renderView())},b.prototype.next=function(){var b=this.view;b=b.dateProfileGenerator.buildNext(b.get("dateProfile"));b.isValid&&(this.currentDate=b.date,this.renderView())},b.prototype.prevYear=function(){this.currentDate.add(-1,"years");this.renderView()},b.prototype.nextYear=function(){this.currentDate.add(1,"years");this.renderView()},b.prototype.today=function(){this.currentDate=this.getNow();
this.renderView()},b.prototype.gotoDate=function(b){this.currentDate=this.moment(b).stripZone();this.renderView()},b.prototype.incrementDate=function(b){this.currentDate.add(q.duration(b));this.renderView()},b.prototype.getDate=function(){return this.applyTimezone(this.currentDate)},b.prototype.pushLoading=function(){this.loadingLevel++||this.publiclyTrigger("loading",[!0,this.view])},b.prototype.popLoading=function(){--this.loadingLevel||this.publiclyTrigger("loading",[!1,this.view])},b.prototype.render=
function(){this.contentEl?this.elementVisible()&&(this.calcSize(),this.updateViewSize()):this.initialRender()},b.prototype.initialRender=function(){var b=this,c=this.el;c.addClass("fc");c.on("click.fc","a[data-goto]",function(c){var g=l(c.currentTarget).data("goto"),e=b.moment(g.date);g=g.type;var f=b.view.opt("navLink"+k.capitaliseFirstLetter(g)+"Click");"function"==typeof f?f(e,c):("string"==typeof f&&(g=f),b.zoomTo(e,g))});this.optionsManager.watch("settingTheme",["?theme","?themeSystem"],function(g){g=
new (C.getThemeSystemClass(g.themeSystem||g.theme))(b.optionsManager);var e=g.getClass("widget");b.theme=g;e&&c.addClass(e)},function(){var g=b.theme.getClass("widget");b.theme=null;g&&c.removeClass(g)});this.optionsManager.watch("settingBusinessHourGenerator",["?businessHours"],function(c){b.businessHourGenerator=new u.default(c.businessHours,b);b.view&&b.view.set("businessHourGenerator",b.businessHourGenerator)},function(){b.businessHourGenerator=null});this.optionsManager.watch("applyingDirClasses",
["?isRTL","?locale"],function(b){c.toggleClass("fc-ltr",!b.isRTL);c.toggleClass("fc-rtl",b.isRTL)});this.contentEl=l("<div class='fc-view-container'/>").prependTo(c);this.initToolbars();this.renderHeader();this.renderFooter();this.renderView(this.opt("defaultView"));this.opt("handleWindowResize")&&l(window).resize(this.windowResizeProxy=k.debounce(this.windowResize.bind(this),this.opt("windowResizeDelay")))},b.prototype.destroy=function(){this.view&&this.clearView();this.toolbarsManager.proxyCall("removeElement");
this.contentEl.remove();this.el.removeClass("fc fc-ltr fc-rtl");this.optionsManager.unwatch("settingTheme");this.optionsManager.unwatch("settingBusinessHourGenerator");this.el.off(".fc");this.windowResizeProxy&&(l(window).unbind("resize",this.windowResizeProxy),this.windowResizeProxy=null);n.default.unneeded()},b.prototype.elementVisible=function(){return this.el.is(":visible")},b.prototype.bindViewHandlers=function(b){var c=this;b.watch("titleForCalendar",["title"],function(g){b===c.view&&c.setToolbarsTitle(g.title)});
b.watch("dateProfileForCalendar",["dateProfile"],function(g){b===c.view&&(c.currentDate=g.dateProfile.date,c.updateToolbarButtons(g.dateProfile))})},b.prototype.unbindViewHandlers=function(b){b.unwatch("titleForCalendar");b.unwatch("dateProfileForCalendar")},b.prototype.renderView=function(b){var c,g=this.view;this.freezeContentHeight();g&&b&&g.type!==b&&this.clearView();!this.view&&b&&(c=this.view=this.viewsByType[b]||(this.viewsByType[b]=this.instantiateView(b)),this.bindViewHandlers(c),c.startBatchRender(),
c.setElement(l("<div class='fc-view fc-"+b+"-view' />").appendTo(this.contentEl)),this.toolbarsManager.proxyCall("activateButton",b));this.view&&(this.view.get("businessHourGenerator")!==this.businessHourGenerator&&this.view.set("businessHourGenerator",this.businessHourGenerator),this.view.setDate(this.currentDate),c&&c.stopBatchRender());this.thawContentHeight()},b.prototype.clearView=function(){var b=this.view;this.toolbarsManager.proxyCall("deactivateButton",b.type);this.unbindViewHandlers(b);
b.removeElement();b.unsetDate();this.view=null},b.prototype.reinitView=function(){var b=this.view,c=b.queryScroll();this.freezeContentHeight();this.clearView();this.calcSize();this.renderView(b.type);this.view.applyScroll(c);this.thawContentHeight()},b.prototype.getSuggestedViewHeight=function(){return null==this.suggestedViewHeight&&this.calcSize(),this.suggestedViewHeight},b.prototype.isHeightAuto=function(){return"auto"===this.opt("contentHeight")||"auto"===this.opt("height")},b.prototype.updateViewSize=
function(b){void 0===b&&(b=!1);var c,g=this.view;if(!this.ignoreUpdateViewSize&&g)return b&&(this.calcSize(),c=g.queryScroll()),this.ignoreUpdateViewSize++,g.updateSize(this.getSuggestedViewHeight(),this.isHeightAuto(),b),this.ignoreUpdateViewSize--,b&&g.applyScroll(c),!0},b.prototype.calcSize=function(){this.elementVisible()&&this._calcSize()},b.prototype._calcSize=function(){var b=this.opt("contentHeight"),c=this.opt("height");this.suggestedViewHeight="number"==typeof b?b:"function"==typeof b?b():
"number"==typeof c?c-this.queryToolbarsHeight():"function"==typeof c?c()-this.queryToolbarsHeight():"parent"===c?this.el.parent().height()-this.queryToolbarsHeight():Math.round(this.contentEl.width()/Math.max(this.opt("aspectRatio"),.5))},b.prototype.windowResize=function(b){b.target===window&&this.view&&this.view.isDatesRendered&&this.updateViewSize(!0)&&this.publiclyTrigger("windowResize",[this.view])},b.prototype.freezeContentHeight=function(){this.freezeContentHeightDepth++||this.forceFreezeContentHeight()},
b.prototype.forceFreezeContentHeight=function(){this.contentEl.css({width:"100%",height:this.contentEl.height(),overflow:"hidden"})},b.prototype.thawContentHeight=function(){this.freezeContentHeightDepth--;this.contentEl.css({width:"",height:"",overflow:""});this.freezeContentHeightDepth&&this.forceFreezeContentHeight()},b.prototype.initToolbars=function(){this.header=new w.default(this,this.computeHeaderOptions());this.footer=new w.default(this,this.computeFooterOptions());this.toolbarsManager=new r.default([this.header,
this.footer])},b.prototype.computeHeaderOptions=function(){return{extraClasses:"fc-header-toolbar",layout:this.opt("header")}},b.prototype.computeFooterOptions=function(){return{extraClasses:"fc-footer-toolbar",layout:this.opt("footer")}},b.prototype.renderHeader=function(){var b=this.header;b.setToolbarOptions(this.computeHeaderOptions());b.render();b.el&&this.el.prepend(b.el)},b.prototype.renderFooter=function(){var b=this.footer;b.setToolbarOptions(this.computeFooterOptions());b.render();b.el&&
this.el.append(b.el)},b.prototype.setToolbarsTitle=function(b){this.toolbarsManager.proxyCall("updateTitle",b)},b.prototype.updateToolbarButtons=function(b){var c=this.getNow(),g=this.view,e=g.dateProfileGenerator.build(c),f=g.dateProfileGenerator.buildPrev(g.get("dateProfile"));g=g.dateProfileGenerator.buildNext(g.get("dateProfile"));this.toolbarsManager.proxyCall(e.isValid&&!b.currentUnzonedRange.containsDate(c)?"enableButton":"disableButton","today");this.toolbarsManager.proxyCall(f.isValid?"enableButton":
"disableButton","prev");this.toolbarsManager.proxyCall(g.isValid?"enableButton":"disableButton","next")},b.prototype.queryToolbarsHeight=function(){return this.toolbarsManager.items.reduce(function(b,c){return b+(c.el?c.el.outerHeight(!0):0)},0)},b.prototype.select=function(b,c){this.view.select(this.buildSelectFootprint.apply(this,arguments))},b.prototype.unselect=function(){this.view&&this.view.unselect()},b.prototype.buildSelectFootprint=function(b,c){var g;b=this.moment(b).stripZone();return g=
c?this.moment(c).stripZone():b.hasTime()?b.clone().add(this.defaultTimedEventDuration):b.clone().add(this.defaultAllDayEventDuration),new F.default(new D.default(b,g),!b.hasTime())},b.prototype.initMomentInternals=function(){var b=this;this.defaultAllDayEventDuration=q.duration(this.opt("defaultAllDayEventDuration"));this.defaultTimedEventDuration=q.duration(this.opt("defaultTimedEventDuration"));this.optionsManager.watch("buildingMomentLocale","?locale ?monthNames ?monthNamesShort ?dayNames ?dayNamesShort ?firstDay ?weekNumberCalculation".split(" "),
function(c){var g,e=c.weekNumberCalculation,f=c.firstDay;"iso"===e&&(e="ISO");var h=Object.create(z.getMomentLocaleData(c.locale));c.monthNames&&(h._months=c.monthNames);c.monthNamesShort&&(h._monthsShort=c.monthNamesShort);c.dayNames&&(h._weekdays=c.dayNames);c.dayNamesShort&&(h._weekdaysShort=c.dayNamesShort);null==f&&"ISO"===e&&(f=1);null!=f&&(g=Object.create(h._week),g.dow=f,h._week=g);"ISO"!==e&&"local"!==e&&"function"!=typeof e||(h._fullCalendar_weekCalc=e);b.localeData=h;b.currentDate&&b.localizeMoment(b.currentDate)})},
b.prototype.moment=function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var g;return"local"===this.opt("timezone")?(g=I.default.apply(null,b),g.hasTime()&&g.local()):g="UTC"===this.opt("timezone")?I.default.utc.apply(null,b):I.default.parseZone.apply(null,b),this.localizeMoment(g),g},b.prototype.msToMoment=function(b,c){b=I.default.utc(b);return c?b.stripTime():b=this.applyTimezone(b),this.localizeMoment(b),b},b.prototype.msToUtcMoment=function(b,c){b=I.default.utc(b);return c&&b.stripTime(),
this.localizeMoment(b),b},b.prototype.localizeMoment=function(b){b._locale=this.localeData},b.prototype.getIsAmbigTimezone=function(){return"local"!==this.opt("timezone")&&"UTC"!==this.opt("timezone")},b.prototype.applyTimezone=function(b){if(!b.hasTime())return b.clone();var c,g=this.moment(b.toArray()),e=b.time().asMilliseconds()-g.time().asMilliseconds();return e&&(c=g.clone().add(e),0==b.time().asMilliseconds()-c.time().asMilliseconds()&&(g=c)),g},b.prototype.footprintToDateProfile=function(b,
c){void 0===c&&(c=!1);var g,e=I.default.utc(b.unzonedRange.startMs);return c||(g=I.default.utc(b.unzonedRange.endMs)),b.isAllDay?(e.stripTime(),g&&g.stripTime()):(e=this.applyTimezone(e),g&&(g=this.applyTimezone(g))),this.localizeMoment(e),g&&this.localizeMoment(g),new H.default(e,g,this)},b.prototype.getNow=function(){var b=this.opt("now");return"function"==typeof b&&(b=b()),this.moment(b).stripZone()},b.prototype.humanizeDuration=function(b){return b.locale(this.opt("locale")).humanize()},b.prototype.parseUnzonedRange=
function(b){var c=null,g=null;return b.start&&(c=this.moment(b.start).stripZone()),b.end&&(g=this.moment(b.end).stripZone()),c||g?c&&g&&g.isBefore(c)?null:new D.default(c,g):null},b.prototype.initEventManager=function(){var b=this,c=new g.default(this),e=this.opt("eventSources")||[],f=this.opt("events");this.eventManager=c;f&&e.unshift(f);c.on("release",function(c){b.trigger("eventsReset",c)});c.freeze();e.forEach(function(g){(g=G.default.parse(g,b))&&c.addSource(g)});c.thaw()},b.prototype.requestEvents=
function(b,c){return this.eventManager.requestEvents(b,c,this.opt("timezone"),!this.opt("lazyFetching"))},b.prototype.getEventEnd=function(b){return b.end?b.end.clone():this.getDefaultEventEnd(b.allDay,b.start)},b.prototype.getDefaultEventEnd=function(b,c){c=c.clone();return b?c.stripTime().add(this.defaultAllDayEventDuration):c.add(this.defaultTimedEventDuration),this.getIsAmbigTimezone()&&c.stripZone(),c},b.prototype.rerenderEvents=function(){this.view.flash("displayingEvents")},b.prototype.refetchEvents=
function(){this.eventManager.refetchAllSources()},b.prototype.renderEvents=function(b,c){this.eventManager.freeze();for(var g=0;g<b.length;g++)this.renderEvent(b[g],c);this.eventManager.thaw()},b.prototype.renderEvent=function(b,c){void 0===c&&(c=!1);var g=this.eventManager;(b=M.default.parse(b,b.source||g.stickySource))&&g.addEventDef(b,c)},b.prototype.removeEvents=function(b){var c,g=this.eventManager,f=[],h={};if(null==b)g.removeAllEventDefs();else{g.getEventInstances().forEach(function(b){f.push(b.toLegacy())});
f=e(f,b);for(c=0;c<f.length;c++)b=this.eventManager.getEventDefByUid(f[c]._id),h[b.id]=!0;g.freeze();for(c in h)g.removeEventDefsById(c);g.thaw()}},b.prototype.clientEvents=function(b){var c=[];return this.eventManager.getEventInstances().forEach(function(b){c.push(b.toLegacy())}),e(c,b)},b.prototype.updateEvents=function(b){this.eventManager.freeze();for(var c=0;c<b.length;c++)this.updateEvent(b[c]);this.eventManager.thaw()},b.prototype.updateEvent=function(b){var c,g,e=this.eventManager.getEventDefByUid(b._id);
e instanceof J.default&&(c=e.buildInstance(),g=X.default.createFromRawProps(c,b,null),this.eventManager.mutateEventsWithId(e.id,g))},b.prototype.getEventSources=function(){return this.eventManager.otherSources.slice()},b.prototype.getEventSourceById=function(b){return this.eventManager.getSourceById(P.default.normalizeId(b))},b.prototype.addEventSource=function(b){(b=G.default.parse(b,this))&&this.eventManager.addSource(b)},b.prototype.removeEventSources=function(b){var c,g=this.eventManager;if(null==
b)this.eventManager.removeAllSources();else{b=g.multiQuerySources(b);g.freeze();for(c=0;c<b.length;c++)g.removeSource(b[c]);g.thaw()}},b.prototype.removeEventSource=function(b){var c=this.eventManager,g=c.querySources(b);c.freeze();for(b=0;b<g.length;b++)c.removeSource(g[b]);c.thaw()},b.prototype.refetchEventSources=function(b){var c=this.eventManager,g=c.multiQuerySources(b);c.freeze();for(b=0;b<g.length;b++)c.refetchSource(g[b]);c.thaw()},b.defaults=m.globalDefaults,b.englishDefaults=m.englishDefaults,
b.rtlDefaults=m.rtlDefaults,b}();f.default=c;b.default.mixInto(c);y.default.mixInto(c)},function(b,f,c){function e(b){var c,e,f,h,l=m.dataAttrPrefix;return l&&(l+="-"),c=b.data(l+"event")||null,c&&(c="object"==typeof c?q.extend({},c):{},e=c.start,null==e&&(e=c.time),f=c.duration,h=c.stick,delete c.start,delete c.time,delete c.duration,delete c.stick),null==e&&(e=b.data(l+"start")),null==e&&(e=b.data(l+"time")),null==f&&(f=b.data(l+"duration")),null==h&&(h=b.data(l+"stick")),e=null!=e?k.duration(e):
null,f=null!=f?k.duration(f):null,h=!!h,{eventProps:c,startTime:e,duration:f,stick:h}}Object.defineProperty(f,"__esModule",{value:!0});var l=c(2),q=c(3),k=c(0),m=c(18),r=c(4),n=c(11);b=c(7);var y=c(17),w=c(9),x=c(20),h=c(6);c=function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;return c.isDragging=!1,c}return l.__extends(c,b),c.prototype.end=function(){this.dragListener&&this.dragListener.endInteraction()},c.prototype.bindToDocument=function(){this.listenTo(q(document),{dragstart:this.handleDragStart,
sortstart:this.handleDragStart})},c.prototype.unbindFromDocument=function(){this.stopListeningTo(q(document))},c.prototype.handleDragStart=function(b,c){var e,f;this.opt("droppable")&&(e=q((c?c.item:null)||b.target),f=this.opt("dropAccept"),(q.isFunction(f)?f.call(e[0],e):e.is(f))&&(this.isDragging||this.listenToExternalDrag(e,b,c)))},c.prototype.listenToExternalDrag=function(b,c,f){var h,g=this,k=this.component,l=this.view,m=e(b);(this.dragListener=new y.default(k,{interactionStart:function(){g.isDragging=
!0},hitOver:function(b){var c,e=!0;(b=b.component.getSafeHitFootprint(b))?(h=g.computeExternalDrop(b,m),h?(c=new x.default(h.buildInstances()),e=m.eventProps?k.isEventInstanceGroupAllowed(c):k.isExternalInstanceGroupAllowed(c)):e=!1):e=!1;e||(h=null,r.disableCursor());h&&k.renderDrag(k.eventRangesToEventFootprints(c.sliceRenderRanges(k.dateProfile.renderUnzonedRange,l.calendar)))},hitOut:function(){h=null},hitDone:function(){r.enableCursor();k.unrenderDrag()},interactionEnd:function(c){h&&l.reportExternalDrop(h,
!!m.eventProps,!!m.stick,b,c,f);g.isDragging=!1;g.dragListener=null}})).startDrag(c)},c.prototype.computeExternalDrop=function(b,c){var e,f=this.view.calendar,g=n.default.utc(b.unzonedRange.startMs).stripZone();return b.isAllDay&&(c.startTime?g.time(c.startTime):g.stripTime()),c.duration&&(e=g.clone().add(c.duration)),g=f.applyTimezone(g),e&&(e=f.applyTimezone(e)),w.default.parse(q.extend({},c.eventProps,{start:g,end:e}),new h.default(f))},c}(c(14).default);f.default=c;b.default.mixInto(c);m.dataAttrPrefix=
""},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(4),k=c(39),m=c(40),r=c(17);b=function(b){function c(c,e){c=b.call(this,c)||this;return c.isResizing=!1,c.eventPointing=e,c}return e.__extends(c,b),c.prototype.end=function(){this.dragListener&&this.dragListener.endInteraction()},c.prototype.bindToEl=function(b){var c=this.component;c.bindSegHandlerToEl(b,"mousedown",this.handleMouseDown.bind(this));c.bindSegHandlerToEl(b,"touchstart",this.handleTouchStart.bind(this))},
c.prototype.handleMouseDown=function(b,c){this.component.canStartResize(b,c)&&this.buildDragListener(b,l(c.target).is(".fc-start-resizer")).startInteraction(c,{distance:5})},c.prototype.handleTouchStart=function(b,c){this.component.canStartResize(b,c)&&this.buildDragListener(b,l(c.target).is(".fc-start-resizer")).startInteraction(c)},c.prototype.buildDragListener=function(b,c){var e,f,k=this,l=this.component,m=this.view,n=m.calendar,w=n.eventManager,g=b.el,u=b.footprint.eventDef,t=b.footprint.eventInstance;
return this.dragListener=new r.default(l,{scroll:this.opt("dragScroll"),subjectEl:g,interactionStart:function(){e=!1},dragStart:function(c){e=!0;k.eventPointing.handleMouseout(b,c);k.segResizeStart(b,c)},hitOver:function(g,e,h){var r;e=!0;h=l.getSafeHitFootprint(h);g=l.getSafeHitFootprint(g);h&&g?(f=c?k.computeEventStartResizeMutation(h,g,b.footprint):k.computeEventEndResizeMutation(h,g,b.footprint),f?(r=w.buildMutatedEventInstanceGroup(u.id,f),e=l.isEventInstanceGroupAllowed(r)):e=!1):e=!1;e?f.isEmpty()&&
(f=null):(f=null,q.disableCursor());f&&(m.hideEventsWithId(b.footprint.eventDef.id),m.renderEventResize(l.eventRangesToEventFootprints(r.sliceRenderRanges(l.dateProfile.renderUnzonedRange,n)),b))},hitOut:function(){f=null},hitDone:function(){m.unrenderEventResize(b);m.showEventsWithId(b.footprint.eventDef.id);q.enableCursor()},interactionEnd:function(c){e&&k.segResizeStop(b,c);f&&m.reportEventResize(t,f,g,c);k.dragListener=null}})},c.prototype.segResizeStart=function(b,c){this.isResizing=!0;this.component.publiclyTrigger("eventResizeStart",
{context:b.el[0],args:[b.footprint.getEventLegacy(),c,{},this.view]})},c.prototype.segResizeStop=function(b,c){this.isResizing=!1;this.component.publiclyTrigger("eventResizeStop",{context:b.el[0],args:[b.footprint.getEventLegacy(),c,{},this.view]})},c.prototype.computeEventStartResizeMutation=function(b,c,e){var f,h;e=e.componentFootprint.unzonedRange;b=this.component.diffDates(c.unzonedRange.getStart(),b.unzonedRange.getStart());return e.getStart().add(b)<e.getEnd()&&(f=new m.default,f.setStartDelta(b),
h=new k.default,h.setDateMutation(f),h)},c.prototype.computeEventEndResizeMutation=function(b,c,e){var f,h;e=e.componentFootprint.unzonedRange;b=this.component.diffDates(c.unzonedRange.getEnd(),b.unzonedRange.getEnd());return e.getEnd().add(b)>e.getStart()&&(f=new m.default,f.setEndDelta(b),h=new k.default,h.setDateMutation(f),h)},c}(c(14).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(4),q=c(39),k=c(40),m=c(59),r=c(17),n=c(226);b=function(b){function c(c,
e){c=b.call(this,c)||this;return c.isDragging=!1,c.eventPointing=e,c}return e.__extends(c,b),c.prototype.end=function(){this.dragListener&&this.dragListener.endInteraction()},c.prototype.getSelectionDelay=function(){var b=this.opt("eventLongPressDelay");return null==b&&(b=this.opt("longPressDelay")),b},c.prototype.bindToEl=function(b){var c=this.component;c.bindSegHandlerToEl(b,"mousedown",this.handleMousedown.bind(this));c.bindSegHandlerToEl(b,"touchstart",this.handleTouchStart.bind(this))},c.prototype.handleMousedown=
function(b,c){!this.component.shouldIgnoreMouse()&&this.component.canStartDrag(b,c)&&this.buildDragListener(b).startInteraction(c,{distance:5})},c.prototype.handleTouchStart=function(b,c){var e=this.component,f={delay:this.view.isEventDefSelected(b.footprint.eventDef)?0:this.getSelectionDelay()};e.canStartDrag(b,c)?this.buildDragListener(b).startInteraction(c,f):e.canStartSelection(b,c)&&this.buildSelectListener(b).startInteraction(c,f)},c.prototype.buildSelectListener=function(b){var c=this,e=this.view,
f=b.footprint.eventDef,k=b.footprint.eventInstance;if(this.dragListener)return this.dragListener;var l=this.dragListener=new m.default({dragStart:function(b){l.isTouch&&!e.isEventDefSelected(f)&&k&&e.selectEventInstance(k)},interactionEnd:function(b){c.dragListener=null}});return l},c.prototype.buildDragListener=function(b){var c,e,f,k=this,m=this.component,w=this.view,t=w.calendar,g=t.eventManager,u=b.el,G=b.footprint.eventDef,q=b.footprint.eventInstance;if(this.dragListener)return this.dragListener;
var y=this.dragListener=new r.default(w,{scroll:this.opt("dragScroll"),subjectEl:u,subjectCenter:!0,interactionStart:function(g){b.component=m;c=!1;e=new n.default(b.el,{additionalClass:"fc-dragging",parentEl:w.el,opacity:y.isTouch?null:k.opt("dragOpacity"),revertDuration:k.opt("dragRevertDuration"),zIndex:2});e.hide();e.start(g)},dragStart:function(g){y.isTouch&&!w.isEventDefSelected(G)&&q&&w.selectEventInstance(q);c=!0;k.eventPointing.handleMouseout(b,g);k.segDragStart(b,g);w.hideEventsWithId(b.footprint.eventDef.id)},
hitOver:function(c,h,u){var n,r=!0;b.hit&&(u=b.hit);u=u.component.getSafeHitFootprint(u);c=c.component.getSafeHitFootprint(c);u&&c?(f=k.computeEventDropMutation(u,c,G),f?(n=g.buildMutatedEventInstanceGroup(G.id,f),r=m.isEventInstanceGroupAllowed(n)):r=!1):r=!1;r||(f=null,l.disableCursor());f&&w.renderDrag(m.eventRangesToEventFootprints(n.sliceRenderRanges(m.dateProfile.renderUnzonedRange,t)),b,y.isTouch)?e.hide():e.show();h&&(f=null)},hitOut:function(){w.unrenderDrag(b);e.show();f=null},hitDone:function(){l.enableCursor()},
interactionEnd:function(g){delete b.component;e.stop(!f,function(){c&&(w.unrenderDrag(b),k.segDragStop(b,g));w.showEventsWithId(b.footprint.eventDef.id);f&&w.reportEventDrop(q,f,u,g)});k.dragListener=null}});return y},c.prototype.segDragStart=function(b,c){this.isDragging=!0;this.component.publiclyTrigger("eventDragStart",{context:b.el[0],args:[b.footprint.getEventLegacy(),c,{},this.view]})},c.prototype.segDragStop=function(b,c){this.isDragging=!1;this.component.publiclyTrigger("eventDragStop",{context:b.el[0],
args:[b.footprint.getEventLegacy(),c,{},this.view]})},c.prototype.computeEventDropMutation=function(b,c,e){e=new q.default;return e.setDateMutation(this.computeEventDateMutation(b,c)),e},c.prototype.computeEventDateMutation=function(b,c){var e,f,h=b.unzonedRange.getStart(),m=c.unzonedRange.getStart(),l=!1,n=!1,g=!1;return b.isAllDay!==c.isAllDay&&(l=!0,c.isAllDay?(g=!0,h.stripTime()):n=!0),e=this.component.diffDates(m,h),f=new k.default,f.clearEnd=l,f.forceTimed=n,f.forceAllDay=g,f.setDateDelta(e),
f},c}(c(14).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(4),q=c(17),k=c(12),m=c(5);b=function(b){function c(c){c=b.call(this,c)||this;return c.dragListener=c.buildDragListener(),c}return e.__extends(c,b),c.prototype.end=function(){this.dragListener.endInteraction()},c.prototype.getDelay=function(){var b=this.opt("selectLongPressDelay");return null==b&&(b=this.opt("longPressDelay")),b},c.prototype.bindToEl=function(b){var c=this,e=this.component,
f=this.dragListener;e.bindDateHandlerToEl(b,"mousedown",function(b){c.opt("selectable")&&!e.shouldIgnoreMouse()&&f.startInteraction(b,{distance:c.opt("selectMinDistance")})});e.bindDateHandlerToEl(b,"touchstart",function(b){c.opt("selectable")&&!e.shouldIgnoreTouch()&&f.startInteraction(b,{delay:c.getDelay()})});l.preventSelection(b)},c.prototype.buildDragListener=function(){var b,c=this,e=this.component;return new q.default(e,{scroll:this.opt("dragScroll"),interactionStart:function(){b=null},dragStart:function(b){c.view.unselect(b)},
hitOver:function(f,k,m){var h,n;m&&(h=e.getSafeHitFootprint(m),n=e.getSafeHitFootprint(f),b=h&&n?c.computeSelection(h,n):null,b?e.renderSelectionFootprint(b):!1===b&&l.disableCursor())},hitOut:function(){b=null;e.unrenderSelection()},hitDone:function(){l.enableCursor()},interactionEnd:function(e,f){!f&&b&&c.view.reportSelection(b,e)}})},c.prototype.computeSelection=function(b,c){b=this.computeSelectionFootprint(b,c);return!(b&&!this.isSelectionFootprintAllowed(b))&&b},c.prototype.computeSelectionFootprint=
function(b,c){c=[b.unzonedRange.startMs,b.unzonedRange.endMs,c.unzonedRange.startMs,c.unzonedRange.endMs];return c.sort(l.compareNumbers),new k.default(new m.default(c[0],c[3]),b.isAllDay)},c.prototype.isSelectionFootprintAllowed=function(b){return this.component.dateProfile.validUnzonedRange.containsRange(b.unzonedRange)&&this.view.calendar.constraints.isSelectionFootprintAllowed(b)},c}(c(14).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(17);
b=function(b){function c(c){c=b.call(this,c)||this;return c.dragListener=c.buildDragListener(),c}return e.__extends(c,b),c.prototype.end=function(){this.dragListener.endInteraction()},c.prototype.bindToEl=function(b){var c=this.component,e=this.dragListener;c.bindDateHandlerToEl(b,"mousedown",function(b){c.shouldIgnoreMouse()||e.startInteraction(b)});c.bindDateHandlerToEl(b,"touchstart",function(b){c.shouldIgnoreTouch()||e.startInteraction(b)})},c.prototype.buildDragListener=function(){var b,c=this,
e=this.component,f=new l.default(e,{scroll:this.opt("dragScroll"),interactionStart:function(){b=f.origHit},hitOver:function(c,e,f){e||(b=null)},hitOut:function(){b=null},interactionEnd:function(f,k){var h;!k&&b&&(h=e.getSafeHitFootprint(b))&&c.view.triggerDayClick(h,e.getHitEl(b),f)}});return f.shouldCancelTouchScroll=!1,f.scrollAlwaysKills=!0,f},c}(c(14).default);f.default=b},function(b,f,c){function e(b){var c,e=[],f=[];for(c=0;c<b.length;c++)b[c].componentFootprint.isAllDay?e.push(b[c]):f.push(b[c]);
return{allDay:e,timed:f}}Object.defineProperty(f,"__esModule",{value:!0});var l=c(2),q=c(0),k=c(3),m=c(4),r=c(41),n=c(43);b=c(239);c=c(66);n=function(b){function c(c,e){c=b.call(this,c,e)||this;return c.usesMinMaxTime=!0,c.timeGrid=c.instantiateTimeGrid(),c.addChild(c.timeGrid),c.opt("allDaySlot")&&(c.dayGrid=c.instantiateDayGrid(),c.addChild(c.dayGrid)),c.scroller=new r.default({overflowX:"hidden",overflowY:"auto"}),c}return l.__extends(c,b),c.prototype.instantiateTimeGrid=function(){var b=new this.timeGridClass(this);
return m.copyOwnProps(y,b),b},c.prototype.instantiateDayGrid=function(){var b=new this.dayGridClass(this);return m.copyOwnProps(w,b),b},c.prototype.renderSkeleton=function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml());this.scroller.render();var b=this.scroller.el.addClass("fc-time-grid-container");var c=k('<div class="fc-time-grid" />').appendTo(b);this.el.find(".fc-body > tr > td").append(b);this.timeGrid.headContainerEl=this.el.find(".fc-head-container");this.timeGrid.setElement(c);
this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight())},c.prototype.unrenderSkeleton=function(){this.timeGrid.removeElement();this.dayGrid&&this.dayGrid.removeElement();this.scroller.destroy()},c.prototype.renderSkeletonHtml=function(){var b=this.calendar.theme;return'<table class="'+b.getClass("tableGrid")+'">'+(this.opt("columnHeader")?'<thead class="fc-head"><tr><td class="fc-head-container '+b.getClass("widgetHeader")+
'">&nbsp;</td></tr></thead>':"")+'<tbody class="fc-body"><tr><td class="'+b.getClass("widgetContent")+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+b.getClass("widgetHeader")+'"/>':"")+"</td></tr></tbody></table>"},c.prototype.axisStyleAttr=function(){return null!=this.axisWidth?'style="width:'+this.axisWidth+'px"':""},c.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()},c.prototype.updateSize=function(c,e,f){var h,k,l;if(b.prototype.updateSize.call(this,
c,e,f),this.axisWidth=m.matchCellWidths(this.el.find(".fc-axis")),!this.timeGrid.colEls)return void(e||(k=this.computeScrollerHeight(c),this.scroller.setHeight(k)));f=this.el.find(".fc-row:not(.fc-scroller *)");this.timeGrid.bottomRuleEl.hide();this.scroller.clear();m.uncompensateScroll(f);this.dayGrid&&(this.dayGrid.removeSegPopover(),h=this.opt("eventLimit"),h&&"number"!=typeof h&&(h=5),h&&this.dayGrid.limitRows(h));e||(k=this.computeScrollerHeight(c),this.scroller.setHeight(k),l=this.scroller.getScrollbarWidths(),
(l.left||l.right)&&(m.compensateScroll(f,l),k=this.computeScrollerHeight(c),this.scroller.setHeight(k)),this.scroller.lockOverflow(l),this.timeGrid.getTotalSlatHeight()<k&&this.timeGrid.bottomRuleEl.show())},c.prototype.computeScrollerHeight=function(b){return b-m.subtractInnerElHeight(this.el,this.scroller.el)},c.prototype.computeInitialDateScroll=function(){var b=q.duration(this.opt("scrollTime"));b=this.timeGrid.computeTimeTop(b);return b=Math.ceil(b),b&&b++,{top:b}},c.prototype.queryDateScroll=
function(){return{top:this.scroller.getScrollTop()}},c.prototype.applyDateScroll=function(b){void 0!==b.top&&this.scroller.setScrollTop(b.top)},c.prototype.getHitFootprint=function(b){return b.component.getHitFootprint(b)},c.prototype.getHitEl=function(b){return b.component.getHitEl(b)},c.prototype.executeEventRender=function(b){var c,e={},f={};for(c in b){var h=b[c];h.getEventDef().isAllDay()?e[c]=h:f[c]=h}this.timeGrid.executeEventRender(f);this.dayGrid&&this.dayGrid.executeEventRender(e)},c.prototype.renderDrag=
function(b,c,f){b=e(b);var h=!1;return h=this.timeGrid.renderDrag(b.timed,c,f),this.dayGrid&&(h=this.dayGrid.renderDrag(b.allDay,c,f)||h),h},c.prototype.renderEventResize=function(b,c,f){b=e(b);this.timeGrid.renderEventResize(b.timed,c,f);this.dayGrid&&this.dayGrid.renderEventResize(b.allDay,c,f)},c.prototype.renderSelectionFootprint=function(b){b.isAllDay?this.dayGrid&&this.dayGrid.renderSelectionFootprint(b):this.timeGrid.renderSelectionFootprint(b)},c}(n.default);f.default=n;n.prototype.timeGridClass=
b.default;n.prototype.dayGridClass=c.default;var y={renderHeadIntroHtml:function(){var b,c=this.view,e=c.calendar,f=e.msToUtcMoment(this.dateProfile.renderUnzonedRange.startMs,!0);return this.opt("weekNumbers")?(b=f.format(this.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+e.theme.getClass("widgetHeader")+'" '+c.axisStyleAttr()+">"+c.buildGotoAnchorHtml({date:f,type:"week",forceOff:1<this.colCnt},m.htmlEscape(b))+"</th>"):'<th class="fc-axis '+e.theme.getClass("widgetHeader")+'" '+
c.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var b=this.view;return'<td class="fc-axis '+b.calendar.theme.getClass("widgetContent")+'" '+b.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}};var w={renderBgIntroHtml:function(){var b=this.view;return'<td class="fc-axis '+b.calendar.theme.getClass("widgetContent")+'" '+b.axisStyleAttr()+"><span>"+b.getAllDayHtml()+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+
this.view.axisStyleAttr()+"></td>"}}},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(0),k=c(4),m=c(42);b=c(61);var r=c(65),n=c(60),y=c(58),w=c(5),x=c(12),h=c(240),A=c(241);c=c(242);var z=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];m=function(b){function c(c){c=b.call(this,c)||this;return c.processOptions(),c}return e.__extends(c,b),c.prototype.componentFootprintToSegs=function(b){var c=this.sliceRangeByTimes(b.unzonedRange);for(b=0;b<c.length;b++)this.isRTL?
c[b].col=this.daysPerRow-1-c[b].dayIndex:c[b].col=c[b].dayIndex;return c},c.prototype.sliceRangeByTimes=function(b){var c,g,e=[];for(g=0;g<this.daysPerRow;g++)(c=b.intersect(this.dayRanges[g]))&&e.push({startMs:c.startMs,endMs:c.endMs,isStart:c.isStart,isEnd:c.isEnd,dayIndex:g});return e},c.prototype.processOptions=function(){var b=this.opt("slotDuration");var c=this.opt("snapDuration");b=q.duration(b);c=c?q.duration(c):b;this.slotDuration=b;this.snapDuration=c;this.snapsPerSlot=b/c;c=this.opt("slotLabelFormat");
l.isArray(c)&&(c=c[c.length-1]);this.labelFormat=c||this.opt("smallTimeFormat");this.labelInterval=(c=this.opt("slotLabelInterval"))?q.duration(c):this.computeLabelInterval(b)},c.prototype.computeLabelInterval=function(b){var c,g,e;for(c=z.length-1;0<=c;c--)if(g=q.duration(z[c]),e=k.divideDurationByDuration(g,b),k.isInt(e)&&1<e)return g;return q.duration(b)},c.prototype.renderDates=function(b){this.dateProfile=b;this.updateDayTable();this.renderSlats();this.renderColumns()},c.prototype.unrenderDates=
function(){this.unrenderColumns()},c.prototype.renderSkeleton=function(){this.el.html('<div class="fc-bg"></div><div class="fc-slats"></div><hr class="fc-divider '+this.view.calendar.theme.getClass("widgetHeader")+'" style="display:none" />');this.bottomRuleEl=this.el.find("hr")},c.prototype.renderSlats=function(){var b=this.view.calendar.theme;this.slatContainerEl=this.el.find("> .fc-slats").html('<table class="'+b.getClass("tableGrid")+'">'+this.renderSlatRowHtml()+"</table>");this.slatEls=this.slatContainerEl.find("tr");
this.slatCoordCache=new y.default({els:this.slatEls,isVertical:!0})},c.prototype.renderSlatRowHtml=function(){for(var b,c,g,e=this.view,f=e.calendar,h=f.theme,l=this.isRTL,m=this.dateProfile,n="",r=q.duration(+m.minTime),w=q.duration(0);r<m.maxTime;)b=f.msToUtcMoment(m.renderUnzonedRange.startMs).time(r),c=k.isInt(k.divideDurationByDuration(w,this.labelInterval)),g='<td class="fc-axis fc-time '+h.getClass("widgetContent")+'" '+e.axisStyleAttr()+">"+(c?"<span>"+k.htmlEscape(b.format(this.labelFormat))+
"</span>":"")+"</td>",n+='<tr data-time="'+b.format("HH:mm:ss")+'"'+(c?"":' class="fc-minor"')+">"+(l?"":g)+'<td class="'+h.getClass("widgetContent")+'"/>'+(l?g:"")+"</tr>",r.add(this.slotDuration),w.add(this.slotDuration);return n},c.prototype.renderColumns=function(){var b=this.dateProfile,c=this.view.calendar.theme;this.dayRanges=this.dayDates.map(function(c){return new w.default(c.clone().add(b.minTime),c.clone().add(b.maxTime))});this.headContainerEl&&this.headContainerEl.html(this.renderHeadHtml());
this.el.find("> .fc-bg").html('<table class="'+c.getClass("tableGrid")+'">'+this.renderBgTrHtml(0)+"</table>");this.colEls=this.el.find(".fc-day, .fc-disabled-day");this.colCoordCache=new y.default({els:this.colEls,isHorizontal:!0});this.renderContentSkeleton()},c.prototype.unrenderColumns=function(){this.unrenderContentSkeleton()},c.prototype.renderContentSkeleton=function(){var b,c="";for(b=0;b<this.colCnt;b++)c+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';
b=this.contentSkeletonEl=l('<div class="fc-content-skeleton"><table><tr>'+c+"</tr></table></div>");this.colContainerEls=b.find(".fc-content-col");this.helperContainerEls=b.find(".fc-helper-container");this.fgContainerEls=b.find(".fc-event-container:not(.fc-helper-container)");this.bgContainerEls=b.find(".fc-bgevent-container");this.highlightContainerEls=b.find(".fc-highlight-container");this.businessContainerEls=b.find(".fc-business-container");this.bookendCells(b.find("tr"));this.el.append(b)},c.prototype.unrenderContentSkeleton=
function(){this.contentSkeletonEl&&(this.contentSkeletonEl.remove(),this.contentSkeletonEl=null,this.colContainerEls=null,this.helperContainerEls=null,this.fgContainerEls=null,this.bgContainerEls=null,this.highlightContainerEls=null,this.businessContainerEls=null)},c.prototype.groupSegsByCol=function(b){var c,g=[];for(c=0;c<this.colCnt;c++)g.push([]);for(c=0;c<b.length;c++)g[b[c].col].push(b[c]);return g},c.prototype.attachSegsByCol=function(b,c){var g,e;for(g=0;g<this.colCnt;g++){var f=b[g];for(e=
0;e<f.length;e++)c.eq(g).append(f[e].el)}},c.prototype.getNowIndicatorUnit=function(){return"minute"},c.prototype.renderNowIndicator=function(b){if(this.colContainerEls){var c=this.componentFootprintToSegs(new x.default(new w.default(b,b.valueOf()+1),!1)),g=this.computeDateTop(b,b),e=[];for(b=0;b<c.length;b++)e.push(l('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",g).appendTo(this.colContainerEls.eq(c[b].col))[0]);0<c.length&&e.push(l('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",
g).appendTo(this.el.find(".fc-content-skeleton"))[0]);this.nowIndicatorEls=l(e)}},c.prototype.unrenderNowIndicator=function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},c.prototype.updateSize=function(c,e,g){b.prototype.updateSize.call(this,c,e,g);this.slatCoordCache.build();g&&this.updateSegVerticals([].concat(this.eventRenderer.getSegs(),this.businessSegs||[]))},c.prototype.getTotalSlatHeight=function(){return this.slatContainerEl.outerHeight()},c.prototype.computeDateTop=
function(b,c){return this.computeTimeTop(q.duration(b-c.clone().stripTime()))},c.prototype.computeTimeTop=function(b){var c,g,e=this.slatEls.length;b=(b-this.dateProfile.minTime)/this.slotDuration;return b=Math.max(0,b),b=Math.min(e,b),c=Math.floor(b),c=Math.min(c,e-1),g=b-c,this.slatCoordCache.getTopPosition(c)+this.slatCoordCache.getHeight(c)*g},c.prototype.updateSegVerticals=function(b){this.computeSegVerticals(b);this.assignSegVerticals(b)},c.prototype.computeSegVerticals=function(b){var c,g=
this.opt("agendaEventMinHeight");for(c=0;c<b.length;c++){var e=b[c];var f=this.dayDates[e.dayIndex];e.top=this.computeDateTop(e.startMs,f);e.bottom=Math.max(e.top+g,this.computeDateTop(e.endMs,f))}},c.prototype.assignSegVerticals=function(b){var c;for(c=0;c<b.length;c++){var g=b[c];g.el.css(this.generateSegVerticalCss(g))}},c.prototype.generateSegVerticalCss=function(b){return{top:b.top,bottom:-b.bottom}},c.prototype.prepareHits=function(){this.colCoordCache.build();this.slatCoordCache.build()},c.prototype.releaseHits=
function(){this.colCoordCache.clear()},c.prototype.queryHit=function(b,c){var g=this.snapsPerSlot,e=this.colCoordCache,f=this.slatCoordCache;if(e.isLeftInBounds(b)&&f.isTopInBounds(c)){b=e.getHorizontalIndex(b);var h=f.getVerticalIndex(c);if(null!=b&&null!=h){var k=f.getTopOffset(h);f=f.getHeight(h);c=Math.floor((c-k)/f*g);var l=k+c/g*f;k+=(c+1)/g*f;return{col:b,snap:h*g+c,component:this,left:e.getLeftOffset(b),right:e.getRightOffset(b),top:l,bottom:k}}}},c.prototype.getHitFootprint=function(b){var c,
g=this.getCellDate(0,b.col);b=this.computeSnapTime(b.snap);return g.time(b),c=g.clone().add(this.snapDuration),new x.default(new w.default(g,c),!1)},c.prototype.computeSnapTime=function(b){return q.duration(this.dateProfile.minTime+this.snapDuration*b)},c.prototype.getHitEl=function(b){return this.colEls.eq(b.col)},c.prototype.renderDrag=function(b,c,g){if(c){if(b.length)return this.helperRenderer.renderEventDraggingFootprints(b,c,g),!0}else for(c=0;c<b.length;c++)this.renderHighlight(b[c].componentFootprint)},
c.prototype.unrenderDrag=function(){this.unrenderHighlight();this.helperRenderer.unrender()},c.prototype.renderEventResize=function(b,c,g){this.helperRenderer.renderEventResizingFootprints(b,c,g)},c.prototype.unrenderEventResize=function(){this.helperRenderer.unrender()},c.prototype.renderSelectionFootprint=function(b){this.opt("selectHelper")?this.helperRenderer.renderComponentFootprint(b):this.renderHighlight(b)},c.prototype.unrenderSelection=function(){this.helperRenderer.unrender();this.unrenderHighlight()},
c}(m.default);f.default=m;m.prototype.eventRendererClass=h.default;m.prototype.businessHourRendererClass=b.default;m.prototype.helperRendererClass=A.default;m.prototype.fillRendererClass=c.default;r.default.mixInto(m);n.default.mixInto(m)},function(b,f,c){function e(b){var c,f=b.forwardSegs,k=0;if(void 0===b.forwardPressure){for(c=0;c<f.length;c++){var l=f[c];e(l);k=Math.max(k,1+l.forwardPressure)}b.forwardPressure=k}}function l(b,c,e){void 0===e&&(e=[]);for(var f=0;f<c.length;f++){var k=c[f];b.bottom>
k.top&&b.top<k.bottom&&e.push(c[f])}return e}Object.defineProperty(f,"__esModule",{value:!0});var q=c(2),k=c(4);b=function(b){function c(c,e){e=b.call(this,c,e)||this;return e.timeGrid=c,e}return q.__extends(c,b),c.prototype.renderFgSegs=function(b){this.renderFgSegsIntoContainers(b,this.timeGrid.fgContainerEls)},c.prototype.renderFgSegsIntoContainers=function(b,c){var e;b=this.timeGrid.groupSegsByCol(b);for(e=0;e<this.timeGrid.colCnt;e++)this.updateFgSegCoords(b[e]);this.timeGrid.attachSegsByCol(b,
c)},c.prototype.unrenderFgSegs=function(){this.fgSegs&&this.fgSegs.forEach(function(b){b.el.remove()})},c.prototype.computeEventTimeFormat=function(){return this.opt("noMeridiemTimeFormat")},c.prototype.computeDisplayEventEnd=function(){return!0},c.prototype.fgSegHtml=function(b,c){var e=this.view,f=e.calendar,h=b.footprint.componentFootprint,l=h.isAllDay,m=b.footprint.eventDef,n=e.isEventDefDraggable(m),r=!c&&b.isStart&&e.isEventDefResizableFromStart(m);c=!c&&b.isEnd&&e.isEventDefResizableFromEnd(m);
n=this.getSegClasses(b,n,r||c);r=k.cssToStr(this.getSkinCss(m));if(n.unshift("fc-time-grid-event","fc-v-event"),e.isMultiDayRange(h.unzonedRange)){if(b.isStart||b.isEnd){var t=f.msToMoment(b.startMs);b=f.msToMoment(b.endMs);var q=this._getTimeText(t,b,l);var g=this._getTimeText(t,b,l,"LT");t=this._getTimeText(t,b,l,null,!1)}}else q=this.getTimeText(b.footprint),g=this.getTimeText(b.footprint,"LT"),t=this.getTimeText(b.footprint,null,!1);return'<a class="'+n.join(" ")+'"'+(m.url?' href="'+k.htmlEscape(m.url)+
'"':"")+(r?' style="'+r+'"':"")+'><div class="fc-content">'+(q?'<div class="fc-time" data-start="'+k.htmlEscape(t)+'" data-full="'+k.htmlEscape(g)+'"><span>'+k.htmlEscape(q)+"</span></div>":"")+(m.title?'<div class="fc-title">'+k.htmlEscape(m.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(c?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},c.prototype.updateFgSegCoords=function(b){this.timeGrid.computeSegVerticals(b);this.computeFgSegHorizontals(b);this.timeGrid.assignSegVerticals(b);this.assignFgSegHorizontals(b)},
c.prototype.computeFgSegHorizontals=function(b){this.sortEventSegs(b);var c,f;var k=[];for(c=0;c<b.length;c++){var h=b[c];for(f=0;f<k.length&&l(h,k[f]).length;f++);h.level=f;(k[f]||(k[f]=[])).push(h)}var m;for(b=0;b<k.length;b++)for(c=k[b],h=0;h<c.length;h++)for(f=c[h],f.forwardSegs=[],m=b+1;m<k.length;m++)l(f,k[m],f.forwardSegs);if(k=k[0]){for(b=0;b<k.length;b++)e(k[b]);for(b=0;b<k.length;b++)this.computeFgSegForwardBack(k[b],0,0)}},c.prototype.computeFgSegForwardBack=function(b,c,e){var f=b.forwardSegs;
if(void 0===b.forwardCoord)for(f.length?(this.sortForwardSegs(f),this.computeFgSegForwardBack(f[0],c+1,e),b.forwardCoord=f[0].backwardCoord):b.forwardCoord=1,b.backwardCoord=b.forwardCoord-(b.forwardCoord-e)/(c+1),c=0;c<f.length;c++)this.computeFgSegForwardBack(f[c],0,b.forwardCoord)},c.prototype.sortForwardSegs=function(b){b.sort(k.proxy(this,"compareForwardSegs"))},c.prototype.compareForwardSegs=function(b,c){return c.forwardPressure-b.forwardPressure||(b.backwardCoord||0)-(c.backwardCoord||0)||
this.compareEventSegs(b,c)},c.prototype.assignFgSegHorizontals=function(b){var c;for(c=0;c<b.length;c++){var e=b[c];e.el.css(this.generateFgSegHorizontalCss(e));e.footprint.eventDef.title&&30>e.bottom-e.top&&e.el.addClass("fc-short")}},c.prototype.generateFgSegHorizontalCss=function(b){var c,e,f=this.opt("slotEventOverlap"),h=b.backwardCoord,k=b.forwardCoord,l=this.timeGrid.generateSegVerticalCss(b),m=this.timeGrid.isRTL;return f&&(k=Math.min(1,h+2*(k-h))),m?(c=1-k,e=h):(c=h,e=1-k),l.zIndex=b.level+
1,l.left=100*c+"%",l.right=100*e+"%",f&&b.forwardPressure&&(l[m?"marginLeft":"marginRight"]=20),l},c}(c(44).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.renderSegs=function(b,c){var e,f,k=[];this.eventRenderer.renderFgSegsIntoContainers(b,this.component.helperContainerEls);for(e=0;e<b.length;e++){var m=b[e];c&&c.col===m.col&&(f=c.el,
m.el.css({left:f.css("left"),right:f.css("right"),"margin-left":f.css("margin-left"),"margin-right":f.css("margin-right")}));k.push(m.el[0])}return l(k)},c}(c(63).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.attachSegEls=function(b,c){var e,f=this.component;return"bgEvent"===b?e=f.bgContainerEls:"businessHours"===b?e=f.businessContainerEls:
"highlight"===b&&(e=f.highlightContainerEls),f.updateSegVerticals(c),f.attachSegsByCol(f.groupSegsByCol(c),e),c.map(function(b){return b.el[0]})},c}(c(62).default);f.default=b},function(b,f,c){function e(b,c){var e,f;for(e=0;e<c.length;e++)if(f=c[e],f.leftCol<=b.rightCol&&f.rightCol>=b.leftCol)return!0;return!1}function l(b,c){return b.leftCol-c.leftCol}Object.defineProperty(f,"__esModule",{value:!0});var q=c(2),k=c(3),m=c(4);b=function(b){function c(c,e){e=b.call(this,c,e)||this;return e.dayGrid=
c,e}return q.__extends(c,b),c.prototype.renderBgRanges=function(c){c=k.grep(c,function(b){return b.eventDef.isAllDay()});b.prototype.renderBgRanges.call(this,c)},c.prototype.renderFgSegs=function(b){var c=this.rowStructs=this.renderSegRows(b);this.dayGrid.rowEls.each(function(b,e){k(e).find(".fc-content-skeleton > table").append(c[b].tbodyEl)})},c.prototype.unrenderFgSegs=function(){for(var b,c=this.rowStructs||[];b=c.pop();)b.tbodyEl.remove();this.rowStructs=null},c.prototype.renderSegRows=function(b){var c,
e=[];b=this.groupSegRows(b);for(c=0;c<b.length;c++)e.push(this.renderSegRow(c,b[c]));return e},c.prototype.renderSegRow=function(b,c){function e(b){for(;m<b;)(P=(y[f-1]||[])[m])?P.attr("rowspan",parseInt(P.attr("rowspan")||1,10)+1):(P=k("<td/>"),n.append(P)),q[f][m]=P,y[f][m]=P,m++}var f,l,m,n,r,t=this.dayGrid.colCnt,w=this.buildSegLevels(c),g=Math.max(1,w.length),u=k("<tbody/>"),G=[],q=[],y=[];for(f=0;f<g;f++){if(l=w[f],m=0,n=k("<tr/>"),G.push([]),q.push([]),y.push([]),l)for(r=0;r<l.length;r++){var v=
l[r];e(v.leftCol);var P=k('<td class="fc-event-container"/>').append(v.el);for(v.leftCol!==v.rightCol?P.attr("colspan",v.rightCol-v.leftCol+1):y[f][m]=P;m<=v.rightCol;)q[f][m]=P,G[f][m]=v,m++;n.append(P)}e(t);this.dayGrid.bookendCells(n);u.append(n)}return{row:b,tbodyEl:u,cellMatrix:q,segMatrix:G,segLevels:w,segs:c}},c.prototype.buildSegLevels=function(b){var c,f,h=[];this.sortEventSegs(b);for(c=0;c<b.length;c++){var k=b[c];for(f=0;f<h.length&&e(k,h[f]);f++);k.level=f;(h[f]||(h[f]=[])).push(k)}for(f=
0;f<h.length;f++)h[f].sort(l);return h},c.prototype.groupSegRows=function(b){var c,e=[];for(c=0;c<this.dayGrid.rowCnt;c++)e.push([]);for(c=0;c<b.length;c++)e[b[c].row].push(b[c]);return e},c.prototype.computeEventTimeFormat=function(){return this.opt("extraSmallTimeFormat")},c.prototype.computeDisplayEventEnd=function(){return 1===this.dayGrid.colCnt},c.prototype.fgSegHtml=function(b,c){var e,f,k=this.view,l=b.footprint.eventDef,n=b.footprint.componentFootprint.isAllDay,r=k.isEventDefDraggable(l),
t=!c&&n&&b.isStart&&k.isEventDefResizableFromStart(l);c=!c&&n&&b.isEnd&&k.isEventDefResizableFromEnd(l);r=this.getSegClasses(b,r,t||c);k=m.cssToStr(this.getSkinCss(l));n="";return r.unshift("fc-day-grid-event","fc-h-event"),b.isStart&&(e=this.getTimeText(b.footprint))&&(n='<span class="fc-time">'+m.htmlEscape(e)+"</span>"),f='<span class="fc-title">'+(m.htmlEscape(l.title||"")||"&nbsp;")+"</span>",'<a class="'+r.join(" ")+'"'+(l.url?' href="'+m.htmlEscape(l.url)+'"':"")+(k?' style="'+k+'"':"")+'><div class="fc-content">'+
(this.dayGrid.isRTL?f+" "+n:n+" "+f)+"</div>"+(t?'<div class="fc-resizer fc-start-resizer" />':"")+(c?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},c}(c(44).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.renderSegs=function(b,c){var e,f=[];return e=this.eventRenderer.renderSegRows(b),this.component.rowEls.each(function(b,
k){var h,m;k=l(k);var n=l('<div class="fc-helper-skeleton"><table/></div>');c&&c.row===b?m=c.el.position().top:(h=k.find(".fc-content-skeleton tbody"),h.length||(h=k.find(".fc-content-skeleton table")),m=h.position().top);n.css("top",m).find("table").append(e[b].tbodyEl);k.append(n);f.push(n[0])}),l(f)},c}(c(63).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3);b=function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;return c.fillSegTag=
"td",c}return e.__extends(c,b),c.prototype.attachSegEls=function(b,c){var e,f=[];for(e=0;e<c.length;e++){var k=c[e];var l=this.renderFillRow(b,k);this.component.rowEls.eq(k.row).append(l);f.push(l[0])}return f},c.prototype.renderFillRow=function(b,c){var e,f,k,m=this.component.colCnt,h=c.leftCol,r=c.rightCol+1;return e="businessHours"===b?"bgevent":b.toLowerCase(),f=l('<div class="fc-'+e+'-skeleton"><table><tr/></table></div>'),k=f.find("tr"),0<h&&k.append(Array(h+1).join("<td/>")),k.append(c.el.attr("colspan",
r-h)),r<m&&k.append(Array(m-r+1).join("<td/>")),this.component.bookendCells(k),f},c}(c(62).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(0),q=c(4);b=c(67);c=c(247);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.setGridHeight=function(b,c){c&&(b*=this.dayGrid.rowCnt/6);q.distributeHeight(this.dayGrid.rowEls,b,!c)},c.prototype.isDateInOtherMonth=function(b,c){return b.month()!==l.utc(c.currentUnzonedRange.startMs).month()},
c}(b.default);f.default=b;b.prototype.dateProfileGeneratorClass=c.default},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=c(68);var l=c(5);c=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.buildRenderRange=function(c,e,f){var k;e=b.prototype.buildRenderRange.call(this,c,e,f);c=this.msToUtcMoment(e.startMs,f);f=this.msToUtcMoment(e.endMs,f);return this.opt("fixedWeekCount")&&(k=Math.ceil(f.diff(c,"weeks",!0)),
f.add(6-k,"weeks")),new l.default(c,f)},c}(b.default);f.default=c},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(4),k=c(5),m=c(43),r=c(41);b=c(249);c=c(250);m=function(b){function c(c,e){c=b.call(this,c,e)||this;return c.segSelector=".fc-list-item",c.scroller=new r.default({overflowX:"hidden",overflowY:"auto"}),c}return e.__extends(c,b),c.prototype.renderSkeleton=function(){this.el.addClass("fc-list-view "+this.calendar.theme.getClass("listView"));this.scroller.render();
this.scroller.el.appendTo(this.el);this.contentEl=this.scroller.scrollEl},c.prototype.unrenderSkeleton=function(){this.scroller.destroy()},c.prototype.updateSize=function(c,e,f){b.prototype.updateSize.call(this,c,e,f);this.scroller.clear();e||this.scroller.setHeight(this.computeScrollerHeight(c))},c.prototype.computeScrollerHeight=function(b){return b-q.subtractInnerElHeight(this.el,this.scroller.el)},c.prototype.renderDates=function(b){var c=this.calendar,e=c.msToUtcMoment(b.renderUnzonedRange.startMs,
!0);b=c.msToUtcMoment(b.renderUnzonedRange.endMs,!0);c=[];for(var f=[];e<b;)c.push(e.clone()),f.push(new k.default(e,e.clone().add(1,"day"))),e.add(1,"day");this.dayDates=c;this.dayRanges=f},c.prototype.componentFootprintToSegs=function(b){var c,e,f,k=this.dayRanges,l=[];for(c=0;c<k.length;c++)if((e=b.unzonedRange.intersect(k[c]))&&(f={startMs:e.startMs,endMs:e.endMs,isStart:e.isStart,isEnd:e.isEnd,dayIndex:c},l.push(f),!f.isEnd&&!b.isAllDay&&c+1<k.length&&b.unzonedRange.endMs<k[c+1].startMs+this.nextDayThreshold)){f.endMs=
b.unzonedRange.endMs;f.isEnd=!0;break}return l},c.prototype.renderEmptyMessage=function(){this.contentEl.html('<div class="fc-list-empty-wrap2"><div class="fc-list-empty-wrap1"><div class="fc-list-empty">'+q.htmlEscape(this.opt("noEventsMessage"))+"</div></div></div>")},c.prototype.renderSegList=function(b){var c,e,f=this.groupSegsByDay(b),k=l('<table class="fc-list-table '+this.calendar.theme.getClass("tableList")+'"><tbody/></table>'),m=k.find("tbody");for(b=0;b<f.length;b++)if(c=f[b])for(m.append(this.dayHeaderHtml(this.dayDates[b])),
this.eventRenderer.sortEventSegs(c),e=0;e<c.length;e++)m.append(c[e].el);this.contentEl.empty().append(k)},c.prototype.groupSegsByDay=function(b){var c,e=[];for(c=0;c<b.length;c++){var f=b[c];(e[f.dayIndex]||(e[f.dayIndex]=[])).push(f)}return e},c.prototype.dayHeaderHtml=function(b){var c=this.opt("listDayFormat"),e=this.opt("listDayAltFormat");return'<tr class="fc-list-heading" data-date="'+b.format("YYYY-MM-DD")+'"><td class="'+(this.calendar.theme.getClass("tableListHeading")||this.calendar.theme.getClass("widgetHeader"))+
'" colspan="3">'+(c?this.buildGotoAnchorHtml(b,{class:"fc-list-heading-main"},q.htmlEscape(b.format(c))):"")+(e?this.buildGotoAnchorHtml(b,{class:"fc-list-heading-alt"},q.htmlEscape(b.format(e))):"")+"</td></tr>"},c}(m.default);f.default=m;m.prototype.eventRendererClass=b.default;m.prototype.eventPointingClass=c.default},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(4);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,
b),c.prototype.renderFgSegs=function(b){b.length?this.component.renderSegList(b):this.component.renderEmptyMessage()},c.prototype.fgSegHtml=function(b){var c,e=this.view,f=e.calendar,k=f.theme,m=b.footprint,h=m.eventDef,t=m.componentFootprint,q=h.url,v=["fc-list-item"].concat(this.getClasses(h)),D=this.getBgColor(h);return c=t.isAllDay?e.getAllDayHtml():e.isMultiDayRange(t.unzonedRange)?b.isStart||b.isEnd?l.htmlEscape(this._getTimeText(f.msToMoment(b.startMs),f.msToMoment(b.endMs),t.isAllDay)):e.getAllDayHtml():
l.htmlEscape(this.getTimeText(m)),q&&v.push("fc-has-url"),'<tr class="'+v.join(" ")+'">'+(this.displayEventTime?'<td class="fc-list-item-time '+k.getClass("widgetContent")+'">'+(c||"")+"</td>":"")+'<td class="fc-list-item-marker '+k.getClass("widgetContent")+'"><span class="fc-event-dot"'+(D?' style="background-color:'+D+'"':"")+'></span></td><td class="fc-list-item-title '+k.getClass("widgetContent")+'"><a'+(q?' href="'+l.htmlEscape(q)+'"':"")+">"+l.htmlEscape(h.title||"")+"</a></td></tr>"},c.prototype.computeEventTimeFormat=
function(){return this.opt("mediumTimeFormat")},c}(c(44).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c.prototype.handleClick=function(c,e){var f;b.prototype.handleClick.call(this,c,e);l(e.target).closest("a[href]").length||(f=c.footprint.eventDef.url)&&!e.isDefaultPrevented()&&(window.location.href=f)},c}(c(64).default);f.default=b},,,,,,function(b,
f,c){var e=c(3);f=c(18);var l=c(4),q=c(232);c(11);c(49);c(260);c(261);c(264);c(265);c(266);c(267);e.fullCalendar=f;e.fn.fullCalendar=function(b){var c=Array.prototype.slice.call(arguments,1),f=this;return this.each(function(k,m){var n;m=e(m);var r=m.data("fullCalendar");"string"==typeof b?"getCalendar"===b?k||(f=r):"destroy"===b?r&&(r.destroy(),m.removeData("fullCalendar")):r?e.isFunction(r[b])?(n=r[b].apply(r,c),k||(f=n),"destroy"===b&&m.removeData("fullCalendar")):l.warn("'"+b+"' is an unknown FullCalendar method."):
l.warn("Attempting to call a FullCalendar method on an element with no calendar."):r||(r=new q.default(m,b),m.data("fullCalendar",r),r.render())}),f};b.exports=f},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(3),l=c(4);b=function(){function b(b,c){this.el=null;this.viewsWithButtons=[];this.calendar=b;this.toolbarOptions=c}return b.prototype.setToolbarOptions=function(b){this.toolbarOptions=b},b.prototype.render=function(){var b=this.el;this.toolbarOptions.layout?(b?b.empty():
b=this.el=e("<div class='fc-toolbar "+this.toolbarOptions.extraClasses+"'/>"),b.append(this.renderSection("left")).append(this.renderSection("right")).append(this.renderSection("center")).append('<div class="fc-clear"/>')):this.removeElement()},b.prototype.removeElement=function(){this.el&&(this.el.remove(),this.el=null)},b.prototype.renderSection=function(b){var c=this,f=this.calendar,k=f.theme,t=f.optionsManager,q=f.viewSpecManager,v=e('<div class="fc-'+b+'"/>');b=this.toolbarOptions.layout[b];
var h=t.get("customButtons")||{},A=t.overrides.buttonText||{},z=t.get("buttonText")||{};return b&&e.each(b.split(" "),function(b,m){var n,r=e(),g=!0;e.each(m.split(","),function(b,m){var u,n,t,G,w,v,y,x,I;"title"===m?(r=r.add(e("<h2>&nbsp;</h2>")),g=!1):((u=h[m])?(t=function(b){u.click&&u.click.call(x[0],b)},(G=k.getCustomButtonIconClass(u))||(G=k.getIconClass(m))||(w=u.text)):(n=q.getViewSpec(m))?(c.viewsWithButtons.push(m),t=function(){f.changeView(m)},(w=n.buttonTextOverride)||(G=k.getIconClass(m))||
(w=n.buttonTextDefault)):f[m]&&(t=function(){f[m]()},(w=A[m])||(G=k.getIconClass(m))||(w=z[m])),t&&(y=["fc-"+m+"-button",k.getClass("button"),k.getClass("stateDefault")],w?(v=l.htmlEscape(w),I=""):G&&(v="<span class='"+G+"'></span>",I=' aria-label="'+m+'"'),x=e('<button type="button" class="'+y.join(" ")+'"'+I+">"+v+"</button>").click(function(b){x.hasClass(k.getClass("stateDisabled"))||(t(b),(x.hasClass(k.getClass("stateActive"))||x.hasClass(k.getClass("stateDisabled")))&&x.removeClass(k.getClass("stateHover")))}).mousedown(function(){x.not("."+
k.getClass("stateActive")).not("."+k.getClass("stateDisabled")).addClass(k.getClass("stateDown"))}).mouseup(function(){x.removeClass(k.getClass("stateDown"))}).hover(function(){x.not("."+k.getClass("stateActive")).not("."+k.getClass("stateDisabled")).addClass(k.getClass("stateHover"))},function(){x.removeClass(k.getClass("stateHover")).removeClass(k.getClass("stateDown"))}),r=r.add(x)))});g&&r.first().addClass(k.getClass("cornerLeft")).end().last().addClass(k.getClass("cornerRight")).end();1<r.length?
(n=e("<div/>"),g&&n.addClass(k.getClass("buttonGroup")),n.append(r),v.append(n)):v.append(r)}),v},b.prototype.updateTitle=function(b){this.el&&this.el.find("h2").text(b)},b.prototype.activateButton=function(b){this.el&&this.el.find(".fc-"+b+"-button").addClass(this.calendar.theme.getClass("stateActive"))},b.prototype.deactivateButton=function(b){this.el&&this.el.find(".fc-"+b+"-button").removeClass(this.calendar.theme.getClass("stateActive"))},b.prototype.disableButton=function(b){this.el&&this.el.find(".fc-"+
b+"-button").prop("disabled",!0).addClass(this.calendar.theme.getClass("stateDisabled"))},b.prototype.enableButton=function(b){this.el&&this.el.find(".fc-"+b+"-button").prop("disabled",!1).removeClass(this.calendar.theme.getClass("stateDisabled"))},b.prototype.getViewsWithButtons=function(){return this.viewsWithButtons},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2),l=c(3),q=c(4),k=c(33),m=c(32);b=function(b){function c(c,e){var f=b.call(this)||this;
return f._calendar=c,f.overrides=l.extend({},e),f.dynamicOverrides={},f.compute(),f}return e.__extends(c,b),c.prototype.add=function(b){var c,e=0;this.recordOverrides(b);for(c in b)e++;if(1===e){if("height"===c||"contentHeight"===c||"aspectRatio"===c)return void this._calendar.updateViewSize(!0);if("defaultDate"===c||"businessHours"===c||/^(event|select)(Overlap|Constraint|Allow)$/.test(c))return;if("timezone"===c)return void this._calendar.view.flash("initialEvents")}this._calendar.renderHeader();
this._calendar.renderFooter();this._calendar.viewsByType={};this._calendar.reinitView()},c.prototype.compute=function(){var b;var c=q.firstDefined(this.dynamicOverrides.locale,this.overrides.locale);(b=m.localeOptionHash[c])||(c=k.globalDefaults.locale,b=m.localeOptionHash[c]||{});this.dirDefaults=c=q.firstDefined(this.dynamicOverrides.isRTL,this.overrides.isRTL,b.isRTL,k.globalDefaults.isRTL)?k.rtlDefaults:{};this.localeDefaults=b;b=k.mergeOptions([k.globalDefaults,c,b,this.overrides,this.dynamicOverrides]);
m.populateInstanceComputableOptions(b);this.reset(b)},c.prototype.recordOverrides=function(b){for(var c in b)this.dynamicOverrides[c]=b[c];this._calendar.viewSpecManager.clearCache();this.compute()},c}(c(51).default);f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(0),l=c(3),q=c(24),k=c(4),m=c(33),r=c(32);b=function(){function b(b,c){this.optionsManager=b;this._calendar=c;this.clearCache()}return b.prototype.clearCache=function(){this.viewSpecCache={}},b.prototype.getViewSpec=
function(b){var c=this.viewSpecCache;return c[b]||(c[b]=this.buildViewSpec(b))},b.prototype.getUnitViewSpec=function(b){var c,e;if(-1!==l.inArray(b,k.unitsDesc)){var f=this._calendar.header.getViewsWithButtons();l.each(q.viewHash,function(b){f.push(b)});for(c=0;c<f.length;c++)if((e=this.getViewSpec(f[c]))&&e.singleUnit===b)return e}},b.prototype.buildViewSpec=function(b){for(var c,f,h,l,n,r=this.optionsManager.overrides.views||{},t=[],v=[],y=[],g=b;g;)c=q.viewHash[g],f=r[g],g=null,"function"==typeof c&&
(c={class:c}),c&&(t.unshift(c),v.unshift(c.defaults||{}),h=h||c.duration,g=g||c.type),f&&(y.unshift(f),h=h||f.duration,g=g||f.type);return c=k.mergeProps(t),c.type=b,!!c.class&&(h=h||this.optionsManager.dynamicOverrides.duration||this.optionsManager.overrides.duration,h&&(l=e.duration(h),l.valueOf()&&(n=k.computeDurationGreatestUnit(l,h),c.duration=l,c.durationUnit=n,1===l.as(n)&&(c.singleUnit=n,y.unshift(r[n]||{})))),c.defaults=m.mergeOptions(v),c.overrides=m.mergeOptions(y),this.buildViewSpecOptions(c),
this.buildViewSpecButtonText(c,b),c)},b.prototype.buildViewSpecOptions=function(b){var c=this.optionsManager;b.options=m.mergeOptions([m.globalDefaults,b.defaults,c.dirDefaults,c.localeDefaults,c.overrides,b.overrides,c.dynamicOverrides]);r.populateInstanceComputableOptions(b.options)},b.prototype.buildViewSpecButtonText=function(b,c){function e(e){e=e.buttonText||{};return e[c]||(b.buttonTextKey?e[b.buttonTextKey]:null)||(b.singleUnit?e[b.singleUnit]:null)}var f=this.optionsManager;b.buttonTextOverride=
e(f.dynamicOverrides)||e(f.overrides)||b.overrides.buttonText;b.buttonTextDefault=e(f.localeDefaults)||e(f.dirDefaults)||b.defaults.buttonText||e(m.globalDefaults)||(b.duration?this._calendar.humanizeDuration(b.duration):null)||c},b}();f.default=b},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});b=c(38);f=c(56);var e=c(223);c=c(224);b.default.registerClass(f.default);b.default.registerClass(e.default);b.default.registerClass(c.default)},function(b,f,c){Object.defineProperty(f,"__esModule",
{value:!0});b=c(57);f=c(221);var e=c(222),l=c(262);c=c(263);b.defineThemeSystem("standard",f.default);b.defineThemeSystem("jquery-ui",e.default);b.defineThemeSystem("bootstrap3",l.default);b.defineThemeSystem("bootstrap4",c.default)},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c}(c(22).default);f.default=b;b.prototype.classes={widget:"fc-bootstrap3",tableGrid:"table-bordered",
tableList:"table",tableListHeading:"active",buttonGroup:"btn-group",button:"btn btn-default",stateActive:"active",stateDisabled:"disabled",today:"alert alert-info",popover:"panel panel-default",popoverHeader:"panel-heading",popoverContent:"panel-body",headerRow:"panel-default",dayRow:"panel-default",listView:"panel panel-default"};b.prototype.baseIconClass="glyphicon";b.prototype.iconClasses={close:"glyphicon-remove",prev:"glyphicon-chevron-left",next:"glyphicon-chevron-right",prevYear:"glyphicon-backward",
nextYear:"glyphicon-forward"};b.prototype.iconOverrideOption="bootstrapGlyphicons";b.prototype.iconOverrideCustomButtonOption="bootstrapGlyphicon";b.prototype.iconOverridePrefix="glyphicon-"},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});var e=c(2);b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return e.__extends(c,b),c}(c(22).default);f.default=b;b.prototype.classes={widget:"fc-bootstrap4",tableGrid:"table-bordered",tableList:"table",tableListHeading:"table-active",
buttonGroup:"btn-group",button:"btn btn-primary",stateActive:"active",stateDisabled:"disabled",today:"alert alert-info",popover:"card card-primary",popoverHeader:"card-header",popoverContent:"card-body",headerRow:"table-bordered",dayRow:"table-bordered",listView:"card card-primary"};b.prototype.baseIconClass="fa";b.prototype.iconClasses={close:"fa-times",prev:"fa-chevron-left",next:"fa-chevron-right",prevYear:"fa-angle-double-left",nextYear:"fa-angle-double-right"};b.prototype.iconOverrideOption=
"bootstrapFontAwesome";b.prototype.iconOverrideCustomButtonOption="bootstrapFontAwesome";b.prototype.iconOverridePrefix="fa-"},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});b=c(24);f=c(67);c=c(246);b.defineView("basic",{class:f.default});b.defineView("basicDay",{type:"basic",duration:{days:1}});b.defineView("basicWeek",{type:"basic",duration:{weeks:1}});b.defineView("month",{class:c.default,duration:{months:1},defaults:{fixedWeekCount:!0}})},function(b,f,c){Object.defineProperty(f,
"__esModule",{value:!0});b=c(24);c=c(238);b.defineView("agenda",{class:c.default,defaults:{allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0}});b.defineView("agendaDay",{type:"agenda",duration:{days:1}});b.defineView("agendaWeek",{type:"agenda",duration:{weeks:1}})},function(b,f,c){Object.defineProperty(f,"__esModule",{value:!0});b=c(24);c=c(248);b.defineView("list",{class:c.default,buttonTextKey:"list",defaults:{buttonText:"list",listDayFormat:"LL",noEventsMessage:"No events to display"}});
b.defineView("listDay",{type:"list",duration:{days:1},defaults:{listDayFormat:"dddd"}});b.defineView("listWeek",{type:"list",duration:{weeks:1},defaults:{listDayFormat:"dddd",listDayAltFormat:"LL"}});b.defineView("listMonth",{type:"list",duration:{month:1},defaults:{listDayAltFormat:"dddd"}});b.defineView("listYear",{type:"list",duration:{year:1},defaults:{listDayAltFormat:"dddd"}})},function(b,f){Object.defineProperty(f,"__esModule",{value:!0})}])});
function quickNotify(f,b,e){try{"granted"===Notification.permission?new Notification(f):("denied"!==Notification.permission||1==b)&&Notification.requestPermission().then(function(b){"granted"===b?new Notification(f):(console.log("The browser does not support notifications, or notifications were denied. Notifications disabled!"),e())})}catch(l){console.log("The browser does not support notifications, or notifications were denied. Notifications disabled!"),e()}}
(function(){polymorph_core.registerOperator("calendar",{displayName:"Calendar",description:"A simple calendar. Click on items to select them. (Does not yet support click-to-add but we'll get there one day.)"},function(f){var b=this;polymorph_core.operatorTemplate.call(this,f,{dateproperties:["datestring"],titleproperty:"title",defaultView:"agendaWeek"});this.rootdiv.style.cssText="height:100%; overflow-y: scroll";this.cstyle=htmlwrap('<link rel="stylesheet" type="text/css" href="3pt/fullcalendar.min.css"></link>');
this.rootdiv.appendChild(this.cstyle);$(this.rootdiv).fullCalendar({events:function(c,e,f,l){f=[];b.settings.pushnotifs&&(b.notifstack=[]);for(var k in polymorph_core.items){var m=new Date;try{for(var r=0;r<b.settings.dateproperties.length;r++)if(polymorph_core.items[k][b.settings.dateproperties[r]]&&polymorph_core.items[k][b.settings.dateproperties[r]].date)for(var n=dateParser.getCalendarTimes(polymorph_core.items[k][b.settings.dateproperties[r]].date,c,e),t=0;t<n.length;t++){"auto now"!=polymorph_core.items[k][b.settings.dateproperties[r]].datestring&&
b.notifstack.push({txt:polymorph_core.items[k][b.settings.titleproperty],time:n[t].date});var q=new Date(n[t].date-6E4*m.getTimezoneOffset()+1E3),v=void 0;v=n[t].endDate?new Date(n[t].endDate-6E4*m.getTimezoneOffset()-1E3):new Date(q.getTime()+36E5-1E3);q=q.toISOString();v=v.toISOString();var h="",A="";polymorph_core.items[k].style&&(A=polymorph_core.items[k].style.background,h=polymorph_core.items[k].style.color||matchContrast(polymorph_core.items[k].style.background));f.push({id:k,title:polymorph_core.items[k][b.settings.titleproperty],
backgroundColor:A,textColor:h,start:q,end:v})}}catch(z){}}l(f)},eventClick:function(c,e,l){f.fire("focusItem",{id:c.id,sender:b})},header:{left:"title",center:"",right:"month agendaWeek listWeek basicWeek agendaDay  today prev,next"},defaultView:this.settings.defaultView,height:"parent"});var e=new capacitor(1E3,1E3,function(){try{b.container.visible()&&$(b.rootdiv).fullCalendar("refetchEvents")}catch(c){console.log("JQUERY not ready yet :/")}},!0);f.on("dateUpdate",function(){try{b.container.visible()&&
$(b.rootdiv).fullCalendar("refetchEvents")}catch(c){console.log("JQUERY not ready yet :/")}});f.on("updateItem",function(c){c.sender!=b&&polymorph_core.items[c.id][b.settings.dateproperty]&&e.submit()});this.processSettings=function(){try{$(b.rootdiv).fullCalendar("refetchEvents"),f.fire("updateItem",{id:b.container.id})}catch(c){console.log("JQUERY not ready yet :/")}b.settings.pushnotifs&&b.notify("Notifications enabled!",!0);b.settings.wsOn&&b.tryEstablishWS();b.settings.notifWindow&&!b.notifWindow&&
(b.notifWindow=window.open("","__blank","dependent:on"))};this.notifstack=[];setInterval(function(){for(var c="",e=0;e<b.notifstack.length;e++)0<Date.now()-b.notifstack[e].time&&2E4>Date.now()-b.notifstack[e].time&&!b.notifstack[e].notified&&b.settings.pushnotifs&&(b.notify(b.notifstack[e].txt),b.wsnotify(b.notifstack[e].txt),b.notifstack[e].notified=!0),0<Date.now()-b.notifstack[e].time&&2E4>Date.now()-b.notifstack[e].time&&!b.notifstack[e].notified&&(c+="<p>"+b.notifstack[e].txt+"</p>");b.notifWindow&&
(b.notifWindow.document.body.innerHTML=c)},1E4);this.tryEstablishWS=function(){b.ws&&b.ws.close();if(b.settings.wsurl)try{b.ws=new WebSocket(b.settings.wsurl),b.ws.onmessage=function(b){this.settings.echoOn&&this.state.output(b.data);processQuery(b.data)}}catch(c){console.log(c)}};this.wsnotify=function(b){this.ws&&this.ws.send(b)};this.notify=function(c,e){quickNotify(c,e,function(){b.settings.pushnotifs=!1})};this.toSaveData=function(){this.settings.defaultView=$(this.rootdiv).fullCalendar("getView").name};
this.dialogDiv=document.createElement("div");var l=[new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"titleproperty",label:"Enter the title property:"}),new polymorph_core._option({div:this.dialogDiv,type:"array",object:this.settings,property:"dateproperties",label:"Enter the title property:"}),new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"pushnotifs",label:"Show push notifications?"}),new polymorph_core._option({div:this.dialogDiv,
type:"bool",object:this.settings,property:"wsOn",label:"Send events to a websocket?"}),new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"wsurl",label:"Websocket address"}),new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"notifWindow",label:"Show Notification window"})];this.showDialog=function(){l.forEach(function(b){return b.load()})};this.dialogUpdateSettings=function(){this.processSettings()};this.refresh=function(){setTimeout(function(){try{$(b.rootdiv).fullCalendar("render"),
$(b.rootdiv).fullCalendar("refetchEvents")}catch(c){console.log("jquery not ready yet :/")}},1E3)};this.processSettings()})})();
function _intervalParser(){var f=this;this.regexes=[{name:"hh?mmss",regex:/(?:(\d+):)?(\d+):(\d+)/g,operate:function(b,e){b[1]&&(e.len=36E5*Number(b[1]));e.len+=6E4*Number(b[2]);e.len+=1E3*Number(b[3])}},{name:"sOnly",regex:/(\d+)s/g,operate:function(b,e){e.len+=1E3*Number(b[1])}},{name:"ms",regex:/^\s*(\d+)\s*$/g,operate:function(b,e){e.len+=Number(b[1])}}];this.reverse=!1;this.extractTime=function(b){f.tempdata={len:0};for(var e=!1,l,c=0;c<f.regexes.length;c++)for(f.regexes[c].regex.lastIndex=0;null!=
(l=f.regexes[c].regex.exec(b));)f.regexes[c].operate(l,f.tempdata),e=!0;if(e)return{string:b,t:f.tempdata.len}}}var intervalParser=new _intervalParser;
polymorph_core.registerOperator("terminal",{displayName:"Terminal",description:"A command-line way of interacting with polymorph. Designed to facilitate integrations with other clients!"},function(f){function b(b){if(b)for(;polymorph_core.items[b].links&&polymorph_core.items[b].links.parent;)b=polymorph_core.items[b].links.parent}function e(c){return polymorph_core.items[c].links&&polymorph_core.items[c].links.parent?b(polymorph_core.items[c].links.parent):">"}var l=this;polymorph_core.operatorTemplate.call(this,
f,{opmode:"console"});this.rootdiv.innerHTML='\n    <textarea style="flex: 1 0 auto"></textarea>\n    <div>\n    <input type="text"></input><button>Send</button>\n    </div>\n    ';this.rootdiv.style.cssText="display: flex;\n    flex-direction: column;\n    height: 100%;";var c={echo:{help:"Type echo $1 to echo something.",regex:/^echo (.+)$/ig,operate:function(b,c){c.output(b[1])}},wsecho:{regex:/^wsecho (.+)$/ig,help:"Send data over the websocket to a command interpreter.",operate:function(b,c){c.outputToWS(b[1])}},
intlecho:{regex:/^intlecho (.+)$/ig,help:"Send information to the Polymorph interpreter, when on websocket passthrough mode.",operate:function(b,c){c.process(b[1])}},userEcho:{help:"Type userecho $1 to echo specifically to the user.",regex:/^userecho (.+)$/ig,operate:function(b,c){c.outputToUser(b[1])}},co:{regex:/^co(?: (.+))*$/ig,help:"This command can be thought of an equivalent to cd, for operators. Type co $1 to focus on an container, or simply co to output the current container.",operate:function(b,
c){b[1]&&(c.container=polymorph_core.getOperator(b[1]));c.container.uuid?c.output(JSON.stringify(c.container.uuid)):c.output("No container selected.")}},lo:{regex:/^lo$/ig,help:"This command can be thought of as an equivalent to ls, for operators. Type lo to list all available operators and their types.",operate:function(b,c){c.output(JSON.stringify(polymorph_core.listOperators()))}},lai:{regex:/^lai$/ig,help:"This command can be thought of as an equivalent to ls, for items. Type lo to list all available items, in full detail.",
operate:function(b,c){c.output(JSON.stringify(polymorph_core.getItems()))}},mki:{regex:/^mki (.+)$/ig,help:"This command can be thought of as an equivalent to mkdir, for items. Type mkitm $1 $2 to make an item called $1 in the current path, with title $2.",operate:function(b,c){var e={links:{}};c.state.path&&(e.links.parent=c.state.path);e.title=b[1];b=e.title.replace(/ /ig,"_");polymorph_core.items[b]=e;c.output(b+":"+JSON.stringify(e))}},li:{regex:/^li$/ig,help:"This command can be thought of as an equivalent to ls, for items in the current path. Type lo to list all available items in the current path.",
operate:function(b,c){if(c.state.path)for(var e in polymorph_core.items)polymorph_core.items[e].links&&polymorph_core.items[e].links.parent==c.state.path&&c.output(polymorph_core.items[e]);else c.output(JSON.stringify(polymorph_core.getItems()))}},ci:{regex:/^ci(?: (.+))*$/ig,help:"This command can be thought of as an equivalent to cd, for the current path. Type ci by itself to list the current path; or type cd $1 to navigate to $1.",operate:function(c,e){c[1]?(polymorph_core.items[c[1]]&&(e.state.path=
c[1]),e.output("Switched to "+c[1])):e.output(b(e.state.path))}},ni:{regex:/^ni (.+?)(?: "(.+?)")?(?: "(.+?)")?$/ig,help:'This command can be thought of as an equivalent to nano, for items. Type ni $1 to display item i, or ni $1 "$2" to set the title of $1 to $2, and ni $1 "$2" "$3" to set property $2 on item $1 to $3.',operate:function(c,f){var k=polymorph_core.items[c[1]];k?b(f.state.path)!=e(f.state.path)?f.output("Item "+c[1]+" found, but not at current path. Navigate to "+e(f.state.path)+" to edit this item, [or use nd with the same arguments.]"):
(c[3]?k[c[2]]=c[3]:c[2]&&(k.title=c[2]),f.output(k)):f.output("No such item "+c[1]+" found. Use mki $1 to create an item.")}},no:{regex:/^no (.+?) "(.+?)"$/ig,help:'This command can be thought of as an equivalent to nano, for items. Type no $1 "$2" to set property $1 on the current container to $2.',operate:function(c,f){var k=polymorph_core.items[c[1]];k?b(f.state.path)!=e(f.state.path)?f.output("Item "+c[1]+" found, but not at current path. Navigate to "+e(f.state.path)+" to edit this item, [or use nd with the same arguments.]"):
(c[3]?k[c[2]]=c[3]:c[2]&&(k.title=c[2]),f.output(k)):f.output("No such item "+c[1]+" found. Use mki $1 to create an item.")}},help:{regex:/^help(?: (.+))*$/ig,help:"For more help, type help $1 for more information on command $1.",operate:function(b,e){if(b[1])for(var f in c)b[1]==f&&(e.output(f),e.output(c[f].help));else{e.output("For more help, type help + the name of the command.");e.output("Commands available:");for(var k in c)e.output(k)}}},cls:{regex:/^cls$/ig,name:"cls",help:"Clears the screen.",
operate:function(b,c){c.clearScreen();l.settings.record=""}},mkii:{regex:/^mkii (.+?)$/ig,name:"mkii",help:"Make an item from JSON. Usage: mkii [JSON]",operate:function(b,c){var e={};b=JSON.parse(b[1]);"string"==typeof b?e.title=b:Object.assign(e,b);id=polymorph_core.insertItem(e);c.output("Item created with id "+id);f.fire("createItem",{id:id});f.fire("updateItem",{id:id})}},upii:{regex:/^upii (\w+) (.+?)$/ig,name:"upii",help:"Update an item from JSON.",operate:function(b,c){var e=JSON.parse(b[2]);
polymorph_core.items[b[1]]||(polymorph_core.items[b[1]]={});Object.assign(polymorph_core.items[b[1]],e);c.output("Item updated with id "+b[1]);f.fire("updateItem",{id:b[1]})}},cron:{regex:/^cron "(.+?)" (.+?)$/ig,name:"cron",help:"Schedule a command to run.",operate:function(b,c){var e=(new _dateParser).extractTime(b[2]);c.future(function(){c.process(b[1])},e.getTime())}},call:{name:"call",help:"Call a callable function on the current container.",regex:/^call (.+?)\((.+)\)$/ig,operate:function(b,
c){if(c.container)if(c.container.container.callables[b[1]])try{c.output(c.container.container.callables[b[1]](JSON.parse(b[2])))}catch(r){c.output(r)}else c.output("This container does not have a function called "+b[1]+" :/");else c.output("No container selected!")}},fx:{regex:/^fx$/ig,help:"List callable functions on the currently selected container.",operate:function(b,c){c.container?c.container.container.callables?c.output(Object.keys(c.container.container.callables)):c.output("This container does not have callable functions :/ Contact the dev and make some suggestions!"):
c.output("No container selected!")}}};f.div.appendChild(this.rootdiv);this.state={respondent:"user",output:function(b){"user"==l.state.respondent?l.state.outputToUser(b):l.state.outputToWS(b)},outputToUser:function(b){"string"!=typeof b&&(b=JSON.stringify(b));l.textarea.value+=b+"\n"},outputToWS:function(b){"string"!=typeof b&&(b=JSON.stringify(b));l.ws&&l.ws.readyState==WebSocket.OPEN?l.ws.send(b):l.ws.readyState>=WebSocket.CLOSING&&(l.state.outputToUser("Websocket not connected - operation aborted."),
l.settings.wsautocon&&(l.state.outputToUser("Autorestart enabled - attempting to connect..."),l.storedCommand=b,l.tryEstablishWS()))},clearScreen:function(){l.textarea.value=""},future:function(b,c){setTimeout(b,c-Date.now())},process:function(b){t(b,"internal")}};this.state.state=this.settings.state;var t=function(b,e){c.intlecho.regex.lastIndex=0;if(regres=c.intlecho.regex.exec(b))c.intlecho.operate(regres,l.state);else if("internal"!=e&&l.settings.wsthru)l.state.outputToWS(b);else for(var f in c)c[f].regex.lastIndex=
0,(regres=c[f].regex.exec(b))&&c[f].operate(regres,l.state)};this.textarea=this.rootdiv.querySelector("textarea");this.querybox=this.rootdiv.querySelector("input");this.querybox.addEventListener("keyup",function(b){if("console"==l.settings.opmode){var c=l.textarea.value.split("\n");switch(b.key){case "Enter":l.settings.echoOn&&l.state.outputToUser(l.querybox.value);l.state.respondent="user";t(l.querybox.value);l.querybox.value="";l.cline=0;break;case "ArrowUp":l.cline?l.cline--:l.cline=c.length-2;
l.querybox.value=c[l.cline];break;case "ArrowDown":l.cline==c.length-1?l.cline=0:l.cline++,l.querybox.value=c[l.cline]}}});this.button=this.rootdiv.querySelector("button");this.button.addEventListener("click",function(){"console"==l.settings.opmode?(l.state.respondent="user",t(l.querybox.value),l.querybox.value="",l.cline=0):(l.settings.scriptEnabled=!l.settings.scriptEnabled,l.settings.scriptEnabled&&(l.timerID&&clearTimeout(l.timerID),v()))});var v=function(){if(l.settings.scriptEnabled)try{eval(l.textarea.value)}catch(k){console.log(k)}try{l.timerID=
setTimeout(v,l.querybox.value||1E3)}catch(k){l.querybox.value="Please enter a number!"}};this.textarea.addEventListener("input",function(){"console"==l.settings.opmode?l.settings.record=l.textarea.value:l.settings.script=l.textarea.value});this.updateSettings=function(){"console"==l.settings.opmode?(l.settings.record&&(l.textarea.value=l.settings.record),l.tryEstablishWS(),l.state.state=l.settings.state,l.state.state||(l.state.state={})):(l.textarea.value=l.settings.script||"",l.querybox.value=l.settings.interval||
"")};this.fromSaveData=function(b){Object.assign(l.settings,b);l.textarea.value=l.settings.record;(l.settings.wsthru||l.settings.wsautocon)&&l.tryEstablishWS()};this.tryEstablishWS=function(){if(l.ws)l.ws.close();else if(l.settings.wsurl)try{l.ws=new WebSocket(l.settings.wsurl),l.ws.onerror=function(b){l.state.outputToUser("Failed to connect.");console.log(b)},l.ws.onmessage=function(b){l.settings.echoOn&&l.state.outputToUser("ws:"+b.data);l.state.respondent="WS";t(b.data)},l.ws.onopen=function(b){l.state.outputToUser("Connnection established!");
l.storedCommand&&l.ws.readyState==WebSocket.OPEN&&(l.ws.send(l.storedCommand),l.storedCommand=void 0)},l.ws.onclose=function(b){l.settings.wsautocon&&(l.state.outputToUser("Connection closed."),l.state.outputToUser("Retrying in 5..."),delete l.ws,setTimeout(l.tryEstablishWS,5E3))}}catch(k){l.settings.wsautocon&&setTimeout(l.tryEstablishWS,1E3),l.state.outputToUser("Failed to connect."),console.log(k)}};this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML='\n        <h2>Operation mode</h2>\n        <label><input type="radio" name="opmode" value="console" checked>Console</label>\n        <label><input type="radio" name="opmode" value="script">Script</label>\n        <h2>Websocket hook</h2>\n        <p>Type an address for a websocket below for I/O to this terminal. </p>\n        <input class="wshook" placeholder="Websocket URL (include prefix) - empty for none"></input>\n        <button class="wsset">Set websocket</button>\n    ';
var q=[new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"echoOn",label:"Echo commands"}),new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"wsautocon",label:"Autoconnect websocket on disconnect"}),new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"wsthru",label:"Use as dedicated websocket interface"})];this.dialogDiv.addEventListener("click",function(){l.settings.opmode=document.querySelector("[name='opmode']:checked").value});
this.dialogDiv.querySelector(".wsset").addEventListener("click",function(){l.settings.wsurl=l.dialogDiv.querySelector(".wshook").value;l.tryEstablishWS()});this.showDialog=function(){l.settings.record=l.textarea.value;q.forEach(function(b){b.load()});l.settings.wsurl&&(l.dialogDiv.querySelector(".wshook").value=l.settings.wsurl)};this.dialogUpdateSettings=function(){l.updateSettings()}});
polymorph_core.registerOperator("collapsigant",{displayName:"Collapsigant",description:"A Collapsible Gantt Chart."},function(f){var b=this,e={windowStart:Date.now(),scalingFactor:1728E3,zeroMS:864E5,filter:polymorph_core.guid(6)};polymorph_core.operatorTemplate.call(this,f,e);this.rootdiv.innerHTML='\n    <style>\n        div[data-id]{\n            position:relative;\n        }\n    </style>\n    <div><span style="width:100%">+</span></div>';f.on("createItem",function(e){polymorph_core.items[e.id][b.settings.filter]=
!0});f.on("deleteItem",function(b){});this.careItemCache={};f.on("updateItem",function(e){var c=e.id;if(b.itemRelevant(c)){b.careItemCache[c]=polymorph_core.items[c];var f=b.rootdiv.querySelector('div[data-id="'+c+'"]');f?f.children[0].innerText=polymorph_core.items[c].title:f=htmlwrap('<div data-id="'+c+'"><span data-id="'+c+'">'+polymorph_core.items[c].title+"</span></div>");for(var l in b.careItemCache)b.careItemCache[l].to&&b.careItemCache[l].to[c]&&(polymorph_core.items[c].to&&polymorph_core.items[c].to[l]||
b.rootdiv.querySelector('div[data-id="'+l+'"]').appendChild(f));if(polymorph_core.items[e.id].to)for(var q in polymorph_core.items[e.id].to)b.rootdiv.querySelector('div[data-id="'+q+'"]')&&f.appendChild(b.rootdiv.querySelector('div[data-id="'+q+'"]'));f.parentElement||b.rootdiv.appendChild(f);f.children[0].style.marginLeft=(polymorph_core.items[c].startTime||0)/b.settings.scalingFactor+"px";f.children[0].style.width=((polymorph_core.items[c].duration||0)+b.settings.zeroMS)/b.settings.scalingFactor+
"px"}});this.refresh=function(){};this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML="";this.showDialog=function(){};this.dialogUpdateSettings=function(){}});
polymorph_core.registerOperator("inspector",{displayName:"Inspector",description:"Inspect all properties of a given element."},function(f){function b(c,e){if("object"==typeof c&&c){for(var f=0;f<e.children.length;f++)e.children[f].dataset.used="false";for(var h in c){f=void 0;for(var k=0;k<e.children.length;k++)e.children[k].matches('[data-prop="'+h+'"]')&&(f=e.children[k]);f||(f=htmlwrap('<div style="border-top: 1px solid black"><span>'+h+"</span><div></div></div>"));f.dataset.prop=h;f.dataset.used=
"true";f.style.marginLeft="5px";b(c[h],f.children[1]);e.appendChild(f)}for(c=0;c<e.children.length;c++)"false"!=e.children[c].dataset.used||"DIV"!=e.children[c].tagName&&"BUTTON"!=e.children[c].tagName||e.children[c].remove();e.appendChild(htmlwrap("<button>Add property...</button>"))}else{if(e.children[0]&&"INPUT"==e.children[0].tagName)f=e.children[0];else for(;e.children.length;)e.children[0].remove();f||(f=document.createElement("input"));f.value=c;e.appendChild(f)}}var e=this,l=new capacitor(300,
40,function(b){f.fire("updateItem",{id:b,sender:e})}),c={Text:{onInput:function(b,c,e){c[e]=b.target.value},generate:function(b){return"<input>"},updateValue:function(b,c){void 0!=b?c.querySelector("input").value=b:c.querySelector("input").value=""}},"Large Text":{onInput:function(b,c,e){c[e]=b.target.value;b.target.style.height=b.target.scrollHeight},generate:function(b){return'<textarea style="width:100%"></textarea>'},updateValue:function(b,c){void 0!=b?c.querySelector("textarea").value=b:c.querySelector("textarea").value=
"";c.querySelector("textarea").style.height=c.querySelector("textarea").scrollHeight}},Date:{onInput:function(b,c,f){c[f]||(c[f]={});"string"==typeof c[f]&&(c[f]={datestring:c[f]});c[f].datestring=b.target.value;e.datereparse&&e.datereparse(c,f)},generate:function(b){return"<input>"},updateValue:function(b,c){b?c.querySelector("input").value=b.datestring||"":c.querySelector("input").value=""}},Auto:{onInput:function(b,c,e){c[e]=b.target.value},updateValue:function(c,e,f){"object"==typeof c?b(c,e):
(e.innerHTML="<p>"+f+":</p><input>",void 0!=c?e.querySelector("input").value=c:e.querySelector("input").value="")}}};polymorph_core.operatorTemplate.call(this,f,{operationMode:"focus",currentItem:"",globalEnabled:!1});this.rootdiv.style.cssText="\n    overflow:auto;\n    height: 100%;\n    color: white;\n    ";var t='<select data-role="nttype">\n    '+function(){var b="";for(i in c)b+="<option value='"+i+"'>"+i+"</option>";return b}()+"\n    </select>";this.rootdiv.appendChild(htmlwrap('\n    <h3>Item: <span class="itemID"></span></h3>\n    <div></div>\n        <h4>Add a property:</h4>\n        <input type="text" placeholder="Name">\n        <label>Type:'+
t+'</label>\n        <button class="ap">Add property</button>\n    '));this.internal=this.rootdiv.children[0].children[1];var v=htmlwrap("\n    <button>Add new item</button>");this.rootdiv.appendChild(v);v.style.display="none";v.addEventListener("click",function(){for(var b={},c=0;c<e.internal.children.length;c++)b[e.internal.children[c].dataset.role]=e.internal.children[c].querySelector("input").value;b=polymorph_core.insertItem(b);f.fire("updateItem",{id:b});e.settings.currentItem=void 0;for(b=
0;b<e.internal.children.length;b++)e.internal.children[b].classList.remove("modified")});var q=htmlwrap("\n    <button>Commit changes</button>");this.rootdiv.appendChild(q);q.style.display="none";q.addEventListener("click",function(){if(e.settings.currentItem){for(var b=polymorph_core.items[e.settings.currentItem],c=0;c<e.internal.children.length;c++)b[e.internal.children[c].dataset.role]=e.internal.children[c].querySelector("input").value;f.fire("updateItem",{id:e.settings.currentItem});for(b=0;b<
e.internal.children.length;b++)e.internal.children[b].classList.remove("modified")}});var k=function(b){e.settings.currentItem&&(polymorph_core.items[e.settings.currentItem][b]=" ");e.settings.propsOn&&(e.settings.propsOn[b]=e.rootdiv.querySelector("[data-role='nttype']").value);e.renderItem(e.settings.currentItem);f.fire("updateItem",{sender:e,id:e.settings.currentItem})};this.rootdiv.querySelector("input[placeholder='Name']").addEventListener("keyup",function(b){"Enter"==b.key&&(k(b.target.value),
b.target.value="")});this.rootdiv.querySelector(".ap").addEventListener("click",function(b){k(e.rootdiv.querySelector("input[placeholder='Name']").value);e.rootdiv.querySelector("input[placeholder='Name']").value=""});f.div.appendChild(htmlwrap("\n        <style>\n        h4{\n            margin:0;\n        }\n        .modified input{\n            background: lightblue;\n        }\n        </style>\n    "));f.div.appendChild(this.rootdiv);this.internal.addEventListener("input",function(b){if(e.settings.commitChanges)b.target.parentElement.classList.add("modified");
else if(e.settings.currentItem){var f=polymorph_core.items[e.settings.currentItem],h=b.target.parentElement.dataset.role;c[b.target.parentElement.dataset.type]&&(c[b.target.parentElement.dataset.type].onInput(b,f,h),l.submit(e.settings.currentItem))}});this.datereparse=function(b,c){b[c].date=dateParser.richExtractTime(b[c].datestring);b[c].date.length||(b[c].date=void 0);f.fire("dateUpdate")};var m;var r=(new _contextMenuManager(f.div)).registerContextMenu('<li class="fixed">Convert to fixed date</li>',
this.rootdiv,"[data-type='Date'] input",function(b){m=b.target;return!0});r.querySelector(".fixed").addEventListener("click",function(b){polymorph_core.items[e.settings.currentItem][m.parentElement.dataset.role].date||e.datereparse(polymorph_core.items[e.settings.currentItem],m.parentElement.dataset.role);m.value=(new Date(polymorph_core.items[e.settings.currentItem][m.parentElement.dataset.role].date[0].date)).toLocaleString();polymorph_core.items[e.settings.currentItem][m.parentElement.dataset.role].datestring=
m.value;e.datereparse(polymorph_core.items[e.settings.currentItem],m.parentElement.dataset.role);r.style.display="none"});this.renderItem=function(b,e){e=void 0===e?!1:e;this.rootdiv.querySelector(".itemID").innerText=b;e||(this.internal.innerHTML="");for(e=0;e<this.internal.children.length;e++)this.internal.children[e].dataset.invalid=1;e={};polymorph_core.items[b]&&(e=JSON.parse(JSON.stringify(polymorph_core.items[b])));for(var f in this.settings.propsOn)if(this.settings.propsOn[f]&&(void 0!=e[f]||
this.settings.showNonexistent)){b=this.internal.querySelector("[data-role='"+f+"']");if(!b||b.dataset.type!=this.settings.propsOn[f]){b&&b.remove();b=document.createElement("div");b.dataset.role=f;b.dataset.type=this.settings.propsOn[f];var h="<h4>"+f+"</h4>";c[this.settings.propsOn[f]].generate&&(h+=c[this.settings.propsOn[f]].generate(f));b.innerHTML=h;this.internal.appendChild(b)}b.dataset.invalid=0;c[this.settings.propsOn[f]].updateValue&&c[this.settings.propsOn[f]].updateValue(e[f],b,f)}its=
this.internal.querySelectorAll("[data-invalid='1']");for(f=0;f<its.length;f++)its[f].remove()};this.renderItem(this.settings.currentItem);f.on("updateItem",function(b){var c=b.id;if(b.sender!=e)return c==e.settings.currentItem?(e.renderItem(c,!0),!0):!1});this.updateSettings=function(){v.style.display=e.settings.dataEntry?"block":"none";q.style.display=e.settings.commitChanges?"block":"none";e.renderItem(e.settings.currentItem)};if(!this.settings.propsOn){this.settings.propsOn={};for(var n in polymorph_core.items)for(var y in polymorph_core.items[n])this.settings.propsOn[y]=
"Auto"}this.updateSettings();this.dialogDiv=document.createElement("div");this.optionsDiv=document.createElement("div");this.dialogDiv.appendChild(this.optionsDiv);this.optionsDiv.style.width="30vw";var w={operationMode:new polymorph_core._option({div:this.optionsDiv,type:"select",object:this.settings,property:"operationMode",source:{static:"Display static item",focus:"Display focused element"},label:"Select operation mode:"}),currentItem:new polymorph_core._option({div:this.optionsDiv,type:"text",
object:this.settings,property:"currentItem",label:"Set item to display:"}),orientation:new polymorph_core._option({div:this.optionsDiv,type:"bool",object:this.settings,property:"orientation",label:"Horizontal orientation"}),showNonexistent:new polymorph_core._option({div:this.optionsDiv,type:"bool",object:this.settings,property:"showNonexistent",label:"Show enabled but not currently filled fields"}),commitChanges:new polymorph_core._option({div:this.optionsDiv,type:"bool",object:this.settings,property:"commitChanges",
label:"Manually commit changes"}),dataEntry:new polymorph_core._option({div:this.optionsDiv,type:"bool",object:this.settings,property:"dataEntry",label:"Enable data entry",afterInput:function(b){b.currentTarget.checked&&(e.settings.showNonexistent=!0,w.showNonexistent.load(),e.settings.commitChanges=!0,w.commitChanges.load())}}),globalEnabled:new polymorph_core._option({div:this.optionsDiv,type:"bool",object:this.settings,property:"globalEnabled",label:"Focus: listen for every container (regardless of origin)"})},
x=document.createElement("div");x.innerHTML='\n    <h4> Select visible fields: </h4>\n    <div class="apropos"></div>\n    ';this.dialogDiv.appendChild(x);this.showDialog=function(){var b=x.querySelector(".apropos");b.innerHTML="";var c={},f;for(f in polymorph_core.items)for(var k in polymorph_core.items[f])c[k]=!0;e.settings.propsOn||(e.settings.propsOn=c);for(var l in c)c=htmlwrap('<p data-pname="'+l+'">'+l+'<span style="display: block; float: right;"><input type="checkbox" '+(e.settings.propsOn[l]?
"checked":"")+"> "+t+"</span></p>"),c.querySelector("[data-role='nttype']").value=e.settings.propsOn[l]||"Text",b.appendChild(c);for(i in w)w[i].load()};this.dialogUpdateSettings=function(){for(var b=e.dialogDiv.querySelectorAll("[data-role]"),c=0;c<b.length;c++)e.settings[b[c].dataset.role]=b[c].value;b=e.dialogDiv.querySelectorAll("[data-pname]");e.settings.propsOn={};for(c=0;c<b.length;c++)b[c].querySelector("input").checked&&(e.settings.propsOn[b[c].dataset.pname]=b[c].querySelector("select").value);
e.updateSettings();e.renderItem(e.settings.currentItem)};this.dialogDiv.addEventListener("input",function(b){b.target.dataset.role&&(e.settings[b.target.dataset.role]=b.target.value)});f.on("focusItem",function(b){b=b.id;"focus"==e.settings.operationMode&&(e.settings.currentItem=b,e.renderItem(b))});f.on("deleteItem",function(b){e.settings.currentItem==b.id&&(e.settings.currentItem=void 0);e.updateItem(void 0)})});
polymorph_core.registerOperator("inspectolist",{displayName:"Inspectolist",description:"Combination between inspector and list. Gives detailed information about specific items."},function(f){var b=this,e={dumpProp:"description",headerCopyProp:"title",currentItem:polymorph_core.guid(4),filter:polymorph_core.guid(4),permafilter:"",tagColors:{},scomCommands:[]};polymorph_core.operatorTemplate.call(this,f,e);this.rootdiv.style.color="white";this.rootdiv.appendChild(htmlwrap("\n    <style>\n        h3{\n            margin:0;\n        }\n        h2{\n            margin:0;\n        }\n        [data-role=\"topbar\"]{\n            padding: 3px;\n            margin: 1px;\n            background: black;\n            border-radius: 3px;\n        }\n        [data-role='subItemBox']{\n            padding-left: 10px;\n        }\n    </style>\n    "));
this.rootdiv.style.overflow="auto";this.rootdiv.style.height="100%";e=document.createElement("div");e.contentEditable=!0;this.rootdiv.appendChild(e);this.matchbox=htmlwrap("\n    <div>\n        <h2>Matched items</h2>\n        <div>\n    </div>\n    ");this.rootdiv.appendChild(this.matchbox);this.matchbox=this.matchbox.querySelector("div");this.unmatchbox=htmlwrap("\n    <div>\n        <h2>Unmatched items</h2>\n        <div>\n    </div>\n    ");this.rootdiv.appendChild(this.unmatchbox);this.unmatchbox=
this.unmatchbox.querySelector("div");this.currentFilters={};var l=function(b){for(var c={words:void 0,parent:void 0},e={},f=/[#\w]+/g,k=void 0;k=f.exec(b);)k=k[0].toLowerCase(),e[k]|=0,e[k]++;c.words=Object.entries(e);c.words=c.words.sort(function(b,c){return b[0]>c[0]?1:-1});if(k=/>p:([\d\w]+)/.exec(b))c.parent=k[1];return c},c=document.createElement("div");this.rootdiv.insertBefore(c,e);e.addEventListener("keyup",function(e){if("Enter"==e.key&&0==e.getModifierState("Shift")){var k={};k[b.settings.dumpProp]=
e.target.innerText;for(var h=$jscomp.makeIterator(b.settings.scomCommands),n=h.next();!n.done;n=h.next())switch(n=n.value,n[0]){case "filter":k[b.settings.dumpProp].includes(n[1])||(k[b.settings.dumpProp]+=n[1])}k[b.settings.filter]=!0;k=polymorph_core.insertItem(k);f.fire("createItem",{id:k,sender:b});t(k,!0);e.target.innerHTML="";m(k);b.rootdiv.querySelector('[data-item="'+k+'"] [data-role="richtext"]').focus();e.preventDefault()}else{h=e.target.innerText;if(n=/\\(.+?)\\/g.exec(e.target.innerText)){var r=
n[1];r=r.split(":");switch(r[0]){case "filter":for(var q in polymorph_core.items)f.fire("updateItem",{id:q,unedit:!0});c.appendChild(htmlwrap("<span>"+r.join(":")+"&nbsp;</span>"));b.settings.scomCommands.push(r)}h=h.replace(n[0],"");e.target.innerText=h}currentFilter=l(h);for(k in b.currentFilters){a:{e=b.currentFilters[k];h=currentFilter;for(n=indexB=0;n<e.words.length&&indexB<h.words.length;)if(e.words[n][0]>h.words[indexB][0])indexB++;else if(e.words[n][0]<h.words[indexB][0])n++;else{e=!0;break a}e=
!1}e?t(k,!0):t(k,!1)}}});var t=function(c,e){var f=function(b,c){Array.from(b.children).includes(c)||b.appendChild(c)};b.currentFilters[c]=l(polymorph_core.items[c][b.settings.dumpProp]);q(c);var m=v(c);m.contains(b.rootdiv.getRootNode().getSelection().anchorNode)||k(c);void 0==e&&(e=b.matchbox.contains(m));e?f(b.matchbox,m):b.currentFilters[c].parent?b.rootdiv.querySelector('[data-item="'+b.currentFilters[c].parent+'"]')?f(b.rootdiv.querySelector('[data-item="'+b.currentFilters[c].parent+"\"]>[data-role='subItemBox']"),
m):f(b.unmatchbox,m):f(b.unmatchbox,m)},v=function(c){var e=b.rootdiv.querySelector('[data-item="'+c+'"]');e||(e=document.createElement("div"),e.dataset.item=c,e.appendChild(htmlwrap('<div data-role="subItemBox"></div>')),b.matchbox.appendChild(e));return e},q=function(c){var e=v(c),h=e.querySelector("[data-role='topbar']");h||(h=htmlwrap('<h3 data-role="topbar"></h3>'),e.insertBefore(h,e.children[0]));if(polymorph_core.items[c][b.settings.dumpProp]){e=polymorph_core.items[c][b.settings.dumpProp];
var k='<span style="color:pink">#id:'+c+"; </span>"+e.split("\n")[0];polymorph_core.items[c][b.settings.headerCopyProp]=e.split("\n")[0];f.fire("updateItem",{sender:b,id:c});c=/#(\w+)(:[\w\d]+)?/g;for(var l={};result=c.exec(e);)l[result[0]]||(k=k.replaceAll(result[0],""),b.settings.tagColors[result[1]]||(b.settings.tagColors[result[1]]=randBriteCol()),k+='<span style="color:'+b.settings.tagColors[result[1]]+'">'+result[0]+"</span>",l[result[0]]=!0);h.innerHTML=k}},k=function(c){var e=v(c),f=e.querySelector("[data-role='richtext']");
f||(f=htmlwrap('<div data-role="richtext" contenteditable></div>'),e.insertBefore(f,e.children[1]),f.style.display="none");f.innerText=polymorph_core.items[c][b.settings.dumpProp]};f.on("updateItem",function(c){c.sender!=b&&b.itemRelevant(c.id)&&t(c.id)});var m=function(c,e){e=void 0===e?!0:e;Array.from(b.rootdiv.querySelectorAll("[data-role='richtext']")).forEach(function(b){b.style.display="none"});c=b.rootdiv.querySelector("[data-item='"+c+"'] [data-role='richtext']");c.style.display="block";e&&
c.focus()};this.rootdiv.addEventListener("click",function(c){c.target.matches("[data-role='topbar']")&&(c=c.target.parentElement.dataset.item,f.fire("focusItem",{id:c,sender:b}),m(c))});var r=new capacitor(300,40,function(c){f.fire("updateItem",{id:c,sender:b})}),n=function(c){delete polymorph_core.items[c][b.settings.filter];delete b.currentFilters[c];b.rootdiv.querySelector("[data-item='"+c+"']")&&b.rootdiv.querySelector("[data-item='"+c+"']").remove()};this.rootdiv.addEventListener("keydown",function(b){if(b.target.matches("[data-role='richtext']")&&
("ArrowDown"==b.key||"ArrowUp"==b.key)&&!b.getModifierState("Shift")){var c=b.key,e=b.target,f=b.target.getRootNode();range=f.getSelection().getRangeAt(0);var k=range.startOffset,l=range.startContainer;setTimeout(function(){range=f.getSelection().getRangeAt(0);k==range.startOffset&&l==range.startContainer&&("ArrowDown"==c?e.parentElement.nextElementSibling?m(e.parentElement.nextElementSibling.dataset.item):"subItemBox"==e.parentElement.parentElement.dataset.role&&e.parentElement.parentElement.parentElement.nextElementSibling&&
m(e.parentElement.parentElement.parentElement.nextElementSibling.dataset.item):e.parentElement.previousElementSibling?m(e.parentElement.previousElementSibling.dataset.item):"subItemBox"==e.parentElement.parentElement.dataset.role&&m(e.parentElement.parentElement.parentElement.dataset.item))},100)}});this.rootdiv.addEventListener("keyup",function(c){if(c.target.matches("[data-role='richtext']"))if("Tab"==c.key)c.preventDefault();else{var e=c.target.parentElement.dataset.item;r.submit(e);""==c.target.innerText?
(n(e),f.fire("deleteItem",{id:e,sender:b})):(polymorph_core.items[e][b.settings.dumpProp]=c.target.innerText,f.fire("updateItem",{id:e,sender:b}),t(e))}});f.on("deleteItem",function(c){c.sender!=b&&n(c.id)});f.on("createItem",function(c){c.sender!=b&&(polymorph_core.items[c.id][b.settings.filter]=!0)});f.on("focusItem",function(c){var e=c.id;c.sender!=b&&b.rootdiv.querySelector("[data-item='"+e+"'] [data-role='richtext']")&&m(e,!1)});this.dialogDiv=document.createElement("div");this.importSys={importTitle:"title",
importDesc:"description",importFilter:"",import:function(){for(var c in polymorph_core.items)if((!b.importSys.importFilter||polymorph_core.items[c][b.importSys.importFilter])&&polymorph_core.items[c][b.importSys.importTitle]){var e=polymorph_core.items[c][b.importSys.importTitle],h=b.importSys.importDesc.split(",");h=$jscomp.makeIterator(h);for(var k=h.next();!k.done;k=h.next())k=k.value,polymorph_core.items[c][k]&&(e+="\n",e+=polymorph_core.items[c][k]);polymorph_core.items[c][b.settings.dumpProp]=
e;polymorph_core.items[c][b.settings.filter]=!0;f.fire("updateItem",{id:c})}}};var y={filter:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"filter",label:"Filter:"}),dumpProp:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"dumpProp",label:"Property:"}),permafilter:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"permafilter",label:"Additional filter string:"}),importTitle:new polymorph_core._option({div:this.dialogDiv,
type:"text",object:this.importSys,property:"importTitle",label:"Import title property:"}),importDesc:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.importSys,property:"importDesc",label:"Import description properties (csv):"}),importFilter:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.importSys,property:"importFilter",label:"Import filter property:"}),importNow:new polymorph_core._option({div:this.dialogDiv,type:"button",label:"Import now",fn:this.importSys.import})};
this.showDialog=function(){for(i in y)y[i].load()};this.dialogUpdateSettings=function(){for(var c in polymorph_core.items)b.itemRelevant(c)&&t(c);f.fire("updateItem",{id:b.container.id})};this.dialogUpdateSettings()});
polymorph_core.registerOperator("ashley",{displayName:"AI assistant",description:"An AI assistant."},function(f){var b=this;polymorph_core.operatorTemplate.call(this,f,{});this.rootdiv.innerHTML='\n    <div style="height:100%; display:flex; flex-direction:column;">\n    <div style="flex-grow: 1">\n    </div>\n    <span style="flex: 0 0 1em; display:flex;flex-direction:row"><input style="flex-grow:1"></input><button>Send</button></span>\n    </div>\n    ';this.rootdiv.querySelector("input").addEventListener(function(){});
f.on("createItem",function(b){});f.on("deleteItem",function(b){});f.on("updateItem",function(e){b.itemRelevant(e.id)});this.refresh=function(){};this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML="";this.showDialog=function(){};this.dialogUpdateSettings=function(){}});
!function(f,b){"function"==typeof define&&define.amd?define(function(){return b(f,f.document)}):"object"==typeof exports?module.exports=f.document?b(f,f.document):function(e){return b(e,e.document)}:f.SVG=b(f,f.document)}("undefined"!=typeof window?window:this,function(f,b){function e(b,c,e,f){return e+f.replace(h.regex.dots," .")}function l(b){b=b.slice(0);for(var c=b.length;c--;)Array.isArray(b[c])&&(b[c]=l(b[c]));return b}function c(b){return b.toLowerCase().replace(/-(.)/g,function(b,c){return c.toUpperCase()})}
function t(b){return b.charAt(0).toUpperCase()+b.slice(1)}function v(b){return 4==b.length?["#",b.substring(1,2),b.substring(1,2),b.substring(2,3),b.substring(2,3),b.substring(3,4),b.substring(3,4)].join(""):b}function q(b){b=b.toString(16);return 1==b.length?"0"+b:b}function k(b,c,e){if(null==c||null==e)b=b.bbox(),null==c?c=b.width/b.height*e:null==e&&(e=b.height/b.width*c);return{width:c,height:e}}function m(b){return{a:b[0],b:b[1],c:b[2],d:b[3],e:b[4],f:b[5]}}function r(b){return b instanceof h.Matrix||
(b=new h.Matrix(b)),b}function n(b,c){b.cx=null==b.cx?c.bbox().cx:b.cx;b.cy=null==b.cy?c.bbox().cy:b.cy}function y(b){for(var c=b.childNodes.length-1;0<=c;c--)b.childNodes[c]instanceof f.SVGElement&&y(b.childNodes[c]);return h.adopt(b).id(h.eid(b.nodeName))}function w(b){return null==b.x&&(b.x=0,b.y=0,b.width=0,b.height=0),b.w=b.width,b.h=b.height,b.x2=b.x+b.width,b.y2=b.y+b.height,b.cx=b.x+b.width/2,b.cy=b.y+b.height/2,b}function x(b){if(b=b.toString().match(h.regex.reference))return b[1]}var h=
this.SVG=function(b){if(h.supported)return b=new h.Doc(b),h.parser.draw||h.prepare(),b};if(h.ns="http://www.w3.org/2000/svg",h.xmlns="http://www.w3.org/2000/xmlns/",h.xlink="http://www.w3.org/1999/xlink",h.svgjs="http://svgjs.com/svgjs",h.supported=!!b.createElementNS&&!!b.createElementNS(h.ns,"svg").createSVGRect,!h.supported)return!1;h.did=1E3;h.eid=function(b){return"Svgjs"+t(b)+h.did++};h.create=function(c){var e=b.createElementNS(this.ns,c);return e.setAttribute("id",this.eid(c)),e};h.extend=
function(){var b,c;var e=[].slice.call(arguments);var f=e.pop();for(c=e.length-1;0<=c;c--)if(e[c])for(b in f)e[c].prototype[b]=f[b];h.Set&&h.Set.inherit&&h.Set.inherit()};h.invent=function(b){var c="function"==typeof b.create?b.create:function(){this.constructor.call(this,h.create(b.create))};return b.inherit&&(c.prototype=new b.inherit),b.extend&&h.extend(c,b.extend),b.construct&&h.extend(b.parent||h.Container,b.construct),c};h.adopt=function(b){if(!b)return null;if(b.instance)return b.instance;
var c;return c="svg"==b.nodeName?b.parentNode instanceof f.SVGElement?new h.Nested:new h.Doc:"linearGradient"==b.nodeName?new h.Gradient("linear"):"radialGradient"==b.nodeName?new h.Gradient("radial"):h[t(b.nodeName)]?new (h[t(b.nodeName)]):new h.Element(b),c.type=b.nodeName,c.node=b,b.instance=c,c instanceof h.Doc&&c.namespace().defs(),c.setData(JSON.parse(b.getAttribute("svgjs:data"))||{}),c};h.prepare=function(){var c=b.getElementsByTagName("body")[0],e=(c?new h.Doc(c):h.adopt(b.documentElement).nested()).size(2,
0);h.parser={body:c||b.documentElement,draw:e.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:e.polyline().node,path:e.path().node,native:h.create("svg")}};h.parser={native:h.create("svg")};b.addEventListener("DOMContentLoaded",function(){h.parser.draw||h.prepare()},!1);h.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,
whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g};h.utils={map:function(b,c){var e,g=b.length,f=[];for(e=0;e<g;e++)f.push(c(b[e]));return f},filter:function(b,
c){var e,g=b.length,f=[];for(e=0;e<g;e++)c(b[e])&&f.push(b[e]);return f},radians:function(b){return b%360*Math.PI/180},degrees:function(b){return 180*b/Math.PI%360},filterSVGElements:function(b){return this.filter(b,function(b){return b instanceof f.SVGElement})}};h.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,
"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}};h.Color=function(b){var c;this.b=this.g=this.r=0;b&&("string"==typeof b?h.regex.isRgb.test(b)?(c=h.regex.rgb.exec(b.replace(h.regex.whitespace,"")),this.r=parseInt(c[1]),this.g=parseInt(c[2]),this.b=parseInt(c[3])):h.regex.isHex.test(b)&&(c=h.regex.hex.exec(v(b)),this.r=parseInt(c[1],16),this.g=parseInt(c[2],16),this.b=parseInt(c[3],16)):"object"==typeof b&&(this.r=b.r,this.g=b.g,this.b=b.b))};
h.extend(h.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+q(this.r)+q(this.g)+q(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(b){return this.destination=new h.Color(b),this},at:function(b){return this.destination?(b=0>b?0:1<b?1:b,new h.Color({r:~~(this.r+(this.destination.r-this.r)*b),g:~~(this.g+(this.destination.g-this.g)*b),b:~~(this.b+(this.destination.b-
this.b)*b)})):this}});h.Color.test=function(b){return b+="",h.regex.isHex.test(b)||h.regex.isRgb.test(b)};h.Color.isRgb=function(b){return b&&"number"==typeof b.r&&"number"==typeof b.g&&"number"==typeof b.b};h.Color.isColor=function(b){return h.Color.isRgb(b)||h.Color.test(b)};h.Array=function(b,c){b=(b||[]).valueOf();0==b.length&&c&&(b=c.valueOf());this.value=this.parse(b)};h.extend(h.Array,{morph:function(b){if(this.destination=this.parse(b),this.value.length!=this.destination.length){b=this.value[this.value.length-
1];for(var c=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(c);for(;this.value.length<this.destination.length;)this.value.push(b)}return this},settle:function(){for(var b=0,c=this.value.length,e=[];b<c;b++)-1==e.indexOf(this.value[b])&&e.push(this.value[b]);return this.value=e},at:function(b){if(!this.destination)return this;for(var c=0,e=this.value.length,g=[];c<e;c++)g.push(this.value[c]+(this.destination[c]-this.value[c])*b);return new h.Array(g)},
toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(b){return b=b.valueOf(),Array.isArray(b)?b:this.split(b)},split:function(b){return b.trim().split(h.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var b=new this.constructor;return b.value=l(this.value),b}});h.PointArray=function(b,c){h.Array.call(this,b,c||[[0,0]])};h.PointArray.prototype=new h.Array;h.PointArray.prototype.constructor=h.PointArray;
h.extend(h.PointArray,{toString:function(){for(var b=0,c=this.value.length,e=[];b<c;b++)e.push(this.value[b].join(","));return e.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(b){if(!this.destination)return this;for(var c=0,e=this.value.length,g=[];c<e;c++)g.push([this.value[c][0]+(this.destination[c][0]-this.value[c][0])*b,this.value[c][1]+(this.destination[c][1]-this.value[c][1])*b]);return new h.PointArray(g)},parse:function(b){var c=
[];if(b=b.valueOf(),Array.isArray(b)){if(Array.isArray(b[0]))return b}else b=b.trim().split(h.regex.delimiter).map(parseFloat);0!=b.length%2&&b.pop();for(var e=0,g=b.length;e<g;e+=2)c.push([b[e],b[e+1]]);return c},move:function(b,c){var e=this.bbox();if(b-=e.x,c-=e.y,!isNaN(b)&&!isNaN(c))for(e=this.value.length-1;0<=e;e--)this.value[e]=[this.value[e][0]+b,this.value[e][1]+c];return this},size:function(b,c){var e,g=this.bbox();for(e=this.value.length-1;0<=e;e--)g.width&&(this.value[e][0]=(this.value[e][0]-
g.x)*b/g.width+g.x),g.height&&(this.value[e][1]=(this.value[e][1]-g.y)*c/g.height+g.y);return this},bbox:function(){return h.parser.poly.setAttribute("points",this.toString()),h.parser.poly.getBBox()}});for(var A={M:function(b,c,e){return c.x=e.x=b[0],c.y=e.y=b[1],["M",c.x,c.y]},L:function(b,c){return c.x=b[0],c.y=b[1],["L",b[0],b[1]]},H:function(b,c){return c.x=b[0],["H",b[0]]},V:function(b,c){return c.y=b[0],["V",b[0]]},C:function(b,c){return c.x=b[4],c.y=b[5],["C",b[0],b[1],b[2],b[3],b[4],b[5]]},
S:function(b,c){return c.x=b[2],c.y=b[3],["S",b[0],b[1],b[2],b[3]]},Q:function(b,c){return c.x=b[2],c.y=b[3],["Q",b[0],b[1],b[2],b[3]]},T:function(b,c){return c.x=b[0],c.y=b[1],["T",b[0],b[1]]},Z:function(b,c,e){return c.x=e.x,c.y=e.y,["Z"]},A:function(b,c){return c.x=b[5],c.y=b[6],["A",b[0],b[1],b[2],b[3],b[4],b[5],b[6]]}},z="mlhvqtcsaz".split(""),I=0,D=z.length;I<D;++I)A[z[I]]=function(b){return function(c,e,g){if("H"==b)c[0]+=e.x;else if("V"==b)c[0]+=e.y;else if("A"==b)c[5]+=e.x,c[6]+=e.y;else for(var f=
0,h=c.length;f<h;++f)c[f]+=f%2?e.y:e.x;return A[b](c,e,g)}}(z[I].toUpperCase());h.PathArray=function(b,c){h.Array.call(this,b,c||[["M",0,0]])};h.PathArray.prototype=new h.Array;h.PathArray.prototype.constructor=h.PathArray;h.extend(h.PathArray,{toString:function(){for(var b=this.value,c=0,e=b.length,f="";c<e;c++)f+=b[c][0],null!=b[c][1]&&(f+=b[c][1],null!=b[c][2]&&(f+=" ",f+=b[c][2],null!=b[c][3]&&(f+=" ",f+=b[c][3],f+=" ",f+=b[c][4],null!=b[c][5]&&(f+=" ",f+=b[c][5],f+=" ",f+=b[c][6],null!=b[c][7]&&
(f+=" ",f+=b[c][7])))));return f+" "},move:function(b,c){var e=this.bbox();if(b-=e.x,c-=e.y,!isNaN(b)&&!isNaN(c))for(var g=this.value.length-1;0<=g;g--)e=this.value[g][0],"M"==e||"L"==e||"T"==e?(this.value[g][1]+=b,this.value[g][2]+=c):"H"==e?this.value[g][1]+=b:"V"==e?this.value[g][1]+=c:"C"==e||"S"==e||"Q"==e?(this.value[g][1]+=b,this.value[g][2]+=c,this.value[g][3]+=b,this.value[g][4]+=c,"C"==e&&(this.value[g][5]+=b,this.value[g][6]+=c)):"A"==e&&(this.value[g][6]+=b,this.value[g][7]+=c);return this},
size:function(b,c){var e,g=this.bbox();for(e=this.value.length-1;0<=e;e--){var f=this.value[e][0];"M"==f||"L"==f||"T"==f?(this.value[e][1]=(this.value[e][1]-g.x)*b/g.width+g.x,this.value[e][2]=(this.value[e][2]-g.y)*c/g.height+g.y):"H"==f?this.value[e][1]=(this.value[e][1]-g.x)*b/g.width+g.x:"V"==f?this.value[e][1]=(this.value[e][1]-g.y)*c/g.height+g.y:"C"==f||"S"==f||"Q"==f?(this.value[e][1]=(this.value[e][1]-g.x)*b/g.width+g.x,this.value[e][2]=(this.value[e][2]-g.y)*c/g.height+g.y,this.value[e][3]=
(this.value[e][3]-g.x)*b/g.width+g.x,this.value[e][4]=(this.value[e][4]-g.y)*c/g.height+g.y,"C"==f&&(this.value[e][5]=(this.value[e][5]-g.x)*b/g.width+g.x,this.value[e][6]=(this.value[e][6]-g.y)*c/g.height+g.y)):"A"==f&&(this.value[e][1]=this.value[e][1]*b/g.width,this.value[e][2]=this.value[e][2]*c/g.height,this.value[e][6]=(this.value[e][6]-g.x)*b/g.width+g.x,this.value[e][7]=(this.value[e][7]-g.y)*c/g.height+g.y)}return this},equalCommands:function(b){var c;b=new h.PathArray(b);var e=this.value.length===
b.value.length;var g=0;for(c=this.value.length;e&&g<c;g++)e=this.value[g][0]===b.value[g][0];return e},morph:function(b){return b=new h.PathArray(b),this.equalCommands(b)?this.destination=b:this.destination=null,this},at:function(b){if(!this.destination)return this;var c,e,g=this.value,f=this.destination.value,k=[],l=new h.PathArray;var m=0;for(c=g.length;m<c;m++){k[m]=[g[m][0]];var n=1;for(e=g[m].length;n<e;n++)k[m][n]=g[m][n]+(f[m][n]-g[m][n])*b;"A"===k[m][0]&&(k[m][4]=+(0!=k[m][4]),k[m][5]=+(0!=
k[m][5]))}return l.value=k,l},parse:function(b){if(b instanceof h.PathArray)return b.valueOf();var c,g={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};b="string"==typeof b?b.replace(h.regex.numbersWithDots,e).replace(h.regex.pathLetters," $& ").replace(h.regex.hyphen,"$1 -").trim().split(h.regex.delimiter):b.reduce(function(b,c){return[].concat.call(b,c)},[]);var f=[];var k=new h.Point,l=new h.Point,m=0,n=b.length;do h.regex.isPathLetter.test(b[m])?(c=b[m],++m):"M"==c?c="L":"m"==c&&(c="l"),f.push(A[c].call(null,
b.slice(m,m+=g[c.toUpperCase()]).map(parseFloat),k,l));while(n>m);return f},bbox:function(){return h.parser.path.setAttribute("d",this.toString()),h.parser.path.getBBox()}});h.Number=h.invent({create:function(b,c){this.value=0;this.unit=c||"";"number"==typeof b?this.value=isNaN(b)?0:isFinite(b)?b:0>b?-3.4e+38:3.4e+38:"string"==typeof b?(c=b.match(h.regex.numberAndUnit))&&(this.value=parseFloat(c[1]),"%"==c[5]?this.value/=100:"s"==c[5]&&(this.value*=1E3),this.unit=c[5]):b instanceof h.Number&&(this.value=
b.valueOf(),this.unit=b.unit)},extend:{toString:function(){return("%"==this.unit?~~(1E8*this.value)/1E6:"s"==this.unit?this.value/1E3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(b){return b=new h.Number(b),new h.Number(this+b,this.unit||b.unit)},minus:function(b){return b=new h.Number(b),new h.Number(this-b,this.unit||b.unit)},times:function(b){return b=new h.Number(b),new h.Number(this*b,this.unit||b.unit)},divide:function(b){return b=
new h.Number(b),new h.Number(this/b,this.unit||b.unit)},to:function(b){var c=new h.Number(this);return"string"==typeof b&&(c.unit=b),c},morph:function(b){return this.destination=new h.Number(b),b.relative&&(this.destination.value+=this.value),this},at:function(b){return this.destination?(new h.Number(this.destination)).minus(this).times(b).plus(this):this}}});h.Element=h.invent({create:function(b){this._stroke=h.defaults.attrs.stroke;this._event=null;this.dom={};(this.node=b)&&(this.type=b.nodeName,
this.node.instance=this,this._stroke=b.getAttribute("stroke")||this._stroke)},extend:{x:function(b){return this.attr("x",b)},y:function(b){return this.attr("y",b)},cx:function(b){return null==b?this.x()+this.width()/2:this.x(b-this.width()/2)},cy:function(b){return null==b?this.y()+this.height()/2:this.y(b-this.height()/2)},move:function(b,c){return this.x(b).y(c)},center:function(b,c){return this.cx(b).cy(c)},width:function(b){return this.attr("width",b)},height:function(b){return this.attr("height",
b)},size:function(b,c){b=k(this,b,c);return this.width(new h.Number(b.width)).height(new h.Number(b.height))},clone:function(b,c){this.writeDataToDom();c=y(this.node.cloneNode(!0));return b?b.add(c):this.after(c),c},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(b){return this.after(b).remove(),b},addTo:function(b){return b.put(this)},putIn:function(b){return b.add(this)},id:function(b){return this.attr("id",b)},inside:function(b,c){var e=this.bbox();
return b>e.x&&c>e.y&&b<e.x+e.width&&c<e.y+e.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var b=this.attr("class");return null==b?[]:b.trim().split(h.regex.delimiter)},hasClass:function(b){return-1!=this.classes().indexOf(b)},addClass:function(b){if(!this.hasClass(b)){var c=this.classes();c.push(b);this.attr("class",
c.join(" "))}return this},removeClass:function(b){return this.hasClass(b)&&this.attr("class",this.classes().filter(function(c){return c!=b}).join(" ")),this},toggleClass:function(b){return this.hasClass(b)?this.removeClass(b):this.addClass(b)},reference:function(b){return h.get(this.attr(b))},parent:function(b){var c=this;if(!c.node.parentNode)return null;if(c=h.adopt(c.node.parentNode),!b)return c;for(;c&&c.node instanceof f.SVGElement;){if("string"==typeof b?c.matches(b):c instanceof b)return c;
if("#document"==c.node.parentNode.nodeName)return null;c=h.adopt(c.node.parentNode)}},doc:function(){return this instanceof h.Doc?this:this.parent(h.Doc)},parents:function(b){var c=[],e=this;do{if(!(e=e.parent(b))||!e.node)break;c.push(e)}while(e.parent);return c},matches:function(b){var c=this.node;return(c.matches||c.matchesSelector||c.msMatchesSelector||c.mozMatchesSelector||c.webkitMatchesSelector||c.oMatchesSelector).call(c,b)},native:function(){return this.node},svg:function(c){var e=b.createElement("svg");
if(!(c&&this instanceof h.Parent))return e.appendChild(c=b.createElement("svg")),this.writeDataToDom(),c.appendChild(this.node.cloneNode(!0)),e.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");e.innerHTML="<svg>"+c.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";c=0;for(var g=e.firstChild.childNodes.length;c<g;c++)this.node.appendChild(e.firstChild.firstChild);return this},writeDataToDom:function(){(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()});
return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(b){return this.dom=b,this},is:function(b){return this instanceof b}}});h.easing={"-":function(b){return b},"<>":function(b){return-Math.cos(b*Math.PI)/2+.5},">":function(b){return Math.sin(b*Math.PI/2)},"<":function(b){return 1-Math.cos(b*Math.PI/2)}};h.morph=function(b){return function(c,e){return(new h.MorphObj(c,e)).at(b)}};h.Situation=
h.invent({create:function(b){this.reversing=this.reversed=this.init=!1;this.duration=(new h.Number(b.duration)).valueOf();this.delay=(new h.Number(b.delay)).valueOf();this.start=+new Date+this.delay;this.finish=this.start+this.duration;this.ease=b.ease;this.loop=0;this.loops=!1;this.animations={};this.attrs={};this.styles={};this.transforms=[];this.once={}}});h.FX=h.invent({create:function(b){this._target=b;this.situations=[];this.active=!1;this.situation=null;this.paused=!1;this.absPos=this.pos=
this.lastPos=0;this._speed=1},extend:{animate:function(b,c,e){"object"==typeof b&&(c=b.ease,e=b.delay,b=b.duration);b=new h.Situation({duration:b||1E3,delay:e||0,ease:h.easing[c||"-"]||c});return this.queue(b),this},delay:function(b){b=new h.Situation({duration:b,delay:0,ease:h.easing["-"]});return this.queue(b)},target:function(b){return b&&b instanceof h.Element?(this._target=b,this):this._target},timeToAbsPos:function(b){return(b-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(b){return this.situation.duration/
this._speed*b+this.situation.start},startAnimFrame:function(){this.stopAnimFrame();this.animationFrame=f.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){f.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,
this.initAnimations().step()},queue:function(b){return("function"==typeof b||b instanceof h.Situation)&&this.situations.push(b),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof h.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var b,c,e=this.situation;if(e.init)return this;for(b in e.animations){var f=this.target()[b]();Array.isArray(f)||
(f=[f]);Array.isArray(e.animations[b])||(e.animations[b]=[e.animations[b]]);for(c=f.length;c--;)e.animations[b][c]instanceof h.Number&&(f[c]=new h.Number(f[c])),e.animations[b][c]=f[c].morph(e.animations[b][c])}for(b in e.attrs)e.attrs[b]=new h.MorphObj(this.target().attr(b),e.attrs[b]);for(b in e.styles)e.styles[b]=new h.MorphObj(this.target().style(b),e.styles[b]);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=
null,this},stop:function(b,c){var e=this.active;return this.active=!1,c&&this.clearQueue(),b&&this.situation&&(!e&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var b=this.situation;this.stop();this.situation=b;this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return!0===
this.situation.loops&&(this.situation.loops=this.situation.loop+1),"number"==typeof this.situation.loops?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(b,c){var e=this.situation.duration/this._speed;return this.absPos=b,c||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*e,this.situation.finish=this.situation.start+e,this.step(!0)},speed:function(b){return 0===b?this.pause():b?(this._speed=b,this.at(this.absPos,
!0)):this._speed},loop:function(b,c){var e=this.last();return e.loops=null==b||b,e.loop=0,c&&(e.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(b){var c=this.last();return c.reversed=void 0===b?!c.reversed:b,this},progress:function(b){return b?this.situation.ease(this.pos):this.pos},after:function(b){var c=this.last();return this.target().on("finished.fx",function J(e){e.detail.situation==
c&&(b.call(this,c),this.off("finished.fx",J))}),this._callStart()},during:function(b){var c=this.last(),e=function(e){e.detail.situation==c&&b.call(this,e.detail.pos,h.morph(e.detail.pos),e.detail.eased,c)};return this.target().off("during.fx",e).on("during.fx",e),this.after(function(){this.off("during.fx",e)}),this._callStart()},afterAll:function(b){var c=function J(c){b.call(this);this.off("allfinished.fx",J)};return this.target().off("allfinished.fx",c).on("allfinished.fx",c),this._callStart()},
duringAll:function(b){var c=function(c){b.call(this,c.detail.pos,h.morph(c.detail.pos),c.detail.eased,c.detail.situation)};return this.target().off("during.fx",c).on("during.fx",c),this.afterAll(function(){this.off("during.fx",c)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(b,c,e){return this.last()[e||"animations"][b]=c,this._callStart()},step:function(b){if(b||(this.absPos=this.timeToAbsPos(+new Date)),
!1!==this.situation.loops){var c;b=Math.max(this.absPos,0);var e=Math.floor(b);!0===this.situation.loops||e<this.situation.loops?(this.pos=b-e,c=this.situation.loop,this.situation.loop=e):(this.absPos=this.situation.loops,this.pos=1,c=this.situation.loop-1,this.situation.loop=this.situation.loops);this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-c)%2))}else this.pos=this.absPos=Math.min(this.absPos,1);0>this.pos&&(this.pos=0);this.situation.reversed&&
(this.pos=1-this.pos);c=this.situation.ease(this.pos);for(var g in this.situation.once)g>this.lastPos&&g<=c&&(this.situation.once[g].call(this.target(),this.pos,c),delete this.situation.once[g]);return this.active&&this.target().fire("during",{pos:this.pos,eased:c,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||
(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=c,this):this},eachAt:function(){var b,c=this,e=this.target(),f=this.situation;for(l in f.animations){var k=[].concat(f.animations[l]).map(function(b){return"string"!=typeof b&&b.at?b.at(f.ease(c.pos),c.pos):b});e[l].apply(e,k)}for(l in f.attrs)k=[l].concat(f.attrs[l]).map(function(b){return"string"!=
typeof b&&b.at?b.at(f.ease(c.pos),c.pos):b}),e.attr.apply(e,k);for(l in f.styles)k=[l].concat(f.styles[l]).map(function(b){return"string"!=typeof b&&b.at?b.at(f.ease(c.pos),c.pos):b}),e.style.apply(e,k);if(f.transforms.length){k=f.initialTransformation;var l=0;for(b=f.transforms.length;l<b;l++){var m=f.transforms[l];m instanceof h.Matrix?k=m.relative?k.multiply((new h.Matrix).morph(m).at(f.ease(this.pos))):k.morph(m).at(f.ease(this.pos)):(m.relative||m.undo(k.extract()),k=k.multiply(m.at(f.ease(this.pos))))}e.matrix(k)}return this},
once:function(b,c,e){var f=this.last();return e||(b=f.ease(b)),f.once[b]=c,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:h.Element,construct:{animate:function(b,c,e){return(this.fx||(this.fx=new h.FX(this))).animate(b,c,e)},delay:function(b){return(this.fx||(this.fx=new h.FX(this))).delay(b)},stop:function(b,c){return this.fx&&this.fx.stop(b,c),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),
this},play:function(){return this.fx&&this.fx.play(),this},speed:function(b){if(this.fx){if(null==b)return this.fx.speed();this.fx.speed(b)}return this}}});h.MorphObj=h.invent({create:function(b,c){return h.Color.isColor(c)?(new h.Color(b)).morph(c):h.regex.delimiter.test(b)?(new h.Array(b)).morph(c):h.regex.numberAndUnit.test(c)?(new h.Number(b)).morph(c):(this.value=b,void(this.destination=c))},extend:{at:function(b,c){return 1>c?this.value:this.destination},valueOf:function(){return this.value}}});
h.extend(h.FX,{attr:function(b,c,e){if("object"==typeof b)for(var f in b)this.attr(f,b[f]);else this.add(b,c,"attrs");return this},style:function(b,c){if("object"==typeof b)for(var e in b)this.style(e,b[e]);else this.add(b,c,"styles");return this},x:function(b,c){if(this.target()instanceof h.G)return this.transform({x:b},c),this;b=new h.Number(b);return b.relative=c,this.add("x",b)},y:function(b,c){if(this.target()instanceof h.G)return this.transform({y:b},c),this;b=new h.Number(b);return b.relative=
c,this.add("y",b)},cx:function(b){return this.add("cx",new h.Number(b))},cy:function(b){return this.add("cy",new h.Number(b))},move:function(b,c){return this.x(b).y(c)},center:function(b,c){return this.cx(b).cy(c)},size:function(b,c){if(this.target()instanceof h.Text)this.attr("font-size",b);else{var e;b&&c||(e=this.target().bbox());b||(b=e.width/e.height*c);c||(c=e.height/e.width*b);this.add("width",new h.Number(b)).add("height",new h.Number(c))}return this},width:function(b){return this.add("width",
new h.Number(b))},height:function(b){return this.add("height",new h.Number(b))},plot:function(b,c,e,f){return 4==arguments.length?this.plot([b,c,e,f]):this.add("plot",new (this.target().morphArray)(b))},leading:function(b){return this.target().leading?this.add("leading",new h.Number(b)):this},viewbox:function(b,c,e,f){return this.target()instanceof h.Container&&this.add("viewbox",new h.ViewBox(b,c,e,f)),this},update:function(b,c,e){if(this.target()instanceof h.Stop){if("number"==typeof b||b instanceof
h.Number)return this.update({offset:b,color:c,opacity:e});null!=b.opacity&&this.attr("stop-opacity",b.opacity);null!=b.color&&this.attr("stop-color",b.color);null!=b.offset&&this.attr("offset",b.offset)}return this}});h.Box=h.invent({create:function(b,c,e,f){if(!("object"!=typeof b||b instanceof h.Element))return h.Box.call(this,null!=b.left?b.left:b.x,null!=b.top?b.top:b.y,b.width,b.height);4==arguments.length&&(this.x=b,this.y=c,this.width=e,this.height=f);w(this)},extend:{merge:function(b){var c=
new this.constructor;return c.x=Math.min(this.x,b.x),c.y=Math.min(this.y,b.y),c.width=Math.max(this.x+this.width,b.x+b.width)-c.x,c.height=Math.max(this.y+this.height,b.y+b.height)-c.y,w(c)},transform:function(b){var c,e=1/0,f=-1/0,g=1/0,k=-1/0;return[new h.Point(this.x,this.y),new h.Point(this.x2,this.y),new h.Point(this.x,this.y2),new h.Point(this.x2,this.y2)].forEach(function(c){c=c.transform(b);e=Math.min(e,c.x);f=Math.max(f,c.x);g=Math.min(g,c.y);k=Math.max(k,c.y)}),c=new this.constructor,c.x=
e,c.width=f-e,c.y=g,c.height=k-g,w(c),c}}});h.BBox=h.invent({create:function(c){if(h.Box.apply(this,[].slice.call(arguments)),c instanceof h.Element){try{if(b.documentElement.contains){if(!b.documentElement.contains(c.node))throw new Exception("Element not in the dom");}else{for(var e=c.node;e.parentNode;)e=e.parentNode;if(e!=b)throw new Exception("Element not in the dom");}var f=c.node.getBBox()}catch(M){c instanceof h.Shape?(e=c.clone(h.parser.draw.instance).show(),f=e.node.getBBox(),e.remove()):
f={x:c.node.clientLeft,y:c.node.clientTop,width:c.node.clientWidth,height:c.node.clientHeight}}h.Box.call(this,f)}},inherit:h.Box,parent:h.Element,construct:{bbox:function(){return new h.BBox(this)}}});h.BBox.prototype.constructor=h.BBox;h.extend(h.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}});h.RBox=h.invent({create:function(b){h.Box.apply(this,[].slice.call(arguments));b instanceof h.Element&&h.Box.call(this,
b.node.getBoundingClientRect())},inherit:h.Box,parent:h.Element,extend:{addOffset:function(){return this.x+=f.pageXOffset,this.y+=f.pageYOffset,this}},construct:{rbox:function(b){return b?(new h.RBox(this)).transform(b.screenCTM().inverse()):(new h.RBox(this)).addOffset()}}});h.RBox.prototype.constructor=h.RBox;h.Matrix=h.invent({create:function(b){var c,e=m([1,0,0,1,0,0]);b=b instanceof h.Element?b.matrixify():"string"==typeof b?m(b.split(h.regex.delimiter).map(parseFloat)):6==arguments.length?m([].slice.call(arguments)):
Array.isArray(b)?m(b):"object"==typeof b?b:e;for(c=H.length-1;0<=c;--c)this[H[c]]=null!=b[H[c]]?b[H[c]]:e[H[c]]},extend:{extract:function(){var b=180/Math.PI*Math.atan2(0*this.b+1*this.d,0*this.a+1*this.c)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(b*Math.PI/180)+this.f*Math.sin(b*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(b*Math.PI/180)+this.e*Math.sin(-b*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-b,skewY:180/Math.PI*Math.atan2(1*
this.b+0*this.d,1*this.a+0*this.c),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:b,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new h.Matrix(this)}},clone:function(){return new h.Matrix(this)},morph:function(b){return this.destination=new h.Matrix(b),this},at:function(b){return this.destination?new h.Matrix({a:this.a+(this.destination.a-this.a)*b,b:this.b+(this.destination.b-this.b)*b,c:this.c+(this.destination.c-this.c)*b,d:this.d+
(this.destination.d-this.d)*b,e:this.e+(this.destination.e-this.e)*b,f:this.f+(this.destination.f-this.f)*b}):this},multiply:function(b){return new h.Matrix(this.native().multiply(r(b).native()))},inverse:function(){return new h.Matrix(this.native().inverse())},translate:function(b,c){return new h.Matrix(this.native().translate(b||0,c||0))},scale:function(b,c,e,f){return 1==arguments.length?c=b:3==arguments.length&&(f=e,e=c,c=b),this.around(e,f,new h.Matrix(b,0,0,c,0,0))},rotate:function(b,c,e){return b=
h.utils.radians(b),this.around(c,e,new h.Matrix(Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b),0,0))},flip:function(b,c){return"x"==b?this.scale(-1,1,c,0):"y"==b?this.scale(1,-1,0,c):this.scale(-1,-1,b,null!=c?c:b)},skew:function(b,c,e,f){return 1==arguments.length?c=b:3==arguments.length&&(f=e,e=c,c=b),b=h.utils.radians(b),c=h.utils.radians(c),this.around(e,f,new h.Matrix(1,Math.tan(c),Math.tan(b),1,0,0))},skewX:function(b,c,e){return this.skew(b,0,c,e)},skewY:function(b,c,e){return this.skew(0,
b,c,e)},around:function(b,c,e){return this.multiply(new h.Matrix(1,0,0,1,b||0,c||0)).multiply(e).multiply(new h.Matrix(1,0,0,1,-b||0,-c||0))},native:function(){for(var b=h.parser.native.createSVGMatrix(),c=H.length-1;0<=c;c--)b[H[c]]=this[H[c]];return b},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:h.Element,construct:{ctm:function(){return new h.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof h.Nested){var b=this.rect(1,
1),c=b.node.getScreenCTM();return b.remove(),new h.Matrix(c)}return new h.Matrix(this.node.getScreenCTM())}}});h.Point=h.invent({create:function(b,c){var e={x:0,y:0};b=Array.isArray(b)?{x:b[0],y:b[1]}:"object"==typeof b?{x:b.x,y:b.y}:null!=b?{x:b,y:null!=c?c:b}:e;this.x=b.x;this.y=b.y},extend:{clone:function(){return new h.Point(this)},morph:function(b,c){return this.destination=new h.Point(b,c),this},at:function(b){return this.destination?new h.Point({x:this.x+(this.destination.x-this.x)*b,y:this.y+
(this.destination.y-this.y)*b}):this},native:function(){var b=h.parser.native.createSVGPoint();return b.x=this.x,b.y=this.y,b},transform:function(b){return new h.Point(this.native().matrixTransform(b.native()))}}});h.extend(h.Element,{point:function(b,c){return(new h.Point(b,c)).transform(this.screenCTM().inverse())}});h.extend(h.Element,{attr:function(b,c,e){if(null==b){b={};c=this.node.attributes;for(e=c.length-1;0<=e;e--)b[c[e].nodeName]=h.regex.isNumber.test(c[e].nodeValue)?parseFloat(c[e].nodeValue):
c[e].nodeValue;return b}if("object"==typeof b)for(c in b)this.attr(c,b[c]);else if(null===c)this.node.removeAttribute(b);else{if(null==c)return c=this.node.getAttribute(b),null==c?h.defaults.attrs[b]:h.regex.isNumber.test(c)?parseFloat(c):c;"stroke-width"==b?this.attr("stroke",0<parseFloat(c)?this._stroke:null):"stroke"==b&&(this._stroke=c);"fill"!=b&&"stroke"!=b||(h.regex.isImage.test(c)&&(c=this.doc().defs().image(c,0,0)),c instanceof h.Image&&(c=this.doc().defs().pattern(0,0,function(){this.add(c)})));
"number"==typeof c?c=new h.Number(c):h.Color.isColor(c)?c=new h.Color(c):Array.isArray(c)&&(c=new h.Array(c));"leading"==b?this.leading&&this.leading(c):"string"==typeof e?this.node.setAttributeNS(e,b,c.toString()):this.node.setAttribute(b,c.toString());!this.rebuild||"font-size"!=b&&"x"!=b||this.rebuild(b,c)}return this}});h.extend(h.Element,{transform:function(b,c){var e,f;if("object"!=typeof b)return e=(new h.Matrix(this)).extract(),"string"==typeof b?e[b]:e;(e=new h.Matrix(this),c=!!c||!!b.relative,
null!=b.a)?e=c?e.multiply(new h.Matrix(b)):new h.Matrix(b):null!=b.rotation?(n(b,this),e=c?e.rotate(b.rotation,b.cx,b.cy):e.rotate(b.rotation-e.extract().rotation,b.cx,b.cy)):null!=b.scale||null!=b.scaleX||null!=b.scaleY?((n(b,this),b.scaleX=null!=b.scale?b.scale:null!=b.scaleX?b.scaleX:1,b.scaleY=null!=b.scale?b.scale:null!=b.scaleY?b.scaleY:1,c)||(c=e.extract(),b.scaleX=1*b.scaleX/c.scaleX,b.scaleY=1*b.scaleY/c.scaleY),e=e.scale(b.scaleX,b.scaleY,b.cx,b.cy)):null!=b.skew||null!=b.skewX||null!=b.skewY?
((n(b,this),b.skewX=null!=b.skew?b.skew:null!=b.skewX?b.skewX:0,b.skewY=null!=b.skew?b.skew:null!=b.skewY?b.skewY:0,c)||(c=e.extract(),e=e.multiply((new h.Matrix).skew(c.skewX,c.skewY,b.cx,b.cy).inverse())),e=e.skew(b.skewX,b.skewY,b.cx,b.cy)):b.flip?("x"==b.flip||"y"==b.flip?b.offset=null==b.offset?this.bbox()["c"+b.flip]:b.offset:null==b.offset?(f=this.bbox(),b.flip=f.cx,b.offset=f.cy):b.flip=b.offset,e=(new h.Matrix).flip(b.flip,b.offset)):null==b.x&&null==b.y||(c?e=e.translate(b.x,b.y):(null!=
b.x&&(e.e=b.x),null!=b.y&&(e.f=b.y)));return this.attr("transform",e)}});h.extend(h.FX,{transform:function(b,c){var e,f,g=this.target();return"object"!=typeof b?(e=(new h.Matrix(g)).extract(),"string"==typeof b?e[b]:e):(c=!!c||!!b.relative,null!=b.a?e=new h.Matrix(b):null!=b.rotation?(n(b,g),e=new h.Rotate(b.rotation,b.cx,b.cy)):null!=b.scale||null!=b.scaleX||null!=b.scaleY?(n(b,g),b.scaleX=null!=b.scale?b.scale:null!=b.scaleX?b.scaleX:1,b.scaleY=null!=b.scale?b.scale:null!=b.scaleY?b.scaleY:1,e=
new h.Scale(b.scaleX,b.scaleY,b.cx,b.cy)):null!=b.skewX||null!=b.skewY?(n(b,g),b.skewX=null!=b.skewX?b.skewX:0,b.skewY=null!=b.skewY?b.skewY:0,e=new h.Skew(b.skewX,b.skewY,b.cx,b.cy)):b.flip?("x"==b.flip||"y"==b.flip?b.offset=null==b.offset?g.bbox()["c"+b.flip]:b.offset:null==b.offset?(f=g.bbox(),b.flip=f.cx,b.offset=f.cy):b.flip=b.offset,e=(new h.Matrix).flip(b.flip,b.offset)):null==b.x&&null==b.y||(e=new h.Translate(b.x,b.y)),e?(e.relative=c,this.last().transforms.push(e),this._callStart()):this)}});
h.extend(h.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(h.regex.transforms).slice(0,-1).map(function(b){b=b.trim().split("(");return[b[0],b[1].split(h.regex.delimiter).map(function(b){return parseFloat(b)})]}).reduce(function(b,c){return"matrix"==c[0]?b.multiply(m(c[1])):b[c[0]].apply(b,c[1])},new h.Matrix)},toParent:function(b){if(this==b)return this;var c=this.screenCTM(),e=b.screenCTM().inverse();return this.addTo(b).untransform().transform(e.multiply(c)),
this},toDoc:function(){return this.toParent(this.doc())}});h.Transformation=h.invent({create:function(b,c){if(1<arguments.length&&"boolean"!=typeof c)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(b))for(var e=0,f=this.arguments.length;e<f;++e)this[this.arguments[e]]=b[e];else if("object"==typeof b)for(e=0,f=this.arguments.length;e<f;++e)this[this.arguments[e]]=b[this.arguments[e]];this.inversed=!1;!0===c&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(b){for(var c=
[],e=0,f=this.arguments.length;e<f;++e)c.push(this[this.arguments[e]]);e=this._undo||new h.Matrix;return e=(new h.Matrix).morph(h.Matrix.prototype[this.method].apply(e,c)).at(b),this.inversed?e.inverse():e},undo:function(b){for(var c=0,e=this.arguments.length;c<e;++c)b[this.arguments[c]]=void 0===this[this.arguments[c]]?0:b[this.arguments[c]];return b.cx=this.cx,b.cy=this.cy,this._undo=(new (h[t(this.method)])(b,!0)).at(1),this}}});h.Translate=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(b,
c){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}});h.Rotate=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(b,c){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(b){b=(new h.Matrix).rotate((new h.Number).morph(this.rotation-(this._undo?this._undo.rotation:0)).at(b),this.cx,this.cy);return this.inversed?b.inverse():b},undo:function(b){return this._undo=
b,this}}});h.Scale=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(b,c){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}});h.Skew=h.invent({parent:h.Matrix,inherit:h.Transformation,create:function(b,c){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}});h.extend(h.Element,{style:function(b,e){if(0==arguments.length)return this.node.style.cssText||
"";if(2>arguments.length)if("object"==typeof b)for(e in b)this.style(e,b[e]);else{if(!h.regex.isCss.test(b))return this.node.style[c(b)];for(b=b.split(/\s*;\s*/).filter(function(b){return!!b}).map(function(b){return b.split(/\s*:\s*/)});e=b.pop();)this.style(e[0],e[1])}else this.node.style[c(b)]=null===e||h.regex.isBlank.test(e)?"":e;return this}});h.Parent=h.invent({create:function(b){this.constructor.call(this,b)},inherit:h.Element,extend:{children:function(){return h.utils.map(h.utils.filterSVGElements(this.node.childNodes),
function(b){return h.adopt(b)})},add:function(b,c){return null==c?this.node.appendChild(b.node):b.node!=this.node.childNodes[c]&&this.node.insertBefore(b.node,this.node.childNodes[c]),this},put:function(b,c){return this.add(b,c),b},has:function(b){return 0<=this.index(b)},index:function(b){return[].slice.call(this.node.childNodes).indexOf(b.node)},get:function(b){return h.adopt(this.node.childNodes[b])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-
1)},each:function(b,c){var e,f=this.children();var g=0;for(e=f.length;g<e;g++)f[g]instanceof h.Element&&b.apply(f[g],[g,f]),c&&f[g]instanceof h.Container&&f[g].each(b,c);return this},removeElement:function(b){return this.node.removeChild(b.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}});h.extend(h.Parent,{ungroup:function(b,c){return 0===c||this instanceof h.Defs||this.node==
h.parser.draw?this:(b=b||(this instanceof h.Doc?this:this.parent(h.Parent)),c=c||1/0,this.each(function(){return this instanceof h.Defs?this:this instanceof h.Parent?this.ungroup(b,c-1):this.toParent(b)}),this.node.firstChild||this.remove(),this)},flatten:function(b,c){return this.ungroup(b,c)}});h.Container=h.invent({create:function(b){this.constructor.call(this,b)},inherit:h.Parent});h.ViewBox=h.invent({create:function(b){var c,e,f;var g=[0,0,0,0];var k=1,l=1;var m=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;
if(b instanceof h.Element){var n=g=b;var r=(b.attr("viewBox")||"").match(m);b.bbox;m=new h.Number(b.width());for(f=new h.Number(b.height());"%"==m.unit;)k*=m.value,m=new h.Number(g instanceof h.Doc?g.parent().offsetWidth:g.parent().width()),g=g.parent();for(;"%"==f.unit;)l*=f.value,f=new h.Number(n instanceof h.Doc?n.parent().offsetHeight:n.parent().height()),n=n.parent();this.y=this.x=0;this.width=m*k;this.height=f*l;this.zoom=1;r&&(c=parseFloat(r[0]),e=parseFloat(r[1]),m=parseFloat(r[2]),f=parseFloat(r[3]),
this.zoom=this.width/this.height>m/f?this.height/f:this.width/m,this.x=c,this.y=e,this.width=m,this.height=f)}else b="string"==typeof b?b.match(m).map(function(b){return parseFloat(b)}):Array.isArray(b)?b:"object"==typeof b?[b.x,b.y,b.width,b.height]:4==arguments.length?[].slice.call(arguments):g,this.x=b[0],this.y=b[1],this.width=b[2],this.height=b[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(b,c,e,f){return this.destination=new h.ViewBox(b,
c,e,f),this},at:function(b){return this.destination?new h.ViewBox([this.x+(this.destination.x-this.x)*b,this.y+(this.destination.y-this.y)*b,this.width+(this.destination.width-this.width)*b,this.height+(this.destination.height-this.height)*b]):this}},parent:h.Container,construct:{viewbox:function(b,c,e,f){return 0==arguments.length?new h.ViewBox(this):this.attr("viewBox",new h.ViewBox(b,c,e,f))}}});"click dblclick mousedown mouseup mouseover mouseout mousemove touchstart touchmove touchleave touchend touchcancel".split(" ").forEach(function(b){h.Element.prototype[b]=
function(c){return h.on(this.node,b,c),this}});h.listeners=[];h.handlerMap=[];h.listenerId=0;h.on=function(b,c,e,f,k){f=e.bind(f||b.instance||b);var g=(h.handlerMap.indexOf(b)+1||h.handlerMap.push(b))-1,l=c.split(".")[0];c=c.split(".")[1]||"*";h.listeners[g]=h.listeners[g]||{};h.listeners[g][l]=h.listeners[g][l]||{};h.listeners[g][l][c]=h.listeners[g][l][c]||{};e._svgjsListenerId||(e._svgjsListenerId=++h.listenerId);h.listeners[g][l][c][e._svgjsListenerId]=f;b.addEventListener(l,f,k||!1)};h.off=function(b,
c,e){var f=h.handlerMap.indexOf(b),g=c&&c.split(".")[0],k=c&&c.split(".")[1],l="";if(-1!=f)if(e)("function"==typeof e&&(e=e._svgjsListenerId),e)&&h.listeners[f][g]&&h.listeners[f][g][k||"*"]&&(b.removeEventListener(g,h.listeners[f][g][k||"*"][e],!1),delete h.listeners[f][g][k||"*"][e]);else if(k&&g){if(h.listeners[f][g]&&h.listeners[f][g][k]){for(e in h.listeners[f][g][k])h.off(b,[g,k].join("."),e);delete h.listeners[f][g][k]}}else if(k)for(c in h.listeners[f])for(l in h.listeners[f][c])k===l&&h.off(b,
[c,k].join("."));else if(g){if(h.listeners[f][g]){for(l in h.listeners[f][g])h.off(b,[g,l].join("."));delete h.listeners[f][g]}}else{for(c in h.listeners[f])h.off(b,c);delete h.listeners[f];delete h.handlerMap[f]}};h.extend(h.Element,{on:function(b,c,e,f){return h.on(this.node,b,c,e,f),this},off:function(b,c){return h.off(this.node,b,c),this},fire:function(b,c){return b instanceof f.Event?this.node.dispatchEvent(b):this.node.dispatchEvent(b=new f.CustomEvent(b,{detail:c,cancelable:!0})),this._event=
b,this},event:function(){return this._event}});h.Defs=h.invent({create:"defs",inherit:h.Container});h.G=h.invent({create:"g",inherit:h.Container,extend:{x:function(b){return null==b?this.transform("x"):this.transform({x:b-this.x()},!0)},y:function(b){return null==b?this.transform("y"):this.transform({y:b-this.y()},!0)},cx:function(b){return null==b?this.gbox().cx:this.x(b-this.gbox().width/2)},cy:function(b){return null==b?this.gbox().cy:this.y(b-this.gbox().height/2)},gbox:function(){var b=this.bbox(),
c=this.transform();return b.x+=c.x,b.x2+=c.x,b.cx+=c.x,b.y+=c.y,b.y2+=c.y,b.cy+=c.y,b}},construct:{group:function(){return this.put(new h.G)}}});h.extend(h.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var b=this.position()+1,c=this.parent();return c.removeElement(this).add(this,b),c instanceof
h.Doc&&c.node.appendChild(c.defs().node),this},backward:function(){var b=this.position();return 0<b&&this.parent().removeElement(this).add(this,b-1),this},front:function(){var b=this.parent();return b.node.appendChild(this.node),b instanceof h.Doc&&b.node.appendChild(b.defs().node),this},back:function(){return 0<this.position()&&this.parent().removeElement(this).add(this,0),this},before:function(b){b.remove();var c=this.position();return this.parent().add(b,c),this},after:function(b){b.remove();var c=
this.position();return this.parent().add(b,c+1),this}});h.Mask=h.invent({create:function(){this.constructor.call(this,h.create("mask"));this.targets=[]},inherit:h.Container,extend:{remove:function(){for(var b=this.targets.length-1;0<=b;b--)this.targets[b]&&this.targets[b].unmask();return this.targets=[],this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new h.Mask)}}});h.extend(h.Element,{maskWith:function(b){return this.masker=b instanceof h.Mask?b:this.parent().mask().add(b),
this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}});h.ClipPath=h.invent({create:function(){this.constructor.call(this,h.create("clipPath"));this.targets=[]},inherit:h.Container,extend:{remove:function(){for(var b=this.targets.length-1;0<=b;b--)this.targets[b]&&this.targets[b].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new h.ClipPath)}}});
h.extend(h.Element,{clipWith:function(b){return this.clipper=b instanceof h.ClipPath?b:this.parent().clip().add(b),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}});h.Gradient=h.invent({create:function(b){this.constructor.call(this,h.create(b+"Gradient"));this.type=b},inherit:h.Container,extend:{at:function(b,c,e){return this.put(new h.Stop).update(b,c,e)},update:function(b){return this.clear(),
"function"==typeof b&&b.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(b,c,e){return"transform"==b&&(b="gradientTransform"),h.Container.prototype.attr.call(this,b,c,e)}},construct:{gradient:function(b,c){return this.defs().gradient(b,c)}}});h.extend(h.Gradient,h.FX,{from:function(b,c){return"radial"==(this._target||this).type?this.attr({fx:new h.Number(b),fy:new h.Number(c)}):this.attr({x1:new h.Number(b),y1:new h.Number(c)})},
to:function(b,c){return"radial"==(this._target||this).type?this.attr({cx:new h.Number(b),cy:new h.Number(c)}):this.attr({x2:new h.Number(b),y2:new h.Number(c)})}});h.extend(h.Defs,{gradient:function(b,c){return this.put(new h.Gradient(b)).update(c)}});h.Stop=h.invent({create:"stop",inherit:h.Element,extend:{update:function(b,c,e){return("number"==typeof b||b instanceof h.Number)&&(b={offset:b,color:c,opacity:e}),null!=b.opacity&&this.attr("stop-opacity",b.opacity),null!=b.color&&this.attr("stop-color",
b.color),null!=b.offset&&this.attr("offset",new h.Number(b.offset)),this}}});h.Pattern=h.invent({create:"pattern",inherit:h.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(b){return this.clear(),"function"==typeof b&&b.call(this,this),this},toString:function(){return this.fill()},attr:function(b,c,e){return"transform"==b&&(b="patternTransform"),h.Container.prototype.attr.call(this,b,c,e)}},construct:{pattern:function(b,c,e){return this.defs().pattern(b,c,e)}}});h.extend(h.Defs,
{pattern:function(b,c,e){return this.put(new h.Pattern).update(e).attr({x:0,y:0,width:b,height:c,patternUnits:"userSpaceOnUse"})}});h.Doc=h.invent({create:function(c){c&&(c="string"==typeof c?b.getElementById(c):c,"svg"==c.nodeName?this.constructor.call(this,c):(this.constructor.call(this,h.create("svg")),c.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:h.Container,extend:{namespace:function(){return this.attr({xmlns:h.ns,version:"1.1"}).attr("xmlns:xlink",h.xlink,
h.xmlns).attr("xmlns:svgjs",h.svgjs,h.xmlns)},defs:function(){if(!this._defs){var b;(b=this.node.getElementsByTagName("defs")[0])?this._defs=h.adopt(b):this._defs=new h.Defs;this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(){var b=this.node.getScreenCTM();return b&&this.style("left",-b.e%1+"px").style("top",-b.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),
this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,h.parser.draw.parentNode||this.node.appendChild(h.parser.draw),this}}});h.Shape=h.invent({create:function(b){this.constructor.call(this,b)},inherit:h.Element});h.Bare=h.invent({create:function(b,c){if(this.constructor.call(this,h.create(b)),c)for(var e in c.prototype)"function"==typeof c.prototype[e]&&(this[e]=c.prototype[e])},inherit:h.Element,extend:{words:function(c){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);
return this.node.appendChild(b.createTextNode(c)),this}}});h.extend(h.Parent,{element:function(b,c){return this.put(new h.Bare(b,c))}});h.Symbol=h.invent({create:"symbol",inherit:h.Container,construct:{symbol:function(){return this.put(new h.Symbol)}}});h.Use=h.invent({create:"use",inherit:h.Shape,extend:{element:function(b,c){return this.attr("href",(c||"")+"#"+b,h.xlink)}},construct:{use:function(b,c){return this.put(new h.Use).element(b,c)}}});h.Rect=h.invent({create:"rect",inherit:h.Shape,construct:{rect:function(b,
c){return this.put(new h.Rect).size(b,c)}}});h.Circle=h.invent({create:"circle",inherit:h.Shape,construct:{circle:function(b){return this.put(new h.Circle).rx((new h.Number(b)).divide(2)).move(0,0)}}});h.extend(h.Circle,h.FX,{rx:function(b){return this.attr("r",b)},ry:function(b){return this.rx(b)}});h.Ellipse=h.invent({create:"ellipse",inherit:h.Shape,construct:{ellipse:function(b,c){return this.put(new h.Ellipse).size(b,c).move(0,0)}}});h.extend(h.Ellipse,h.Rect,h.FX,{rx:function(b){return this.attr("rx",
b)},ry:function(b){return this.attr("ry",b)}});h.extend(h.Circle,h.Ellipse,{x:function(b){return null==b?this.cx()-this.rx():this.cx(b+this.rx())},y:function(b){return null==b?this.cy()-this.ry():this.cy(b+this.ry())},cx:function(b){return null==b?this.attr("cx"):this.attr("cx",b)},cy:function(b){return null==b?this.attr("cy"):this.attr("cy",b)},width:function(b){return null==b?2*this.rx():this.rx((new h.Number(b)).divide(2))},height:function(b){return null==b?2*this.ry():this.ry((new h.Number(b)).divide(2))},
size:function(b,c){b=k(this,b,c);return this.rx((new h.Number(b.width)).divide(2)).ry((new h.Number(b.height)).divide(2))}});h.Line=h.invent({create:"line",inherit:h.Shape,extend:{array:function(){return new h.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(b,c,e,f){return null==b?this.array():(b=void 0!==c?{x1:b,y1:c,x2:e,y2:f}:(new h.PointArray(b)).toLine(),this.attr(b))},move:function(b,c){return this.attr(this.array().move(b,c).toLine())},size:function(b,
c){b=k(this,b,c);return this.attr(this.array().size(b.width,b.height).toLine())}},construct:{line:function(b,c,e,f){return h.Line.prototype.plot.apply(this.put(new h.Line),null!=b?[b,c,e,f]:[0,0,0,0])}}});h.Polyline=h.invent({create:"polyline",inherit:h.Shape,construct:{polyline:function(b){return this.put(new h.Polyline).plot(b||new h.PointArray)}}});h.Polygon=h.invent({create:"polygon",inherit:h.Shape,construct:{polygon:function(b){return this.put(new h.Polygon).plot(b||new h.PointArray)}}});h.extend(h.Polyline,
h.Polygon,{array:function(){return this._array||(this._array=new h.PointArray(this.attr("points")))},plot:function(b){return null==b?this.array():this.clear().attr("points","string"==typeof b?b:this._array=new h.PointArray(b))},clear:function(){return delete this._array,this},move:function(b,c){return this.attr("points",this.array().move(b,c))},size:function(b,c){b=k(this,b,c);return this.attr("points",this.array().size(b.width,b.height))}});h.extend(h.Line,h.Polyline,h.Polygon,{morphArray:h.PointArray,
x:function(b){return null==b?this.bbox().x:this.move(b,this.bbox().y)},y:function(b){return null==b?this.bbox().y:this.move(this.bbox().x,b)},width:function(b){var c=this.bbox();return null==b?c.width:this.size(b,c.height)},height:function(b){var c=this.bbox();return null==b?c.height:this.size(c.width,b)}});h.Path=h.invent({create:"path",inherit:h.Shape,extend:{morphArray:h.PathArray,array:function(){return this._array||(this._array=new h.PathArray(this.attr("d")))},plot:function(b){return null==
b?this.array():this.clear().attr("d","string"==typeof b?b:this._array=new h.PathArray(b))},clear:function(){return delete this._array,this},move:function(b,c){return this.attr("d",this.array().move(b,c))},x:function(b){return null==b?this.bbox().x:this.move(b,this.bbox().y)},y:function(b){return null==b?this.bbox().y:this.move(this.bbox().x,b)},size:function(b,c){b=k(this,b,c);return this.attr("d",this.array().size(b.width,b.height))},width:function(b){return null==b?this.bbox().width:this.size(b,
this.bbox().height)},height:function(b){return null==b?this.bbox().height:this.size(this.bbox().width,b)}},construct:{path:function(b){return this.put(new h.Path).plot(b||new h.PathArray)}}});h.Image=h.invent({create:"image",inherit:h.Shape,extend:{load:function(b){if(!b)return this;var c=this,e=new f.Image;return h.on(e,"load",function(){h.off(e);var f=c.parent(h.Pattern);null!==f&&(0==c.width()&&0==c.height()&&c.size(e.width,e.height),f&&0==f.width()&&0==f.height()&&f.size(c.width(),c.height()),
"function"==typeof c._loaded&&c._loaded.call(c,{width:e.width,height:e.height,ratio:e.width/e.height,url:b}))}),h.on(e,"error",function(b){h.off(e);"function"==typeof c._error&&c._error.call(c,b)}),this.attr("href",e.src=this.src=b,h.xlink)},loaded:function(b){return this._loaded=b,this},error:function(b){return this._error=b,this}},construct:{image:function(b,c,e){return this.put(new h.Image).load(b).size(c||0,e||c||0)}}});h.Text=h.invent({create:function(){this.constructor.call(this,h.create("text"));
this.dom.leading=new h.Number(1.3);this._rebuild=!0;this._build=!1;this.attr("font-family",h.defaults.attrs["font-family"])},inherit:h.Shape,extend:{x:function(b){return null==b?this.attr("x"):this.attr("x",b)},y:function(b){var c=this.attr("y"),e="number"==typeof c?c-this.bbox().y:0;return null==b?"number"==typeof c?c-e:c:this.attr("y","number"==typeof b?b+e:b)},cx:function(b){return null==b?this.bbox().cx:this.x(b-this.bbox().width/2)},cy:function(b){return null==b?this.bbox().cy:this.y(b-this.bbox().height/
2)},text:function(b){if(void 0===b){b="";for(var c=this.node.childNodes,e=0,f=c.length;e<f;++e)0!=e&&3!=c[e].nodeType&&1==h.adopt(c[e]).dom.newLined&&(b+="\n"),b+=c[e].textContent;return b}if(this.clear().build(!0),"function"==typeof b)b.call(this,this);else for(b=b.split("\n"),e=0,c=b.length;e<c;e++)this.tspan(b[e]).newLine();return this.build(!1).rebuild()},size:function(b){return this.attr("font-size",b).rebuild()},leading:function(b){return null==b?this.dom.leading:(this.dom.leading=new h.Number(b),
this.rebuild())},lines:function(){var b=(this.textPath&&this.textPath()||this).node;b=h.utils.map(h.utils.filterSVGElements(b.childNodes),function(b){return h.adopt(b)});return new h.Set(b)},rebuild:function(b){if("boolean"==typeof b&&(this._rebuild=b),this._rebuild){var c=this,e=0,f=this.dom.leading*new h.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(c.textPath()||this.attr("x",c.attr("x")),"\n"==this.text()?e+=f:(this.attr("dy",f+e),e=0))});this.fire("rebuild")}return this},
build:function(b){return this._build=!!b,this},setData:function(b){return this.dom=b,this.dom.leading=new h.Number(b.leading||1.3),this}},construct:{text:function(b){return this.put(new h.Text).text(b)},plain:function(b){return this.put(new h.Text).plain(b)}}});h.Tspan=h.invent({create:"tspan",inherit:h.Shape,extend:{text:function(b){return null==b?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof b?b.call(this,this):this.plain(b),this)},dx:function(b){return this.attr("dx",b)},
dy:function(b){return this.attr("dy",b)},newLine:function(){var b=this.parent(h.Text);return this.dom.newLined=!0,this.dy(b.dom.leading*b.attr("font-size")).attr("x",b.x())}}});h.extend(h.Text,h.Tspan,{plain:function(c){return!1===this._build&&this.clear(),this.node.appendChild(b.createTextNode(c)),this},tspan:function(b){var c=(this.textPath&&this.textPath()||this).node,e=new h.Tspan;return!1===this._build&&this.clear(),c.appendChild(e.node),e.text(b)},clear:function(){for(var b=(this.textPath&&
this.textPath()||this).node;b.hasChildNodes();)b.removeChild(b.lastChild);return this},length:function(){return this.node.getComputedTextLength()}});h.TextPath=h.invent({create:"textPath",inherit:h.Parent,parent:h.Text,construct:{morphArray:h.PathArray,path:function(b){var c=new h.TextPath;for(b=this.doc().defs().path(b);this.node.hasChildNodes();)c.node.appendChild(this.node.firstChild);return this.node.appendChild(c.node),c.attr("href","#"+b,h.xlink),this},array:function(){var b=this.track();return b?
b.array():null},plot:function(b){var c=this.track(),e=null;return c&&(e=c.plot(b)),null==b?e:this},track:function(){var b=this.textPath();if(b)return b.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return h.adopt(this.node.firstChild)}}});h.Nested=h.invent({create:function(){this.constructor.call(this,h.create("svg"));this.style("overflow","visible")},inherit:h.Container,construct:{nested:function(){return this.put(new h.Nested)}}});h.A=
h.invent({create:"a",inherit:h.Container,extend:{to:function(b){return this.attr("href",b,h.xlink)},show:function(b){return this.attr("show",b,h.xlink)},target:function(b){return this.attr("target",b)}},construct:{link:function(b){return this.put(new h.A).to(b)}}});h.extend(h.Element,{linkTo:function(b){var c=new h.A;return"function"==typeof b?b.call(c,c):c.to(b),this.parent().put(c).put(this)}});h.Marker=h.invent({create:"marker",inherit:h.Container,extend:{width:function(b){return this.attr("markerWidth",
b)},height:function(b){return this.attr("markerHeight",b)},ref:function(b,c){return this.attr("refX",b).attr("refY",c)},update:function(b){return this.clear(),"function"==typeof b&&b.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(b,c,e){return this.defs().marker(b,c,e)}}});h.extend(h.Defs,{marker:function(b,c,e){return this.put(new h.Marker).size(b,c).ref(b/2,c/2).viewbox(0,0,b,c).attr("orient","auto").update(e)}});h.extend(h.Line,h.Polyline,h.Polygon,
h.Path,{marker:function(b,c,e,f){var g=["marker"];return"all"!=b&&g.push(b),g=g.join("-"),b=c instanceof h.Marker?c:this.doc().marker(c,e,f),this.attr(g,b)}});var F={stroke:"color width opacity linecap linejoin miterlimit dasharray dashoffset".split(" "),fill:["color","opacity","rule"],prefix:function(b,c){return"color"==c?b:b+"-"+c}};["fill","stroke"].forEach(function(b){var c,e={};e[b]=function(e){if(void 0===e)return this;if("string"==typeof e||h.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(b,
e);else for(c=F[b].length-1;0<=c;c--)null!=e[F[b][c]]&&this.attr(F.prefix(b,F[b][c]),e[F[b][c]]);return this};h.extend(h.Element,h.FX,e)});h.extend(h.Element,h.FX,{rotate:function(b,c,e){return this.transform({rotation:b,cx:c,cy:e})},skew:function(b,c,e,f){return 1==arguments.length||3==arguments.length?this.transform({skew:b,cx:c,cy:e}):this.transform({skewX:b,skewY:c,cx:e,cy:f})},scale:function(b,c,e,f){return 1==arguments.length||3==arguments.length?this.transform({scale:b,cx:c,cy:e}):this.transform({scaleX:b,
scaleY:c,cx:e,cy:f})},translate:function(b,c){return this.transform({x:b,y:c})},flip:function(b,c){return c="number"==typeof b?b:c,this.transform({flip:b||"both",offset:c})},matrix:function(b){return this.attr("transform",new h.Matrix(6==arguments.length?[].slice.call(arguments):b))},opacity:function(b){return this.attr("opacity",b)},dx:function(b){return this.x((new h.Number(b)).plus(this instanceof h.FX?0:this.x()),!0)},dy:function(b){return this.y((new h.Number(b)).plus(this instanceof h.FX?0:
this.y()),!0)},dmove:function(b,c){return this.dx(b).dy(c)}});h.extend(h.Rect,h.Ellipse,h.Circle,h.Gradient,h.FX,{radius:function(b,c){var e=(this._target||this).type;return"radial"==e||"circle"==e?this.attr("r",new h.Number(b)):this.rx(b).ry(null==c?b:c)}});h.extend(h.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(b){return this.node.getPointAtLength(b)}});h.extend(h.Parent,h.Text,h.Tspan,h.FX,{font:function(b,c){if("object"==typeof b)for(c in b)this.font(c,b[c]);return"leading"==
b?this.leading(c):"anchor"==b?this.attr("text-anchor",c):"size"==b||"family"==b||"weight"==b||"stretch"==b||"variant"==b||"style"==b?this.attr("font-"+b,c):this.attr(b,c)}});h.Set=h.invent({create:function(b){Array.isArray(b)?this.members=b:this.clear()},extend:{add:function(){var b,c=[].slice.call(arguments);var e=0;for(b=c.length;e<b;e++)this.members.push(c[e]);return this},remove:function(b){b=this.index(b);return-1<b&&this.members.splice(b,1),this},each:function(b){for(var c=0,e=this.members.length;c<
e;c++)b.apply(this.members[c],[c,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(b){return 0<=this.index(b)},index:function(b){return this.members.indexOf(b)},get:function(b){return this.members[b]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(0==this.members.length)return new h.RBox;var b=this.members[0].rbox(this.members[0].doc());
return this.each(function(){b=b.merge(this.rbox(this.doc()))}),b}},construct:{set:function(b){return new h.Set(b)}}});h.FX.Set=h.invent({create:function(b){this.set=b}});h.Set.inherit=function(){var b,c=[];for(b in h.Shape.prototype)"function"==typeof h.Shape.prototype[b]&&"function"!=typeof h.Set.prototype[b]&&c.push(b);c.forEach(function(b){h.Set.prototype[b]=function(){for(var c=0,e=this.members.length;c<e;c++)this.members[c]&&"function"==typeof this.members[c][b]&&this.members[c][b].apply(this.members[c],
arguments);return"animate"==b?this.fx||(this.fx=new h.FX.Set(this)):this}});c=[];for(b in h.FX.prototype)"function"==typeof h.FX.prototype[b]&&"function"!=typeof h.FX.Set.prototype[b]&&c.push(b);c.forEach(function(b){h.FX.Set.prototype[b]=function(){for(var c=0,e=this.set.members.length;c<e;c++)this.set.members[c].fx[b].apply(this.set.members[c].fx,arguments);return this}})};h.extend(h.Element,{data:function(b,c,e){if("object"==typeof b)for(c in b)this.data(c,b[c]);else if(2>arguments.length)try{return JSON.parse(this.attr("data-"+
b))}catch(M){return this.attr("data-"+b)}else this.attr("data-"+b,null===c?null:!0===e||"string"==typeof c||"number"==typeof c?c:JSON.stringify(c));return this}});h.extend(h.Element,{remember:function(b,c){if("object"==typeof arguments[0])for(c in b)this.remember(c,b[c]);else{if(1==arguments.length)return this.memory()[b];this.memory()[b]=c}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var b=arguments.length-1;0<=b;b--)delete this.memory()[arguments[b]];return this},
memory:function(){return this._memory||(this._memory={})}});h.get=function(c){c=b.getElementById(x(c)||c);return h.adopt(c)};h.select=function(c,e){return new h.Set(h.utils.map((e||b).querySelectorAll(c),function(b){return h.adopt(b)}))};h.extend(h.Parent,{select:function(b){return h.select(b,this.node)}});var H="abcdef".split("");"function"!=typeof f.CustomEvent&&(z=function(c,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var f=b.createEvent("CustomEvent");return f.initCustomEvent(c,e.bubbles,
e.cancelable,e.detail),f},z.prototype=f.Event.prototype,f.CustomEvent=z);return function(b){for(var c=0,e=["moz","webkit"],g=0;g<e.length&&!f.requestAnimationFrame;++g)b.requestAnimationFrame=b[e[g]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[e[g]+"CancelAnimationFrame"]||b[e[g]+"CancelRequestAnimationFrame"];b.requestAnimationFrame=b.requestAnimationFrame||function(e){var f=(new Date).getTime(),g=Math.max(0,16-(f-c)),h=b.setTimeout(function(){e(f+g)},g);return c=f+g,h};b.cancelAnimationFrame=
b.cancelAnimationFrame||b.clearTimeout}(f),h});SVG.ForeignObject=SVG.invent({create:"foreignObject",inherit:SVG.Shape,construct:{foreignObject:function(f,b){return this.put(new SVG.ForeignObject).size(f,b)}},extend:{appendChild:function(f,b){f="string"==typeof f?document.createElement(f):f;if("object"==typeof b)for(a in b)f[a]=b[a];this.node.appendChild(f);return this},getChild:function(f){return this.node.childNodes[f]}}});
function _itemcluster_extend_svg(f){f.svg=SVG(f.rootdiv.querySelector(".itemcluster"));f.mapPageToSvgCoords=function(b,e,l){var c=f.svg.node.getBoundingClientRect();l||(l=f.svg.viewbox());var k={};k.x=(b-c.x)/c.width*l.width+l.x;k.y=(e-c.y)/c.height*l.height+l.y;return k};var b={};f.arrangeItem=function(b){var c=f.rootdiv.getRootNode().getSelection(),e=null;if(c.rangeCount&&f.rootdiv.getRootNode().activeElement&&f.rootdiv.getRootNode().activeElement.matches('[data-id="'+b+'"] *')){var l=c.getRangeAt(0);
e={};"collapsed commonAncestorContainer endContainer endOffset startContainer startOffset".split(" ").forEach(function(b){e[b]=l[b]});e.node=l.startContainer.parentElement}var k=f.itemPointerCache[b],m=!0;f.itemRelevant(b)?polymorph_core.items[b].itemcluster.viewData&&polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName]||(m=!1):m=!1;if(m){k||(k=f.svg.group().attr({"data-id":b,class:"floatingItem"}),k.add(f.svg.circle(10).fill("transparent").stroke({width:2,color:"red"}).cx(0).cy(0)),
m=f.svg.foreignObject(50,20).x(10).y(-10),k.add(m),f.itemPointerCache[b]=k,m.node.appendChild(htmlwrap('<div style=\'position:absolute; margin:0; color: white; background:rgba(10,10,10,0.2)\'><p contenteditable class="tta"></p><p style="background:white; color:black" contenteditable class="ttb"></p></div>')));(.01<Math.abs(k.x()-polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].x*polymorph_core.items[f.settings.currentViewName].itemcluster.XZoomFactor)||.01<Math.abs(k.y()-polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].y))&&
k.move(polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].x*polymorph_core.items[f.settings.currentViewName].itemcluster.XZoomFactor,polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].y);var r=f.itemPointerCache[b].node.querySelector("p.tta");m=f.itemPointerCache[b].node.querySelector("p.ttb");var n=f.itemPointerCache[b].node.querySelector("div");polymorph_core.items[b].style&&JSON.stringify(polymorph_core.items[b].style)!=JSON.stringify(f.cachedStyle[b])&&
(n.style.background=polymorph_core.items[b].style.background||"",k.first().style("color",polymorph_core.items[b].style.color||matchContrast((/rgba?\([\d,\s]+\)/.exec(getComputedStyle(r).background)||["#000000"])[0])),f.cachedStyle[b]=JSON.parse(JSON.stringify(polymorph_core.items[b].style)));e||r.innerText==polymorph_core.items[b][this.settings.textProp]&&m.innerText==polymorph_core.items[b][this.settings.focusExtendProp]||(r.innerText=polymorph_core.items[b][this.settings.textProp]||"_",m.innerText=
polymorph_core.items[b][this.settings.focusExtendProp]||"_",n.style.width=23*(Math.sqrt(r.innerText.length+m.innerText.length)+1),n.parentElement.setAttribute("width",n.scrollWidth),f.prevFocusID==b?setTimeout(function(){n.parentElement.setAttribute("height",n.scrollHeight)}):setTimeout(function(){n.parentElement.setAttribute("height",r.scrollHeight)}));k=f.itemPointerCache[b].children()[1];0==k.width()&&k.size(n.scrollWidth,r.scrollHeight);if(polymorph_core.items[b].to)for(var y in polymorph_core.items[b].to)polymorph_core.items[y]&&
polymorph_core.items[y].itemcluster&&polymorph_core.items[y].itemcluster.viewData[f.settings.currentViewName]&&(y==f.prevFocusID||b==f.prevFocusID?f.enforceLine(b,y,"red"):f.enforceLine(b,y));if(e){var w=new Range;w.setStart(e.startContainer,e.startOffset);w.setEnd(e.startContainer,e.endOffset);"collapsed commonAncestorContainer endContainer endOffset startContainer startOffset".split(" ").forEach(function(b){w[b]=e[b]});c.removeAllRanges();c.addRange(w)}}else k&&(k.remove(),delete f.itemPointerCache[b])};
f.linkingLine=f.svg.line(0,0,0,0).stroke({width:3}).back();f.activeLines={};f.toggleLine=function(b,e){polymorph_core.isLinked(b,e)%2?(polymorph_core.unlink(b,e),f.activeLines[b]&&f.activeLines[b][e]&&f.activeLines[b][e].remove(),delete f.activeLines[b][e]):(polymorph_core.link(b,e),f.enforceLine(b,e))};f.redrawLines=function(b,e){e=void 0===e?"black":e;for(var c in f.activeLines)for(var l in f.activeLines[c])c!=b&&l!=b||f.enforceLine(c,l,e)};f.enforceLine=function(c,e,l){l=void 0===l?"black":l;var q=
f.itemPointerCache[c],k=f.itemPointerCache[e];if(q&&k){if(f.activeLines[c]&&f.activeLines[c][e])var m=f.activeLines[c][e];else f.activeLines[c]||(f.activeLines[c]={}),m=f.svg.path().stroke({width:2,color:l}),m.marker("mid",9,6,function(b){b.path("M0,0 L0,6 L9,3 z").fill("black")}),f.activeLines[c][e]=m,b[c]&&delete b[c][e];if("none"==q.style.display||"none"==k.style.display)m.hide();else if(!(b[c]&&b[c][e]&&.01>Math.abs(b[c][e][0][0]-q.x())&&.01>Math.abs(b[c][e][0][1]-q.y())&&.01>Math.abs(b[c][e][1][0]-
k.x())&&.01>Math.abs(b[c][e][1][1]-k.y())&&b[c][e][2]==l)){var r=[q.cx(),0,k.cx()],n=[q.cy(),0,k.cy()];r[1]=(r[0]+r[2])/2;n[1]=(n[0]+n[2])/2;m.plot("M "+r[0]+" "+n[0]+" L "+r[1]+" "+n[1]+" L "+r[2]+" "+n[2]);m.stroke({width:2,color:l});m.back();b[c]||(b[c]={});b[c][e]=[[q.x(),q.y()],[k.x(),k.y()],l]}}};for(var e in polymorph_core.items)f.arrangeItem(e);for(var l in polymorph_core.items)f.arrangeItem(l);f.viewGrid&&f.viewGrid()}
function _itemcluster_extend_contextmenu(){var f=this,b=new _contextMenuManager(this.rootdiv);this.rootcontextMenu=b.registerContextMenu('\n        <li class="pastebtn">Paste</li>\n        <li class="collect">Collect items here</li>\n        <li class="hierarchy">Arrange in hierarchy</li>\n        <li class="hierarchy radial">Arrange in radial hierarchy</li>\n        <li class="hierarchy biradial">Arrange in biradial hierarchy</li>\n        <li class="search">Search\n        <ul class="submenu">\n        <li><input class="searchbox"></li>\n        <li class="searchNextResult">Next result</li>\n        </ul>\n        </li>\n        \x3c!--<li class="hierarchy radial stepped">Stepped radial hierarchy</li>--\x3e\n        ',
this.rootdiv,void 0,function(b){if(!b.target.matches("g[data-id] *"))return centerXY=f.mapPageToSvgCoords(b.pageX,b.pageY),!0});this.rootcontextMenu.querySelector(".pastebtn").addEventListener("click",function(b){if(polymorph_core.shared.itemclusterCopyElement){var c=f.mapPageToSvgCoords(b.pageX,b.pageY);polymorph_core.shared.itemclusterCopyElement.forEach(function(b){polymorph_core.items[b.id].itemcluster.viewData[f.settings.currentViewName]={x:c.x+b.x,y:c.y+b.y};f.settings.filter&&(polymorph_core.items[b.id][f.settings.filter]=
!0);f.arrangeItem(b.id);f.container.fire("updateItem",{id:b.id,sender:f})});for(var e in polymorph_core.items)f.arrangeItem(e);f.rootcontextMenu.style.display="none"}});this.rootcontextMenu.querySelector(".collect").addEventListener("click",function(b){var c=f.itemSpace.getBoundingClientRect(),e;for(e in polymorph_core.items)polymorph_core.items[e].itemcluster&&polymorph_core.items[e].itemcluster.viewData&&polymorph_core.items[e].itemcluster.viewData[f.settings.currentViewName]&&(polymorph_core.items[e].itemcluster.viewData[f.settings.currentViewName].x=
b.clientX-c.left,polymorph_core.items[e].itemcluster.viewData[f.settings.currentViewName].y=b.clientY-c.top,f.arrangeItem(e));for(var k in polymorph_core.items)f.container.fire("updateItem",{id:k})});var e=function(){var b=[];for(e in polymorph_core.items)polymorph_core.items[e].itemcluster&&polymorph_core.items[e].itemcluster.viewData&&polymorph_core.items[e].itemcluster.viewData[f.settings.currentViewName]&&b.push({id:e,x:polymorph_core.items[e].itemcluster.viewData[f.settings.currentViewName].x,
y:polymorph_core.items[e].itemcluster.viewData[f.settings.currentViewName].y,children:Object.keys(polymorph_core.items[e].to||{}),parents:[]});var c=b.map(function(b){return b.id});b.forEach(function(e,f){if(e.children)for(var h=0;h<e.children.length;h++){var k=c.indexOf(e.children[h]);-1==k?(e.children.splice(h,1),h--):polymorph_core.items[b[k].id].to&&-1!=Object.keys(polymorph_core.items[b[k].id].to).indexOf(e.id)?(e.children.splice(h,1),h--):b[k].parents.push(f)}});var e=[];for(var k=[],l=0;l<
b.length;l++)0==b[l].parents.length&&(e.push.apply(e,b[l].children),b[l].level=0,b[l].parent=void 0,k.push(b[l]));1<k.length&&(k.forEach(function(b){b.level=1;b.parent="0"}),b.push({id:"0",level:0,x:0,y:0,children:k.map(function(b){return b.id})}),k=[{id:"0"}],c.push("0"));l=[];for(var h=void 0;e.length;){var m=e.shift();if(m==h)l.push(m);else if(h=m,m=c.indexOf(m),b[m].parents.reduce(function(c,e){return c&void 0!=b[e].level},!0)){var q=b[m].parents.reduce(function(c,e){c[0]<b[e].level&&(c[0]=b[e].level,
c[1]=e);return c},[0,b[m].parents[0]]);b[m].level=q[0]+1;b[m].parent=b[q[1]].id;e.push.apply(e,b[m].children)}else e.push(b[m].id)}b.filter(function(b){return void 0==b.level}).forEach(function(e){e.level=1;e.parent=k[0].id;b[c.indexOf(k[0].id)].children.push(e.id);e.children=[]});return b},l=function(b,c){c.sort(function(b,c){return b.level-c.level+(b.level==c.level)*(b.x-c.x)});var e=c.map(function(b){return b.id});c.forEach(function(b){b.children&&b.children.sort(function(b,c){return e.indexOf(b)-
e.indexOf(c)})});for(var k=function(b){if("0"==b)return 0;var h=c[e.indexOf(b)].children;if(h&&h.length){for(var l=0,m=0;m<h.length;m++)c[e.indexOf(h[m])].parent==b&&(l+=k(h[m]));b=Number(/\d+/.exec(f.itemPointerCache[b].children()[1].width()))+10;l<b&&(l=b);return l}return Number(/\d+/.exec(f.itemPointerCache[b].children()[1].width()))+10},l=0;l<c.length;l++)c[l].width=k(c[l].id);for(var h=l=0;h<c.length;h++)if(void 0==c[h].parent)l+=c[h].width;else break;h=f.itemSpace.getBoundingClientRect();l=
b.clientX-h.left-l/2;b=b.clientY-h.top;var m=function(b,h,k){"0"!=b.id&&(polymorph_core.items[b.id].itemcluster.viewData[f.settings.currentViewName].x=h+(b.width-Number(/\d+/ig.exec(f.itemPointerCache[b.id].first().width)))/2,polymorph_core.items[b.id].itemcluster.viewData[f.settings.currentViewName].y=k);for(var l=0;l<b.children.length;l++)c[e.indexOf(b.children[l])].parent==b.id&&(h+=m(c[e.indexOf(b.children[l])],h,k+200));return b.width};for(h=0;h<c.length;h++)void 0==c[h].parent&&(l+=m(c[h],l,
b))},c=[],t=function(b,e){c.forEach(function(b){return b.remove()});c=[];if(b.target.classList.contains("stepped")){b=[0];for(var k=0,l=0;l<e.length;l++)k!=e[l].level&&(b.push(0),k=e[l].level),b[e[l].level]++;b=b.map(function(b,c){return Math.ceil(b/(600*Math.PI*c/200))});for(l=k=0;l<e.length;l++)0!=b[e[l].level]&&(e[l].level+=k%b[e[l].level]/b[e[l].level],k++)}e.sort(function(b,c){var e=Math.atan2(b.y,b.x);0>e&&(e+=2*Math.PI);var f=Math.atan2(c.y,c.x);0>f&&(f+=2*Math.PI);return b.level-c.level+(b.level==
c.level)*(e-f)});var m=e.map(function(b){return b.id});e.forEach(function(b){b.children&&b.children.sort(function(b,c){return m.indexOf(b)-m.indexOf(c)})});var h={},n=function(b){if(h[b])return 0>h[b]?1:h[b];h[b]=1;var c=e[m.indexOf(b)].children;if(c&&c.length){for(var f=0,g=0;g<c.length;g++)e[m.indexOf(c[g])].parent==b&&(f+=n(c[g]));f<1/(e[m.indexOf(b)].level+1)&&(f=1/(e[m.indexOf(b)].level+1));h[b]=f}else h[b]=1/(e[m.indexOf(b)].level+1);return h[b]};for(b=0;b<e.length;b++)e[b].angle=n(e[b].id);
for(k=b=0;k<e.length;k++)if(void 0==e[k].parent)b+=e[k].angle;else break;for(k=0;k<e.length;k++)e[k].angle*=2*Math.PI/b;var r={"-1":0};b=0;k=e[0].angle;var q=0;l=-1;for(var t=1;t<e.length;t++)if(b!=e[t].level)q=(e[t-1].angle+e[q].angle)/2,q<k&&(k=q),r[b]=Math.max(r[l]+200,200/k),l=b,b=e[t].level,k=3*Math.PI,q=t;else{var v=(e[t-1].angle+e[t].angle)/2;v<k&&(k=v)}l=(e[e.length-1]+e[q])/2;l<k&&(k=l);r[b]=Math.max(r[b-1]+300,200/k);b=r[0]=0;var H=[],g=function(b,c,h){if(-1!=H.indexOf(b.id))return b.angle;
H.push(b.id);var k=r[b.level];"0"!=b.id&&(polymorph_core.items[b.id].itemcluster.viewData[f.settings.currentViewName].x=k*Math.cos(c+b.angle/2),polymorph_core.items[b.id].itemcluster.viewData[f.settings.currentViewName].y=k*Math.sin(c+b.angle/2));for(k=0;k<b.children.length;k++)e[m.indexOf(b.children[k])].parent==b.id&&(c+=g(e[m.indexOf(b.children[k])],c,h+1));return b.angle};for(k=0;k<e.length;k++)void 0==e[k].parent&&(b+=g(e[k],b,0));r=Object.entries(r).filter(function(b){return 0<b[0]}).sort(function(b,
c){return b[0]-c[0]}).map(function(b){return b[1]});c=r.map(function(b){return f.svg.circle(2*b).cx(0).cy(0).stroke("red").fill("transparent").back()})},v=function(b,c){var e=c.map(function(b){return b.id});c.forEach(function(b){b.children.forEach(function(f){c[e.indexOf(f)].parent=b.id})});c.forEach(function(b){if(b.parent){var f=c[e.indexOf(b.parent)];b.angle=Math.atan2(b.y-f.y,b.x-f.x)}else b.angle=Math.atan2(b.y,b.x);0>b.angle&&(b.angle+=2*Math.PI)});c.sort(function(b,c){return b.level-c.level+
!(b.level-c.level)*(b.angle-c.angle)});e=c.map(function(b){return b.id});b=function(b,c,e,f){f=void 0===f?.1:f;var h,k=0;for(h=2*f;Math.abs(h)>f&&100>k;){h=e((b+c)/2);0>h?b=(b+c)/2:c=(b+c)/2;if(isNaN(h))return NaN;k++}return 100==k?b-1:(b+c)/2};var k={};for(k.i$204=c.length-1;0<=k.i$204;k={i$204:k.i$204,sum:k.sum,radii:k.radii},k.i$204--){if(0==c[k.i$204].children.length)c[k.i$204].r=0,c[k.i$204].rr=50;else{k.radii=c[k.i$204].children.filter(function(b){return function(f){return c[e.indexOf(f)].parent==
c[b.i$204].id}}(k)).map(function(b){return c[e.indexOf(b)].rr});var l=Math.max.apply(void 0,k.radii);k.sum=0;k.radii.forEach(function(b){return function(c){return b.sum+=c}}(k));k.sum>2*l?(k.radii=k.radii.map(function(b){return 2*(b+100)}),c[k.i$204].r=b(0,c[k.i$204].children.length*l+100,function(b){return function(c){var e=0;b.radii.forEach(function(b){e+=2*Math.asin(b/2/c)});return isNaN(e)?-1:2*Math.PI-e}}(k))):c[k.i$204].r=l+100;c[k.i$204].r<l+100&&(c[k.i$204].r=l+100);c[k.i$204].rr=c[k.i$204].r+
l}c[k.i$204].children.forEach(function(b){return function(f){c[e.indexOf(f)].angle=2*Math.asin((c[e.indexOf(f)].rr+100-1)/c[b.i$204].r);isNaN(c[e.indexOf(f)].angle)&&(c[e.indexOf(f)].angle=0)}}(k))}for(b=0;b<c.length;b++)c[b].cumulativeAngle=0,0==c[b].level?"0"!=c[b].id&&(polymorph_core.items[c[b].id].itemcluster.viewData[f.settings.currentViewName].x=0,polymorph_core.items[c[b].id].itemcluster.viewData[f.settings.currentViewName].y=0):(c[e.indexOf(c[b].parent)].cumulativeAngle+=c[b].angle/2,"0"!=
c[b].parent?(polymorph_core.items[c[b].id].itemcluster.viewData[f.settings.currentViewName].x=polymorph_core.items[c[b].parent].itemcluster.viewData[f.settings.currentViewName].x+Math.cos(c[e.indexOf(c[b].parent)].cumulativeAngle)*c[e.indexOf(c[b].parent)].r,polymorph_core.items[c[b].id].itemcluster.viewData[f.settings.currentViewName].y=polymorph_core.items[c[b].parent].itemcluster.viewData[f.settings.currentViewName].y+Math.sin(c[e.indexOf(c[b].parent)].cumulativeAngle)*c[e.indexOf(c[b].parent)].r):
(polymorph_core.items[c[b].id].itemcluster.viewData[f.settings.currentViewName].x=Math.cos(c[e.indexOf(c[b].parent)].cumulativeAngle)*c[e.indexOf(c[b].parent)].r,polymorph_core.items[c[b].id].itemcluster.viewData[f.settings.currentViewName].y=Math.sin(c[e.indexOf(c[b].parent)].cumulativeAngle)*c[e.indexOf(c[b].parent)].r),c[e.indexOf(c[b].parent)].cumulativeAngle+=c[b].angle/2)};this.rootcontextMenu.addEventListener("click",function(b){if(b.target.classList.contains("hierarchy")){var c=e();b.target.classList.contains("radial")?
t(b,c):b.target.classList.contains("biradial")?v(b,c):l(b,c);for(var k in polymorph_core.items)f.container.fire("updateItem",{id:k})}});this.searchArray=[];var q=0,k=function(b){if(b=f.searchArray[b]){f.rootcontextMenu.querySelector(".searchNextResult").style.background="white";var c=polymorph_core.items[f.settings.currentViewName].itemcluster;c.scale=1;c.cx=polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].x*c.XZoomFactor;c.cy=polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].y;
f.viewAdjust();f.viewGrid()}else f.rootcontextMenu.querySelector(".searchNextResult").style.background="palevioletred"};this.rootcontextMenu.querySelector(".search input").addEventListener("input",function(){f.searchArray=[];for(var b in polymorph_core.items)f.itemIsOurs(b)&&polymorph_core.items[b][f.settings.textProp]&&polymorph_core.items[b][f.settings.textProp].includes(f.rootcontextMenu.querySelector(".search input").value)&&f.searchArray.push(b);q>f.searchArray.length&&(q=0);k(q)});this.rootcontextMenu.querySelector(".searchNextResult").addEventListener("click",
function(){q++;q>f.searchArray.length&&(q=0);k(q)});this.viewContextMenu=b.registerContextMenu('<li class="viewDeleteButton">Delete</li>\n            <li class="viewCloneButton">Clone view</li>\n            <li class="viewAsItemButton">Copy view as item</li>',this.viewDropdownContainer);this.viewContextMenu.querySelector(".viewAsItemButton").addEventListener("click",function(b){polymorph_core.shared.itemclusterCopyElement=[{id:f.settings.currentViewName,x:0,y:0}];polymorph_core.items[f.settings.currentViewName].itemcluster.viewData=
{};f.viewContextMenu.style.display="none"});this.viewContextMenu.querySelector(".viewDeleteButton").addEventListener("click",function(b){f.destroyView(f.settings.currentViewName);f.viewContextMenu.style.display="none"});this.viewCloneButton=this.viewContextMenu.querySelector(".viewCloneButton");this.viewCloneButton.addEventListener("click",function(b){f.cloneView(f.settings.currentViewName);f.viewContextMenu.style.display="none"});this.itemContextMenu=b.registerContextMenu('<li class="deleteButton">Delete</li>\n        <li class="cascadebtn">Cascade by punctuation</li>\n        <li class="collcon">Collect connected items</li>\n        <li class="cpybtn">Copy (between views)</li>\n        <li class="subview">Open Subview</li>\n        <li>Edit style\n        <ul class="submenu">\n            <li class="cstyl">Copy style</li>\n            <li class="pstyl">Paste style</li>\n            <li><input class="background" placeholder="Background"></li>\n            <li><input class="color" placeholder="Color"></li>\n        </ul>\n        </li>\n        <li class="orientation">Reorient subitems</li>\n          ',
this.rootdiv,".floatingItem",function(b){for(b=b.target;!b.matches(".floatingItem");)b=b.parentElement;f.contextedElement=b;polymorph_core.items[b.dataset.id].style?(f.itemContextMenu.querySelector(".background").value=polymorph_core.items[b.dataset.id].style.background||"",f.itemContextMenu.querySelector(".color").value=polymorph_core.items[b.dataset.id].style.color||""):(f.itemContextMenu.querySelector(".background").value="",f.itemContextMenu.querySelector(".color").value="");return!0});var m=
function(b){var c=[f.contextedElement.dataset.id],e=!1;f.movingDivs.forEach(function(b){b.el.node.dataset.id==c[0]&&(e=!0)});e&&(c=f.movingDivs.map(function(b){return b.el.node.dataset.id}));c.forEach(function(c){polymorph_core.items[c].style||(polymorph_core.items[c].style={});polymorph_core.items[c].style[b.target.className]=b.target.value;f.container.fire("updateItem",{sender:f,id:c});f.arrangeItem(c)})};this.itemContextMenu.querySelector(".cstyl").addEventListener("click",function(){f.copiedStyle=
Object.assign({},polymorph_core.items[f.contextedElement.dataset.id].style);f.itemContextMenu.style.display="none"});this.itemContextMenu.querySelector(".pstyl").addEventListener("click",function(){var b=[f.contextedElement.dataset.id],c=!1;f.movingDivs.forEach(function(e){e.el.node.dataset.id==b[0]&&(c=!0)});c&&(b=f.movingDivs.map(function(b){return b.el.node.dataset.id}));b.forEach(function(b){polymorph_core.items[b].style=Object.assign({},f.copiedStyle);f.arrangeItem(b);f.container.fire("updateItem",
{sender:f,id:b})});f.itemContextMenu.style.display="none"});this.itemContextMenu.querySelector(".background").addEventListener("input",m);this.itemContextMenu.querySelector(".color").addEventListener("input",m);this.itemContextMenu.querySelector(".deleteButton").addEventListener("click",function(b){var c=[f.contextedElement.dataset.id],e=!1;f.movingDivs.forEach(function(b){b.el.node.dataset.id==c[0]&&(e=!0)});e&&(c=f.movingDivs.map(function(b){return b.el.node.dataset.id}),f.clearOutMovingDivs());
c.forEach(function(b){f.removeItem(b)});f.itemContextMenu.style.display="none"});this.itemContextMenu.querySelector(".collcon").addEventListener("click",function(b){var c=polymorph_core.items[f.contextedElement.dataset.id],e=Object.keys(c.to);e.forEach(function(b,k){polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].x=c.itemcluster.viewData[f.settings.currentViewName].x+250*Math.cos(.2+2*Math.PI*k/e.length)/polymorph_core.items[f.settings.currentViewName].itemcluster.XZoomFactor;
polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].y=c.itemcluster.viewData[f.settings.currentViewName].y+250*Math.sin(.2+2*Math.PI*k/e.length);f.container.fire("updateItem",{id:b,sender:f});f.arrangeItem(b)});f.redrawAllLines()});this.itemContextMenu.querySelector(".cascadebtn").addEventListener("click",function(b){b=polymorph_core.items[f.contextedElement.dataset.id][f.settings.textProp];b=b.replace(/([\.\?\n]+)/g,"$1*$*");b=b.replace(/\n/g,"");b=b.split(/\*\$\*/g);polymorph_core.items[f.contextedElement.dataset.id][f.settings.textProp]=
b.shift();f.container.fire("updateItem",{id:f.contextedElement.dataset.id,sender:f});f.arrangeItem(f.contextedElement.dataset.id);var c=polymorph_core.items[f.contextedElement.dataset.id].itemcluster.viewData[f.settings.currentViewName],e=c.y,k=polymorph_core.items[f.contextedElement.dataset.id];k.to||(k.to={});b.forEach(function(b){var h={itemcluster:{viewData:{}},to:{}};h[f.settings.textProp]=b;h[f.settings.filter]=!0;h.itemcluster.viewData[f.settings.currentViewName]={x:c.x,y:e+=50};newID=polymorph_core.insertItem(h);
k.to[newID]=!0;k=polymorph_core.items[newID];f.container.fire("updateItem",{id:newID,sender:f});f.arrangeItem(newID)});f.itemContextMenu.style.display="none"});this.itemContextMenu.querySelector(".cpybtn").addEventListener("click",function(b){var c=f.mapPageToSvgCoords(b.pageX,b.pageY),e=[f.contextedElement.dataset.id],k=!1;f.movingDivs.forEach(function(b){b.el.node.dataset.id==e[0]&&(k=!0)});k&&(e=f.movingDivs.map(function(b){return b.el.node.dataset.id}),f.clearOutMovingDivs());b=e.map(function(b){return{id:b,
x:polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].x-c.x,y:polymorph_core.items[b].itemcluster.viewData[f.settings.currentViewName].y-c.y}});polymorph_core.shared.itemclusterCopyElement=b;f.itemContextMenu.style.display="none"});this.itemContextMenu.querySelector(".orientation").addEventListener("click",function(b){polymorph_core.items[f.contextedElement.dataset.id].itemcluster.subitemOrientation=!polymorph_core.items[f.contextedElement.dataset.id].itemcluster.subitemOrientation;
f.arrangeItem(f.contextedElement.dataset.id);f.itemContextMenu.style.display="none"});this.itemContextMenu.querySelector(".subView").addEventListener("click",function(b){polymorph_core.items[f.contextedElement.dataset.id].itemcluster.viewName=polymorph_core.items[f.contextedElement.dataset.id][f.settings.textProp];f.switchView(f.contextedElement.dataset.id,!0,!0);f.itemContextMenu.style.display="none"});this.trayContextMenu=b.registerContextMenu('\n        <li class="delete">Delete</li>\n        ',
this.tray,"textarea",function(b){f.trayContextedElement=b.target.parentElement.dataset.id;return!0});this.trayContextMenu.querySelector(".delete").addEventListener("click",function(b){f.settings.filter?delete polymorph_core.items[f.trayContextedElement][f.settings.filter]:polymorph_core.items[f.trayContextedElement].itemcluster.viewData={};f.container.fire("updateItem",{id:f.trayContextedElement});f.trayContextMenu.style.display="none"})}
function _itemcluster_extend_scalegrid(f){f.alignGrid=function(b){if(polymorph_core.items[f.settings.currentViewName].itemcluster.grid){var e=polymorph_core.items[f.settings.currentViewName].itemcluster.grid;0<b.x()?b.x()%e>e/2?b.x(b.x()+(e-b.x()%e)):b.x(b.x()-b.x()%e):b.x()%e<-e/2?b.x(b.x()-(e+b.x()%e)):b.x(b.x()-b.x()%e);0<b.y()?b.y()%e>e/2?b.y(b.y()+(e-b.y()%e)):b.y(b.y()-b.y()%e):b.y()%e<-e/2?b.y(b.y()-(e+b.y()%e)):b.y(b.y()-b.y()%e)}};window.addEventListener("keydown",function(b){f.container.visible()&&
("g"==b.key&&(f.gridScroll=!0,f.viewGrid()),f.gridScroll&&("ArrowDown"==b.key?f.handleGridScroll({deltaY:1}):"ArrowUp"==b.key&&f.handleGridScroll({deltaY:-11})))});window.addEventListener("keyup",function(b){"g"==b.key&&(f.gridScroll=!1)});f.handleGridScroll=function(b){polymorph_core.items[f.settings.currentViewName].itemcluster.grid||(polymorph_core.items[f.settings.currentViewName].itemcluster.grid=0);var e=polymorph_core.items[f.settings.currentViewName].itemcluster.grid,l=1;if(0<b.deltaY)switch(e/
Math.pow(10,Math.floor(Math.log10(e)))){case 0:l=1;break;case 1:l=2;break;case 2:l=5;break;case 5:l=10}else switch(e/Math.pow(10,Math.floor(Math.log10(e)))){case 0:l=0;break;case 1:l=1==e?0:.5;break;case 2:l=1;break;case 5:l=2}e=0==e&&0!=l?1:polymorph_core.items[f.settings.currentViewName].itemcluster.grid;polymorph_core.items[f.settings.currentViewName].itemcluster.grid=l*Math.pow(10,Math.floor(Math.log10(e)));f.viewGrid()};f.hideGrid=function(){f.tempGridPattern&&(f.tempGridPattern.remove(),f.tempGridPattern=
void 0,f.tempTR.remove(),f.tempTR=void 0)};f.viewGrid=function(){var b=polymorph_core.items[f.settings.currentViewName].itemcluster.grid;f.hideGrid();var e=f.svg.viewbox();f.tempGridPattern=f.svg.pattern(b,b,function(f){f.line(0,0,0,b).stroke({color:"#f06",width:2/e.zoom});f.line(0,0,b,0).stroke({color:"#f06",width:2/e.zoom})});f.tempTR=f.svg.rect(e.width,e.height).move(e.x,e.y).fill(f.tempGridPattern).back()}}
function _itemcluster_rapid_entry(){var f=this;this.dialogOptions.rapidEntryOn=new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"rapidEntryOn",label:"Rapid entry mode"});this.rapidEntryDiv=document.createElement("div");this.rapidEntryDiv.innerHTML='\n    <div class="suggestionsbox" style="position:absolute; top: -10px; width:100%; height: 0px; background: white"></div>\n    <p style="background:white; margin:0"><span class="cmd">CMD</span>: <input type="text" style="width:calc(100% - 4em)"></input></p>\n    ';
var b=this.rapidEntryDiv.querySelector("span.cmd"),e=this.rapidEntryDiv.querySelector(".suggestionsbox");this.rootdiv.querySelector(".tray").parentElement.appendChild(this.rapidEntryDiv);this.rapidEntryDiv.style.cssText="\n    position:absolute;\n    bottom:0px;\n    width: 100%;\n    display:none;\n    ";this.dialogOptions.rapidEntryOn.appendedElement.addEventListener("input",function(b){f.rapidEntryDiv.style.display=b.target.checked?"block":"none"});this.settings.rapidEntryOn?this.rapidEntryDiv.style.display=
"block":this.settings.rapidEntryOn=!1;var l={},c;for(c in polymorph_core.items)this.itemRelevant(c)&&polymorph_core.items[c][this.settings.textProp]&&(l[c]=polymorph_core.items[c][this.settings.textProp]);this.rootdiv.addEventListener("input",function(b){for(var c=0;c<b.path.length&&b.path[c].dataset;c++)b.path[c].dataset.id&&(l[b.path[c].dataset.id]=b.target.innerText)});var t=this.rapidEntryDiv.querySelector("input"),v=0,q=[],k="NEW",m=void 0;this.focusOnRIES=function(){m||(m=f.svg.rect(30,30).fill("transparent").stroke("blue").back());
m.cx(polymorph_core.items[f.rapidEntrySelection].itemcluster.viewData[f.settings.currentViewName].x*polymorph_core.items[f.settings.currentViewName].itemcluster.XZoomFactor).cy(polymorph_core.items[f.rapidEntrySelection].itemcluster.viewData[f.settings.currentViewName].y)};var r=function(b){if(b.target.matches(".floatingItem")||b.target.matches(".floatingItem *")){for(b=b.target;!b.matches(".floatingItem");)b=b.parentElement;f.rapidEntrySelection=b.dataset.id;f.focusOnRIES()}};this.itemSpace.addEventListener("mousedown",
function(b){r(b)});this.itemSpace.addEventListener("mouseup",function(b){r(b)});t.addEventListener("keyup",function(c){if("Enter"==c.key){if("\\"==c.target.value[0]&&["NEW","CNT","CNF","DIS"].includes(c.target.value.slice(1)))switch(k=c.target.value.slice(1),k){case "NEW":b.innerText="CMD";break;case "CNT":b.innerText="CNT";break;case "CNF":b.innerText="CNF";break;case "DIS":b.innerText="DIS"}else if("NEW"==k)v==q.length-1?(c=f.svg.viewbox(),id=f.createItem((c.x+c.width/2)/polymorph_core.items[f.settings.currentViewName].itemcluster.XZoomFactor,
c.y+c.height/2),polymorph_core.items[id][f.settings.textProp]=t.value,polymorph_core.items[id]._prg=!0,f.container.fire("updateItem",{id:id,sender:f}),f.arrangeItem(id),f.rapidEntrySelection=id):(f.centreAndFocus(q[v].id),f.rapidEntrySelection=q[v].id),f.focusOnRIES();else if("CNT"==k||"CNF"==k)f.rapidEntrySelection?"CNT"==f.opmode?(polymorph_core.link(f.rapidEntrySelection,q[v].id),f.container.fire("updateItem",{id:f.rapidEntrySelection,sender:f}),f.arrangeItem(f.rapidEntrySelection)):(polymorph_core.link(q[v].id,
f.rapidEntrySelection),f.container.fire("updateItem",{id:q[v].id,sender:f}),f.arrangeItem(q[v].id)):(f.rapidEntrySelection=q[v].id,f.focusOnRIES()),console.log(f.rapidEntrySelection);for(;e.children.length;)e.children[0].remove();e.style.height=0;t.value=""}else{"ArrowUp"==c.key?(0<v&&v--,c.preventDefault()):"ArrowDown"==c.key&&(v++,c.preventDefault());for(;e.children.length;)e.children[0].remove();q=[];if(c.target.value.length){for(var m in l)l[m].toLocaleLowerCase().includes(c.target.value.toLocaleLowerCase())&&
q.push({id:m,txt:l[m]});q=q.filter(function(b,c){return 10>c});"NEW"==k&&q.push({txt:"Create new..."});q.forEach(function(b,c){var f=document.createElement("p");f.style.height="1em";f.style.margin=0;c==v&&(f.style.background="lavender");f.innerText=b.txt.replace(/\n/g," ").slice(0,100);e.appendChild(f)});e.style.height=q.length+"em";e.style.top=-q.length+"em"}else e.style.height=0}});this.rootdiv.addEventListener("input",function(b){for(var c=0;c<b.path.length&&b.path[c].dataset;c++)b.path[c].dataset.id&&
b.target.classList.contains("tta")&&(l[c]=b.target.innerText)})}
polymorph_core.registerOperator("itemcluster2",{displayName:"Itemcluster 2",description:"A brainstorming board. Add items, arrange them, and connect them with lines."},function(f){var b=this;polymorph_core.addEventAPI(this);var e={itemcluster:{cx:0,cy:0,scale:1},filter:polymorph_core.guid(6),tray:!1,createAcrossViews:!0,showNewViewButton:!1,textProp:"title",focusExtendProp:"description"};polymorph_core.operatorTemplate.call(this,f,e);this.rootdiv.style.cssText="\n    overflow:hidden;\n    ";this.rootdiv.innerHTML=
'\n    <style>\n    .viewNameDrop{\n        position: absolute;\n        background-color: #f9f9f9;\n        z-index: 1;\n        list-style: none;\n    }\n\n    .viewNameDrop>a{\n        display:block;\n    }\n\n    .viewNameDrop>a:hover{\n        display:block;\n        background:lavender;\n    }\n    .itemcluster-container{\n        height:100%;\n    }\n\n    .anchored>div>textarea{\n        border: 3px dashed blue;\n    }\n\n    .floatingItem>div>textarea{\n        resize:none;\n        width: 100%;\n        height: calc(100% - 15px);\n    }\n\n    .floatingItem>div{\n        resize:both;\n        overflow: auto;\n        border: 1px solid black;\n        box-sizing: border-box;\n    }\n    .itemcluster{\n        position:relative;\n    }\n    .tray{\n        position:absolute;\n        transform: translateY(80px);\n        height: 120px;\n        width: 100%;\n        bottom: 0;\n        background: lightgrey;\n        transition: all 0.5s ease;\n        flex-direction:row;\n        overflow-x:auto;\n    }\n    .tray:hover{\n        transform: translateY(0);\n    }\n    .tray textarea{\n        height:100%;\n        resize: none;\n    }\n\n    .tta, .ttb{\n        margin:0;\n    }\n\n    </style>\n<div style="height:100%">\n    <div class="itemcluster-container" style="height:100%; display:flex; flex-direction:column;">\n        <div class="itemcluster-banner">\n            <span class="topbar" style="user-select: none; color:white; background:rgb(113, 28, 156);">\n                <a>View:</a>\n                <span>\n                    <a class="viewNameContainer" style="user-select:text"><span><span contenteditable class="viewName" data-listname=\'main\' style="cursor:text"></span><span\n                                class="listDrop">&#x25BC</span>\n                        </span>\x3c!--<img class="gears" src="assets/gear.png" style="height:1em">--\x3e</a>\n                    <div class="viewNameDrop" style="display:none; color: black">\n                    </div>\n                </span>\n            </span>\n        </div>\n        <div class="itemcluster"  style="flex: 1 1 100%;position: relative; background:transparent;  overflow:hidden">\n        <div class="tray">\n        </div>\n        </div>\n    </div>\n</div>';
this.viewName=this.rootdiv.querySelector(".viewName");this.viewDropdown=this.rootdiv.querySelector(".viewNameDrop");this.viewDropdownButton=this.rootdiv.querySelector(".listDrop");this.viewDropdownContainer=this.rootdiv.querySelector(".viewNameContainer");this.itemSpace=this.rootdiv.querySelector(".itemcluster");f.div.appendChild(this.rootdiv);this.tray=this.rootdiv.querySelector(".tray");this.tray.addEventListener("wheel",function(c){b.tray.scrollLeft+=c.deltaY});this.tray.addEventListener("input",
function(c){polymorph_core.items[c.target.parentElement.dataset.id][b.settings.textProp]=c.target.value;f.fire("updateItem",{sender:b,id:c.target.parentElement.dataset.id})});this.viewDropdownContainer.addEventListener("keydown",function(b){"Enter"==b.key&&(b.preventDefault(),b.target.blur())});this.centreAndFocus=function(c){polymorph_core.items[b.settings.currentViewName].itemcluster.cx=b.itemPointerCache[c].cx();polymorph_core.items[b.settings.currentViewName].itemcluster.cy=b.itemPointerCache[c].cy();
b.viewAdjust();b.preselected&&(b.preselected.classList.remove("selected"),b.preselected.classList.remove("anchored"));b.preselected=b.itemPointerCache[c].node;b.preselected.classList.add("anchored");b.tryFocus(c,!0)};f.on("focusItem",function(c){c.sender!=b&&b.itemPointerCache[c.id]&&polymorph_core.items[c.id].itemcluster.viewData[b.settings.currentViewName]&&b.centreAndFocus(c.id)});var l=new capacitor(200,1E3,function(){for(var c in b.itemPointerCache)b.arrangeItem(c)});this.redrawAllLines=function(){l.submit()};
this.itemRelevant=function(c){var e=void 0!=polymorph_core.items[c][b.settings.filter],f=void 0!=polymorph_core.items[c].itemcluster&&void 0!=polymorph_core.items[c].itemcluster.viewName;if(polymorph_core.items[c].itemcluster&&polymorph_core.items[c].itemcluster.viewData)for(var l in polymorph_core.items[c].itemcluster.viewData)!polymorph_core.items[l]||b.settings.filter&&void 0==polymorph_core.items[l][b.settings.filter]||(f=!0);return(f||b.settings.tray)&&(!b.settings.filter||e)};f.on("updateItem",
function(c){var e=c.id;c.sender!=b&&b.container.visible()&&polymorph_core.items[e].itemcluster&&polymorph_core.items[e].itemcluster.viewData&&(polymorph_core.items[e].itemcluster.viewData[b.settings.currentViewName]?b.arrangeItem&&(b.arrangeItem(e),l.submit()):!b.settings.filter||polymorph_core.items[e][b.settings.filter]?b.addToTray(e):b.removeFromTray(e))});Object.defineProperty(this,"views",{get:function(){var c=[];for(i in polymorph_core.items)polymorph_core.items[i].itemcluster&&polymorph_core.items[i].itemcluster.viewName&&
(!b.settings.filter||polymorph_core.items[i][b.settings.filter])&&c.push(i);return c}});this.viewName.addEventListener("keyup",function(c){polymorph_core.items[b.settings.currentViewName].itemcluster.viewName=c.currentTarget.innerText;f.fire("updateItem",{id:b.settings.currentViewName,sender:b})});this.viewDropdown.addEventListener("click",function(c){if("a"==c.target.tagName.toLowerCase())if(c.target.dataset.isnew){var e=b.makeNewView();b.switchView(e)}else b.switchView(c.target.dataset.listname);
else"em"==c.target.tagName.toLowerCase()&&(nv=Date.now().toString(),nv=b.makeNewView(),b.switchView(nv));b.viewDropdown.style.display="none";c.stopPropagation()});this.viewDropdownButton.addEventListener("click",function(){b.viewDropdown.innerHTML="";b.currentView;b.views.forEach(function(c){var e=document.createElement("a");e.dataset.listname=c;e.innerHTML=polymorph_core.items[c].itemcluster.viewName;b.viewDropdown.appendChild(e)});b.settings.showNewViewButton&&b.viewDropdown.appendChild(htmlwrap('<a data-isnew="yes"><em>Add another view</em></a>'));
b.viewDropdown.style.display="block"});this.rootdiv.addEventListener("mousedown",function(c){for(c=c.target;c!=b.rootdiv&&c;){if(c==b.viewDropdown)return;c=c.parentElement}b.viewDropdown.style.display="none"});waitForFn.apply(this,["viewGrid"]);this.wasPreviouslyVisible=void 0;this.switchView=function(c,e,l){var q=b.settings.currentViewName;f.visible()!=b.wasPreviouslyVisible&&(b.wasPreviouslyVisible=f.visible(),q=void 0);b.settings.currentViewName=c;if(b.settings.currentViewName){if(!polymorph_core.items[b.settings.currentViewName]||
!polymorph_core.items[b.settings.currentViewName].itemcluster||!polymorph_core.items[b.settings.currentViewName].itemcluster.viewName)if(e)b.switchView(b.makeNewView(b.settings.currentViewName));else{b.switchView();return}b.viewName.innerText=polymorph_core.items[b.settings.currentViewName].itemcluster.viewName.replace(/\n/ig,"");if(q!=c&&q)if(l){var k=document.createElement("button");k.dataset.ref=q;k.innerText=polymorph_core.items[q].itemcluster.viewName;k.addEventListener("click",function(){for(b.switchView(k.dataset.ref,
!0,!1);"BUTTON"==k.nextElementSibling.tagName;)k.nextElementSibling.remove();k.remove()});b.viewName.parentElement.insertBefore(k,b.viewName)}else if(0!=l){var m=b.viewName.parentElement.querySelectorAll("button");for(e=0;e<m.length;e++)m[e].remove()}polymorph_core.items[b.settings.currentViewName].itemcluster.XZoomFactor=polymorph_core.items[b.settings.currentViewName].itemcluster.XZoomFactor||1;if(q!=c){for(var r in b.activeLines)for(var n in b.activeLines[r])b.activeLines[r][n].remove(),delete b.activeLines[r][n];
for(i in polymorph_core.items)polymorph_core.items[i].itemcluster&&polymorph_core.items[i].itemcluster.viewData&&(b.cachedStyle[i]=void 0,b.arrangeItem&&b.arrangeItem(i));for(i in polymorph_core.items)polymorph_core.items[i].itemcluster&&polymorph_core.items[i].itemcluster.viewData&&b.arrangeItem&&b.arrangeItem(i)}b.viewAdjust()}else{c=!1;for(m in polymorph_core.items)if(polymorph_core.items[m].itemcluster&&polymorph_core.items[m].itemcluster.viewName&&(!b.settings.filter||polymorph_core.items[m][b.settings.filter])){b.switchView(m);
c=!0;break}c||b.switchView(polymorph_core.guid(4),!0)}};this.makeNewView=function(c){if(c)var e=polymorph_core.items[c]||{};else e={},c=polymorph_core.insertItem(e);e.itemcluster||(e.itemcluster={});e.itemcluster.viewName="New View";b.settings.filter&&(e[b.settings.filter]||(e[b.settings.filter]=!0));polymorph_core.items[c]=e;f.fire("updateItem",{sender:b,id:c});return c};this.cloneView=function(){var c="Copy of "+polymorph_core.items[b.settings.currentViewName].itemcluster.viewName,e=b.makeNewView();
polymorph_core.items[e].itemcluster.viewName=c;f.fire("updateItem",{sender:b,id:e});for(var l in polymorph_core.items)polymorph_core.items[l].itemcluster&&polymorph_core.items[l].itemcluster.viewData&&polymorph_core.items[l].itemcluster.viewData[b.settings.currentViewName]&&(polymorph_core.items[l].itemcluster.viewData[e]=JSON.parse(JSON.stringify(polymorph_core.items[l].itemcluster.viewData[b.settings.currentViewName])));b.switchView(e)};this.destroyView=function(c,e){b.settings.filter?delete polymorph_core.items[c][b.settings.filter]:
delete polymorph_core.items[c].itemcluster.viewName;b.switchView()};f.on("focusItem",function(c){c.sender||"focus"==b.settings.operationMode&&c.sender.container.uuid==b.settings.focusOperatorID&&b.switchView(c.id,!0)});this.itemPointerCache={};this.cachedStyle={};_itemcluster_extend_svg(this);this.itemSpace.addEventListener("click",function(c){c.target.matches(".anchored,.anchored *")||Array.from(b.itemSpace.querySelectorAll(".anchored")).forEach(function(b){return b.classList.remove("anchored")});
b.preselected&&(b.preselected.classList.remove("selected"),b.preselected.classList.remove("anchored"));if(c.target.matches(".floatingItem")||c.target.matches(".floatingItem *")){for(c=c.target;!c.matches(".floatingItem");)c=c.parentElement;b.preselected==c?c.classList.add("anchored"):(b.preselected=c,c.classList.add("selected"));f.fire("focusItem",{id:c.dataset.id,sender:b})}else b.preselected=void 0});this.itemSpace.addEventListener("dblclick",function(c){b.preselected&&(b.preselected.classList.remove("selected"),
b.preselected.classList.remove("anchored"));if(c.target.matches(".floatingItem")||c.target.matches(".floatingItem *")){for(c=c.target;!c.matches(".floatingItem");)c=c.parentElement;b.preselected=c;c.classList.add("anchored")}else b.preselected=void 0});this.dragging=!1;this.movingDivs=[];this.alreadyMoving=-1;this.clearOutMovingDivs=function(){b.movingDivs.forEach(function(b){b.el.node.children[0].style.border="1px solid black"});b.movingDivs=[]};this.itemSpace.addEventListener("mousedown",function(c){if(c.target.matches(".floatingItem")||
c.target.matches(".floatingItem *")){if(1==c.which)if(c.getModifierState("Shift")){for(c=c.target;!c.matches(".floatingItem");)c=c.parentElement;b.linkingDiv=c;b.linking=!0}else{b.shouldHighlightMovingDivs++;!b.movingDivs.length||c.getModifierState("Control")||c.getModifierState("Meta")||b.clearOutMovingDivs();for(var e=c.target;!e.matches(".floatingItem");)e=e.parentElement;if(!e.classList.contains("anchored")&&!b.dragging){b.alreadyMoving=-1;b.movingDivs.forEach(function(c,f){c.el==b.itemPointerCache[e.dataset.id]&&
(c.el.node.children[0].style.border="1px solid black",b.alreadyMoving=f)});-1==b.alreadyMoving&&b.movingDivs.push({el:b.itemPointerCache[e.dataset.id]});b.lastMovingDiv=b.itemPointerCache[e.dataset.id];b.itemPointerCache[e.dataset.id].node.children[0].style.border="1px solid red";b.prevFocusID!=e.dataset.id&&b.itemPointerCache[e.dataset.id].front();b.tryFocus(e.dataset.id);b.dragging=!0;c=b.mapPageToSvgCoords(c.pageX,c.pageY);for(var f=0;f<b.movingDivs.length;f++)b.movingDivs[f].dx=c.x-b.movingDivs[f].el.x(),
b.movingDivs[f].dy=c.y-b.movingDivs[f].el.y()}}}else c.target.matches(".tray textarea")&&c.buttons%2?b.fromTray=c.target.parentElement.dataset.id:c.getModifierState("Control")||c.getModifierState("Meta")?(c=b.mapPageToSvgCoords(c.pageX,c.pageY),b.rectangleDragging={rect:b.svg.rect(0,0).stroke({width:1,color:"red"}).fill({opacity:0}),sx:c.x,sy:c.y}):(!b.movingDivs.length||c.getModifierState("Control")||c.getModifierState("Meta")||b.clearOutMovingDivs(),b.globalDrag=!0,c=b.mapPageToSvgCoords(c.pageX,
c.pageY),b.originalViewBox=b.svg.viewbox(),b.dragDX=c.x,b.dragDY=c.y,b.ocx=polymorph_core.items[b.settings.currentViewName].itemcluster.cx||0,b.ocy=polymorph_core.items[b.settings.currentViewName].itemcluster.cy||0)});this.itemSpace.addEventListener("mousemove",function(c){if(5<Math.abs(c.offsetX-b.mouseStoredX)||5<Math.abs(c.offsetY-b.mouseStoredY))b.possibleResize=!0;if(b.fromTray){var e=b.fromTray;b.removeFromTray(e);b.cachedStyle[e]=void 0;polymorph_core.items[e].itemcluster||(polymorph_core.items[e].itemcluster=
{});polymorph_core.items[e].itemcluster.viewData||(polymorph_core.items[e].itemcluster.viewData={});polymorph_core.items[e].itemcluster.viewData[b.settings.currentViewName]={x:0,y:0};b.arrangeItem(e);var l={el:b.itemPointerCache[e],dx:30,dy:30};b.clearOutMovingDivs();b.movingDivs=[l];b.lastMovingDiv=b.itemPointerCache[e];var q=b.mapPageToSvgCoords(c.pageX,c.pageY);b.lastMovingDiv.x(q.x-l.dx);b.lastMovingDiv.y(q.y-l.dy);b.updatePosition(e);b.dragging=!0;b.stillInTray=!0;b.fromTray=!1}if(b.rectangleDragging){e=
b.mapPageToSvgCoords(c.pageX,c.pageY);l=e.x-b.rectangleDragging.sx;0<l?b.rectangleDragging.rect.x(b.rectangleDragging.sx).width(l):b.rectangleDragging.rect.x(e.x).width(-l);l=e.y-b.rectangleDragging.sy;0<l?b.rectangleDragging.rect.y(b.rectangleDragging.sy).height(l):b.rectangleDragging.rect.y(e.y).height(-l);b.clearOutMovingDivs();for(var k in b.itemPointerCache)(b.itemPointerCache[k].cx()>e.x&&b.itemPointerCache[k].cx()<b.rectangleDragging.sx||b.itemPointerCache[k].cx()<e.x&&b.itemPointerCache[k].cx()>
b.rectangleDragging.sx)&&(b.itemPointerCache[k].cy()>e.y&&b.itemPointerCache[k].cy()<b.rectangleDragging.sy||b.itemPointerCache[k].cy()<e.y&&b.itemPointerCache[k].cy()>b.rectangleDragging.sy)&&(b.movingDivs.push({el:b.itemPointerCache[k]}),b.itemPointerCache[k].node.children[0].style.border="1px solid red")}if(b.dragging){b.dragged=!0;k=b.mapPageToSvgCoords(c.pageX,c.pageY);for(e=0;e<b.movingDivs.length;e++)b.movingDivs[e].el.x(k.x-b.movingDivs[e].dx),b.movingDivs[e].el.y(k.y-b.movingDivs[e].dy);
c=b.rootdiv.getRootNode().elementsFromPoint(c.clientX,c.clientY);b.hoverOver&&(b.hoverOver.style.border="");k=!1;for(e=0;e<c.length;e++){if(c[e].matches(".tray")){if(b.stillInTray){k=!0;break}b.movingDivs.forEach(function(c){c=c.el.attr("data-id");delete polymorph_core.items[c].itemcluster.viewData[b.settings.currentViewName];delete polymorph_core.items[c]["__itemcluster_"+b.settings.currentViewName];b.arrangeItem(c);b.addToTray(c);f.fire("updateItem",{sender:b,id:c})});b.clearOutMovingDivs();b.dragging=
!1}if(c[e].matches(".floatingItem")&&c[e].dataset.id!=b.lastMovingDiv.attr("data-id")){b.hoverOver=c[e];c[e].style.border="3px dotted red";break}}k||(b.stillInTray=!1);b.preselected=void 0;for(c=0;c<b.movingDivs.length;c++)b.redrawLines(b.movingDivs[c].el.node.dataset.id,"red")}else b.linking?(k=b.itemPointerCache[b.linkingDiv.dataset.id],c=b.mapPageToSvgCoords(c.pageX,c.pageY),b.linkingLine.plot(k.x()+k.width()/2,k.y()+k.height()/2,c.x,c.y).stroke({width:3}).marker("end",9,6,function(b){b.path("M0,0 L0,6 L9,3 z").fill("#000")})):
b.globalDrag&&(b.actualMotion=!0,c=b.mapPageToSvgCoords(c.pageX,c.pageY,b.originalViewBox),polymorph_core.items[b.settings.currentViewName].itemcluster.cx=b.ocx-(c.x-b.dragDX),polymorph_core.items[b.settings.currentViewName].itemcluster.cy=b.ocy-(c.y-b.dragDY),b.viewAdjust())});this.viewAdjust=function(){var c=polymorph_core.items[b.settings.currentViewName].itemcluster,e=b.itemSpace.clientWidth*(c.scale||1),f=b.itemSpace.clientHeight*(c.scale||1);b.svg?(b.svg.viewbox((c.cx||0)-e/2,(c.cy||0)-f/2,
e,f),b.viewGrid()):setTimeout(b.viewAdjust,200)};this.itemSpace.addEventListener("wheel",function(c){if(!(c.target.matches(".floatingItem")||c.target.matches(".floatingItem *")||b.tray.contains(c.target)))if(b.gridScroll)b.handleGridScroll(c);else if(c.shiftKey){var e=polymorph_core.items[b.settings.currentViewName].itemcluster;e.XZoomFactor||(e.XZoomFactor=1);var f=e.XZoomFactor;e.XZoomFactor=0<c.deltaY?1.1*e.XZoomFactor:.9*e.XZoomFactor;for(var q in b.itemPointerCache)b.arrangeItem(q);l.submit();
c=b.mapPageToSvgCoords(c.pageX,c.pageY);c.dx=c.x-e.cx;c.x=c.x/f*e.XZoomFactor;e.cx=c.x-c.dx;b.viewAdjust()}else{e=polymorph_core.items[b.settings.currentViewName].itemcluster;f=b.itemSpace.getBoundingClientRect();e.scale=e.scale||1;q=b.itemSpace.clientWidth*e.scale;var k=b.itemSpace.clientHeight*e.scale,m=e.cx-q/2+(c.clientX-f.x)/f.width*q,r=e.cy-k/2+(c.clientY-f.y)/f.height*k;e.scale=0<c.deltaY?1.1*e.scale:.9*e.scale;q=b.itemSpace.clientWidth*e.scale;k=b.itemSpace.clientHeight*e.scale;e.cx=m-(c.clientX-
f.x)/f.width*q+q/2;e.cy=r-(c.clientY-f.y)/f.height*k+k/2;b.viewAdjust();b.viewGrid()}});this.itemSpace.addEventListener("mouseup",function(c){b.handleMoveEnd(c)});this.itemSpace.addEventListener("mouseleave",function(c){b.handleMoveEnd(c)});this.handleMoveEnd=function(c,e){b.fromTray=!1;b.globalDrag&&(b.globalDrag=!1,b.viewGrid&&b.actualMotion&&b.viewGrid(),b.actualMotion=!1);b.rectangleDragging&&(b.rectangleDragging.rect.remove(),b.rectangleDragging=void 0);if(b.dragging){b.dragging=!1;b.dragged||
-1==b.alreadyMoving||(b.movingDivs[b.alreadyMoving].el.node.children[0].style.border="1px solid black",b.movingDivs.splice(b.alreadyMoving,1));b.dragged=!1;b.hoverOver&&(b.hoverOver.style.border="");var l=b.lastMovingDiv.attr("data-id");e=b.rootdiv.getRootNode().elementsFromPoint(c.clientX,c.clientY);for(var q=0;q<e.length;q++)if(e[q].parentElement&&e[q].parentElement.matches(".floatingItem")&&e[q].parentElement.dataset.id!=l&&(c.ctrlKey||c.metaKey)){e=e[q].parentElement.dataset.id;polymorph_core.items[e].itemcluster.viewName=
polymorph_core.items[e].itemcluster.viewName||polymorph_core.items[e][b.settings.textProp]||e;polymorph_core.items[l].itemcluster.viewData[e]={x:0,y:0};c.altKey||(delete polymorph_core.items[l].itemcluster.viewData[b.settings.currentViewName],b.arrangeItem(l),b.movingDivs=[]);b.arrangeItem(e);break}b.movingDivs.forEach(function(c){b.updatePosition(c.el.node.dataset.id)});f.fire("updateItem",{sender:b,id:l})}else if(b.linking){b.linkingLine.plot(0,0,0,0).stroke({width:0});b.linking=!1;c=f.div.elementsFromPoint(c.clientX,
c.clientY);for(e=0;e<c.length;e++)if(c[e].matches("foreignObject")&&c[e].parentElement.dataset.id!=b.linkingDiv.dataset.id){l=c[e].parentElement;break}l&&(b.toggleLine(b.linkingDiv.dataset.id,l.dataset.id),f.fire("updateItem",{sender:b,id:b.linkingDiv.dataset.id}),f.fire("updateItem",{sender:b,id:l.dataset.id}))}};this.itemSpace.addEventListener("mousedown",function(c){b.possibleResize=!1;b.mouseStoredX=c.offsetX;b.mouseStoredY=c.offsetY});this.itemSpace.addEventListener("dblclick",function(c){c.target.matches("svg *")&&
!c.target.matches("g[data-id] *")&&(c=b.mapPageToSvgCoords(c.pageX,c.pageY),b.createItem(c.x/polymorph_core.items[b.settings.currentViewName].itemcluster.XZoomFactor,c.y))});this.updatePosition=function(c){var e=b.itemPointerCache[c];polymorph_core.items[c].itemcluster.viewData[b.settings.currentViewName]||(polymorph_core.items[c].itemcluster.viewData[b.settings.currentViewName]={});b.alignGrid(e);polymorph_core.items[c].itemcluster.viewData[b.settings.currentViewName].x=e.x()/polymorph_core.items[b.settings.currentViewName].itemcluster.XZoomFactor;
polymorph_core.items[c].itemcluster.viewData[b.settings.currentViewName].y=e.y();f.fire("updateItem",{id:c});b.arrangeItem(c)};this.createItem=function(c,e){var l={},q=polymorph_core.insertItem(l);l[b.settings.textProp]="";l.itemcluster={viewData:{}};if(b.settings.createAcrossViews){var k=[];polymorph_core.items[b.settings.currentViewName].itemcluster.viewData&&(k=Object.keys(polymorph_core.items[b.settings.currentViewName].itemcluster.viewData));b.settings.filter&&(k=k.filter(function(c){return polymorph_core.items[c][b.settings.filter]}));
var m=[];m=k.length?b.views.filter(function(b){for(var c=0;c<k.length;c++)if(polymorph_core.items[b].itemcluster.viewData&&polymorph_core.items[b].itemcluster.viewData[k[c]])return!0;return!1}):b.views.filter(function(b){return!polymorph_core.items[b].itemcluster.viewData||!Object.keys(polymorph_core.items[b].itemcluster.viewData)});m.forEach(function(b){l.itemcluster.viewData[b]={x:0,y:0}})}l.itemcluster.viewData[b.settings.currentViewName]={x:c,y:e};b.settings.filter&&(l[b.settings.filter]=!0);
f.fire("createItem",{sender:b,id:q});b.arrangeItem(q);return q};f.on("createItem",function(c){if(c.sender!=b)for(i in c=polymorph_core.items[c.id],c.itemcluster||(c.itemcluster={}),c.itemcluster.viewData||(c.itemcluster.viewData={}),polymorph_core.items)polymorph_core.items[i].itemcluster&&polymorph_core.items[i].itemcluster.viewName&&(!b.settings.filter||polymorph_core.items[i][b.settings.filter])&&(c.itemcluster.viewData[i]||(c.itemcluster.viewData[i]={x:0,y:0}),b.settings.filter&&(c[b.settings.filter]=
!0))});this.removeItem=function(c){delete polymorph_core.items[c].itemcluster.viewData[b.settings.currentViewName];for(var e in b.activeLines)for(var l in b.activeLines[e])e!=c&&l!=c||b.toggleLine(e,l);b.arrangeItem(c);f.fire("deleteItem",{id:c})};f.on("deleteItem",function(c){if(c.sender!=b){c=c.id;delete polymorph_core.items[c].itemcluster.viewData[b.settings.currentViewName];for(var e in b.activeLines)for(var f in b.activeLines[e])e!=c&&f!=c||b.toggleLine(e,f);b.arrangeItem(c)}});this.tryFocus=
function(b,e){if(this.prevFocusID!=b){this.redrawLines(b,"red");e||f.fire("focusItem",{id:b,sender:this});this.redrawLines(this.prevFocusID);this.itemPointerCache[b]&&(e=this.itemPointerCache[b].node.querySelector("div"),e.parentElement.setAttribute("height",e.scrollHeight));if(this.itemPointerCache[this.prevFocusID]){e=this.itemPointerCache[this.prevFocusID].node.querySelector("div");var c=this.itemPointerCache[this.prevFocusID].node.querySelector("p.tta");e.parentElement.setAttribute("height",c.scrollHeight)}this.prevFocusID=
b}};this.rootdiv.addEventListener("focus",function(c){c.target.parentElement.parentElement.matches("[data-id]")&&b.tryFocus(c.target.parentElement.parentElement.dataset.id)});this.rootdiv.addEventListener("input",function(c){for(var e=0;e<c.path.length&&c.path[e].dataset;e++)if(c.path[e].dataset.id){e=c.path[e].dataset.id;c.target.classList.contains("tta")?polymorph_core.items[e][b.settings.textProp]=c.target.innerText:polymorph_core.items[e][b.settings.focusExtendProp]=c.target.innerText;f.fire("updateItem",
{id:e,sender:b});c=c.target.parentElement;c.style.width=23*(Math.sqrt(c.innerText.length)+1);c.parentElement.setAttribute("width",c.scrollWidth);c.parentElement.setAttribute("height",c.scrollHeight);break}});this.addToTray=function(c){var e=b.tray.querySelector("div[data-id='"+c+"']");e||(e=htmlwrap("\n                <div data-id="+c+">\n                <textarea></textarea>\n                </div>\n            "),b.tray.appendChild(e));e.querySelector("textarea").value=polymorph_core.items[c][b.settings.textProp]};
this.removeFromTray=function(c){(c=b.tray.querySelector("div[data-id='"+c+"']"))&&c.remove()};this.emptyTray=function(){for(;b.tray.children.length;)b.tray.children[0].remove()};this.updateSettings=function(){if(b.settings.tray){b.emptyTray();b.tray.style.display="flex";b.settings.filter&&polymorph_core.items[b.settings.currentViewName]&&!polymorph_core.items[b.settings.currentViewName][b.settings.filter]&&(polymorph_core.items[b.settings.currentViewName][b.settings.filter]=!0);for(var c in polymorph_core.items)polymorph_core.items[c].itemcluster&&
polymorph_core.items[c].itemcluster.viewData&&(polymorph_core.items[c].itemcluster.viewData[b.settings.currentViewName]||(!b.settings.filter||polymorph_core.items[c][b.settings.filter])&&b.addToTray(c))}else b.emptyTray(),b.tray.style.display="none";b.svg&&b.viewGrid&&b.viewGrid()};this.refresh=function(){b.svg&&b.svg.size(b.rootdiv.clientWidth,b.rootdiv.clientHeight);b.switchView(b.settings.currentViewName,!0)};this.toSaveData=function(){b.settings.viewpath=[];for(var c=b.viewName.parentElement.querySelectorAll("button"),
e=0;e<c.length;e++)b.settings.viewpath.push(c[e].dataset.ref);b.settings.viewpath.push(b.settings.currentViewName);return b.settings};setTimeout(function(){if(b.settings.viewpath){b.settings.currentViewName=void 0;for(var c=0;c<b.settings.viewpath.length;c++)b.switchView(b.settings.viewpath[c],!0,!0)}else b.switchView(b.settings.currentViewName,!0,!0)});this.updateSettings();this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML='<h1>Mode</h1>\n      <select data-role="operationMode">\n      <option value="standalone">Standalone</option>\n      <option value="focus">Display view from focused item</option>\n      </select>\n      ';
this.dialogOptions={tray:new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"tray",label:"Show item tray"}),filter:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"filter",label:"Filter items by string:"}),createAcrossViews:new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"createAcrossViews",label:"Create items across all views, always"}),showNewViewButton:new polymorph_core._option({div:this.dialogDiv,
type:"bool",object:this.settings,property:"showNewViewButton",label:"Show the 'Add new view button'."}),textProp:new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"textProp",label:"Text property to display..."})};this.showDialog=function(){for(i in b.settings){var c=b.dialogDiv.querySelector("[data-role='"+i+"']");c&&(c.value=b.settings[i])}for(i in b.dialogOptions)b.dialogOptions[i].load()};this.dialogUpdateSettings=function(){for(var c=b.dialogDiv.querySelectorAll("[data-role]"),
e=0;e<c.length;e++)b.settings[c[e].dataset.role]=c[e].value;b.updateSettings();f.fire("updateItem",{id:b.container.id})};this.callables={placeItem:function(c){var e=c.item,l=c.x;c=c.y;void 0==l&&(l=1E3*Math.random(),c=1E3*Math.random());e=polymorph_core.insertItem(e);polymorph_core.items[e].itemcluster={viewData:{}};polymorph_core.items[e].itemcluster.viewData[b.settings.currentViewName]={};polymorph_core.items[e].itemcluster.viewData[b.settings.currentViewName].x=l;polymorph_core.items[e].itemcluster.viewData[b.settings.currentViewName].y=
c;b.arrangeItem(e);f.fire("updateItem",{id:e,sender:b});return e}};_itemcluster_extend_contextmenu.apply(this);_itemcluster_extend_scalegrid(this);_itemcluster_rapid_entry.apply(this)});
polymorph_core.registerOperator("welcome",{displayName:"Welcome",description:"The Welcome Operator. If you're reading this, thanks for messing around with my code, adventurer.",hidden:!0},function(f){var b=this,e={brainstorming:'{"default_operator":{"_od":{"t":"itemcluster2","data":{"itemcluster":{"cx":0,"cy":0,"scale":1},"filter":"ltkar5","tray":false,"createAcrossViews":true,"showNewViewButton":false,"textProp":"title","focusExtendProp":"description","currentViewName":"1l3u"},"inputRemaps":{},"outputRemaps":{},"tabbarName":"Itemcluster 2","p":"default_container"}},"1l3u":{"itemcluster":{"viewName":"New View","cx":1030,"cy":961,"scale":1,"XZoomFactor":1,"grid":0},"ltkar5":true},"drbeqvh_N6l6l1x_0":{"title":"Double click to add new items!","itemcluster":{"viewData":{"1l3u":{"x":943,"y":556}}},"ltkar5":true,"to":{"drbeqvh_N6l6nBA_1":true,"drbeqvh_N6l6uOp_3":true}},"drbeqvh_N6l6nBA_1":{"title":"Shift-click on an item and drag to connect items.","itemcluster":{"viewData":{"1l3u":{"x":1416.6589578662847,"y":671.7387220367473}}},"ltkar5":true,"to":{"drbeqvh_N6l6xv3_4":true}},"drbeqvh_N6l6qP3_2":{"title":"Right-click on an item to remove it.\u00a0","itemcluster":{"viewData":{"1l3u":{"x":520.1611849165822,"y":981.2783833785711}}},"ltkar5":true,"to":{"drbeqvh_N6l79/f_5":true}},"drbeqvh_N6l6uOp_3":{"title":"Click and drag the background to pan around.","itemcluster":{"viewData":{"1l3u":{"x":516.7613141248236,"y":729.517884079592}}},"ltkar5":true,"to":{"drbeqvh_N6l6qP3_2":true}},"drbeqvh_N6l6xv3_4":{"title":"Click an item and drag to move it around.\u00a0","itemcluster":{"viewData":{"1l3u":{"x":1426.8761410281654,"y":981.278383432773}}},"ltkar5":true,"to":{"drbeqvh_N6l79/f_5":true}},"drbeqvh_N6l79/f_5":{"title":"To edit an item, click and type.","itemcluster":{"viewData":{"1l3u":{"x":953.0792405689535,"y":1153.2980189590594}}},"ltkar5":true,"to":{"drbeqvh_N6l7Gaq_6":true,"drbeqvh_N6l7UWI_7":true,"drbeqvh_N6l7b4h_8":true,"drbeqvh_N6l7eg+_9":true}},"drbeqvh_N6l7Gaq_6":{"title":"Right click on the background for auto-arrangement options.","itemcluster":{"viewData":{"1l3u":{"x":763.4382906893444,"y":871.9076775296288}}},"ltkar5":true},"drbeqvh_N6l7UWI_7":{"title":"Control click-and-drag to select multiple items.","itemcluster":{"viewData":{"1l3u":{"x":1060.8296831010819,"y":903.4111007452011}}},"ltkar5":true},"drbeqvh_N6l7b4h_8":{"title":"Scroll to zoom in and out.","itemcluster":{"viewData":{"1l3u":{"x":612.4554171500922,"y":1256.4920671495831}}},"ltkar5":true},"drbeqvh_N6l7eg+_9":{"title":"Press G and scroll to activate a grid to snap to.\u00a0","itemcluster":{"viewData":{"1l3u":{"x":1242.7876903306637,"y":1254.9513507410031}}},"ltkar5":true}}',tasklist:'{"_meta":{"displayName":"New Polymorph Document","id":"fmufz3","contextMenuItems":["Delete::polymorph_core.deleteItem","Background::item.edit(style.background)","Foreground::item.edit(style.color)"],"currentView":"default_container","globalContextMenuOptions":["Style::Item Background::item.edit(item.style.background)","Style::Text color::item.edit(item.style.color)"]},"default_operator":{"_od":{"t":"itemList","data":{"properties":{"title":"text","Importance":"text","date":"date"},"propertyWidths":{"title":263,"Importance":160},"filter":"ecacp4","enableEntry":true,"implicitOrder":false,"linkProperty":"to","currentID":"drbeqvh_N6lhZeN_5","sortby":"date"},"inputRemaps":{},"outputRemaps":{"focusItem":["listFocusItem"]},"tabbarName":"itemList","p":"drbeqvh_N6lhYyb_3"}},"drbeqvh_N6lhAQx_0":{"title":"Adding new items","ecacp4":1587790259898,"description":"Type the things you want to do in the first row to the left; then press Enter to add.","Importance":"Very","date":{"datestring":"+1d","date":[{"date":1587877251008,"part":"+1d","opart":"+1d","refdate":1587790851008,"endDate":1587880851008}],"prettyDateString":"26/04/2020"}},"drbeqvh_N6lhFfL_1":{"title":"Adding more columns","ecacp4":1587790281301,"description":"You can change the columns that are displayed using the cog next to \'Itemlist\'.","Importance":"Moderate","date":{"datestring":"now","date":[{"date":1587790892068,"part":"now","opart":"now","refdate":1587790892068,"endDate":1587794492068}],"prettyDateString":"15:01:32"}},"drbeqvh_N6lhX4+_2":{"title":"Searching","ecacp4":1587790352702,"description":"You can also search for items using the box with the little magnifying glass.","date":{"datestring":"+2h","date":[{"date":1587798097727,"part":"+2h","opart":"+2h","refdate":1587790897727,"endDate":1587801697727}],"prettyDateString":"17:01:37"}},"drbeqvh_N6lhYyb_3":{"_rd":{"p":"default_container","x":0,"f":0,"ps":0.4276351720371382,"s":"default_operator","containerOrder":["default_operator"]}},"drbeqvh_N6lhYyb_4":{"_rd":{"p":"default_container","x":0,"f":1,"ps":0.4276351720371382,"s":"drbeqvh_N6lhZeN_5","containerOrder":["drbeqvh_N6lhZeN_5"]}},"drbeqvh_N6lhZeN_5":{"_od":{"t":"descbox","data":{"property":"description","operationMode":"focus","staticItem":"","auxProperty":"title","showTags":false,"currentID":"drbeqvh_N6li9SN_7"},"inputRemaps":{"listFocusItem":"focusItem"},"outputRemaps":{"createItem":["createItem_drbeqvh_N6lhZeN_5"],"deleteItem":["deleteItem_drbeqvh_N6lhZeN_5"],"focusItem":["focusItem_drbeqvh_N6lhZeN_5"]},"tabbarName":"descbox","p":"drbeqvh_N6ljJEG_0"}},"drbeqvh_N6lhsLS_6":{"title":"Resizing the UI","ecacp4":1587790439772,"description":"You can resize the UI by dragging on the borders of the UI.\\n\\nIf you want more lists, descriptions or otherwise, hold Shift and drag the borders "},"drbeqvh_N6li9SN_7":{"title":"Saving","Importance":"","ecacp4":1587790518039,"description":"Press CTRL-S to save."},"drbeqvh_N6ljJEG_0":{"_rd":{"p":"drbeqvh_N6lhYyb_4","x":1,"f":0,"ps":0.3828207847295864,"s":"drbeqvh_N6lhZeN_5"}},"drbeqvh_N6ljJEG_1":{"_rd":{"p":"drbeqvh_N6lhYyb_4","x":1,"f":1,"ps":0.3828207847295864,"s":"drbeqvh_N6ljK08_2","containerOrder":["drbeqvh_N6ljK08_2"]}},"drbeqvh_N6ljK08_2":{"_od":{"t":"calendar","data":{"dateproperties":["date"],"titleproperty":"title","defaultView":"agendaWeek"},"inputRemaps":{},"outputRemaps":{"createItem":["createItem_drbeqvh_N6ljK08_2"],"deleteItem":["deleteItem_drbeqvh_N6ljK08_2"],"focusItem":["focusItem_drbeqvh_N6ljK08_2"]},"tabbarName":"Calendar","p":"drbeqvh_N6ljJEG_1"}}}'};
polymorph_core.operatorTemplate.call(this,f,{});this.rootdiv.innerHTML='\n    <style>\n        a{\n            color:lightblue;\n        }\n    </style>\n    <div style="display: flex; flex-direction: row; padding: 30px;">\n        <div style="display: flex; flex-direction:column; flex: 1 1 50%">\n            <div>\n                <h2>Start</h2>\n                <a class="newDocButton" href="#">New document</a>\n                <br>\n                <h3>Recent documents:</h3>\n                <div class="recentDocuments">\n                </div>\n            </div>\n            <div>\n                <h2>Help</h2>\n                <p>Tutorial [TODO]</p>\n                <p>User Docs [TODO]</p>\n                <p><a href="mailto:steeven.liu2@gmail.com">Contact the developer</a></p>\n            </div>\n        </div>\n        <div style="flex: 1 1 50%">\n            <div>\n                <h2>About</h2>\n                <span>Polymorph is Steven\'s personal Web-based OS/document processing tool/brainstorming tool/UI testbed. To date, it has a number of use cases:</span>\n                <ul class="templateList">\n                    <li><a href="#" data-template="brainstorming">A brainstorming tool</a></li>\n                    <li><a href="#" data-template="tasklist">A todo-list with calendar</a></li>\n                    \x3c!--<li><a>A quick websocket front-end</a></li>\n                    <li><a>A personal knowledge base</a></li>\n                    <li><a>A reconfigurable UI</a></li>\n                    <li><a>A collaboration tool</a></li>--\x3e\n                </ul>\n                <h2>Examples</h2>\n                <span>Want to see what polymorph is capable of? Check out some examples:</span>\n                <ul class="templateList">\n                    <li><a href="permalink/techtree">A technology tree of the human race</a></li>\n                    <li><a href="permalink/thesell">A comparison of polymorph against a bunch of other productivity and note taking tools</a></li>\n                </ul>\n            </div>\n            <div>\n                <h2>Customise</h2>\n                <a>Nothing to see here, yet!</a>\n            </div>\n        </div>\n    </div>\n    ';
this.rootdiv.style.color="white";this.rootdiv.querySelector(".templateList").addEventListener("click",function(b){if(b.target.matches("[data-template]")){b=JSON.parse(e[b.target.dataset.template]);b._meta=polymorph_core.items._meta;b.default_container=polymorph_core.items.default_container;for(var c in b)b[c]._lu_=Date.now();delete polymorph_core.items.default_operator;delete polymorph_core.containers.default_operator;polymorph_core.integrateData(b,"TEMPLATER");polymorph_core.switchView("default_container")}});
this.rootdiv.querySelector(".newDocButton").addEventListener("click",function(){for(;f.div.children.length;)f.div.children[0].remove();f.settings.t="opSelect";f.operator=new polymorph_core.operators.opSelect.constructor(f);f.settings.tabbarName="New Operator";polymorph_core.rects[f.settings.p].tieContainer(f.id);f.fire("updateItem",{id:b.container.id,sender:b})});var l=this.rootdiv.querySelector(".recentDocuments"),c=JSON.parse(localStorage.getItem("__polymorph_recent_docs")),t="";if(c){for(var v in c)t+=
"<p><a href="+c[v].url+(' data-id="'+v+'">')+c[v].displayName+"</a><em>x</em></p>";l.innerHTML=t}l.addEventListener("click",function(b){"em"==b.target.tagName.toLowerCase()&&(delete c[b.target.parentElement.children[0].dataset.id],localStorage.setItem("__polymorph_recent_docs",JSON.stringify(c)),b.target.parentElement.remove())});this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML="Nothing to see here!";this.showDialog=function(){};this.dialogUpdateSettings=function(){}});
polymorph_core.registerOperator("lynerlist",{displayName:"Lynerlist",description:"An advanced item listing tool."},function(f){var b=this,e={filter:polymorph_core.guid(),rowsOrder:["----"]};polymorph_core.operatorTemplate.call(this,f,e);this.itemRelevant=function(c){return-1!=b.settings.rowsOrder.indexOf(c)};this.rootdiv.innerHTML='<style>\n    span{\n        font-family:monospace;\n        color:white;\n    }\n    [data-id]{\n        width:100%;\n        display:inline-flex;\n    }\n    [contenteditable]{\n        flex: 1 0 10%;\n    }\n    </style>\n    <span data-id="----"><span>----</span>&nbsp;&nbsp;<span contenteditable></span></span> \x3c!--this is always final line--\x3e\n    ';
Object.defineProperty(this,"currentFocusedLine",{get:function(){var c=b.rootdiv.getRootNode();if(c.activeElement){var e={};e.id=c.activeElement.parentElement.dataset.id;e.contents=c.activeElement.innerText;e.editableSpan=c.activeElement;e.backTag=c.activeElement.parentElement.children[0];e.root=c.activeElement.parentElement;return e}}});this.updateRowsOrder=function(){b.settings.rowsOrder=[];Array.from(b.rootdiv.children).forEach(function(c){c.dataset.id&&b.settings.rowsOrder.push(c.dataset.id)});
0==b.settings.rowsOrder.length&&(b.settings.rowsOrder=["----"])};var l=function(c,e){var f=b.rootdiv.querySelector('[data-id="----"]').cloneNode(!0);"string"!=typeof c?(f=c,c=c.dataset.id):"----"!=c&&(b.rootdiv.querySelector('[data-id="'+c+'"]')&&(f=b.rootdiv.querySelector('[data-id="'+c+'"]')),f.children[0].innerText=" "+c.slice(c.length-4),f.dataset.id=c,f.children[1].innerText=polymorph_core.items[c].contents);b.rootdiv.insertBefore(f,e);if("----"!=c&&polymorph_core.items[c].to)for(var k in polymorph_core.items[c].to)-1!=
b.settings.rowsOrder.indexOf(k)&&(f=l(k,f.nextElementSibling));return f},c=this.rootdiv.querySelector('[data-id="----"]');this.settings.rowsOrder.forEach(function(e){c=l(e,c.nextElementSibling);b.rootdiv.appendChild(c)});this.rootdiv.querySelector('[data-id="----"]:last-child')?this.rootdiv.children[1].remove():this.rootdiv.appendChild(this.rootdiv.children[1]);var t=function(c){c=c.split("\\")[1];c=c.split(" ");switch(c[0]){case "sort":var e=[];c[1]||(c[1]="contents");b.updateRowsOrder();for(var f=
$jscomp.makeIterator(b.settings.rowsOrder),k=f.next();!k.done;k=f.next())k=k.value,"----"!=k&&" "!=polymorph_core.items[k].contents[0]&&polymorph_core.items[k][c[1]]&&e.push({id:k,d:polymorph_core.items[k][c[1]]});"date"==c[2]&&e.forEach(function(b){var c=dateParser.extractTime(b.d,new Date);b.d=c?c.getTime():0});c.includes("reverse")?e.sort(function(b,c){return b.d>c.d?1:-1}):e.sort(function(b,c){return b.d>c.d?-1:1});f=b.rootdiv.children[2];e=$jscomp.makeIterator(e);for(k=e.next();!k.done;k=e.next())l(k.value.id,
f);break;case "depsort":var q={},t=void 0;b.settings.rowsOrder.map(function(b){return b}).forEach(function(b){"----"!=b&&(polymorph_core.items[b][c[2]]?(q[polymorph_core.items[b][c[2]]]={id:b},q[polymorph_core.items[b][c[2]]].deps=polymorph_core.items[b][c[1]]?polymorph_core.items[b][c[1]].split(","):[]):t=l(b,t).nextElementSibling)});for(var v=Object.keys(q),h={};v.length;)console.log(v),e=v.shift(),q[e]&&(h[e]?(t=l(q[e].id,t).nextElementSibling,console.log("got "+e),delete q[e]):(h[e]=!0,q[e].deps=
q[e].deps.filter(function(b){return!h[b]}),q[e].deps.forEach(function(b){return v.push(b)}),v.push(e)));Array.from(b.rootdiv.querySelectorAll("[data-id='----']")).forEach(function(c){return b.rootdiv.appendChild(c)});break;case "nowtd":return(new Date).toLocaleTimeString()+" "+(new Date).toLocaleDateString();case "nowdt":return(new Date).toLocaleDateString()+" "+(new Date).toLocaleTimeString()}};this.parseLine=function(c){if("----"!=c){for(var e=b.rootdiv.querySelector('[data-id="'+c+'"]'),k=e.children[1].innerText,
l=0;/\s/.exec(k[l]);)l++;if(0<l)for(e=e.previousElementSibling;"SPAN"==e.tagName&&"----"!=e.dataset.id;){for(var q=0,t=e.children[1].innerText;/\s/.exec(t[q]);)q++;if(q<l){polymorph_core.items[e.dataset.id].to||(polymorph_core.items[e.dataset.id].to={});polymorph_core.items[e.dataset.id].to[c]=!0;break}else e=e.previousElementSibling}polymorph_core.items[c].contents=k;for(l=/\[(.+?):(.+?)\]/g;e=l.exec(k);)polymorph_core.items[c][e[1]]=e[2];f.fire("updateItem",{id:c,sender:b})}};this.hardReparseAll=
function(){for(var c=$jscomp.makeIterator(b.settings.rowsOrder),e=c.next();!e.done;e=c.next())b.parseLine(e.value)};var v=!1,q=function(b,c,e){b.children[1].firstChild?(e>b.children[1].firstChild.length&&(e=b.children[1].firstChild.length),c.setStart(b.children[1].firstChild,e)):c.setStart(b.children[1],0)};this.rootdiv.addEventListener("keydown",function(c){"Alt"==c.key&&c.preventDefault();if("Enter"==c.key){c.preventDefault();var e=/^(\s+)/.exec(b.currentFocusedLine.contents);e=e?e[0]:"";e=Array.from(e).map(function(b){return"&nbsp;"}).join("");
var f=b.rootdiv.querySelector('[data-id="----"]').cloneNode(!0);f.children[1].innerHTML=e;b.rootdiv.insertBefore(f,b.currentFocusedLine.root.nextElementSibling);e=b.rootdiv.getRootNode().getSelection();f=document.createRange();b.currentFocusedLine.root.nextElementSibling.children[1].firstChild?f.setStart(b.currentFocusedLine.root.nextElementSibling.children[1].firstChild,b.currentFocusedLine.root.nextElementSibling.children[1].firstChild.length):f.setStart(b.currentFocusedLine.root.nextElementSibling.children[1],
0);e.removeAllRanges();e.addRange(f);c.preventDefault();b.updateRowsOrder()}else if("ArrowUp"==c.key){if(b.currentFocusedLine&&b.currentFocusedLine.root.previousElementSibling&&"SPAN"==b.currentFocusedLine.root.previousElementSibling.tagName){if(c.getModifierState("Alt")){e=b.rootdiv.getRootNode().getSelection();var k=e.getRangeAt(0);f=document.createRange();k=k.startOffset;var t=l(b.currentFocusedLine.root,b.currentFocusedLine.root.previousElementSibling);b.updateRowsOrder();q(t,f,k)}else e=b.rootdiv.getRootNode().getSelection(),
k=e.getRangeAt(0),f=document.createRange(),k=k.startOffset,b.currentFocusedLine.root.previousElementSibling.children[1].firstChild?(k>b.currentFocusedLine.root.previousElementSibling.children[1].firstChild.length&&(k=b.currentFocusedLine.root.previousElementSibling.children[1].firstChild.length),f.setStart(b.currentFocusedLine.root.previousElementSibling.children[1].firstChild,k)):f.setStart(b.currentFocusedLine.root.previousElementSibling.children[1],0);e.removeAllRanges();e.addRange(f);c.preventDefault()}}else"ArrowDown"==
c.key?b.currentFocusedLine&&b.currentFocusedLine.root.nextElementSibling&&(c.getModifierState("Alt")?(e=b.rootdiv.getRootNode().getSelection(),k=e.getRangeAt(0),f=document.createRange(),k=k.startOffset,t=l(b.currentFocusedLine.root,b.currentFocusedLine.root.nextElementSibling.nextElementSibling),b.updateRowsOrder(),q(t,f,k)):(e=b.rootdiv.getRootNode().getSelection(),k=e.getRangeAt(0),f=document.createRange(),k=k.startOffset,b.currentFocusedLine.root.nextElementSibling.children[1].firstChild?(k>b.currentFocusedLine.root.nextElementSibling.children[1].firstChild.length&&
(k=b.currentFocusedLine.root.nextElementSibling.children[1].firstChild.length),f.setStart(b.currentFocusedLine.root.nextElementSibling.children[1].firstChild,k)):f.setStart(b.currentFocusedLine.root.nextElementSibling.children[1],0)),e.removeAllRanges(),e.addRange(f),c.preventDefault()):"ArrowLeft"==c.key?(e=b.rootdiv.getRootNode().getSelection(),0==e.getRangeAt(0).startOffset&&b.currentFocusedLine.root.previousElementSibling&&"SPAN"==b.currentFocusedLine.root.previousElementSibling.tagName&&(e=b.rootdiv.getRootNode().getSelection(),
f=document.createRange(),b.currentFocusedLine.root.previousElementSibling.children[1].firstChild?f.setStart(b.currentFocusedLine.root.previousElementSibling.children[1].firstChild,b.currentFocusedLine.root.previousElementSibling.children[1].firstChild.length):f.setStart(b.currentFocusedLine.root.previousElementSibling.children[1],0),e.removeAllRanges(),e.addRange(f),c.preventDefault())):"ArrowRight"==c.key?(e=b.rootdiv.getRootNode().getSelection(),e=e.getRangeAt(0),e.startContainer.length&&e.startOffset!=
e.startContainer.length||!b.currentFocusedLine.root.nextElementSibling||(e=b.rootdiv.getRootNode().getSelection(),f=document.createRange(),b.currentFocusedLine.root.nextElementSibling.children[1].firstChild?f.setStart(b.currentFocusedLine.root.nextElementSibling.children[1].firstChild,0):f.setStart(b.currentFocusedLine.root.nextElementSibling.children[1],0),e.removeAllRanges(),e.addRange(f),c.preventDefault())):"Backspace"==c.key?b.currentFocusedLine&&0==b.currentFocusedLine.contents.length&&(v=!0):
"Tab"==c.key&&(c.preventDefault(),c.stopPropagation(),document.execCommand("insertText",!1,"    "))});this.rootdiv.addEventListener("keyup",function(c){if(!c.ctrlKey&&!c.metaKey||"s"!=c.key){if(b.currentFocusedLine)if("----"==b.currentFocusedLine.id){if(/\S/.exec(b.currentFocusedLine.contents)){var e=polymorph_core.insertItem({contents:b.currentFocusedLine.contents}),k=l(e,b.currentFocusedLine.root);b.currentFocusedLine.editableSpan.innerText="";b.currentFocusedLine.root.nextElementSibling&&b.currentFocusedLine.root.remove();
b.updateRowsOrder();k.children[1].focus();e=window.getSelection();var n=document.createRange();n.setStart(k.children[1].firstChild,k.children[1].firstChild.length);e.removeAllRanges();e.addRange(n);f.fire("updateItem",{id:b.currentFocusedLine.id,sender:b})}}else if(k=b.currentFocusedLine.id,b.parseLine(k),e=b.currentFocusedLine.contents,parser=/\\.+\\/g,res=parser.exec(e)){var q=e.split(res[0]),w=t(res[0]);w?q.splice(1,0,w):w="";q=q.join("");e=b.rootdiv.getRootNode().getSelection();var x=e.getRangeAt(0).startOffset;
b.currentFocusedLine.root.children[1].innerText=q||" ";n=document.createRange();n.setStart(b.currentFocusedLine.root.children[1].firstChild,x-res[0].length+w.length);e.removeAllRanges();e.addRange(n);polymorph_core.items[k].contents=q;f.fire("updateItem",{id:k,sender:b})}if("Backspace"==c.key&&v){k=b.currentFocusedLine.id;q=b.currentFocusedLine.root;if(b.currentFocusedLine.root.previousElementSibling&&"STYLE"!=b.currentFocusedLine.root.previousElementSibling.tagName)e=b.rootdiv.getRootNode().getSelection(),
n=document.createRange(),b.currentFocusedLine.root.previousElementSibling.children[1].firstChild?n.setStart(b.currentFocusedLine.root.previousElementSibling.children[1].firstChild,b.currentFocusedLine.root.previousElementSibling.children[1].firstChild.length):n.setStart(b.currentFocusedLine.root.previousElementSibling.children[1],0),e.removeAllRanges(),e.addRange(n);else if(b.currentFocusedLine.root.nextElementSibling)e=b.rootdiv.getRootNode().getSelection(),n=document.createRange(),b.currentFocusedLine.root.nextElementSibling.children[1].firstChild?
n.setStart(b.currentFocusedLine.root.nextElementSibling.children[1].firstChild,0):n.setStart(b.currentFocusedLine.root.nextElementSibling.children[1],0),e.removeAllRanges(),e.addRange(n),c.preventDefault();else return;"----"!=k&&(polymorph_core.items[k]={},f.fire("updateItem",{id:k,sender:b}));q.remove();b.updateRowsOrder();v=!1}}});f.on("createItem",function(c){b.settings.rowsOrder.push(c.id);l(c.id,b.rootdiv.querySelector('[data-id="----"]'))});f.on("deleteItem",function(b){});f.on("updateItem",
function(c){b.itemRelevant(c.id)});this.refresh=function(){};this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML="";this.showDialog=function(){};this.dialogUpdateSettings=function(){}});
polymorph_core.registerOperator("scriptrunner",{displayName:"Scriptrunner",description:"Runs scripts."},function(f){function b(){var b=this;this.log=function(b){var e=document.createElement("p");e.style.whiteSpace="pre-wrap";e.innerHTML=JSON.stringify(b,null,4);c.rootdiv.querySelector("#output").appendChild(e)};this.logEx=function(c){b.log(String(c))};this.intervals=[];this.setInterval=function(c,e){b.intervals.push({f:c,t:e,t0:e});return b.intervals.length};this.clearInterval=function(c){b.intervals[c]&&
(b.intervals[c].f=void 0)};polymorph_core.addEventAPI(this,this.logEx);this._fire=this.fire;this.fire=function(b,c){f.fire(b,c)}}var e=this;polymorph_core.operatorTemplate.call(this,f,{autorun:!1,reallyAutorun:!1,forceCareAbout:""});this.rootdiv.style.color="white";this.rootdiv.innerHTML='\n        <h1>WARNING: THIS SCRIPT IS POTENTIALLY INSECURE. ONLY RUN TRUSTED SCRIPTS.</h1>\n        <p>Press \'Update\' to execute this script.</p>\n        <textarea style="width: 100%; height: 50%; tab-size:4" placeholder="Enter script here:"></textarea>\n        <br>\n        <button class="updatebtn">Update</button>\n        <button class="stopbtn">Stop script</button>\n        <button class="clogs">Clear logs</button>\n        <div id="output" style="overflow-y: auto; height: 30%;"></div>\n    ';
var l=this.rootdiv.querySelector("textarea");l.addEventListener("keydown",function(b){l.style.background="lightgreen";if(9==b.keyCode||9==b.which){b.preventDefault();var c=b.target.selectionStart;b.target.value=b.target.value.substring(0,b.target.selectionStart)+"\t"+b.target.value.substring(b.target.selectionEnd);b.target.selectionEnd=c+1}e.settings.script=e.rootdiv.querySelector("textarea").value});f.div.appendChild(this.rootdiv);f.on("*",function(b,c){b.sender&&"GARBAGE_COLLECTOR"==b.sender||c.forEach(function(c){e.currentInstance&&
e.currentInstance._fire(c,b)});return!1});var c=this;setInterval(function(){e.currentInstance&&e.currentInstance.intervals.forEach(function(b){if(b.f&&0>b.t){try{b.f()}catch(q){e.currentInstance.logEx(q)}b.t=b.t0}b.t-=100})},100);this.stop=function(){delete e.currentInstance};this.execute=function(){e.currentInstance=new b;var c="(function factory(instance, setInterval, clearInterval){\n            "+e.settings.script+"\n        })";try{eval(c)(e.currentInstance,e.currentInstance.setInterval,e.currentInstance.clearInterval)}catch(q){e.currentInstance.log(q.toString())}};
this.rootdiv.querySelector("textarea").value=this.settings.script||"";this.settings.autorun&&this.settings.reallyAutorun?this.execute():l.style.background="green";this.rootdiv.querySelector(".clogs").addEventListener("click",function(){for(var b=e.rootdiv.querySelector("#output");b.children.length;)b.children[0].remove()});this.rootdiv.querySelector(".updatebtn").addEventListener("click",function(){l.style.background="white";e.settings.script=e.rootdiv.querySelector("textarea").value;e.execute()});
this.rootdiv.querySelector(".stopbtn").addEventListener("click",function(){e.stop();l.style.background="green"});this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML="WARNING: DO NOT ACCEPT OTHERS' SCRIPTS IN GENERAL!";var t=[new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"autorun",label:"Autorun on start"}),new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"reallyAutorun",label:"Confirm autorun on start"}),
new polymorph_core._option({div:this.dialogDiv,type:"text",object:this.settings,property:"forceCareAbout",label:"Items to keep safe from garbage collector (csv)"})];this.itemRelevant=function(b){return e.settings.forceCareAbout.split(",").includes(b)};this.showDialog=function(){t.forEach(function(b){b.load()})};this.dialogUpdateSettings=function(){}});
polymorph_core.registerOperator("timer",{displayName:"Timer",description:"A timer."},function(f){var b=this;polymorph_core.operatorTemplate.call(this,f,{mode:"standalone",focusedItem:void 0,started:!1,startLock:!0,timerTotalProp:"timer",timeString:"10:00"});this.rootdiv.innerHTML='\n        <p><input></p>\n        <p id="remaining_time">00:00</p>\n        <button>Start</button>\n    ';this.rootdiv.children[2].addEventListener("click",function(){b.settings.started=!b.settings.started;b.rootdiv.children[2].innerHTML=
b.settings.started?"Stop":"Start";var c=b.rootdiv.querySelector("input").value;b.startTimer(c)});this.rootdiv.querySelector("input").addEventListener("input",function(){b.settings.timeString=b.rootdiv.querySelector("input").value});this.rootdiv.querySelector("input").value=this.settings.timeString;f.on("focusItem,updateItem",function(c){"focus"!=b.settings.mode||b.settings.startLock&&b.settings.started||(b.settings.focusedItem=c.id,c=polymorph_core.items[b.settings.focusedItem][b.settings.timerTotalProp],
b.rootdiv.querySelector("input").value=c)});this.startTimer=function(c){if(c=intervalParser.extractTime(c))b.settings.remainingTime=c.t};this.notify=function(c,e){quickNotify(c,e,function(){b.settings.pushnotifs=!1})};var e=function(){if(b.settings.started)if(100<b.settings.remainingTime)b.settings.remainingTime-=100;else if(1<b.settings.remainingTime)b.settings.remainingTime=1;else if(1==b.settings.remainingTime&&(b.settings.remainingTime=0,b.notify("Time's up!"),b.settings.started=!1,b.settings.loop)){var c=
b.rootdiv.querySelector("input").value;b.startTimer(c)}c=new Date(Number(b.settings.remainingTime)+6E4*(new Date(Number(b.settings.remainingTime))).getTimezoneOffset());b.rootdiv.children[1].innerText=c.toTimeString().split(" ")[0];setTimeout(e,100)};e();this.dialogDiv=document.createElement("div");this.dialogDiv.innerHTML="";var l=[new polymorph_core._option({div:this.dialogDiv,type:"select",object:this.settings,property:"mode",source:["focus","standalone"],label:"Operation mode"}),new polymorph_core._option({div:this.dialogDiv,
type:"text",object:this.settings,property:"timerTotalProp",label:"Focus property"}),new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"startLock",label:"Lock focus on start"}),new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"pushnotifs",label:"Show notifications?"}),new polymorph_core._option({div:this.dialogDiv,type:"bool",object:this.settings,property:"loop",label:"Loop timer indefinitely?"})];this.showDialog=function(){l.forEach(function(b){return b.load()})};
this.dialogUpdateSettings=function(){this.settings.pushnotifs&&this.notify("Notifications enabled!",!0);this.rootdiv.children[2].innerHTML=this.settings.started?"Stop":"Start"};this.dialogUpdateSettings()});function saveJSON(f,b){"string"!=(typeof f).toLowerCase()&&(f=JSON.stringify(f));f=new Blob([f],{type:"text/html"});var e=document.createElement("a");e.href=URL.createObjectURL(f);e.download=b;e.style.display="none";document.body.appendChild(e);e.click()}
polymorph_core.registerSaveSource("toText",function(f){function b(){saveJSON(polymorph_core.items,polymorph_core.currentDoc.displayName+"_"+Date.now()+".json")}var e=this;polymorph_core.saveSourceTemplate.call(this,f);this.dialog=document.createElement("div");this.dialog.innerHTML='\n    <span>\n    <textarea placeholder="Output"></textarea>\n    <br>\n    <button class="sfile">Save text to file</button>\n    <button class="loitem">Load as item array</button>\n    </span>\n    ';this.dialog.querySelector(".sfile").addEventListener("click",
function(){b()});this.dialog.querySelector(".loitem").addEventListener("click",function(){var b=JSON.parse(e.dialog.querySelector("textarea").value);b=b.map(function(b){return polymorph_core.insertItem(b)});b.forEach(function(b){polymorph_core.fire("updateItem",{id:b})})});this.pushAll=function(b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){c.dialog.querySelector("textarea").value=JSON.stringify(b);e.jumpToEnd()})};this.pullAll=function(){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){c=
JSON.parse(b.dialog.querySelector("textarea").value);c=polymorph_core.datautils.decompress(c);return e.return(c)})};this.hook=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){e.toSave=!0;b.jumpToEnd()})};this.unhook=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){e.toSave=!1;b.jumpToEnd()})};polymorph_core.on("userSave",function(f){return e.toSave?(b(),!0):!1});polymorph_core.addToSaveDialog(this)},{createable:!0,prettyName:"Output to text"});
polymorph_core.registerSaveSource("lf",function(f){var b=this;polymorph_core.saveSourceTemplate.call(this,f);this.pushAll=function(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){b.jumpToEnd()})};this.pullAll=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return e.yield(localforage.getItem("__polymorph_"+f.data.id),2);b=e.yieldResult;return e.return(b)})};this.dialog=document.createElement("div");this.dialog.innerHTML='\n    <span>\n    <input class="svid" placeholder="Save ID">\n    </span>\n    ';
this.showDialog=function(){f.data.id||(f.data.id=polymorph_core.currentDocID);b.dialog.querySelector(".svid").value=f.data.id};polymorph_core.addToSaveDialog(this);this.hook=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b.toSave=!0;e.jumpToEnd()})};polymorph_core.on("userSave",function(e){return f.save?(b.pushAll(e),polymorph_core.savedOK=!1,localforage.setItem("__polymorph_"+polymorph_core.currentDocID,e).then(function(){polymorph_core.savedOK=!0}),!0):!1});this.unhook=
function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b.toSave=!1;e.jumpToEnd()})}},{createable:!0,prettyName:"Localforage (offline storage)"});
polymorph_core.registerSaveSource("permalink",function(f){polymorph_core.saveSourceTemplate.call(this,f);this.pullAll=function(){var b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){b=f.data;return e.return(b)})}},{prettyName:"Permalink",createable:!1,canHandle:function(f){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return b.return(new Promise(function(b,l){if(f.has("pml")){var c=new XMLHttpRequest;l=atob(f.get("pml"));c.open("GET",l,!0);c.onreadystatechange=function(){if(4==
c.readyState)if(200==c.status)try{var e=JSON.parse(c.responseText),f=polymorph_core.guid(6,polymorph_core.userData.documents);e._meta.id=f;b({id:f,source:e})}catch(q){b(!1)}else b(!1)};c.send(null)}else b(!1)}))})}});
polymorph_core.registerSaveSource("srv",function(f){var b=this;polymorph_core.saveSourceTemplate.call(this,f);this.pushAll=function(b){var c=this,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e=polymorph_core.datautils.IDCompress.compress(b);f=new XMLHttpRequest;f.onreadystatechange=function(){};f.open("POST",c.settings.data.saveTo,!0);f.setRequestHeader("Content-Type","application/json;charset=UTF-8");f.send(JSON.stringify(e));l.jumpToEnd()})};this.pullAll=function(){var b=this,
c,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){c=new XMLHttpRequest;e=new Promise(function(b,e){c.onreadystatechange=function(){if(4==this.readyState&&200==this.status)try{var c=JSON.parse(this.responseText);c=polymorph_core.datautils.decompress(c);console.log(c);b(c)}catch(r){e("data invalid :(")}else 4==this.readyState&&e("server was unavailable :/")};c.onerror=function(){e("An error occured...")}});c.open("GET",b.settings.data.loadFrom,!0);c.send();return f.return(e)})};polymorph_core.on("userSave",
function(e){return b.settings.save?(b.settings.data.throttle&&""!=b.settings.data.throttle?(b.settings.tmpthrottle||(b.settings.tmpthrottle=0),b.settings.tmpthrottle>Number(b.settings.data.throttle)?(b.settings.tmpthrottle=0,b.pushAll(e)):b.settings.tmpthrottle++):b.pushAll(e),!0):!1});this.dialog=document.createElement("div");polymorph_core.addToSaveDialog(this);var e=[new polymorph_core._option({div:this.dialog,type:"text",object:this.settings.data,property:"saveTo",label:"Full server save address (include document name)"}),
new polymorph_core._option({div:this.dialog,type:"text",object:this.settings.data,property:"loadFrom",label:"Full server load address (include document name)"}),new polymorph_core._option({div:this.dialog,type:"text",object:this.settings.data,property:"throttle",label:"Throttle (leave blank for no throttling)"})];this.showDialog=function(){e.forEach(function(b){return b.load()})}},{prettyName:"Save to server",createable:!0});